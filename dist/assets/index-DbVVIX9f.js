(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const De of document.querySelectorAll('link[rel="modulepreload"]'))ze(De);new MutationObserver(De=>{for(const Me of De)if(Me.type==="childList")for(const Ie of Me.addedNodes)Ie.tagName==="LINK"&&Ie.rel==="modulepreload"&&ze(Ie)}).observe(document,{childList:!0,subtree:!0});function Z(De){const Me={};return De.integrity&&(Me.integrity=De.integrity),De.referrerPolicy&&(Me.referrerPolicy=De.referrerPolicy),De.crossOrigin==="use-credentials"?Me.credentials="include":De.crossOrigin==="anonymous"?Me.credentials="omit":Me.credentials="same-origin",Me}function ze(De){if(De.ep)return;De.ep=!0;const Me=Z(De);fetch(De.href,Me)}})();function Nu(U){return U&&U.__esModule&&Object.prototype.hasOwnProperty.call(U,"default")?U.default:U}function Lh(U){if(U.__esModule)return U;var v=U.default;if(typeof v=="function"){var Z=function ze(){return this instanceof ze?Reflect.construct(v,arguments,this.constructor):v.apply(this,arguments)};Z.prototype=v.prototype}else Z={};return Object.defineProperty(Z,"__esModule",{value:!0}),Object.keys(U).forEach(function(ze){var De=Object.getOwnPropertyDescriptor(U,ze);Object.defineProperty(Z,ze,De.get?De:{enumerable:!0,get:function(){return U[ze]}})}),Z}var Bo={exports:{}},zn={},No={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu;function jh(){if(Pu)return Pe;Pu=1;var U=Symbol.for("react.element"),v=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),ze=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),n=Symbol.iterator;function r(x){return x===null||typeof x!="object"?null:(x=n&&x[n]||x["@@iterator"],typeof x=="function"?x:null)}var i={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a=Object.assign,h={};function s(x,O,j){this.props=x,this.context=O,this.refs=h,this.updater=j||i}s.prototype.isReactComponent={},s.prototype.setState=function(x,O){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,O,"setState")},s.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function d(){}d.prototype=s.prototype;function p(x,O,j){this.props=x,this.context=O,this.refs=h,this.updater=j||i}var y=p.prototype=new d;y.constructor=p,a(y,s.prototype),y.isPureReactComponent=!0;var C=Array.isArray,S=Object.prototype.hasOwnProperty,T={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function L(x,O,j){var k,E={},F=null,b=null;if(O!=null)for(k in O.ref!==void 0&&(b=O.ref),O.key!==void 0&&(F=""+O.key),O)S.call(O,k)&&!P.hasOwnProperty(k)&&(E[k]=O[k]);var X=arguments.length-2;if(X===1)E.children=j;else if(1<X){for(var N=Array(X),Q=0;Q<X;Q++)N[Q]=arguments[Q+2];E.children=N}if(x&&x.defaultProps)for(k in X=x.defaultProps,X)E[k]===void 0&&(E[k]=X[k]);return{$$typeof:U,type:x,key:F,ref:b,props:E,_owner:T.current}}function G(x,O){return{$$typeof:U,type:x.type,key:O,ref:x.ref,props:x.props,_owner:x._owner}}function re(x){return typeof x=="object"&&x!==null&&x.$$typeof===U}function le(x){var O={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(j){return O[j]})}var V=/\/+/g;function q(x,O){return typeof x=="object"&&x!==null&&x.key!=null?le(""+x.key):O.toString(36)}function ne(x,O,j,k,E){var F=typeof x;(F==="undefined"||F==="boolean")&&(x=null);var b=!1;if(x===null)b=!0;else switch(F){case"string":case"number":b=!0;break;case"object":switch(x.$$typeof){case U:case v:b=!0}}if(b)return b=x,E=E(b),x=k===""?"."+q(b,0):k,C(E)?(j="",x!=null&&(j=x.replace(V,"$&/")+"/"),ne(E,O,j,"",function(Q){return Q})):E!=null&&(re(E)&&(E=G(E,j+(!E.key||b&&b.key===E.key?"":(""+E.key).replace(V,"$&/")+"/")+x)),O.push(E)),1;if(b=0,k=k===""?".":k+":",C(x))for(var X=0;X<x.length;X++){F=x[X];var N=k+q(F,X);b+=ne(F,O,j,N,E)}else if(N=r(x),typeof N=="function")for(x=N.call(x),X=0;!(F=x.next()).done;)F=F.value,N=k+q(F,X++),b+=ne(F,O,j,N,E);else if(F==="object")throw O=String(x),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return b}function fe(x,O,j){if(x==null)return x;var k=[],E=0;return ne(x,k,"","",function(F){return O.call(j,F,E++)}),k}function pe(x){if(x._status===-1){var O=x._result;O=O(),O.then(function(j){(x._status===0||x._status===-1)&&(x._status=1,x._result=j)},function(j){(x._status===0||x._status===-1)&&(x._status=2,x._result=j)}),x._status===-1&&(x._status=0,x._result=O)}if(x._status===1)return x._result.default;throw x._result}var ge={current:null},$={transition:null},D={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:$,ReactCurrentOwner:T};function I(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:fe,forEach:function(x,O,j){fe(x,function(){O.apply(this,arguments)},j)},count:function(x){var O=0;return fe(x,function(){O++}),O},toArray:function(x){return fe(x,function(O){return O})||[]},only:function(x){if(!re(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Pe.Component=s,Pe.Fragment=Z,Pe.Profiler=De,Pe.PureComponent=p,Pe.StrictMode=ze,Pe.Suspense=l,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Pe.act=I,Pe.cloneElement=function(x,O,j){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var k=a({},x.props),E=x.key,F=x.ref,b=x._owner;if(O!=null){if(O.ref!==void 0&&(F=O.ref,b=T.current),O.key!==void 0&&(E=""+O.key),x.type&&x.type.defaultProps)var X=x.type.defaultProps;for(N in O)S.call(O,N)&&!P.hasOwnProperty(N)&&(k[N]=O[N]===void 0&&X!==void 0?X[N]:O[N])}var N=arguments.length-2;if(N===1)k.children=j;else if(1<N){X=Array(N);for(var Q=0;Q<N;Q++)X[Q]=arguments[Q+2];k.children=X}return{$$typeof:U,type:x.type,key:E,ref:F,props:k,_owner:b}},Pe.createContext=function(x){return x={$$typeof:Ie,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:Me,_context:x},x.Consumer=x},Pe.createElement=L,Pe.createFactory=function(x){var O=L.bind(null,x);return O.type=x,O},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(x){return{$$typeof:g,render:x}},Pe.isValidElement=re,Pe.lazy=function(x){return{$$typeof:u,_payload:{_status:-1,_result:x},_init:pe}},Pe.memo=function(x,O){return{$$typeof:c,type:x,compare:O===void 0?null:O}},Pe.startTransition=function(x){var O=$.transition;$.transition={};try{x()}finally{$.transition=O}},Pe.unstable_act=I,Pe.useCallback=function(x,O){return ge.current.useCallback(x,O)},Pe.useContext=function(x){return ge.current.useContext(x)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(x){return ge.current.useDeferredValue(x)},Pe.useEffect=function(x,O){return ge.current.useEffect(x,O)},Pe.useId=function(){return ge.current.useId()},Pe.useImperativeHandle=function(x,O,j){return ge.current.useImperativeHandle(x,O,j)},Pe.useInsertionEffect=function(x,O){return ge.current.useInsertionEffect(x,O)},Pe.useLayoutEffect=function(x,O){return ge.current.useLayoutEffect(x,O)},Pe.useMemo=function(x,O){return ge.current.useMemo(x,O)},Pe.useReducer=function(x,O,j){return ge.current.useReducer(x,O,j)},Pe.useRef=function(x){return ge.current.useRef(x)},Pe.useState=function(x){return ge.current.useState(x)},Pe.useSyncExternalStore=function(x,O,j){return ge.current.useSyncExternalStore(x,O,j)},Pe.useTransition=function(){return ge.current.useTransition()},Pe.version="18.3.1",Pe}var Du;function Ho(){return Du||(Du=1,No.exports=jh()),No.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu;function Rh(){if(Mu)return zn;Mu=1;var U=Ho(),v=Symbol.for("react.element"),Z=Symbol.for("react.fragment"),ze=Object.prototype.hasOwnProperty,De=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Me={key:!0,ref:!0,__self:!0,__source:!0};function Ie(g,l,c){var u,n={},r=null,i=null;c!==void 0&&(r=""+c),l.key!==void 0&&(r=""+l.key),l.ref!==void 0&&(i=l.ref);for(u in l)ze.call(l,u)&&!Me.hasOwnProperty(u)&&(n[u]=l[u]);if(g&&g.defaultProps)for(u in l=g.defaultProps,l)n[u]===void 0&&(n[u]=l[u]);return{$$typeof:v,type:g,key:r,ref:i,props:n,_owner:De.current}}return zn.Fragment=Z,zn.jsx=Ie,zn.jsxs=Ie,zn}var Fu;function Ih(){return Fu||(Fu=1,Bo.exports=Rh()),Bo.exports}var Te=Ih(),Qt=Ho();const Bh=Nu(Qt);var Kr={},zo={exports:{}},vt={},Xo={exports:{}},Wo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au;function Nh(){return Au||(Au=1,function(U){function v($,D){var I=$.length;$.push(D);e:for(;0<I;){var x=I-1>>>1,O=$[x];if(0<De(O,D))$[x]=D,$[I]=O,I=x;else break e}}function Z($){return $.length===0?null:$[0]}function ze($){if($.length===0)return null;var D=$[0],I=$.pop();if(I!==D){$[0]=I;e:for(var x=0,O=$.length,j=O>>>1;x<j;){var k=2*(x+1)-1,E=$[k],F=k+1,b=$[F];if(0>De(E,I))F<O&&0>De(b,E)?($[x]=b,$[F]=I,x=F):($[x]=E,$[k]=I,x=k);else if(F<O&&0>De(b,I))$[x]=b,$[F]=I,x=F;else break e}}return D}function De($,D){var I=$.sortIndex-D.sortIndex;return I!==0?I:$.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Me=performance;U.unstable_now=function(){return Me.now()}}else{var Ie=Date,g=Ie.now();U.unstable_now=function(){return Ie.now()-g}}var l=[],c=[],u=1,n=null,r=3,i=!1,a=!1,h=!1,s=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var D=Z(c);D!==null;){if(D.callback===null)ze(c);else if(D.startTime<=$)ze(c),D.sortIndex=D.expirationTime,v(l,D);else break;D=Z(c)}}function C($){if(h=!1,y($),!a)if(Z(l)!==null)a=!0,pe(S);else{var D=Z(c);D!==null&&ge(C,D.startTime-$)}}function S($,D){a=!1,h&&(h=!1,d(L),L=-1),i=!0;var I=r;try{for(y(D),n=Z(l);n!==null&&(!(n.expirationTime>D)||$&&!le());){var x=n.callback;if(typeof x=="function"){n.callback=null,r=n.priorityLevel;var O=x(n.expirationTime<=D);D=U.unstable_now(),typeof O=="function"?n.callback=O:n===Z(l)&&ze(l),y(D)}else ze(l);n=Z(l)}if(n!==null)var j=!0;else{var k=Z(c);k!==null&&ge(C,k.startTime-D),j=!1}return j}finally{n=null,r=I,i=!1}}var T=!1,P=null,L=-1,G=5,re=-1;function le(){return!(U.unstable_now()-re<G)}function V(){if(P!==null){var $=U.unstable_now();re=$;var D=!0;try{D=P(!0,$)}finally{D?q():(T=!1,P=null)}}else T=!1}var q;if(typeof p=="function")q=function(){p(V)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,fe=ne.port2;ne.port1.onmessage=V,q=function(){fe.postMessage(null)}}else q=function(){s(V,0)};function pe($){P=$,T||(T=!0,q())}function ge($,D){L=s(function(){$(U.unstable_now())},D)}U.unstable_IdlePriority=5,U.unstable_ImmediatePriority=1,U.unstable_LowPriority=4,U.unstable_NormalPriority=3,U.unstable_Profiling=null,U.unstable_UserBlockingPriority=2,U.unstable_cancelCallback=function($){$.callback=null},U.unstable_continueExecution=function(){a||i||(a=!0,pe(S))},U.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<$?Math.floor(1e3/$):5},U.unstable_getCurrentPriorityLevel=function(){return r},U.unstable_getFirstCallbackNode=function(){return Z(l)},U.unstable_next=function($){switch(r){case 1:case 2:case 3:var D=3;break;default:D=r}var I=r;r=D;try{return $()}finally{r=I}},U.unstable_pauseExecution=function(){},U.unstable_requestPaint=function(){},U.unstable_runWithPriority=function($,D){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var I=r;r=$;try{return D()}finally{r=I}},U.unstable_scheduleCallback=function($,D,I){var x=U.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?x+I:x):I=x,$){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=I+O,$={id:u++,callback:D,priorityLevel:$,startTime:I,expirationTime:O,sortIndex:-1},I>x?($.sortIndex=I,v(c,$),Z(l)===null&&$===Z(c)&&(h?(d(L),L=-1):h=!0,ge(C,I-x))):($.sortIndex=O,v(l,$),a||i||(a=!0,pe(S))),$},U.unstable_shouldYield=le,U.unstable_wrapCallback=function($){var D=r;return function(){var I=r;r=D;try{return $.apply(this,arguments)}finally{r=I}}}}(Wo)),Wo}var Lu;function zh(){return Lu||(Lu=1,Xo.exports=Nh()),Xo.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju;function Xh(){if(ju)return vt;ju=1;var U=Ho(),v=zh();function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ze=new Set,De={};function Me(e,t){Ie(e,t),Ie(e+"Capture",t)}function Ie(e,t){for(De[e]=t,e=0;e<t.length;e++)ze.add(t[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},n={};function r(e){return l.call(n,e)?!0:l.call(u,e)?!1:c.test(e)?n[e]=!0:(u[e]=!0,!1)}function i(e,t,o,f){if(o!==null&&o.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return f?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function a(e,t,o,f){if(t===null||typeof t>"u"||i(e,t,o,f))return!0;if(f)return!1;if(o!==null)switch(o.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function h(e,t,o,f,m,_,w){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=o,this.propertyName=e,this.type=t,this.sanitizeURL=_,this.removeEmptyString=w}var s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){s[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];s[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){s[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){s[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){s[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){s[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){s[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){s[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){s[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var d=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d,p);s[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d,p);s[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d,p);s[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){s[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),s.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){s[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});function y(e,t,o,f){var m=s.hasOwnProperty(t)?s[t]:null;(m!==null?m.type!==0:f||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(a(t,o,m,f)&&(o=null),f||m===null?r(t)&&(o===null?e.removeAttribute(t):e.setAttribute(t,""+o)):m.mustUseProperty?e[m.propertyName]=o===null?m.type===3?!1:"":o:(t=m.attributeName,f=m.attributeNamespace,o===null?e.removeAttribute(t):(m=m.type,o=m===3||m===4&&o===!0?"":""+o,f?e.setAttributeNS(f,t,o):e.setAttribute(t,o))))}var C=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),T=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),le=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),$=Symbol.iterator;function D(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var I=Object.assign,x;function O(e){if(x===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return`
`+x+e}var j=!1;function k(e,t){if(!e||j)return"";j=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(H){var f=H}Reflect.construct(e,[],t)}else{try{t.call()}catch(H){f=H}e.call(t.prototype)}else{try{throw Error()}catch(H){f=H}e()}}catch(H){if(H&&f&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),_=f.stack.split(`
`),w=m.length-1,M=_.length-1;1<=w&&0<=M&&m[w]!==_[M];)M--;for(;1<=w&&0<=M;w--,M--)if(m[w]!==_[M]){if(w!==1||M!==1)do if(w--,M--,0>M||m[w]!==_[M]){var A=`
`+m[w].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=w&&0<=M);break}}}finally{j=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?O(e):""}function E(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=k(e.type,!1),e;case 11:return e=k(e.type.render,!1),e;case 1:return e=k(e.type,!0),e;default:return""}}function F(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case T:return"Portal";case G:return"Profiler";case L:return"StrictMode";case q:return"Suspense";case ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case le:return(e.displayName||"Context")+".Consumer";case re:return(e._context.displayName||"Context")+".Provider";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:F(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return F(e(t))}catch{}}return null}function b(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function X(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q(e){var t=N(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),f=""+e[t];if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,_=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return m.call(this)},set:function(w){f=""+w,_.call(this,w)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ee(e){e._valueTracker||(e._valueTracker=Q(e))}function oe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),f="";return e&&(f=N(e)?e.checked?"true":"false":e.value),e=f,e!==o?(t.setValue(e),!0):!1}function Y(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function B(e,t){var o=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function K(e,t){var o=t.defaultValue==null?"":t.defaultValue,f=t.checked!=null?t.checked:t.defaultChecked;o=X(t.value!=null?t.value:o),e._wrapperState={initialChecked:f,initialValue:o,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function te(e,t){t=t.checked,t!=null&&y(e,"checked",t,!1)}function J(e,t){te(e,t);var o=X(t.value),f=t.type;if(o!=null)f==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ce(e,t.type,o):t.hasOwnProperty("defaultValue")&&ce(e,t.type,X(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function se(e,t,o){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var f=t.type;if(!(f!=="submit"&&f!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,o||t===e.value||(e.value=t),e.defaultValue=t}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function ce(e,t,o){(t!=="number"||Y(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var xe=Array.isArray;function ye(e,t,o,f){if(e=e.options,t){t={};for(var m=0;m<o.length;m++)t["$"+o[m]]=!0;for(o=0;o<e.length;o++)m=t.hasOwnProperty("$"+e[o].value),e[o].selected!==m&&(e[o].selected=m),m&&f&&(e[o].defaultSelected=!0)}else{for(o=""+X(o),t=null,m=0;m<e.length;m++){if(e[m].value===o){e[m].selected=!0,f&&(e[m].defaultSelected=!0);return}t!==null||e[m].disabled||(t=e[m])}t!==null&&(t.selected=!0)}}function ie(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ce(e,t){var o=t.value;if(o==null){if(o=t.children,t=t.defaultValue,o!=null){if(t!=null)throw Error(Z(92));if(xe(o)){if(1<o.length)throw Error(Z(93));o=o[0]}t=o}t==null&&(t=""),o=t}e._wrapperState={initialValue:X(o)}}function ke(e,t){var o=X(t.value),f=X(t.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),t.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),f!=null&&(e.defaultValue=""+f)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ye,Ae=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,o,f,m){MSApp.execUnsafeLocalFunction(function(){return e(t,o,f,m)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Je(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jt=["Webkit","ms","Moz","O"];Object.keys(yt).forEach(function(e){Jt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yt[t]=yt[e]})});function Zt(e,t,o){return t==null||typeof t=="boolean"||t===""?"":o||typeof t!="number"||t===0||yt.hasOwnProperty(e)&&yt[e]?(""+t).trim():t+"px"}function Dt(e,t){e=e.style;for(var o in t)if(t.hasOwnProperty(o)){var f=o.indexOf("--")===0,m=Zt(o,t[o],f);o==="float"&&(o="cssFloat"),f?e.setProperty(o,m):e[o]=m}}var $r=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(e,t){if(t){if($r[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function qr(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function Jr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zr=null,Fi=null,Ai=null;function Vo(e){if(e=kn(e)){if(typeof Zr!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=ur(t),Zr(e.stateNode,e.type,t))}}function Go(e){Fi?Ai?Ai.push(e):Ai=[e]:Fi=e}function Ko(){if(Fi){var e=Fi,t=Ai;if(Ai=Fi=null,Vo(e),t)for(e=0;e<t.length;e++)Vo(t[e])}}function $o(e,t){return e(t)}function qo(){}var es=!1;function Qo(e,t,o){if(es)return e(t,o);es=!0;try{return $o(e,t,o)}finally{es=!1,(Fi!==null||Ai!==null)&&(qo(),Ko())}}function rn(e,t){var o=e.stateNode;if(o===null)return null;var f=ur(o);if(f===null)return null;o=f[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(Z(231,t,typeof o));return o}var ts=!1;if(g)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){ts=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{ts=!1}function zu(e,t,o,f,m,_,w,M,A){var H=Array.prototype.slice.call(arguments,3);try{t.apply(o,H)}catch(ue){this.onError(ue)}}var on=!1,Xn=null,Wn=!1,is=null,Xu={onError:function(e){on=!0,Xn=e}};function Wu(e,t,o,f,m,_,w,M,A){on=!1,Xn=null,zu.apply(Xu,arguments)}function Yu(e,t,o,f,m,_,w,M,A){if(Wu.apply(this,arguments),on){if(on){var H=Xn;on=!1,Xn=null}else throw Error(Z(198));Wn||(Wn=!0,is=H)}}function _i(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function Jo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zo(e){if(_i(e)!==e)throw Error(Z(188))}function Uu(e){var t=e.alternate;if(!t){if(t=_i(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var o=e,f=t;;){var m=o.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){o=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===o)return Zo(m),e;if(_===f)return Zo(m),t;_=_.sibling}throw Error(Z(188))}if(o.return!==f.return)o=m,f=_;else{for(var w=!1,M=m.child;M;){if(M===o){w=!0,o=m,f=_;break}if(M===f){w=!0,f=m,o=_;break}M=M.sibling}if(!w){for(M=_.child;M;){if(M===o){w=!0,o=_,f=m;break}if(M===f){w=!0,f=_,o=m;break}M=M.sibling}if(!w)throw Error(Z(189))}}if(o.alternate!==f)throw Error(Z(190))}if(o.tag!==3)throw Error(Z(188));return o.stateNode.current===o?e:t}function ea(e){return e=Uu(e),e!==null?ta(e):null}function ta(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ta(e);if(t!==null)return t;e=e.sibling}return null}var ia=v.unstable_scheduleCallback,na=v.unstable_cancelCallback,Hu=v.unstable_shouldYield,Vu=v.unstable_requestPaint,Ke=v.unstable_now,Gu=v.unstable_getCurrentPriorityLevel,ns=v.unstable_ImmediatePriority,ra=v.unstable_UserBlockingPriority,Yn=v.unstable_NormalPriority,Ku=v.unstable_LowPriority,sa=v.unstable_IdlePriority,Un=null,Bt=null;function $u(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Un,e,void 0,(e.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Ju,qu=Math.log,Qu=Math.LN2;function Ju(e){return e>>>=0,e===0?32:31-(qu(e)/Qu|0)|0}var Hn=64,Vn=4194304;function an(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gn(e,t){var o=e.pendingLanes;if(o===0)return 0;var f=0,m=e.suspendedLanes,_=e.pingedLanes,w=o&268435455;if(w!==0){var M=w&~m;M!==0?f=an(M):(_&=w,_!==0&&(f=an(_)))}else w=o&~m,w!==0?f=an(w):_!==0&&(f=an(_));if(f===0)return 0;if(t!==0&&t!==f&&!(t&m)&&(m=f&-f,_=t&-t,m>=_||m===16&&(_&4194240)!==0))return t;if(f&4&&(f|=o&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=f;0<t;)o=31-Mt(t),m=1<<o,f|=e[o],t&=~m;return f}function Zu(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ec(e,t){for(var o=e.suspendedLanes,f=e.pingedLanes,m=e.expirationTimes,_=e.pendingLanes;0<_;){var w=31-Mt(_),M=1<<w,A=m[w];A===-1?(!(M&o)||M&f)&&(m[w]=Zu(M,t)):A<=t&&(e.expiredLanes|=M),_&=~M}}function rs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oa(){var e=Hn;return Hn<<=1,!(Hn&4194240)&&(Hn=64),e}function ss(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function ln(e,t,o){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mt(t),e[t]=o}function tc(e,t){var o=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<o;){var m=31-Mt(o),_=1<<m;t[m]=0,f[m]=-1,e[m]=-1,o&=~_}}function os(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var f=31-Mt(o),m=1<<f;m&t|e[f]&t&&(e[f]|=t),o&=~m}}var Re=0;function aa(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var la,as,ua,ca,ha,ls=!1,Kn=[],ei=null,ti=null,ii=null,un=new Map,cn=new Map,ni=[],ic="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fa(e,t){switch(e){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(t.pointerId)}}function hn(e,t,o,f,m,_){return e===null||e.nativeEvent!==_?(e={blockedOn:t,domEventName:o,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},t!==null&&(t=kn(t),t!==null&&as(t)),e):(e.eventSystemFlags|=f,t=e.targetContainers,m!==null&&t.indexOf(m)===-1&&t.push(m),e)}function nc(e,t,o,f,m){switch(t){case"focusin":return ei=hn(ei,e,t,o,f,m),!0;case"dragenter":return ti=hn(ti,e,t,o,f,m),!0;case"mouseover":return ii=hn(ii,e,t,o,f,m),!0;case"pointerover":var _=m.pointerId;return un.set(_,hn(un.get(_)||null,e,t,o,f,m)),!0;case"gotpointercapture":return _=m.pointerId,cn.set(_,hn(cn.get(_)||null,e,t,o,f,m)),!0}return!1}function da(e){var t=Ci(e.target);if(t!==null){var o=_i(t);if(o!==null){if(t=o.tag,t===13){if(t=Jo(o),t!==null){e.blockedOn=t,ha(e.priority,function(){ua(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $n(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=cs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var f=new o.constructor(o.type,o);Qr=f,o.target.dispatchEvent(f),Qr=null}else return t=kn(o),t!==null&&as(t),e.blockedOn=o,!1;t.shift()}return!0}function ga(e,t,o){$n(e)&&o.delete(t)}function rc(){ls=!1,ei!==null&&$n(ei)&&(ei=null),ti!==null&&$n(ti)&&(ti=null),ii!==null&&$n(ii)&&(ii=null),un.forEach(ga),cn.forEach(ga)}function fn(e,t){e.blockedOn===t&&(e.blockedOn=null,ls||(ls=!0,v.unstable_scheduleCallback(v.unstable_NormalPriority,rc)))}function dn(e){function t(m){return fn(m,e)}if(0<Kn.length){fn(Kn[0],e);for(var o=1;o<Kn.length;o++){var f=Kn[o];f.blockedOn===e&&(f.blockedOn=null)}}for(ei!==null&&fn(ei,e),ti!==null&&fn(ti,e),ii!==null&&fn(ii,e),un.forEach(t),cn.forEach(t),o=0;o<ni.length;o++)f=ni[o],f.blockedOn===e&&(f.blockedOn=null);for(;0<ni.length&&(o=ni[0],o.blockedOn===null);)da(o),o.blockedOn===null&&ni.shift()}var Li=C.ReactCurrentBatchConfig,qn=!0;function sc(e,t,o,f){var m=Re,_=Li.transition;Li.transition=null;try{Re=1,us(e,t,o,f)}finally{Re=m,Li.transition=_}}function oc(e,t,o,f){var m=Re,_=Li.transition;Li.transition=null;try{Re=4,us(e,t,o,f)}finally{Re=m,Li.transition=_}}function us(e,t,o,f){if(qn){var m=cs(e,t,o,f);if(m===null)Es(e,t,f,Qn,o),fa(e,f);else if(nc(m,e,t,o,f))f.stopPropagation();else if(fa(e,f),t&4&&-1<ic.indexOf(e)){for(;m!==null;){var _=kn(m);if(_!==null&&la(_),_=cs(e,t,o,f),_===null&&Es(e,t,f,Qn,o),_===m)break;m=_}m!==null&&f.stopPropagation()}else Es(e,t,f,null,o)}}var Qn=null;function cs(e,t,o,f){if(Qn=null,e=Jr(f),e=Ci(e),e!==null)if(t=_i(e),t===null)e=null;else if(o=t.tag,o===13){if(e=Jo(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qn=e,null}function pa(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gu()){case ns:return 1;case ra:return 4;case Yn:case Ku:return 16;case sa:return 536870912;default:return 16}default:return 16}}var ri=null,hs=null,Jn=null;function ma(){if(Jn)return Jn;var e,t=hs,o=t.length,f,m="value"in ri?ri.value:ri.textContent,_=m.length;for(e=0;e<o&&t[e]===m[e];e++);var w=o-e;for(f=1;f<=w&&t[o-f]===m[_-f];f++);return Jn=m.slice(e,1<f?1-f:void 0)}function Zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function er(){return!0}function va(){return!1}function _t(e){function t(o,f,m,_,w){this._reactName=o,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(o=e[M],this[M]=o?o(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?er:va,this.isPropagationStopped=va,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),t}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=_t(ji),gn=I({},ji,{view:0,detail:0}),ac=_t(gn),ds,gs,pn,tr=I({},gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&e.type==="mousemove"?(ds=e.screenX-pn.screenX,gs=e.screenY-pn.screenY):gs=ds=0,pn=e),ds)},movementY:function(e){return"movementY"in e?e.movementY:gs}}),ya=_t(tr),lc=I({},tr,{dataTransfer:0}),uc=_t(lc),cc=I({},gn,{relatedTarget:0}),ps=_t(cc),hc=I({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),fc=_t(hc),dc=I({},ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gc=_t(dc),pc=I({},ji,{data:0}),_a=_t(pc),mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _c(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yc[e])?!!t[e]:!1}function ms(){return _c}var Cc=I({},gn,{key:function(e){if(e.key){var t=mc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(e){return e.type==="keypress"?Zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sc=_t(Cc),wc=I({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ca=_t(wc),xc=I({},gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),Tc=_t(xc),kc=I({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oc=_t(kc),Ec=I({},tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bc=_t(Ec),Pc=[9,13,27,32],vs=g&&"CompositionEvent"in window,mn=null;g&&"documentMode"in document&&(mn=document.documentMode);var Dc=g&&"TextEvent"in window&&!mn,Sa=g&&(!vs||mn&&8<mn&&11>=mn),wa=" ",xa=!1;function Ta(e,t){switch(e){case"keyup":return Pc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ka(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ri=!1;function Mc(e,t){switch(e){case"compositionend":return ka(t);case"keypress":return t.which!==32?null:(xa=!0,wa);case"textInput":return e=t.data,e===wa&&xa?null:e;default:return null}}function Fc(e,t){if(Ri)return e==="compositionend"||!vs&&Ta(e,t)?(e=ma(),Jn=hs=ri=null,Ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sa&&t.locale!=="ko"?null:t.data;default:return null}}var Ac={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ac[e.type]:t==="textarea"}function Ea(e,t,o,f){Go(f),t=or(t,"onChange"),0<t.length&&(o=new fs("onChange","change",null,o,f),e.push({event:o,listeners:t}))}var vn=null,yn=null;function Lc(e){Ha(e,0)}function ir(e){var t=Xi(e);if(oe(t))return e}function jc(e,t){if(e==="change")return t}var ba=!1;if(g){var ys;if(g){var _s="oninput"in document;if(!_s){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),_s=typeof Pa.oninput=="function"}ys=_s}else ys=!1;ba=ys&&(!document.documentMode||9<document.documentMode)}function Da(){vn&&(vn.detachEvent("onpropertychange",Ma),yn=vn=null)}function Ma(e){if(e.propertyName==="value"&&ir(yn)){var t=[];Ea(t,yn,e,Jr(e)),Qo(Lc,t)}}function Rc(e,t,o){e==="focusin"?(Da(),vn=t,yn=o,vn.attachEvent("onpropertychange",Ma)):e==="focusout"&&Da()}function Ic(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ir(yn)}function Bc(e,t){if(e==="click")return ir(t)}function Nc(e,t){if(e==="input"||e==="change")return ir(t)}function zc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:zc;function _n(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),f=Object.keys(t);if(o.length!==f.length)return!1;for(f=0;f<o.length;f++){var m=o[f];if(!l.call(t,m)||!Ft(e[m],t[m]))return!1}return!0}function Fa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Aa(e,t){var o=Fa(e);e=0;for(var f;o;){if(o.nodeType===3){if(f=e+o.textContent.length,e<=t&&f>=t)return{node:o,offset:t-e};e=f}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Fa(o)}}function La(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?La(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ja(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Y(e.document)}return t}function Cs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xc(e){var t=ja(),o=e.focusedElem,f=e.selectionRange;if(t!==o&&o&&o.ownerDocument&&La(o.ownerDocument.documentElement,o)){if(f!==null&&Cs(o)){if(t=f.start,e=f.end,e===void 0&&(e=t),"selectionStart"in o)o.selectionStart=t,o.selectionEnd=Math.min(e,o.value.length);else if(e=(t=o.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var m=o.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!e.extend&&_>f&&(m=f,f=_,_=m),m=Aa(o,_);var w=Aa(o,f);m&&w&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(t=t.createRange(),t.setStart(m.node,m.offset),e.removeAllRanges(),_>f?(e.addRange(t),e.extend(w.node,w.offset)):(t.setEnd(w.node,w.offset),e.addRange(t)))}}for(t=[],e=o;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<t.length;o++)e=t[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wc=g&&"documentMode"in document&&11>=document.documentMode,Ii=null,Ss=null,Cn=null,ws=!1;function Ra(e,t,o){var f=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ws||Ii==null||Ii!==Y(f)||(f=Ii,"selectionStart"in f&&Cs(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Cn&&_n(Cn,f)||(Cn=f,f=or(Ss,"onSelect"),0<f.length&&(t=new fs("onSelect","select",null,t,o),e.push({event:t,listeners:f}),t.target=Ii)))}function nr(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Bi={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionend:nr("Transition","TransitionEnd")},xs={},Ia={};g&&(Ia=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function rr(e){if(xs[e])return xs[e];if(!Bi[e])return e;var t=Bi[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Ia)return xs[e]=t[o];return e}var Ba=rr("animationend"),Na=rr("animationiteration"),za=rr("animationstart"),Xa=rr("transitionend"),Wa=new Map,Ya="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(e,t){Wa.set(e,t),Me(t,[e])}for(var Ts=0;Ts<Ya.length;Ts++){var ks=Ya[Ts],Yc=ks.toLowerCase(),Uc=ks[0].toUpperCase()+ks.slice(1);si(Yc,"on"+Uc)}si(Ba,"onAnimationEnd"),si(Na,"onAnimationIteration"),si(za,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(Xa,"onTransitionEnd"),Ie("onMouseEnter",["mouseout","mouseover"]),Ie("onMouseLeave",["mouseout","mouseover"]),Ie("onPointerEnter",["pointerout","pointerover"]),Ie("onPointerLeave",["pointerout","pointerover"]),Me("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Me("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Me("onBeforeInput",["compositionend","keypress","textInput","paste"]),Me("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Me("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sn));function Ua(e,t,o){var f=e.type||"unknown-event";e.currentTarget=o,Yu(f,t,void 0,e),e.currentTarget=null}function Ha(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var f=e[o],m=f.event;f=f.listeners;e:{var _=void 0;if(t)for(var w=f.length-1;0<=w;w--){var M=f[w],A=M.instance,H=M.currentTarget;if(M=M.listener,A!==_&&m.isPropagationStopped())break e;Ua(m,M,H),_=A}else for(w=0;w<f.length;w++){if(M=f[w],A=M.instance,H=M.currentTarget,M=M.listener,A!==_&&m.isPropagationStopped())break e;Ua(m,M,H),_=A}}}if(Wn)throw e=is,Wn=!1,is=null,e}function Xe(e,t){var o=t[As];o===void 0&&(o=t[As]=new Set);var f=e+"__bubble";o.has(f)||(Va(t,e,2,!1),o.add(f))}function Os(e,t,o){var f=0;t&&(f|=4),Va(o,e,f,t)}var sr="_reactListening"+Math.random().toString(36).slice(2);function wn(e){if(!e[sr]){e[sr]=!0,ze.forEach(function(o){o!=="selectionchange"&&(Hc.has(o)||Os(o,!1,e),Os(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sr]||(t[sr]=!0,Os("selectionchange",!1,t))}}function Va(e,t,o,f){switch(pa(t)){case 1:var m=sc;break;case 4:m=oc;break;default:m=us}o=m.bind(null,t,o,e),m=void 0,!ts||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(m=!0),f?m!==void 0?e.addEventListener(t,o,{capture:!0,passive:m}):e.addEventListener(t,o,!0):m!==void 0?e.addEventListener(t,o,{passive:m}):e.addEventListener(t,o,!1)}function Es(e,t,o,f,m){var _=f;if(!(t&1)&&!(t&2)&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var M=f.stateNode.containerInfo;if(M===m||M.nodeType===8&&M.parentNode===m)break;if(w===4)for(w=f.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===m||A.nodeType===8&&A.parentNode===m))return;w=w.return}for(;M!==null;){if(w=Ci(M),w===null)return;if(A=w.tag,A===5||A===6){f=_=w;continue e}M=M.parentNode}}f=f.return}Qo(function(){var H=_,ue=Jr(o),he=[];e:{var ae=Wa.get(e);if(ae!==void 0){var me=fs,_e=e;switch(e){case"keypress":if(Zn(o)===0)break e;case"keydown":case"keyup":me=Sc;break;case"focusin":_e="focus",me=ps;break;case"focusout":_e="blur",me=ps;break;case"beforeblur":case"afterblur":me=ps;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Tc;break;case Ba:case Na:case za:me=fc;break;case Xa:me=Oc;break;case"scroll":me=ac;break;case"wheel":me=bc;break;case"copy":case"cut":case"paste":me=gc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Ca}var Se=(t&4)!==0,$e=!Se&&e==="scroll",z=Se?ae!==null?ae+"Capture":null:ae;Se=[];for(var R=H,W;R!==null;){W=R;var de=W.stateNode;if(W.tag===5&&de!==null&&(W=de,z!==null&&(de=rn(R,z),de!=null&&Se.push(xn(R,de,W)))),$e)break;R=R.return}0<Se.length&&(ae=new me(ae,_e,null,o,ue),he.push({event:ae,listeners:Se}))}}if(!(t&7)){e:{if(ae=e==="mouseover"||e==="pointerover",me=e==="mouseout"||e==="pointerout",ae&&o!==Qr&&(_e=o.relatedTarget||o.fromElement)&&(Ci(_e)||_e[Yt]))break e;if((me||ae)&&(ae=ue.window===ue?ue:(ae=ue.ownerDocument)?ae.defaultView||ae.parentWindow:window,me?(_e=o.relatedTarget||o.toElement,me=H,_e=_e?Ci(_e):null,_e!==null&&($e=_i(_e),_e!==$e||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(me=null,_e=H),me!==_e)){if(Se=ya,de="onMouseLeave",z="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Se=Ca,de="onPointerLeave",z="onPointerEnter",R="pointer"),$e=me==null?ae:Xi(me),W=_e==null?ae:Xi(_e),ae=new Se(de,R+"leave",me,o,ue),ae.target=$e,ae.relatedTarget=W,de=null,Ci(ue)===H&&(Se=new Se(z,R+"enter",_e,o,ue),Se.target=W,Se.relatedTarget=$e,de=Se),$e=de,me&&_e)t:{for(Se=me,z=_e,R=0,W=Se;W;W=Ni(W))R++;for(W=0,de=z;de;de=Ni(de))W++;for(;0<R-W;)Se=Ni(Se),R--;for(;0<W-R;)z=Ni(z),W--;for(;R--;){if(Se===z||z!==null&&Se===z.alternate)break t;Se=Ni(Se),z=Ni(z)}Se=null}else Se=null;me!==null&&Ga(he,ae,me,Se,!1),_e!==null&&$e!==null&&Ga(he,$e,_e,Se,!0)}}e:{if(ae=H?Xi(H):window,me=ae.nodeName&&ae.nodeName.toLowerCase(),me==="select"||me==="input"&&ae.type==="file")var we=jc;else if(Oa(ae))if(ba)we=Nc;else{we=Ic;var Oe=Rc}else(me=ae.nodeName)&&me.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(we=Bc);if(we&&(we=we(e,H))){Ea(he,we,o,ue);break e}Oe&&Oe(e,ae,H),e==="focusout"&&(Oe=ae._wrapperState)&&Oe.controlled&&ae.type==="number"&&ce(ae,"number",ae.value)}switch(Oe=H?Xi(H):window,e){case"focusin":(Oa(Oe)||Oe.contentEditable==="true")&&(Ii=Oe,Ss=H,Cn=null);break;case"focusout":Cn=Ss=Ii=null;break;case"mousedown":ws=!0;break;case"contextmenu":case"mouseup":case"dragend":ws=!1,Ra(he,o,ue);break;case"selectionchange":if(Wc)break;case"keydown":case"keyup":Ra(he,o,ue)}var Ee;if(vs)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ri?Ta(e,o)&&(be="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(Sa&&o.locale!=="ko"&&(Ri||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ri&&(Ee=ma()):(ri=ue,hs="value"in ri?ri.value:ri.textContent,Ri=!0)),Oe=or(H,be),0<Oe.length&&(be=new _a(be,e,null,o,ue),he.push({event:be,listeners:Oe}),Ee?be.data=Ee:(Ee=ka(o),Ee!==null&&(be.data=Ee)))),(Ee=Dc?Mc(e,o):Fc(e,o))&&(H=or(H,"onBeforeInput"),0<H.length&&(ue=new _a("onBeforeInput","beforeinput",null,o,ue),he.push({event:ue,listeners:H}),ue.data=Ee))}Ha(he,t)})}function xn(e,t,o){return{instance:e,listener:t,currentTarget:o}}function or(e,t){for(var o=t+"Capture",f=[];e!==null;){var m=e,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=rn(e,o),_!=null&&f.unshift(xn(e,_,m)),_=rn(e,t),_!=null&&f.push(xn(e,_,m))),e=e.return}return f}function Ni(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ga(e,t,o,f,m){for(var _=t._reactName,w=[];o!==null&&o!==f;){var M=o,A=M.alternate,H=M.stateNode;if(A!==null&&A===f)break;M.tag===5&&H!==null&&(M=H,m?(A=rn(o,_),A!=null&&w.unshift(xn(o,A,M))):m||(A=rn(o,_),A!=null&&w.push(xn(o,A,M)))),o=o.return}w.length!==0&&e.push({event:t,listeners:w})}var Vc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Ka(e){return(typeof e=="string"?e:""+e).replace(Vc,`
`).replace(Gc,"")}function ar(e,t,o){if(t=Ka(t),Ka(e)!==t&&o)throw Error(Z(425))}function lr(){}var bs=null,Ps=null;function Ds(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ms=typeof setTimeout=="function"?setTimeout:void 0,Kc=typeof clearTimeout=="function"?clearTimeout:void 0,$a=typeof Promise=="function"?Promise:void 0,$c=typeof queueMicrotask=="function"?queueMicrotask:typeof $a<"u"?function(e){return $a.resolve(null).then(e).catch(qc)}:Ms;function qc(e){setTimeout(function(){throw e})}function Fs(e,t){var o=t,f=0;do{var m=o.nextSibling;if(e.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(f===0){e.removeChild(m),dn(t);return}f--}else o!=="$"&&o!=="$?"&&o!=="$!"||f++;o=m}while(o);dn(t)}function oi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(t===0)return e;t--}else o==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),Nt="__reactFiber$"+zi,Tn="__reactProps$"+zi,Yt="__reactContainer$"+zi,As="__reactEvents$"+zi,Qc="__reactListeners$"+zi,Jc="__reactHandles$"+zi;function Ci(e){var t=e[Nt];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Yt]||o[Nt]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=qa(e);e!==null;){if(o=e[Nt])return o;e=qa(e)}return t}e=o,o=e.parentNode}return null}function kn(e){return e=e[Nt]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function ur(e){return e[Tn]||null}var Ls=[],Wi=-1;function ai(e){return{current:e}}function We(e){0>Wi||(e.current=Ls[Wi],Ls[Wi]=null,Wi--)}function Ne(e,t){Wi++,Ls[Wi]=e.current,e.current=t}var li={},ot=ai(li),ft=ai(!1),Si=li;function Yi(e,t){var o=e.type.contextTypes;if(!o)return li;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===t)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in o)m[_]=t[_];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=m),m}function dt(e){return e=e.childContextTypes,e!=null}function cr(){We(ft),We(ot)}function Qa(e,t,o){if(ot.current!==li)throw Error(Z(168));Ne(ot,t),Ne(ft,o)}function Ja(e,t,o){var f=e.stateNode;if(t=t.childContextTypes,typeof f.getChildContext!="function")return o;f=f.getChildContext();for(var m in f)if(!(m in t))throw Error(Z(108,b(e)||"Unknown",m));return I({},o,f)}function hr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,Si=ot.current,Ne(ot,e),Ne(ft,ft.current),!0}function Za(e,t,o){var f=e.stateNode;if(!f)throw Error(Z(169));o?(e=Ja(e,t,Si),f.__reactInternalMemoizedMergedChildContext=e,We(ft),We(ot),Ne(ot,e)):We(ft),Ne(ft,o)}var Ut=null,fr=!1,js=!1;function el(e){Ut===null?Ut=[e]:Ut.push(e)}function Zc(e){fr=!0,el(e)}function ui(){if(!js&&Ut!==null){js=!0;var e=0,t=Re;try{var o=Ut;for(Re=1;e<o.length;e++){var f=o[e];do f=f(!0);while(f!==null)}Ut=null,fr=!1}catch(m){throw Ut!==null&&(Ut=Ut.slice(e+1)),ia(ns,ui),m}finally{Re=t,js=!1}}return null}var Ui=[],Hi=0,dr=null,gr=0,xt=[],Tt=0,wi=null,Ht=1,Vt="";function xi(e,t){Ui[Hi++]=gr,Ui[Hi++]=dr,dr=e,gr=t}function tl(e,t,o){xt[Tt++]=Ht,xt[Tt++]=Vt,xt[Tt++]=wi,wi=e;var f=Ht;e=Vt;var m=32-Mt(f)-1;f&=~(1<<m),o+=1;var _=32-Mt(t)+m;if(30<_){var w=m-m%5;_=(f&(1<<w)-1).toString(32),f>>=w,m-=w,Ht=1<<32-Mt(t)+m|o<<m|f,Vt=_+e}else Ht=1<<_|o<<m|f,Vt=e}function Rs(e){e.return!==null&&(xi(e,1),tl(e,1,0))}function Is(e){for(;e===dr;)dr=Ui[--Hi],Ui[Hi]=null,gr=Ui[--Hi],Ui[Hi]=null;for(;e===wi;)wi=xt[--Tt],xt[Tt]=null,Vt=xt[--Tt],xt[Tt]=null,Ht=xt[--Tt],xt[Tt]=null}var Ct=null,St=null,Ue=!1,At=null;function il(e,t){var o=bt(5,null,null,0);o.elementType="DELETED",o.stateNode=t,o.return=e,t=e.deletions,t===null?(e.deletions=[o],e.flags|=16):t.push(o)}function nl(e,t){switch(e.tag){case 5:var o=e.type;return t=t.nodeType!==1||o.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,St=oi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(o=wi!==null?{id:Ht,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:o,retryLane:1073741824},o=bt(18,null,null,0),o.stateNode=t,o.return=e,e.child=o,Ct=e,St=null,!0):!1;default:return!1}}function Bs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ns(e){if(Ue){var t=St;if(t){var o=t;if(!nl(e,t)){if(Bs(e))throw Error(Z(418));t=oi(o.nextSibling);var f=Ct;t&&nl(e,t)?il(f,o):(e.flags=e.flags&-4097|2,Ue=!1,Ct=e)}}else{if(Bs(e))throw Error(Z(418));e.flags=e.flags&-4097|2,Ue=!1,Ct=e}}}function rl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function pr(e){if(e!==Ct)return!1;if(!Ue)return rl(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ds(e.type,e.memoizedProps)),t&&(t=St)){if(Bs(e))throw sl(),Error(Z(418));for(;t;)il(e,t),t=oi(t.nextSibling)}if(rl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(t===0){St=oi(e.nextSibling);break e}t--}else o!=="$"&&o!=="$!"&&o!=="$?"||t++}e=e.nextSibling}St=null}}else St=Ct?oi(e.stateNode.nextSibling):null;return!0}function sl(){for(var e=St;e;)e=oi(e.nextSibling)}function Vi(){St=Ct=null,Ue=!1}function zs(e){At===null?At=[e]:At.push(e)}var eh=C.ReactCurrentBatchConfig;function On(e,t,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Z(309));var f=o.stateNode}if(!f)throw Error(Z(147,e));var m=f,_=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===_?t.ref:(t=function(w){var M=m.refs;w===null?delete M[_]:M[_]=w},t._stringRef=_,t)}if(typeof e!="string")throw Error(Z(284));if(!o._owner)throw Error(Z(290,e))}return e}function mr(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ol(e){var t=e._init;return t(e._payload)}function al(e){function t(z,R){if(e){var W=z.deletions;W===null?(z.deletions=[R],z.flags|=16):W.push(R)}}function o(z,R){if(!e)return null;for(;R!==null;)t(z,R),R=R.sibling;return null}function f(z,R){for(z=new Map;R!==null;)R.key!==null?z.set(R.key,R):z.set(R.index,R),R=R.sibling;return z}function m(z,R){return z=vi(z,R),z.index=0,z.sibling=null,z}function _(z,R,W){return z.index=W,e?(W=z.alternate,W!==null?(W=W.index,W<R?(z.flags|=2,R):W):(z.flags|=2,R)):(z.flags|=1048576,R)}function w(z){return e&&z.alternate===null&&(z.flags|=2),z}function M(z,R,W,de){return R===null||R.tag!==6?(R=Fo(W,z.mode,de),R.return=z,R):(R=m(R,W),R.return=z,R)}function A(z,R,W,de){var we=W.type;return we===P?ue(z,R,W.props.children,de,W.key):R!==null&&(R.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pe&&ol(we)===R.type)?(de=m(R,W.props),de.ref=On(z,R,W),de.return=z,de):(de=zr(W.type,W.key,W.props,null,z.mode,de),de.ref=On(z,R,W),de.return=z,de)}function H(z,R,W,de){return R===null||R.tag!==4||R.stateNode.containerInfo!==W.containerInfo||R.stateNode.implementation!==W.implementation?(R=Ao(W,z.mode,de),R.return=z,R):(R=m(R,W.children||[]),R.return=z,R)}function ue(z,R,W,de,we){return R===null||R.tag!==7?(R=Mi(W,z.mode,de,we),R.return=z,R):(R=m(R,W),R.return=z,R)}function he(z,R,W){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Fo(""+R,z.mode,W),R.return=z,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return W=zr(R.type,R.key,R.props,null,z.mode,W),W.ref=On(z,null,R),W.return=z,W;case T:return R=Ao(R,z.mode,W),R.return=z,R;case pe:var de=R._init;return he(z,de(R._payload),W)}if(xe(R)||D(R))return R=Mi(R,z.mode,W,null),R.return=z,R;mr(z,R)}return null}function ae(z,R,W,de){var we=R!==null?R.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return we!==null?null:M(z,R,""+W,de);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return W.key===we?A(z,R,W,de):null;case T:return W.key===we?H(z,R,W,de):null;case pe:return we=W._init,ae(z,R,we(W._payload),de)}if(xe(W)||D(W))return we!==null?null:ue(z,R,W,de,null);mr(z,W)}return null}function me(z,R,W,de,we){if(typeof de=="string"&&de!==""||typeof de=="number")return z=z.get(W)||null,M(R,z,""+de,we);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return z=z.get(de.key===null?W:de.key)||null,A(R,z,de,we);case T:return z=z.get(de.key===null?W:de.key)||null,H(R,z,de,we);case pe:var Oe=de._init;return me(z,R,W,Oe(de._payload),we)}if(xe(de)||D(de))return z=z.get(W)||null,ue(R,z,de,we,null);mr(R,de)}return null}function _e(z,R,W,de){for(var we=null,Oe=null,Ee=R,be=R=0,nt=null;Ee!==null&&be<W.length;be++){Ee.index>be?(nt=Ee,Ee=null):nt=Ee.sibling;var je=ae(z,Ee,W[be],de);if(je===null){Ee===null&&(Ee=nt);break}e&&Ee&&je.alternate===null&&t(z,Ee),R=_(je,R,be),Oe===null?we=je:Oe.sibling=je,Oe=je,Ee=nt}if(be===W.length)return o(z,Ee),Ue&&xi(z,be),we;if(Ee===null){for(;be<W.length;be++)Ee=he(z,W[be],de),Ee!==null&&(R=_(Ee,R,be),Oe===null?we=Ee:Oe.sibling=Ee,Oe=Ee);return Ue&&xi(z,be),we}for(Ee=f(z,Ee);be<W.length;be++)nt=me(Ee,z,be,W[be],de),nt!==null&&(e&&nt.alternate!==null&&Ee.delete(nt.key===null?be:nt.key),R=_(nt,R,be),Oe===null?we=nt:Oe.sibling=nt,Oe=nt);return e&&Ee.forEach(function(yi){return t(z,yi)}),Ue&&xi(z,be),we}function Se(z,R,W,de){var we=D(W);if(typeof we!="function")throw Error(Z(150));if(W=we.call(W),W==null)throw Error(Z(151));for(var Oe=we=null,Ee=R,be=R=0,nt=null,je=W.next();Ee!==null&&!je.done;be++,je=W.next()){Ee.index>be?(nt=Ee,Ee=null):nt=Ee.sibling;var yi=ae(z,Ee,je.value,de);if(yi===null){Ee===null&&(Ee=nt);break}e&&Ee&&yi.alternate===null&&t(z,Ee),R=_(yi,R,be),Oe===null?we=yi:Oe.sibling=yi,Oe=yi,Ee=nt}if(je.done)return o(z,Ee),Ue&&xi(z,be),we;if(Ee===null){for(;!je.done;be++,je=W.next())je=he(z,je.value,de),je!==null&&(R=_(je,R,be),Oe===null?we=je:Oe.sibling=je,Oe=je);return Ue&&xi(z,be),we}for(Ee=f(z,Ee);!je.done;be++,je=W.next())je=me(Ee,z,be,je.value,de),je!==null&&(e&&je.alternate!==null&&Ee.delete(je.key===null?be:je.key),R=_(je,R,be),Oe===null?we=je:Oe.sibling=je,Oe=je);return e&&Ee.forEach(function(Ah){return t(z,Ah)}),Ue&&xi(z,be),we}function $e(z,R,W,de){if(typeof W=="object"&&W!==null&&W.type===P&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case S:e:{for(var we=W.key,Oe=R;Oe!==null;){if(Oe.key===we){if(we=W.type,we===P){if(Oe.tag===7){o(z,Oe.sibling),R=m(Oe,W.props.children),R.return=z,z=R;break e}}else if(Oe.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===pe&&ol(we)===Oe.type){o(z,Oe.sibling),R=m(Oe,W.props),R.ref=On(z,Oe,W),R.return=z,z=R;break e}o(z,Oe);break}else t(z,Oe);Oe=Oe.sibling}W.type===P?(R=Mi(W.props.children,z.mode,de,W.key),R.return=z,z=R):(de=zr(W.type,W.key,W.props,null,z.mode,de),de.ref=On(z,R,W),de.return=z,z=de)}return w(z);case T:e:{for(Oe=W.key;R!==null;){if(R.key===Oe)if(R.tag===4&&R.stateNode.containerInfo===W.containerInfo&&R.stateNode.implementation===W.implementation){o(z,R.sibling),R=m(R,W.children||[]),R.return=z,z=R;break e}else{o(z,R);break}else t(z,R);R=R.sibling}R=Ao(W,z.mode,de),R.return=z,z=R}return w(z);case pe:return Oe=W._init,$e(z,R,Oe(W._payload),de)}if(xe(W))return _e(z,R,W,de);if(D(W))return Se(z,R,W,de);mr(z,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,R!==null&&R.tag===6?(o(z,R.sibling),R=m(R,W),R.return=z,z=R):(o(z,R),R=Fo(W,z.mode,de),R.return=z,z=R),w(z)):o(z,R)}return $e}var Gi=al(!0),ll=al(!1),vr=ai(null),yr=null,Ki=null,Xs=null;function Ws(){Xs=Ki=yr=null}function Ys(e){var t=vr.current;We(vr),e._currentValue=t}function Us(e,t,o){for(;e!==null;){var f=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,f!==null&&(f.childLanes|=t)):f!==null&&(f.childLanes&t)!==t&&(f.childLanes|=t),e===o)break;e=e.return}}function $i(e,t){yr=e,Xs=Ki=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Xs!==e)if(e={context:e,memoizedValue:t,next:null},Ki===null){if(yr===null)throw Error(Z(308));Ki=e,yr.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var Ti=null;function Hs(e){Ti===null?Ti=[e]:Ti.push(e)}function ul(e,t,o,f){var m=t.interleaved;return m===null?(o.next=o,Hs(t)):(o.next=m.next,m.next=o),t.interleaved=o,Gt(e,f)}function Gt(e,t){e.lanes|=t;var o=e.alternate;for(o!==null&&(o.lanes|=t),o=e,e=e.return;e!==null;)e.childLanes|=t,o=e.alternate,o!==null&&(o.childLanes|=t),o=e,e=e.return;return o.tag===3?o.stateNode:null}var ci=!1;function Vs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hi(e,t,o){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,Le&2){var m=f.pending;return m===null?t.next=t:(t.next=m.next,m.next=t),f.pending=t,Gt(e,o)}return m=f.interleaved,m===null?(t.next=t,Hs(f)):(t.next=m.next,m.next=t),f.interleaved=t,Gt(e,o)}function _r(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194240)!==0)){var f=t.lanes;f&=e.pendingLanes,o|=f,t.lanes=o,os(e,o)}}function hl(e,t){var o=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,o===f)){var m=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var w={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};_===null?m=_=w:_=_.next=w,o=o.next}while(o!==null);_===null?m=_=t:_=_.next=t}else m=_=t;o={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}function Cr(e,t,o,f){var m=e.updateQueue;ci=!1;var _=m.firstBaseUpdate,w=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var A=M,H=A.next;A.next=null,w===null?_=H:w.next=H,w=A;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,M=ue.lastBaseUpdate,M!==w&&(M===null?ue.firstBaseUpdate=H:M.next=H,ue.lastBaseUpdate=A))}if(_!==null){var he=m.baseState;w=0,ue=H=A=null,M=_;do{var ae=M.lane,me=M.eventTime;if((f&ae)===ae){ue!==null&&(ue=ue.next={eventTime:me,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var _e=e,Se=M;switch(ae=t,me=o,Se.tag){case 1:if(_e=Se.payload,typeof _e=="function"){he=_e.call(me,he,ae);break e}he=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Se.payload,ae=typeof _e=="function"?_e.call(me,he,ae):_e,ae==null)break e;he=I({},he,ae);break e;case 2:ci=!0}}M.callback!==null&&M.lane!==0&&(e.flags|=64,ae=m.effects,ae===null?m.effects=[M]:ae.push(M))}else me={eventTime:me,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ue===null?(H=ue=me,A=he):ue=ue.next=me,w|=ae;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,m.lastBaseUpdate=ae,m.shared.pending=null}}while(!0);if(ue===null&&(A=he),m.baseState=A,m.firstBaseUpdate=H,m.lastBaseUpdate=ue,t=m.shared.interleaved,t!==null){m=t;do w|=m.lane,m=m.next;while(m!==t)}else _===null&&(m.shared.lanes=0);Ei|=w,e.lanes=w,e.memoizedState=he}}function fl(e,t,o){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var f=e[t],m=f.callback;if(m!==null){if(f.callback=null,f=o,typeof m!="function")throw Error(Z(191,m));m.call(f)}}}var En={},zt=ai(En),bn=ai(En),Pn=ai(En);function ki(e){if(e===En)throw Error(Z(174));return e}function Gs(e,t){switch(Ne(Pn,t),Ne(bn,e),Ne(zt,En),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Be(t,e)}We(zt),Ne(zt,t)}function qi(){We(zt),We(bn),We(Pn)}function dl(e){ki(Pn.current);var t=ki(zt.current),o=Be(t,e.type);t!==o&&(Ne(bn,e),Ne(zt,o))}function Ks(e){bn.current===e&&(We(zt),We(bn))}var He=ai(0);function Sr(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $s=[];function qs(){for(var e=0;e<$s.length;e++)$s[e]._workInProgressVersionPrimary=null;$s.length=0}var wr=C.ReactCurrentDispatcher,Qs=C.ReactCurrentBatchConfig,Oi=0,Ve=null,Ze=null,tt=null,xr=!1,Dn=!1,Mn=0,th=0;function at(){throw Error(Z(321))}function Js(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!Ft(e[o],t[o]))return!1;return!0}function Zs(e,t,o,f,m,_){if(Oi=_,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wr.current=e===null||e.memoizedState===null?sh:oh,e=o(f,m),Dn){_=0;do{if(Dn=!1,Mn=0,25<=_)throw Error(Z(301));_+=1,tt=Ze=null,t.updateQueue=null,wr.current=ah,e=o(f,m)}while(Dn)}if(wr.current=Or,t=Ze!==null&&Ze.next!==null,Oi=0,tt=Ze=Ve=null,xr=!1,t)throw Error(Z(300));return e}function eo(){var e=Mn!==0;return Mn=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ve.memoizedState=tt=e:tt=tt.next=e,tt}function Ot(){if(Ze===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=tt===null?Ve.memoizedState:tt.next;if(t!==null)tt=t,Ze=e;else{if(e===null)throw Error(Z(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Ve.memoizedState=tt=e:tt=tt.next=e}return tt}function Fn(e,t){return typeof t=="function"?t(e):t}function to(e){var t=Ot(),o=t.queue;if(o===null)throw Error(Z(311));o.lastRenderedReducer=e;var f=Ze,m=f.baseQueue,_=o.pending;if(_!==null){if(m!==null){var w=m.next;m.next=_.next,_.next=w}f.baseQueue=m=_,o.pending=null}if(m!==null){_=m.next,f=f.baseState;var M=w=null,A=null,H=_;do{var ue=H.lane;if((Oi&ue)===ue)A!==null&&(A=A.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),f=H.hasEagerState?H.eagerState:e(f,H.action);else{var he={lane:ue,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};A===null?(M=A=he,w=f):A=A.next=he,Ve.lanes|=ue,Ei|=ue}H=H.next}while(H!==null&&H!==_);A===null?w=f:A.next=M,Ft(f,t.memoizedState)||(gt=!0),t.memoizedState=f,t.baseState=w,t.baseQueue=A,o.lastRenderedState=f}if(e=o.interleaved,e!==null){m=e;do _=m.lane,Ve.lanes|=_,Ei|=_,m=m.next;while(m!==e)}else m===null&&(o.lanes=0);return[t.memoizedState,o.dispatch]}function io(e){var t=Ot(),o=t.queue;if(o===null)throw Error(Z(311));o.lastRenderedReducer=e;var f=o.dispatch,m=o.pending,_=t.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do _=e(_,w.action),w=w.next;while(w!==m);Ft(_,t.memoizedState)||(gt=!0),t.memoizedState=_,t.baseQueue===null&&(t.baseState=_),o.lastRenderedState=_}return[_,f]}function gl(){}function pl(e,t){var o=Ve,f=Ot(),m=t(),_=!Ft(f.memoizedState,m);if(_&&(f.memoizedState=m,gt=!0),f=f.queue,no(yl.bind(null,o,f,e),[e]),f.getSnapshot!==t||_||tt!==null&&tt.memoizedState.tag&1){if(o.flags|=2048,An(9,vl.bind(null,o,f,m,t),void 0,null),it===null)throw Error(Z(349));Oi&30||ml(o,t,m)}return m}function ml(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function vl(e,t,o,f){t.value=o,t.getSnapshot=f,_l(t)&&Cl(e)}function yl(e,t,o){return o(function(){_l(t)&&Cl(e)})}function _l(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!Ft(e,o)}catch{return!0}}function Cl(e){var t=Gt(e,1);t!==null&&It(t,e,1,-1)}function Sl(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:e},t.queue=e,e=e.dispatch=rh.bind(null,Ve,e),[t.memoizedState,e]}function An(e,t,o,f){return e={tag:e,create:t,destroy:o,deps:f,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(o=t.lastEffect,o===null?t.lastEffect=e.next=e:(f=o.next,o.next=e,e.next=f,t.lastEffect=e)),e}function wl(){return Ot().memoizedState}function Tr(e,t,o,f){var m=Xt();Ve.flags|=e,m.memoizedState=An(1|t,o,void 0,f===void 0?null:f)}function kr(e,t,o,f){var m=Ot();f=f===void 0?null:f;var _=void 0;if(Ze!==null){var w=Ze.memoizedState;if(_=w.destroy,f!==null&&Js(f,w.deps)){m.memoizedState=An(t,o,_,f);return}}Ve.flags|=e,m.memoizedState=An(1|t,o,_,f)}function xl(e,t){return Tr(8390656,8,e,t)}function no(e,t){return kr(2048,8,e,t)}function Tl(e,t){return kr(4,2,e,t)}function kl(e,t){return kr(4,4,e,t)}function Ol(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function El(e,t,o){return o=o!=null?o.concat([e]):null,kr(4,4,Ol.bind(null,t,e),o)}function ro(){}function bl(e,t){var o=Ot();t=t===void 0?null:t;var f=o.memoizedState;return f!==null&&t!==null&&Js(t,f[1])?f[0]:(o.memoizedState=[e,t],e)}function Pl(e,t){var o=Ot();t=t===void 0?null:t;var f=o.memoizedState;return f!==null&&t!==null&&Js(t,f[1])?f[0]:(e=e(),o.memoizedState=[e,t],e)}function Dl(e,t,o){return Oi&21?(Ft(o,t)||(o=oa(),Ve.lanes|=o,Ei|=o,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=o)}function ih(e,t){var o=Re;Re=o!==0&&4>o?o:4,e(!0);var f=Qs.transition;Qs.transition={};try{e(!1),t()}finally{Re=o,Qs.transition=f}}function Ml(){return Ot().memoizedState}function nh(e,t,o){var f=pi(e);if(o={lane:f,action:o,hasEagerState:!1,eagerState:null,next:null},Fl(e))Al(t,o);else if(o=ul(e,t,o,f),o!==null){var m=ht();It(o,e,f,m),Ll(o,t,f)}}function rh(e,t,o){var f=pi(e),m={lane:f,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fl(e))Al(t,m);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var w=t.lastRenderedState,M=_(w,o);if(m.hasEagerState=!0,m.eagerState=M,Ft(M,w)){var A=t.interleaved;A===null?(m.next=m,Hs(t)):(m.next=A.next,A.next=m),t.interleaved=m;return}}catch{}finally{}o=ul(e,t,m,f),o!==null&&(m=ht(),It(o,e,f,m),Ll(o,t,f))}}function Fl(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function Al(e,t){Dn=xr=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Ll(e,t,o){if(o&4194240){var f=t.lanes;f&=e.pendingLanes,o|=f,t.lanes=o,os(e,o)}}var Or={readContext:kt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},sh={readContext:kt,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:xl,useImperativeHandle:function(e,t,o){return o=o!=null?o.concat([e]):null,Tr(4194308,4,Ol.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Tr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tr(4,2,e,t)},useMemo:function(e,t){var o=Xt();return t=t===void 0?null:t,e=e(),o.memoizedState=[e,t],e},useReducer:function(e,t,o){var f=Xt();return t=o!==void 0?o(t):t,f.memoizedState=f.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},f.queue=e,e=e.dispatch=nh.bind(null,Ve,e),[f.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:Sl,useDebugValue:ro,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=Sl(!1),t=e[0];return e=ih.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,o){var f=Ve,m=Xt();if(Ue){if(o===void 0)throw Error(Z(407));o=o()}else{if(o=t(),it===null)throw Error(Z(349));Oi&30||ml(f,t,o)}m.memoizedState=o;var _={value:o,getSnapshot:t};return m.queue=_,xl(yl.bind(null,f,_,e),[e]),f.flags|=2048,An(9,vl.bind(null,f,_,o,t),void 0,null),o},useId:function(){var e=Xt(),t=it.identifierPrefix;if(Ue){var o=Vt,f=Ht;o=(f&~(1<<32-Mt(f)-1)).toString(32)+o,t=":"+t+"R"+o,o=Mn++,0<o&&(t+="H"+o.toString(32)),t+=":"}else o=th++,t=":"+t+"r"+o.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oh={readContext:kt,useCallback:bl,useContext:kt,useEffect:no,useImperativeHandle:El,useInsertionEffect:Tl,useLayoutEffect:kl,useMemo:Pl,useReducer:to,useRef:wl,useState:function(){return to(Fn)},useDebugValue:ro,useDeferredValue:function(e){var t=Ot();return Dl(t,Ze.memoizedState,e)},useTransition:function(){var e=to(Fn)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:gl,useSyncExternalStore:pl,useId:Ml,unstable_isNewReconciler:!1},ah={readContext:kt,useCallback:bl,useContext:kt,useEffect:no,useImperativeHandle:El,useInsertionEffect:Tl,useLayoutEffect:kl,useMemo:Pl,useReducer:io,useRef:wl,useState:function(){return io(Fn)},useDebugValue:ro,useDeferredValue:function(e){var t=Ot();return Ze===null?t.memoizedState=e:Dl(t,Ze.memoizedState,e)},useTransition:function(){var e=io(Fn)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:gl,useSyncExternalStore:pl,useId:Ml,unstable_isNewReconciler:!1};function Lt(e,t){if(e&&e.defaultProps){t=I({},t),e=e.defaultProps;for(var o in e)t[o]===void 0&&(t[o]=e[o]);return t}return t}function so(e,t,o,f){t=e.memoizedState,o=o(f,t),o=o==null?t:I({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Er={isMounted:function(e){return(e=e._reactInternals)?_i(e)===e:!1},enqueueSetState:function(e,t,o){e=e._reactInternals;var f=ht(),m=pi(e),_=Kt(f,m);_.payload=t,o!=null&&(_.callback=o),t=hi(e,_,m),t!==null&&(It(t,e,m,f),_r(t,e,m))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var f=ht(),m=pi(e),_=Kt(f,m);_.tag=1,_.payload=t,o!=null&&(_.callback=o),t=hi(e,_,m),t!==null&&(It(t,e,m,f),_r(t,e,m))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=ht(),f=pi(e),m=Kt(o,f);m.tag=2,t!=null&&(m.callback=t),t=hi(e,m,f),t!==null&&(It(t,e,f,o),_r(t,e,f))}};function jl(e,t,o,f,m,_,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,_,w):t.prototype&&t.prototype.isPureReactComponent?!_n(o,f)||!_n(m,_):!0}function Rl(e,t,o){var f=!1,m=li,_=t.contextType;return typeof _=="object"&&_!==null?_=kt(_):(m=dt(t)?Si:ot.current,f=t.contextTypes,_=(f=f!=null)?Yi(e,m):li),t=new t(o,_),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Er,e.stateNode=t,t._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=_),t}function Il(e,t,o,f){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,f),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,f),t.state!==e&&Er.enqueueReplaceState(t,t.state,null)}function oo(e,t,o,f){var m=e.stateNode;m.props=o,m.state=e.memoizedState,m.refs={},Vs(e);var _=t.contextType;typeof _=="object"&&_!==null?m.context=kt(_):(_=dt(t)?Si:ot.current,m.context=Yi(e,_)),m.state=e.memoizedState,_=t.getDerivedStateFromProps,typeof _=="function"&&(so(e,t,_,o),m.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(t=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),t!==m.state&&Er.enqueueReplaceState(m,m.state,null),Cr(e,o,m,f),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function Qi(e,t){try{var o="",f=t;do o+=E(f),f=f.return;while(f);var m=o}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:t,stack:m,digest:null}}function ao(e,t,o){return{value:e,source:null,stack:o??null,digest:t??null}}function lo(e,t){try{console.error(t.value)}catch(o){setTimeout(function(){throw o})}}var lh=typeof WeakMap=="function"?WeakMap:Map;function Bl(e,t,o){o=Kt(-1,o),o.tag=3,o.payload={element:null};var f=t.value;return o.callback=function(){Lr||(Lr=!0,To=f),lo(e,t)},o}function Nl(e,t,o){o=Kt(-1,o),o.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var m=t.value;o.payload=function(){return f(m)},o.callback=function(){lo(e,t)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(o.callback=function(){lo(e,t),typeof f!="function"&&(di===null?di=new Set([this]):di.add(this));var w=t.stack;this.componentDidCatch(t.value,{componentStack:w!==null?w:""})}),o}function zl(e,t,o){var f=e.pingCache;if(f===null){f=e.pingCache=new lh;var m=new Set;f.set(t,m)}else m=f.get(t),m===void 0&&(m=new Set,f.set(t,m));m.has(o)||(m.add(o),e=wh.bind(null,e,t,o),t.then(e,e))}function Xl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wl(e,t,o,f,m){return e.mode&1?(e.flags|=65536,e.lanes=m,e):(e===t?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(t=Kt(-1,1),t.tag=2,hi(o,t,1))),o.lanes|=1),e)}var uh=C.ReactCurrentOwner,gt=!1;function ct(e,t,o,f){t.child=e===null?ll(t,null,o,f):Gi(t,e.child,o,f)}function Yl(e,t,o,f,m){o=o.render;var _=t.ref;return $i(t,m),f=Zs(e,t,o,f,_,m),o=eo(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~m,$t(e,t,m)):(Ue&&o&&Rs(t),t.flags|=1,ct(e,t,f,m),t.child)}function Ul(e,t,o,f,m){if(e===null){var _=o.type;return typeof _=="function"&&!Mo(_)&&_.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(t.tag=15,t.type=_,Hl(e,t,_,f,m)):(e=zr(o.type,null,f,t,t.mode,m),e.ref=t.ref,e.return=t,t.child=e)}if(_=e.child,!(e.lanes&m)){var w=_.memoizedProps;if(o=o.compare,o=o!==null?o:_n,o(w,f)&&e.ref===t.ref)return $t(e,t,m)}return t.flags|=1,e=vi(_,f),e.ref=t.ref,e.return=t,t.child=e}function Hl(e,t,o,f,m){if(e!==null){var _=e.memoizedProps;if(_n(_,f)&&e.ref===t.ref)if(gt=!1,t.pendingProps=f=_,(e.lanes&m)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,$t(e,t,m)}return uo(e,t,o,f,m)}function Vl(e,t,o){var f=t.pendingProps,m=f.children,_=e!==null?e.memoizedState:null;if(f.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Zi,wt),wt|=o;else{if(!(o&1073741824))return e=_!==null?_.baseLanes|o:o,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(Zi,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:o,Ne(Zi,wt),wt|=f}else _!==null?(f=_.baseLanes|o,t.memoizedState=null):f=o,Ne(Zi,wt),wt|=f;return ct(e,t,m,o),t.child}function Gl(e,t){var o=t.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(t.flags|=512,t.flags|=2097152)}function uo(e,t,o,f,m){var _=dt(o)?Si:ot.current;return _=Yi(t,_),$i(t,m),o=Zs(e,t,o,f,_,m),f=eo(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~m,$t(e,t,m)):(Ue&&f&&Rs(t),t.flags|=1,ct(e,t,o,m),t.child)}function Kl(e,t,o,f,m){if(dt(o)){var _=!0;hr(t)}else _=!1;if($i(t,m),t.stateNode===null)Pr(e,t),Rl(t,o,f),oo(t,o,f,m),f=!0;else if(e===null){var w=t.stateNode,M=t.memoizedProps;w.props=M;var A=w.context,H=o.contextType;typeof H=="object"&&H!==null?H=kt(H):(H=dt(o)?Si:ot.current,H=Yi(t,H));var ue=o.getDerivedStateFromProps,he=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function";he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==f||A!==H)&&Il(t,w,f,H),ci=!1;var ae=t.memoizedState;w.state=ae,Cr(t,f,w,m),A=t.memoizedState,M!==f||ae!==A||ft.current||ci?(typeof ue=="function"&&(so(t,o,ue,f),A=t.memoizedState),(M=ci||jl(t,o,M,f,ae,A,H))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(t.flags|=4194308)):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=f,t.memoizedState=A),w.props=f,w.state=A,w.context=H,f=M):(typeof w.componentDidMount=="function"&&(t.flags|=4194308),f=!1)}else{w=t.stateNode,cl(e,t),M=t.memoizedProps,H=t.type===t.elementType?M:Lt(t.type,M),w.props=H,he=t.pendingProps,ae=w.context,A=o.contextType,typeof A=="object"&&A!==null?A=kt(A):(A=dt(o)?Si:ot.current,A=Yi(t,A));var me=o.getDerivedStateFromProps;(ue=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==he||ae!==A)&&Il(t,w,f,A),ci=!1,ae=t.memoizedState,w.state=ae,Cr(t,f,w,m);var _e=t.memoizedState;M!==he||ae!==_e||ft.current||ci?(typeof me=="function"&&(so(t,o,me,f),_e=t.memoizedState),(H=ci||jl(t,o,H,f,ae,_e,A)||!1)?(ue||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,_e,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,_e,A)),typeof w.componentDidUpdate=="function"&&(t.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),t.memoizedProps=f,t.memoizedState=_e),w.props=f,w.state=_e,w.context=A,f=H):(typeof w.componentDidUpdate!="function"||M===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),f=!1)}return co(e,t,o,f,_,m)}function co(e,t,o,f,m,_){Gl(e,t);var w=(t.flags&128)!==0;if(!f&&!w)return m&&Za(t,o,!1),$t(e,t,_);f=t.stateNode,uh.current=t;var M=w&&typeof o.getDerivedStateFromError!="function"?null:f.render();return t.flags|=1,e!==null&&w?(t.child=Gi(t,e.child,null,_),t.child=Gi(t,null,M,_)):ct(e,t,M,_),t.memoizedState=f.state,m&&Za(t,o,!0),t.child}function $l(e){var t=e.stateNode;t.pendingContext?Qa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qa(e,t.context,!1),Gs(e,t.containerInfo)}function ql(e,t,o,f,m){return Vi(),zs(m),t.flags|=256,ct(e,t,o,f),t.child}var ho={dehydrated:null,treeContext:null,retryLane:0};function fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ql(e,t,o){var f=t.pendingProps,m=He.current,_=!1,w=(t.flags&128)!==0,M;if((M=w)||(M=e!==null&&e.memoizedState===null?!1:(m&2)!==0),M?(_=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Ne(He,m&1),e===null)return Ns(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(w=f.children,e=f.fallback,_?(f=t.mode,_=t.child,w={mode:"hidden",children:w},!(f&1)&&_!==null?(_.childLanes=0,_.pendingProps=w):_=Xr(w,f,0,null),e=Mi(e,f,o,null),_.return=t,e.return=t,_.sibling=e,t.child=_,t.child.memoizedState=fo(o),t.memoizedState=ho,e):go(t,w));if(m=e.memoizedState,m!==null&&(M=m.dehydrated,M!==null))return ch(e,t,w,f,M,m,o);if(_){_=f.fallback,w=t.mode,m=e.child,M=m.sibling;var A={mode:"hidden",children:f.children};return!(w&1)&&t.child!==m?(f=t.child,f.childLanes=0,f.pendingProps=A,t.deletions=null):(f=vi(m,A),f.subtreeFlags=m.subtreeFlags&14680064),M!==null?_=vi(M,_):(_=Mi(_,w,o,null),_.flags|=2),_.return=t,f.return=t,f.sibling=_,t.child=f,f=_,_=t.child,w=e.child.memoizedState,w=w===null?fo(o):{baseLanes:w.baseLanes|o,cachePool:null,transitions:w.transitions},_.memoizedState=w,_.childLanes=e.childLanes&~o,t.memoizedState=ho,f}return _=e.child,e=_.sibling,f=vi(_,{mode:"visible",children:f.children}),!(t.mode&1)&&(f.lanes=o),f.return=t,f.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=f,t.memoizedState=null,f}function go(e,t){return t=Xr({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function br(e,t,o,f){return f!==null&&zs(f),Gi(t,e.child,null,o),e=go(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ch(e,t,o,f,m,_,w){if(o)return t.flags&256?(t.flags&=-257,f=ao(Error(Z(422))),br(e,t,w,f)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(_=f.fallback,m=t.mode,f=Xr({mode:"visible",children:f.children},m,0,null),_=Mi(_,m,w,null),_.flags|=2,f.return=t,_.return=t,f.sibling=_,t.child=f,t.mode&1&&Gi(t,e.child,null,w),t.child.memoizedState=fo(w),t.memoizedState=ho,_);if(!(t.mode&1))return br(e,t,w,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var M=f.dgst;return f=M,_=Error(Z(419)),f=ao(_,f,void 0),br(e,t,w,f)}if(M=(w&e.childLanes)!==0,gt||M){if(f=it,f!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|w)?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Gt(e,m),It(f,e,m,-1))}return Do(),f=ao(Error(Z(421))),br(e,t,w,f)}return m.data==="$?"?(t.flags|=128,t.child=e.child,t=xh.bind(null,e),m._reactRetry=t,null):(e=_.treeContext,St=oi(m.nextSibling),Ct=t,Ue=!0,At=null,e!==null&&(xt[Tt++]=Ht,xt[Tt++]=Vt,xt[Tt++]=wi,Ht=e.id,Vt=e.overflow,wi=t),t=go(t,f.children),t.flags|=4096,t)}function Jl(e,t,o){e.lanes|=t;var f=e.alternate;f!==null&&(f.lanes|=t),Us(e.return,t,o)}function po(e,t,o,f,m){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:f,tail:o,tailMode:m}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=o,_.tailMode=m)}function Zl(e,t,o){var f=t.pendingProps,m=f.revealOrder,_=f.tail;if(ct(e,t,f.children,o),f=He.current,f&2)f=f&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jl(e,o,t);else if(e.tag===19)Jl(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(Ne(He,f),!(t.mode&1))t.memoizedState=null;else switch(m){case"forwards":for(o=t.child,m=null;o!==null;)e=o.alternate,e!==null&&Sr(e)===null&&(m=o),o=o.sibling;o=m,o===null?(m=t.child,t.child=null):(m=o.sibling,o.sibling=null),po(t,!1,m,o,_);break;case"backwards":for(o=null,m=t.child,t.child=null;m!==null;){if(e=m.alternate,e!==null&&Sr(e)===null){t.child=m;break}e=m.sibling,m.sibling=o,o=m,m=e}po(t,!0,o,null,_);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $t(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Ei|=t.lanes,!(o&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,o=vi(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=vi(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function hh(e,t,o){switch(t.tag){case 3:$l(t),Vi();break;case 5:dl(t);break;case 1:dt(t.type)&&hr(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var f=t.type._context,m=t.memoizedProps.value;Ne(vr,f._currentValue),f._currentValue=m;break;case 13:if(f=t.memoizedState,f!==null)return f.dehydrated!==null?(Ne(He,He.current&1),t.flags|=128,null):o&t.child.childLanes?Ql(e,t,o):(Ne(He,He.current&1),e=$t(e,t,o),e!==null?e.sibling:null);Ne(He,He.current&1);break;case 19:if(f=(o&t.childLanes)!==0,e.flags&128){if(f)return Zl(e,t,o);t.flags|=128}if(m=t.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ne(He,He.current),f)break;return null;case 22:case 23:return t.lanes=0,Vl(e,t,o)}return $t(e,t,o)}var eu,mo,tu,iu;eu=function(e,t){for(var o=t.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},mo=function(){},tu=function(e,t,o,f){var m=e.memoizedProps;if(m!==f){e=t.stateNode,ki(zt.current);var _=null;switch(o){case"input":m=B(e,m),f=B(e,f),_=[];break;case"select":m=I({},m,{value:void 0}),f=I({},f,{value:void 0}),_=[];break;case"textarea":m=ie(e,m),f=ie(e,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=lr)}nn(o,f);var w;o=null;for(H in m)if(!f.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var M=m[H];for(w in M)M.hasOwnProperty(w)&&(o||(o={}),o[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(De.hasOwnProperty(H)?_||(_=[]):(_=_||[]).push(H,null));for(H in f){var A=f[H];if(M=m!=null?m[H]:void 0,f.hasOwnProperty(H)&&A!==M&&(A!=null||M!=null))if(H==="style")if(M){for(w in M)!M.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(o||(o={}),o[w]="");for(w in A)A.hasOwnProperty(w)&&M[w]!==A[w]&&(o||(o={}),o[w]=A[w])}else o||(_||(_=[]),_.push(H,o)),o=A;else H==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,M=M?M.__html:void 0,A!=null&&M!==A&&(_=_||[]).push(H,A)):H==="children"?typeof A!="string"&&typeof A!="number"||(_=_||[]).push(H,""+A):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(De.hasOwnProperty(H)?(A!=null&&H==="onScroll"&&Xe("scroll",e),_||M===A||(_=[])):(_=_||[]).push(H,A))}o&&(_=_||[]).push("style",o);var H=_;(t.updateQueue=H)&&(t.flags|=4)}},iu=function(e,t,o,f){o!==f&&(t.flags|=4)};function Ln(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function lt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,f=0;if(t)for(var m=e.child;m!==null;)o|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)o|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=f,e.childLanes=o,t}function fh(e,t,o){var f=t.pendingProps;switch(Is(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(t),null;case 1:return dt(t.type)&&cr(),lt(t),null;case 3:return f=t.stateNode,qi(),We(ft),We(ot),qs(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(pr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,At!==null&&(Eo(At),At=null))),mo(e,t),lt(t),null;case 5:Ks(t);var m=ki(Pn.current);if(o=t.type,e!==null&&t.stateNode!=null)tu(e,t,o,f,m),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!f){if(t.stateNode===null)throw Error(Z(166));return lt(t),null}if(e=ki(zt.current),pr(t)){f=t.stateNode,o=t.type;var _=t.memoizedProps;switch(f[Nt]=t,f[Tn]=_,e=(t.mode&1)!==0,o){case"dialog":Xe("cancel",f),Xe("close",f);break;case"iframe":case"object":case"embed":Xe("load",f);break;case"video":case"audio":for(m=0;m<Sn.length;m++)Xe(Sn[m],f);break;case"source":Xe("error",f);break;case"img":case"image":case"link":Xe("error",f),Xe("load",f);break;case"details":Xe("toggle",f);break;case"input":K(f,_),Xe("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},Xe("invalid",f);break;case"textarea":Ce(f,_),Xe("invalid",f)}nn(o,_),m=null;for(var w in _)if(_.hasOwnProperty(w)){var M=_[w];w==="children"?typeof M=="string"?f.textContent!==M&&(_.suppressHydrationWarning!==!0&&ar(f.textContent,M,e),m=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&ar(f.textContent,M,e),m=["children",""+M]):De.hasOwnProperty(w)&&M!=null&&w==="onScroll"&&Xe("scroll",f)}switch(o){case"input":ee(f),se(f,_,!0);break;case"textarea":ee(f),Fe(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=lr)}f=m,t.updateQueue=f,f!==null&&(t.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qe(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=w.createElement(o,{is:f.is}):(e=w.createElement(o),o==="select"&&(w=e,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):e=w.createElementNS(e,o),e[Nt]=t,e[Tn]=f,eu(e,t,!1,!1),t.stateNode=e;e:{switch(w=qr(o,f),o){case"dialog":Xe("cancel",e),Xe("close",e),m=f;break;case"iframe":case"object":case"embed":Xe("load",e),m=f;break;case"video":case"audio":for(m=0;m<Sn.length;m++)Xe(Sn[m],e);m=f;break;case"source":Xe("error",e),m=f;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),m=f;break;case"details":Xe("toggle",e),m=f;break;case"input":K(e,f),m=B(e,f),Xe("invalid",e);break;case"option":m=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},m=I({},f,{value:void 0}),Xe("invalid",e);break;case"textarea":Ce(e,f),m=ie(e,f),Xe("invalid",e);break;default:m=f}nn(o,m),M=m;for(_ in M)if(M.hasOwnProperty(_)){var A=M[_];_==="style"?Dt(e,A):_==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Ae(e,A)):_==="children"?typeof A=="string"?(o!=="textarea"||A!=="")&&Je(e,A):typeof A=="number"&&Je(e,""+A):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(De.hasOwnProperty(_)?A!=null&&_==="onScroll"&&Xe("scroll",e):A!=null&&y(e,_,A,w))}switch(o){case"input":ee(e),se(e,f,!1);break;case"textarea":ee(e),Fe(e);break;case"option":f.value!=null&&e.setAttribute("value",""+X(f.value));break;case"select":e.multiple=!!f.multiple,_=f.value,_!=null?ye(e,!!f.multiple,_,!1):f.defaultValue!=null&&ye(e,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=lr)}switch(o){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lt(t),null;case 6:if(e&&t.stateNode!=null)iu(e,t,e.memoizedProps,f);else{if(typeof f!="string"&&t.stateNode===null)throw Error(Z(166));if(o=ki(Pn.current),ki(zt.current),pr(t)){if(f=t.stateNode,o=t.memoizedProps,f[Nt]=t,(_=f.nodeValue!==o)&&(e=Ct,e!==null))switch(e.tag){case 3:ar(f.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ar(f.nodeValue,o,(e.mode&1)!==0)}_&&(t.flags|=4)}else f=(o.nodeType===9?o:o.ownerDocument).createTextNode(f),f[Nt]=t,t.stateNode=f}return lt(t),null;case 13:if(We(He),f=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&St!==null&&t.mode&1&&!(t.flags&128))sl(),Vi(),t.flags|=98560,_=!1;else if(_=pr(t),f!==null&&f.dehydrated!==null){if(e===null){if(!_)throw Error(Z(318));if(_=t.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(Z(317));_[Nt]=t}else Vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lt(t),_=!1}else At!==null&&(Eo(At),At=null),_=!0;if(!_)return t.flags&65536?t:null}return t.flags&128?(t.lanes=o,t):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?et===0&&(et=3):Do())),t.updateQueue!==null&&(t.flags|=4),lt(t),null);case 4:return qi(),mo(e,t),e===null&&wn(t.stateNode.containerInfo),lt(t),null;case 10:return Ys(t.type._context),lt(t),null;case 17:return dt(t.type)&&cr(),lt(t),null;case 19:if(We(He),_=t.memoizedState,_===null)return lt(t),null;if(f=(t.flags&128)!==0,w=_.rendering,w===null)if(f)Ln(_,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(w=Sr(e),w!==null){for(t.flags|=128,Ln(_,!1),f=w.updateQueue,f!==null&&(t.updateQueue=f,t.flags|=4),t.subtreeFlags=0,f=o,o=t.child;o!==null;)_=o,e=f,_.flags&=14680066,w=_.alternate,w===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=w.childLanes,_.lanes=w.lanes,_.child=w.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=w.memoizedProps,_.memoizedState=w.memoizedState,_.updateQueue=w.updateQueue,_.type=w.type,e=w.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Ne(He,He.current&1|2),t.child}e=e.sibling}_.tail!==null&&Ke()>en&&(t.flags|=128,f=!0,Ln(_,!1),t.lanes=4194304)}else{if(!f)if(e=Sr(w),e!==null){if(t.flags|=128,f=!0,o=e.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),Ln(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!Ue)return lt(t),null}else 2*Ke()-_.renderingStartTime>en&&o!==1073741824&&(t.flags|=128,f=!0,Ln(_,!1),t.lanes=4194304);_.isBackwards?(w.sibling=t.child,t.child=w):(o=_.last,o!==null?o.sibling=w:t.child=w,_.last=w)}return _.tail!==null?(t=_.tail,_.rendering=t,_.tail=t.sibling,_.renderingStartTime=Ke(),t.sibling=null,o=He.current,Ne(He,f?o&1|2:o&1),t):(lt(t),null);case 22:case 23:return Po(),f=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(t.flags|=8192),f&&t.mode&1?wt&1073741824&&(lt(t),t.subtreeFlags&6&&(t.flags|=8192)):lt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function dh(e,t){switch(Is(t),t.tag){case 1:return dt(t.type)&&cr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qi(),We(ft),We(ot),qs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ks(t),null;case 13:if(We(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(He),null;case 4:return qi(),null;case 10:return Ys(t.type._context),null;case 22:case 23:return Po(),null;case 24:return null;default:return null}}var Dr=!1,ut=!1,gh=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ji(e,t){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(f){Ge(e,t,f)}else o.current=null}function vo(e,t,o){try{o()}catch(f){Ge(e,t,f)}}var nu=!1;function ph(e,t){if(bs=qn,e=ja(),Cs(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var f=o.getSelection&&o.getSelection();if(f&&f.rangeCount!==0){o=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var w=0,M=-1,A=-1,H=0,ue=0,he=e,ae=null;t:for(;;){for(var me;he!==o||m!==0&&he.nodeType!==3||(M=w+m),he!==_||f!==0&&he.nodeType!==3||(A=w+f),he.nodeType===3&&(w+=he.nodeValue.length),(me=he.firstChild)!==null;)ae=he,he=me;for(;;){if(he===e)break t;if(ae===o&&++H===m&&(M=w),ae===_&&++ue===f&&(A=w),(me=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=me}o=M===-1||A===-1?null:{start:M,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ps={focusedElem:e,selectionRange:o},qn=!1,ve=t;ve!==null;)if(t=ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ve=e;else for(;ve!==null;){t=ve;try{var _e=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Se=_e.memoizedProps,$e=_e.memoizedState,z=t.stateNode,R=z.getSnapshotBeforeUpdate(t.elementType===t.type?Se:Lt(t.type,Se),$e);z.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(de){Ge(t,t.return,de)}if(e=t.sibling,e!==null){e.return=t.return,ve=e;break}ve=t.return}return _e=nu,nu=!1,_e}function jn(e,t,o){var f=t.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&e)===e){var _=m.destroy;m.destroy=void 0,_!==void 0&&vo(t,o,_)}m=m.next}while(m!==f)}}function Mr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var o=t=t.next;do{if((o.tag&e)===e){var f=o.create;o.destroy=f()}o=o.next}while(o!==t)}}function yo(e){var t=e.ref;if(t!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof t=="function"?t(e):t.current=e}}function ru(e){var t=e.alternate;t!==null&&(e.alternate=null,ru(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nt],delete t[Tn],delete t[As],delete t[Qc],delete t[Jc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return e.tag===5||e.tag===3||e.tag===4}function ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _o(e,t,o){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?o.nodeType===8?o.parentNode.insertBefore(e,t):o.insertBefore(e,t):(o.nodeType===8?(t=o.parentNode,t.insertBefore(e,o)):(t=o,t.appendChild(e)),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=lr));else if(f!==4&&(e=e.child,e!==null))for(_o(e,t,o),e=e.sibling;e!==null;)_o(e,t,o),e=e.sibling}function Co(e,t,o){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(Co(e,t,o),e=e.sibling;e!==null;)Co(e,t,o),e=e.sibling}var rt=null,jt=!1;function fi(e,t,o){for(o=o.child;o!==null;)au(e,t,o),o=o.sibling}function au(e,t,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Un,o)}catch{}switch(o.tag){case 5:ut||Ji(o,t);case 6:var f=rt,m=jt;rt=null,fi(e,t,o),rt=f,jt=m,rt!==null&&(jt?(e=rt,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):rt.removeChild(o.stateNode));break;case 18:rt!==null&&(jt?(e=rt,o=o.stateNode,e.nodeType===8?Fs(e.parentNode,o):e.nodeType===1&&Fs(e,o),dn(e)):Fs(rt,o.stateNode));break;case 4:f=rt,m=jt,rt=o.stateNode.containerInfo,jt=!0,fi(e,t,o),rt=f,jt=m;break;case 0:case 11:case 14:case 15:if(!ut&&(f=o.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,w=_.destroy;_=_.tag,w!==void 0&&(_&2||_&4)&&vo(o,t,w),m=m.next}while(m!==f)}fi(e,t,o);break;case 1:if(!ut&&(Ji(o,t),f=o.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=o.memoizedProps,f.state=o.memoizedState,f.componentWillUnmount()}catch(M){Ge(o,t,M)}fi(e,t,o);break;case 21:fi(e,t,o);break;case 22:o.mode&1?(ut=(f=ut)||o.memoizedState!==null,fi(e,t,o),ut=f):fi(e,t,o);break;default:fi(e,t,o)}}function lu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new gh),t.forEach(function(f){var m=Th.bind(null,e,f);o.has(f)||(o.add(f),f.then(m,m))})}}function Rt(e,t){var o=t.deletions;if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];try{var _=e,w=t,M=w;e:for(;M!==null;){switch(M.tag){case 5:rt=M.stateNode,jt=!1;break e;case 3:rt=M.stateNode.containerInfo,jt=!0;break e;case 4:rt=M.stateNode.containerInfo,jt=!0;break e}M=M.return}if(rt===null)throw Error(Z(160));au(_,w,m),rt=null,jt=!1;var A=m.alternate;A!==null&&(A.return=null),m.return=null}catch(H){Ge(m,t,H)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uu(t,e),t=t.sibling}function uu(e,t){var o=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Wt(e),f&4){try{jn(3,e,e.return),Mr(3,e)}catch(Se){Ge(e,e.return,Se)}try{jn(5,e,e.return)}catch(Se){Ge(e,e.return,Se)}}break;case 1:Rt(t,e),Wt(e),f&512&&o!==null&&Ji(o,o.return);break;case 5:if(Rt(t,e),Wt(e),f&512&&o!==null&&Ji(o,o.return),e.flags&32){var m=e.stateNode;try{Je(m,"")}catch(Se){Ge(e,e.return,Se)}}if(f&4&&(m=e.stateNode,m!=null)){var _=e.memoizedProps,w=o!==null?o.memoizedProps:_,M=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&te(m,_),qr(M,w);var H=qr(M,_);for(w=0;w<A.length;w+=2){var ue=A[w],he=A[w+1];ue==="style"?Dt(m,he):ue==="dangerouslySetInnerHTML"?Ae(m,he):ue==="children"?Je(m,he):y(m,ue,he,H)}switch(M){case"input":J(m,_);break;case"textarea":ke(m,_);break;case"select":var ae=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var me=_.value;me!=null?ye(m,!!_.multiple,me,!1):ae!==!!_.multiple&&(_.defaultValue!=null?ye(m,!!_.multiple,_.defaultValue,!0):ye(m,!!_.multiple,_.multiple?[]:"",!1))}m[Tn]=_}catch(Se){Ge(e,e.return,Se)}}break;case 6:if(Rt(t,e),Wt(e),f&4){if(e.stateNode===null)throw Error(Z(162));m=e.stateNode,_=e.memoizedProps;try{m.nodeValue=_}catch(Se){Ge(e,e.return,Se)}}break;case 3:if(Rt(t,e),Wt(e),f&4&&o!==null&&o.memoizedState.isDehydrated)try{dn(t.containerInfo)}catch(Se){Ge(e,e.return,Se)}break;case 4:Rt(t,e),Wt(e);break;case 13:Rt(t,e),Wt(e),m=e.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(xo=Ke())),f&4&&lu(e);break;case 22:if(ue=o!==null&&o.memoizedState!==null,e.mode&1?(ut=(H=ut)||ue,Rt(t,e),ut=H):Rt(t,e),Wt(e),f&8192){if(H=e.memoizedState!==null,(e.stateNode.isHidden=H)&&!ue&&e.mode&1)for(ve=e,ue=e.child;ue!==null;){for(he=ve=ue;ve!==null;){switch(ae=ve,me=ae.child,ae.tag){case 0:case 11:case 14:case 15:jn(4,ae,ae.return);break;case 1:Ji(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){f=ae,o=ae.return;try{t=f,_e.props=t.memoizedProps,_e.state=t.memoizedState,_e.componentWillUnmount()}catch(Se){Ge(f,o,Se)}}break;case 5:Ji(ae,ae.return);break;case 22:if(ae.memoizedState!==null){fu(he);continue}}me!==null?(me.return=ae,ve=me):fu(he)}ue=ue.sibling}e:for(ue=null,he=e;;){if(he.tag===5){if(ue===null){ue=he;try{m=he.stateNode,H?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=he.stateNode,A=he.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,M.style.display=Zt("display",w))}catch(Se){Ge(e,e.return,Se)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=H?"":he.memoizedProps}catch(Se){Ge(e,e.return,Se)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===e)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===e)break e;for(;he.sibling===null;){if(he.return===null||he.return===e)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:Rt(t,e),Wt(e),f&4&&lu(e);break;case 21:break;default:Rt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var o=e.return;o!==null;){if(su(o)){var f=o;break e}o=o.return}throw Error(Z(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Je(m,""),f.flags&=-33);var _=ou(e);Co(e,_,m);break;case 3:case 4:var w=f.stateNode.containerInfo,M=ou(e);_o(e,M,w);break;default:throw Error(Z(161))}}catch(A){Ge(e,e.return,A)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mh(e,t,o){ve=e,cu(e)}function cu(e,t,o){for(var f=(e.mode&1)!==0;ve!==null;){var m=ve,_=m.child;if(m.tag===22&&f){var w=m.memoizedState!==null||Dr;if(!w){var M=m.alternate,A=M!==null&&M.memoizedState!==null||ut;M=Dr;var H=ut;if(Dr=w,(ut=A)&&!H)for(ve=m;ve!==null;)w=ve,A=w.child,w.tag===22&&w.memoizedState!==null?du(m):A!==null?(A.return=w,ve=A):du(m);for(;_!==null;)ve=_,cu(_),_=_.sibling;ve=m,Dr=M,ut=H}hu(e)}else m.subtreeFlags&8772&&_!==null?(_.return=m,ve=_):hu(e)}}function hu(e){for(;ve!==null;){var t=ve;if(t.flags&8772){var o=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||Mr(5,t);break;case 1:var f=t.stateNode;if(t.flags&4&&!ut)if(o===null)f.componentDidMount();else{var m=t.elementType===t.type?o.memoizedProps:Lt(t.type,o.memoizedProps);f.componentDidUpdate(m,o.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=t.updateQueue;_!==null&&fl(t,_,f);break;case 3:var w=t.updateQueue;if(w!==null){if(o=null,t.child!==null)switch(t.child.tag){case 5:o=t.child.stateNode;break;case 1:o=t.child.stateNode}fl(t,w,o)}break;case 5:var M=t.stateNode;if(o===null&&t.flags&4){o=M;var A=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&o.focus();break;case"img":A.src&&(o.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var H=t.alternate;if(H!==null){var ue=H.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&dn(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}ut||t.flags&512&&yo(t)}catch(ae){Ge(t,t.return,ae)}}if(t===e){ve=null;break}if(o=t.sibling,o!==null){o.return=t.return,ve=o;break}ve=t.return}}function fu(e){for(;ve!==null;){var t=ve;if(t===e){ve=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ve=o;break}ve=t.return}}function du(e){for(;ve!==null;){var t=ve;try{switch(t.tag){case 0:case 11:case 15:var o=t.return;try{Mr(4,t)}catch(A){Ge(t,o,A)}break;case 1:var f=t.stateNode;if(typeof f.componentDidMount=="function"){var m=t.return;try{f.componentDidMount()}catch(A){Ge(t,m,A)}}var _=t.return;try{yo(t)}catch(A){Ge(t,_,A)}break;case 5:var w=t.return;try{yo(t)}catch(A){Ge(t,w,A)}}}catch(A){Ge(t,t.return,A)}if(t===e){ve=null;break}var M=t.sibling;if(M!==null){M.return=t.return,ve=M;break}ve=t.return}}var vh=Math.ceil,Fr=C.ReactCurrentDispatcher,So=C.ReactCurrentOwner,Et=C.ReactCurrentBatchConfig,Le=0,it=null,Qe=null,st=0,wt=0,Zi=ai(0),et=0,Rn=null,Ei=0,Ar=0,wo=0,In=null,pt=null,xo=0,en=1/0,qt=null,Lr=!1,To=null,di=null,jr=!1,gi=null,Rr=0,Bn=0,ko=null,Ir=-1,Br=0;function ht(){return Le&6?Ke():Ir!==-1?Ir:Ir=Ke()}function pi(e){return e.mode&1?Le&2&&st!==0?st&-st:eh.transition!==null?(Br===0&&(Br=oa()),Br):(e=Re,e!==0||(e=window.event,e=e===void 0?16:pa(e.type)),e):1}function It(e,t,o,f){if(50<Bn)throw Bn=0,ko=null,Error(Z(185));ln(e,o,f),(!(Le&2)||e!==it)&&(e===it&&(!(Le&2)&&(Ar|=o),et===4&&mi(e,st)),mt(e,f),o===1&&Le===0&&!(t.mode&1)&&(en=Ke()+500,fr&&ui()))}function mt(e,t){var o=e.callbackNode;ec(e,t);var f=Gn(e,e===it?st:0);if(f===0)o!==null&&na(o),e.callbackNode=null,e.callbackPriority=0;else if(t=f&-f,e.callbackPriority!==t){if(o!=null&&na(o),t===1)e.tag===0?Zc(pu.bind(null,e)):el(pu.bind(null,e)),$c(function(){!(Le&6)&&ui()}),o=null;else{switch(aa(f)){case 1:o=ns;break;case 4:o=ra;break;case 16:o=Yn;break;case 536870912:o=sa;break;default:o=Yn}o=xu(o,gu.bind(null,e))}e.callbackPriority=t,e.callbackNode=o}}function gu(e,t){if(Ir=-1,Br=0,Le&6)throw Error(Z(327));var o=e.callbackNode;if(tn()&&e.callbackNode!==o)return null;var f=Gn(e,e===it?st:0);if(f===0)return null;if(f&30||f&e.expiredLanes||t)t=Nr(e,f);else{t=f;var m=Le;Le|=2;var _=vu();(it!==e||st!==t)&&(qt=null,en=Ke()+500,Pi(e,t));do try{Ch();break}catch(M){mu(e,M)}while(!0);Ws(),Fr.current=_,Le=m,Qe!==null?t=0:(it=null,st=0,t=et)}if(t!==0){if(t===2&&(m=rs(e),m!==0&&(f=m,t=Oo(e,m))),t===1)throw o=Rn,Pi(e,0),mi(e,f),mt(e,Ke()),o;if(t===6)mi(e,f);else{if(m=e.current.alternate,!(f&30)&&!yh(m)&&(t=Nr(e,f),t===2&&(_=rs(e),_!==0&&(f=_,t=Oo(e,_))),t===1))throw o=Rn,Pi(e,0),mi(e,f),mt(e,Ke()),o;switch(e.finishedWork=m,e.finishedLanes=f,t){case 0:case 1:throw Error(Z(345));case 2:Di(e,pt,qt);break;case 3:if(mi(e,f),(f&130023424)===f&&(t=xo+500-Ke(),10<t)){if(Gn(e,0)!==0)break;if(m=e.suspendedLanes,(m&f)!==f){ht(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=Ms(Di.bind(null,e,pt,qt),t);break}Di(e,pt,qt);break;case 4:if(mi(e,f),(f&4194240)===f)break;for(t=e.eventTimes,m=-1;0<f;){var w=31-Mt(f);_=1<<w,w=t[w],w>m&&(m=w),f&=~_}if(f=m,f=Ke()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vh(f/1960))-f,10<f){e.timeoutHandle=Ms(Di.bind(null,e,pt,qt),f);break}Di(e,pt,qt);break;case 5:Di(e,pt,qt);break;default:throw Error(Z(329))}}}return mt(e,Ke()),e.callbackNode===o?gu.bind(null,e):null}function Oo(e,t){var o=In;return e.current.memoizedState.isDehydrated&&(Pi(e,t).flags|=256),e=Nr(e,t),e!==2&&(t=pt,pt=o,t!==null&&Eo(t)),e}function Eo(e){pt===null?pt=e:pt.push.apply(pt,e)}function yh(e){for(var t=e;;){if(t.flags&16384){var o=t.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var f=0;f<o.length;f++){var m=o[f],_=m.getSnapshot;m=m.value;try{if(!Ft(_(),m))return!1}catch{return!1}}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t){for(t&=~wo,t&=~Ar,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var o=31-Mt(t),f=1<<o;e[o]=-1,t&=~f}}function pu(e){if(Le&6)throw Error(Z(327));tn();var t=Gn(e,0);if(!(t&1))return mt(e,Ke()),null;var o=Nr(e,t);if(e.tag!==0&&o===2){var f=rs(e);f!==0&&(t=f,o=Oo(e,f))}if(o===1)throw o=Rn,Pi(e,0),mi(e,t),mt(e,Ke()),o;if(o===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Di(e,pt,qt),mt(e,Ke()),null}function bo(e,t){var o=Le;Le|=1;try{return e(t)}finally{Le=o,Le===0&&(en=Ke()+500,fr&&ui())}}function bi(e){gi!==null&&gi.tag===0&&!(Le&6)&&tn();var t=Le;Le|=1;var o=Et.transition,f=Re;try{if(Et.transition=null,Re=1,e)return e()}finally{Re=f,Et.transition=o,Le=t,!(Le&6)&&ui()}}function Po(){wt=Zi.current,We(Zi)}function Pi(e,t){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,Kc(o)),Qe!==null)for(o=Qe.return;o!==null;){var f=o;switch(Is(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&cr();break;case 3:qi(),We(ft),We(ot),qs();break;case 5:Ks(f);break;case 4:qi();break;case 13:We(He);break;case 19:We(He);break;case 10:Ys(f.type._context);break;case 22:case 23:Po()}o=o.return}if(it=e,Qe=e=vi(e.current,null),st=wt=t,et=0,Rn=null,wo=Ar=Ei=0,pt=In=null,Ti!==null){for(t=0;t<Ti.length;t++)if(o=Ti[t],f=o.interleaved,f!==null){o.interleaved=null;var m=f.next,_=o.pending;if(_!==null){var w=_.next;_.next=m,f.next=w}o.pending=f}Ti=null}return e}function mu(e,t){do{var o=Qe;try{if(Ws(),wr.current=Or,xr){for(var f=Ve.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}xr=!1}if(Oi=0,tt=Ze=Ve=null,Dn=!1,Mn=0,So.current=null,o===null||o.return===null){et=1,Rn=t,Qe=null;break}e:{var _=e,w=o.return,M=o,A=t;if(t=st,M.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var H=A,ue=M,he=ue.tag;if(!(ue.mode&1)&&(he===0||he===11||he===15)){var ae=ue.alternate;ae?(ue.updateQueue=ae.updateQueue,ue.memoizedState=ae.memoizedState,ue.lanes=ae.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var me=Xl(w);if(me!==null){me.flags&=-257,Wl(me,w,M,_,t),me.mode&1&&zl(_,H,t),t=me,A=H;var _e=t.updateQueue;if(_e===null){var Se=new Set;Se.add(A),t.updateQueue=Se}else _e.add(A);break e}else{if(!(t&1)){zl(_,H,t),Do();break e}A=Error(Z(426))}}else if(Ue&&M.mode&1){var $e=Xl(w);if($e!==null){!($e.flags&65536)&&($e.flags|=256),Wl($e,w,M,_,t),zs(Qi(A,M));break e}}_=A=Qi(A,M),et!==4&&(et=2),In===null?In=[_]:In.push(_),_=w;do{switch(_.tag){case 3:_.flags|=65536,t&=-t,_.lanes|=t;var z=Bl(_,A,t);hl(_,z);break e;case 1:M=A;var R=_.type,W=_.stateNode;if(!(_.flags&128)&&(typeof R.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(di===null||!di.has(W)))){_.flags|=65536,t&=-t,_.lanes|=t;var de=Nl(_,M,t);hl(_,de);break e}}_=_.return}while(_!==null)}_u(o)}catch(we){t=we,Qe===o&&o!==null&&(Qe=o=o.return);continue}break}while(!0)}function vu(){var e=Fr.current;return Fr.current=Or,e===null?Or:e}function Do(){(et===0||et===3||et===2)&&(et=4),it===null||!(Ei&268435455)&&!(Ar&268435455)||mi(it,st)}function Nr(e,t){var o=Le;Le|=2;var f=vu();(it!==e||st!==t)&&(qt=null,Pi(e,t));do try{_h();break}catch(m){mu(e,m)}while(!0);if(Ws(),Le=o,Fr.current=f,Qe!==null)throw Error(Z(261));return it=null,st=0,et}function _h(){for(;Qe!==null;)yu(Qe)}function Ch(){for(;Qe!==null&&!Hu();)yu(Qe)}function yu(e){var t=wu(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?_u(e):Qe=t,So.current=null}function _u(e){var t=e;do{var o=t.alternate;if(e=t.return,t.flags&32768){if(o=dh(o,t),o!==null){o.flags&=32767,Qe=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Qe=null;return}}else if(o=fh(o,t,wt),o!==null){Qe=o;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);et===0&&(et=5)}function Di(e,t,o){var f=Re,m=Et.transition;try{Et.transition=null,Re=1,Sh(e,t,o,f)}finally{Et.transition=m,Re=f}return null}function Sh(e,t,o,f){do tn();while(gi!==null);if(Le&6)throw Error(Z(327));o=e.finishedWork;var m=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var _=o.lanes|o.childLanes;if(tc(e,_),e===it&&(Qe=it=null,st=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||jr||(jr=!0,xu(Yn,function(){return tn(),null})),_=(o.flags&15990)!==0,o.subtreeFlags&15990||_){_=Et.transition,Et.transition=null;var w=Re;Re=1;var M=Le;Le|=4,So.current=null,ph(e,o),uu(o,e),Xc(Ps),qn=!!bs,Ps=bs=null,e.current=o,mh(o),Vu(),Le=M,Re=w,Et.transition=_}else e.current=o;if(jr&&(jr=!1,gi=e,Rr=m),_=e.pendingLanes,_===0&&(di=null),$u(o.stateNode),mt(e,Ke()),t!==null)for(f=e.onRecoverableError,o=0;o<t.length;o++)m=t[o],f(m.value,{componentStack:m.stack,digest:m.digest});if(Lr)throw Lr=!1,e=To,To=null,e;return Rr&1&&e.tag!==0&&tn(),_=e.pendingLanes,_&1?e===ko?Bn++:(Bn=0,ko=e):Bn=0,ui(),null}function tn(){if(gi!==null){var e=aa(Rr),t=Et.transition,o=Re;try{if(Et.transition=null,Re=16>e?16:e,gi===null)var f=!1;else{if(e=gi,gi=null,Rr=0,Le&6)throw Error(Z(331));var m=Le;for(Le|=4,ve=e.current;ve!==null;){var _=ve,w=_.child;if(ve.flags&16){var M=_.deletions;if(M!==null){for(var A=0;A<M.length;A++){var H=M[A];for(ve=H;ve!==null;){var ue=ve;switch(ue.tag){case 0:case 11:case 15:jn(8,ue,_)}var he=ue.child;if(he!==null)he.return=ue,ve=he;else for(;ve!==null;){ue=ve;var ae=ue.sibling,me=ue.return;if(ru(ue),ue===H){ve=null;break}if(ae!==null){ae.return=me,ve=ae;break}ve=me}}}var _e=_.alternate;if(_e!==null){var Se=_e.child;if(Se!==null){_e.child=null;do{var $e=Se.sibling;Se.sibling=null,Se=$e}while(Se!==null)}}ve=_}}if(_.subtreeFlags&2064&&w!==null)w.return=_,ve=w;else e:for(;ve!==null;){if(_=ve,_.flags&2048)switch(_.tag){case 0:case 11:case 15:jn(9,_,_.return)}var z=_.sibling;if(z!==null){z.return=_.return,ve=z;break e}ve=_.return}}var R=e.current;for(ve=R;ve!==null;){w=ve;var W=w.child;if(w.subtreeFlags&2064&&W!==null)W.return=w,ve=W;else e:for(w=R;ve!==null;){if(M=ve,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Mr(9,M)}}catch(we){Ge(M,M.return,we)}if(M===w){ve=null;break e}var de=M.sibling;if(de!==null){de.return=M.return,ve=de;break e}ve=M.return}}if(Le=m,ui(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Un,e)}catch{}f=!0}return f}finally{Re=o,Et.transition=t}}return!1}function Cu(e,t,o){t=Qi(o,t),t=Bl(e,t,1),e=hi(e,t,1),t=ht(),e!==null&&(ln(e,1,t),mt(e,t))}function Ge(e,t,o){if(e.tag===3)Cu(e,e,o);else for(;t!==null;){if(t.tag===3){Cu(t,e,o);break}else if(t.tag===1){var f=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(di===null||!di.has(f))){e=Qi(o,e),e=Nl(t,e,1),t=hi(t,e,1),e=ht(),t!==null&&(ln(t,1,e),mt(t,e));break}}t=t.return}}function wh(e,t,o){var f=e.pingCache;f!==null&&f.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&o,it===e&&(st&o)===o&&(et===4||et===3&&(st&130023424)===st&&500>Ke()-xo?Pi(e,0):wo|=o),mt(e,t)}function Su(e,t){t===0&&(e.mode&1?(t=Vn,Vn<<=1,!(Vn&130023424)&&(Vn=4194304)):t=1);var o=ht();e=Gt(e,t),e!==null&&(ln(e,t,o),mt(e,o))}function xh(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Su(e,o)}function Th(e,t){var o=0;switch(e.tag){case 13:var f=e.stateNode,m=e.memoizedState;m!==null&&(o=m.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(Z(314))}f!==null&&f.delete(t),Su(e,o)}var wu;wu=function(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)gt=!0;else{if(!(e.lanes&o)&&!(t.flags&128))return gt=!1,hh(e,t,o);gt=!!(e.flags&131072)}else gt=!1,Ue&&t.flags&1048576&&tl(t,gr,t.index);switch(t.lanes=0,t.tag){case 2:var f=t.type;Pr(e,t),e=t.pendingProps;var m=Yi(t,ot.current);$i(t,o),m=Zs(null,t,f,e,m,o);var _=eo();return t.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(f)?(_=!0,hr(t)):_=!1,t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Vs(t),m.updater=Er,t.stateNode=m,m._reactInternals=t,oo(t,f,e,o),t=co(null,t,f,!0,_,o)):(t.tag=0,Ue&&_&&Rs(t),ct(null,t,m,o),t=t.child),t;case 16:f=t.elementType;e:{switch(Pr(e,t),e=t.pendingProps,m=f._init,f=m(f._payload),t.type=f,m=t.tag=Oh(f),e=Lt(f,e),m){case 0:t=uo(null,t,f,e,o);break e;case 1:t=Kl(null,t,f,e,o);break e;case 11:t=Yl(null,t,f,e,o);break e;case 14:t=Ul(null,t,f,Lt(f.type,e),o);break e}throw Error(Z(306,f,""))}return t;case 0:return f=t.type,m=t.pendingProps,m=t.elementType===f?m:Lt(f,m),uo(e,t,f,m,o);case 1:return f=t.type,m=t.pendingProps,m=t.elementType===f?m:Lt(f,m),Kl(e,t,f,m,o);case 3:e:{if($l(t),e===null)throw Error(Z(387));f=t.pendingProps,_=t.memoizedState,m=_.element,cl(e,t),Cr(t,f,null,o);var w=t.memoizedState;if(f=w.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},t.updateQueue.baseState=_,t.memoizedState=_,t.flags&256){m=Qi(Error(Z(423)),t),t=ql(e,t,f,o,m);break e}else if(f!==m){m=Qi(Error(Z(424)),t),t=ql(e,t,f,o,m);break e}else for(St=oi(t.stateNode.containerInfo.firstChild),Ct=t,Ue=!0,At=null,o=ll(t,null,f,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Vi(),f===m){t=$t(e,t,o);break e}ct(e,t,f,o)}t=t.child}return t;case 5:return dl(t),e===null&&Ns(t),f=t.type,m=t.pendingProps,_=e!==null?e.memoizedProps:null,w=m.children,Ds(f,m)?w=null:_!==null&&Ds(f,_)&&(t.flags|=32),Gl(e,t),ct(e,t,w,o),t.child;case 6:return e===null&&Ns(t),null;case 13:return Ql(e,t,o);case 4:return Gs(t,t.stateNode.containerInfo),f=t.pendingProps,e===null?t.child=Gi(t,null,f,o):ct(e,t,f,o),t.child;case 11:return f=t.type,m=t.pendingProps,m=t.elementType===f?m:Lt(f,m),Yl(e,t,f,m,o);case 7:return ct(e,t,t.pendingProps,o),t.child;case 8:return ct(e,t,t.pendingProps.children,o),t.child;case 12:return ct(e,t,t.pendingProps.children,o),t.child;case 10:e:{if(f=t.type._context,m=t.pendingProps,_=t.memoizedProps,w=m.value,Ne(vr,f._currentValue),f._currentValue=w,_!==null)if(Ft(_.value,w)){if(_.children===m.children&&!ft.current){t=$t(e,t,o);break e}}else for(_=t.child,_!==null&&(_.return=t);_!==null;){var M=_.dependencies;if(M!==null){w=_.child;for(var A=M.firstContext;A!==null;){if(A.context===f){if(_.tag===1){A=Kt(-1,o&-o),A.tag=2;var H=_.updateQueue;if(H!==null){H=H.shared;var ue=H.pending;ue===null?A.next=A:(A.next=ue.next,ue.next=A),H.pending=A}}_.lanes|=o,A=_.alternate,A!==null&&(A.lanes|=o),Us(_.return,o,t),M.lanes|=o;break}A=A.next}}else if(_.tag===10)w=_.type===t.type?null:_.child;else if(_.tag===18){if(w=_.return,w===null)throw Error(Z(341));w.lanes|=o,M=w.alternate,M!==null&&(M.lanes|=o),Us(w,o,t),w=_.sibling}else w=_.child;if(w!==null)w.return=_;else for(w=_;w!==null;){if(w===t){w=null;break}if(_=w.sibling,_!==null){_.return=w.return,w=_;break}w=w.return}_=w}ct(e,t,m.children,o),t=t.child}return t;case 9:return m=t.type,f=t.pendingProps.children,$i(t,o),m=kt(m),f=f(m),t.flags|=1,ct(e,t,f,o),t.child;case 14:return f=t.type,m=Lt(f,t.pendingProps),m=Lt(f.type,m),Ul(e,t,f,m,o);case 15:return Hl(e,t,t.type,t.pendingProps,o);case 17:return f=t.type,m=t.pendingProps,m=t.elementType===f?m:Lt(f,m),Pr(e,t),t.tag=1,dt(f)?(e=!0,hr(t)):e=!1,$i(t,o),Rl(t,f,m),oo(t,f,m,o),co(null,t,f,!0,e,o);case 19:return Zl(e,t,o);case 22:return Vl(e,t,o)}throw Error(Z(156,t.tag))};function xu(e,t){return ia(e,t)}function kh(e,t,o,f){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,o,f){return new kh(e,t,o,f)}function Mo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oh(e){if(typeof e=="function")return Mo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===V)return 11;if(e===fe)return 14}return 2}function vi(e,t){var o=e.alternate;return o===null?(o=bt(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function zr(e,t,o,f,m,_){var w=2;if(f=e,typeof e=="function")Mo(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case P:return Mi(o.children,m,_,t);case L:w=8,m|=8;break;case G:return e=bt(12,o,t,m|2),e.elementType=G,e.lanes=_,e;case q:return e=bt(13,o,t,m),e.elementType=q,e.lanes=_,e;case ne:return e=bt(19,o,t,m),e.elementType=ne,e.lanes=_,e;case ge:return Xr(o,m,_,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case re:w=10;break e;case le:w=9;break e;case V:w=11;break e;case fe:w=14;break e;case pe:w=16,f=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=bt(w,o,t,m),t.elementType=e,t.type=f,t.lanes=_,t}function Mi(e,t,o,f){return e=bt(7,e,f,t),e.lanes=o,e}function Xr(e,t,o,f){return e=bt(22,e,f,t),e.elementType=ge,e.lanes=o,e.stateNode={isHidden:!1},e}function Fo(e,t,o){return e=bt(6,e,null,t),e.lanes=o,e}function Ao(e,t,o){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eh(e,t,o,f,m){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ss(0),this.expirationTimes=ss(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Lo(e,t,o,f,m,_,w,M,A){return e=new Eh(e,t,o,M,A),t===1?(t=1,_===!0&&(t|=8)):t=0,_=bt(3,null,null,t),e.current=_,_.stateNode=e,_.memoizedState={element:f,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vs(_),e}function bh(e,t,o){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:e,containerInfo:t,implementation:o}}function Tu(e){if(!e)return li;e=e._reactInternals;e:{if(_i(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var o=e.type;if(dt(o))return Ja(e,o,t)}return t}function ku(e,t,o,f,m,_,w,M,A){return e=Lo(o,f,!0,e,m,_,w,M,A),e.context=Tu(null),o=e.current,f=ht(),m=pi(o),_=Kt(f,m),_.callback=t??null,hi(o,_,m),e.current.lanes=m,ln(e,m,f),mt(e,f),e}function Wr(e,t,o,f){var m=t.current,_=ht(),w=pi(m);return o=Tu(o),t.context===null?t.context=o:t.pendingContext=o,t=Kt(_,w),t.payload={element:e},f=f===void 0?null:f,f!==null&&(t.callback=f),e=hi(m,t,w),e!==null&&(It(e,m,w,_),_r(e,m,w)),w}function Yr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function jo(e,t){Ou(e,t),(e=e.alternate)&&Ou(e,t)}function Ph(){return null}var Eu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ro(e){this._internalRoot=e}Ur.prototype.render=Ro.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));Wr(e,t,null,null)},Ur.prototype.unmount=Ro.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bi(function(){Wr(null,e,null,null)}),t[Yt]=null}};function Ur(e){this._internalRoot=e}Ur.prototype.unstable_scheduleHydration=function(e){if(e){var t=ca();e={blockedOn:null,target:e,priority:t};for(var o=0;o<ni.length&&t!==0&&t<ni[o].priority;o++);ni.splice(o,0,e),o===0&&da(e)}};function Io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bu(){}function Dh(e,t,o,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var H=Yr(w);_.call(H)}}var w=ku(t,f,e,0,null,!1,!1,"",bu);return e._reactRootContainer=w,e[Yt]=w.current,wn(e.nodeType===8?e.parentNode:e),bi(),w}for(;m=e.lastChild;)e.removeChild(m);if(typeof f=="function"){var M=f;f=function(){var H=Yr(A);M.call(H)}}var A=Lo(e,0,!1,null,null,!1,!1,"",bu);return e._reactRootContainer=A,e[Yt]=A.current,wn(e.nodeType===8?e.parentNode:e),bi(function(){Wr(t,A,o,f)}),A}function Vr(e,t,o,f,m){var _=o._reactRootContainer;if(_){var w=_;if(typeof m=="function"){var M=m;m=function(){var A=Yr(w);M.call(A)}}Wr(t,w,e,m)}else w=Dh(o,t,e,m,f);return Yr(w)}la=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var o=an(t.pendingLanes);o!==0&&(os(t,o|1),mt(t,Ke()),!(Le&6)&&(en=Ke()+500,ui()))}break;case 13:bi(function(){var f=Gt(e,1);if(f!==null){var m=ht();It(f,e,1,m)}}),jo(e,1)}},as=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var o=ht();It(t,e,134217728,o)}jo(e,134217728)}},ua=function(e){if(e.tag===13){var t=pi(e),o=Gt(e,t);if(o!==null){var f=ht();It(o,e,t,f)}jo(e,t)}},ca=function(){return Re},ha=function(e,t){var o=Re;try{return Re=e,t()}finally{Re=o}},Zr=function(e,t,o){switch(t){case"input":if(J(e,o),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<o.length;t++){var f=o[t];if(f!==e&&f.form===e.form){var m=ur(f);if(!m)throw Error(Z(90));oe(f),J(f,m)}}}break;case"textarea":ke(e,o);break;case"select":t=o.value,t!=null&&ye(e,!!o.multiple,t,!1)}},$o=bo,qo=bi;var Mh={usingClientEntryPoint:!1,Events:[kn,Xi,ur,Go,Ko,bo]},Nn={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fh={bundleType:Nn.bundleType,version:Nn.version,rendererPackageName:Nn.rendererPackageName,rendererConfig:Nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ea(e),e===null?null:e.stateNode},findFiberByHostInstance:Nn.findFiberByHostInstance||Ph,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gr.isDisabled&&Gr.supportsFiber)try{Un=Gr.inject(Fh),Bt=Gr}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mh,vt.createPortal=function(e,t){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Io(t))throw Error(Z(200));return bh(e,t,null,o)},vt.createRoot=function(e,t){if(!Io(e))throw Error(Z(299));var o=!1,f="",m=Eu;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(f=t.identifierPrefix),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Lo(e,1,!1,null,null,o,!1,f,m),e[Yt]=t.current,wn(e.nodeType===8?e.parentNode:e),new Ro(t)},vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=ea(t),e=e===null?null:e.stateNode,e},vt.flushSync=function(e){return bi(e)},vt.hydrate=function(e,t,o){if(!Hr(t))throw Error(Z(200));return Vr(null,e,t,!0,o)},vt.hydrateRoot=function(e,t,o){if(!Io(e))throw Error(Z(405));var f=o!=null&&o.hydratedSources||null,m=!1,_="",w=Eu;if(o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(_=o.identifierPrefix),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),t=ku(t,null,e,1,o??null,m,!1,_,w),e[Yt]=t.current,wn(e),f)for(e=0;e<f.length;e++)o=f[e],m=o._getVersion,m=m(o._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[o,m]:t.mutableSourceEagerHydrationData.push(o,m);return new Ur(t)},vt.render=function(e,t,o){if(!Hr(t))throw Error(Z(200));return Vr(null,e,t,!1,o)},vt.unmountComponentAtNode=function(e){if(!Hr(e))throw Error(Z(40));return e._reactRootContainer?(bi(function(){Vr(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1},vt.unstable_batchedUpdates=bo,vt.unstable_renderSubtreeIntoContainer=function(e,t,o,f){if(!Hr(o))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Vr(e,t,o,!1,f)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var Ru;function Wh(){if(Ru)return zo.exports;Ru=1;function U(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U)}catch(v){console.error(v)}}return U(),zo.exports=Xh(),zo.exports}var Iu;function Yh(){if(Iu)return Kr;Iu=1;var U=Wh();return Kr.createRoot=U.createRoot,Kr.hydrateRoot=U.hydrateRoot,Kr}var Uh=Yh();const Hh=Nu(Uh);var Yo={};const Vh={},Gh=Object.freeze(Object.defineProperty({__proto__:null,default:Vh},Symbol.toStringTag,{value:"Module"})),Uo=Lh(Gh);var Bu;function Kh(){return Bu||(Bu=1,function(U){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var v=v||{version:"4.6.0"};if(U.fabric=v,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?v.document=document:v.document=document.implementation.createHTMLDocument(""),v.window=window;else{var Z=Uo,ze=new Z.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;v.document=ze.document,v.jsdomImplForWrapper=Uo.implForWrapper,v.nodeCanvas=Uo.Canvas,v.window=ze,DOMParser=v.window.DOMParser}v.isTouchSupported="ontouchstart"in v.window||"ontouchstart"in v.document||v.window&&v.window.navigator&&v.window.navigator.maxTouchPoints>0,v.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",v.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],v.DPI=96,v.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",v.commaWsp="(?:\\s+,?\\s*|,\\s*)",v.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,v.reNonWord=/[ \n\.,;!\?\-]/,v.fontPaths={},v.iMatrix=[1,0,0,1,0,0],v.svgNS="http://www.w3.org/2000/svg",v.perfLimitSizeTotal=2097152,v.maxCacheSideLimit=4096,v.minCacheSideLimit=256,v.charWidthsCache={},v.textureSize=2048,v.disableStyleCopyPaste=!1,v.enableGLFiltering=!0,v.devicePixelRatio=v.window.devicePixelRatio||v.window.webkitDevicePixelRatio||v.window.mozDevicePixelRatio||1,v.browserShadowBlurConstant=1,v.arcToSegmentsCache={},v.boundsOfCurveCache={},v.cachesBoundsOfCurve=!0,v.forceGLPutImageData=!1,v.initFilterBackend=function(){if(v.enableGLFiltering&&v.isWebglSupported&&v.isWebglSupported(v.textureSize))return console.log("max texture size: "+v.maxTextureSize),new v.WebglFilterBackend({tileSize:v.textureSize});if(v.Canvas2dFilterBackend)return new v.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=v),function(){function g(i,a){if(this.__eventListeners[i]){var h=this.__eventListeners[i];a?h[h.indexOf(a)]=!1:v.util.array.fill(h,!1)}}function l(i,a){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var h in i)this.on(h,i[h]);else this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(a);return this}function c(i,a){var h=(function(){a.apply(this,arguments),this.off(i,h)}).bind(this);this.on(i,h)}function u(i,a){if(arguments.length===1)for(var h in i)c.call(this,h,i[h]);else c.call(this,i,a);return this}function n(i,a){if(!this.__eventListeners)return this;if(arguments.length===0)for(i in this.__eventListeners)g.call(this,i);else if(arguments.length===1&&typeof arguments[0]=="object")for(var h in i)g.call(this,h,i[h]);else g.call(this,i,a);return this}function r(i,a){if(!this.__eventListeners)return this;var h=this.__eventListeners[i];if(!h)return this;for(var s=0,d=h.length;s<d;s++)h[s]&&h[s].call(this,a||{});return this.__eventListeners[i]=h.filter(function(p){return p!==!1}),this}v.Observable={fire:r,on:l,once:u,off:n}}(),v.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,l=arguments.length;g<l;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,l,c){var u=this._objects;return c?u[l]=g:u.splice(l,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,l,c=!1,u=0,n=arguments.length;u<n;u++)l=g.indexOf(arguments[u]),l!==-1&&(c=!0,g.splice(l,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(g,l){for(var c=this.getObjects(),u=0,n=c.length;u<n;u++)g.call(l,c[u],u,c);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(l){return l.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,l){return this._objects.indexOf(g)>-1?!0:l?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,l){return g+=l.complexity?l.complexity():0,g},0)}},v.CommonMethods={_setOptions:function(g){for(var l in g)this.set(l,g[l])},_initGradient:function(g,l){g&&g.colorStops&&!(g instanceof v.Gradient)&&this.set(l,new v.Gradient(g))},_initPattern:function(g,l,c){g&&g.source&&!(g instanceof v.Pattern)?this.set(l,new v.Pattern(g,c)):c&&c()},_setObject:function(g){for(var l in g)this._set(l,g[l])},set:function(g,l){return typeof g=="object"?this._setObject(g):this._set(g,l),this},_set:function(g,l){this[g]=l},toggle:function(g){var l=this.get(g);return typeof l=="boolean"&&this.set(g,!l),this},get:function(g){return this[g]}},function(g){var l=Math.sqrt,c=Math.atan2,u=Math.pow,n=Math.PI/180,r=Math.PI/2;v.util={cos:function(i){if(i===0)return 1;i<0&&(i=-i);var a=i/r;switch(a){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(i===0)return 0;var a=i/r,h=1;switch(i<0&&(h=-1),a){case 1:return h;case 2:return 0;case 3:return-h}return Math.sin(i)},removeFromArray:function(i,a){var h=i.indexOf(a);return h!==-1&&i.splice(h,1),i},getRandomInt:function(i,a){return Math.floor(Math.random()*(a-i+1))+i},degreesToRadians:function(i){return i*n},radiansToDegrees:function(i){return i/n},rotatePoint:function(i,a,h){var s=new v.Point(i.x-a.x,i.y-a.y),d=v.util.rotateVector(s,h);return new v.Point(d.x,d.y).addEquals(a)},rotateVector:function(i,a){var h=v.util.sin(a),s=v.util.cos(a),d=i.x*s-i.y*h,p=i.x*h+i.y*s;return{x:d,y:p}},transformPoint:function(i,a,h){return h?new v.Point(a[0]*i.x+a[2]*i.y,a[1]*i.x+a[3]*i.y):new v.Point(a[0]*i.x+a[2]*i.y+a[4],a[1]*i.x+a[3]*i.y+a[5])},makeBoundingBoxFromPoints:function(i,a){if(a)for(var h=0;h<i.length;h++)i[h]=v.util.transformPoint(i[h],a);var s=[i[0].x,i[1].x,i[2].x,i[3].x],d=v.util.array.min(s),p=v.util.array.max(s),y=p-d,C=[i[0].y,i[1].y,i[2].y,i[3].y],S=v.util.array.min(C),T=v.util.array.max(C),P=T-S;return{left:d,top:S,width:y,height:P}},invertTransform:function(i){var a=1/(i[0]*i[3]-i[1]*i[2]),h=[a*i[3],-a*i[1],-a*i[2],a*i[0]],s=v.util.transformPoint({x:i[4],y:i[5]},h,!0);return h[4]=-s.x,h[5]=-s.y,h},toFixed:function(i,a){return parseFloat(Number(i).toFixed(a))},parseUnit:function(i,a){var h=/\D{0,2}$/.exec(i),s=parseFloat(i);switch(a||(a=v.Text.DEFAULT_SVG_FONT_SIZE),h[0]){case"mm":return s*v.DPI/25.4;case"cm":return s*v.DPI/2.54;case"in":return s*v.DPI;case"pt":return s*v.DPI/72;case"pc":return s*v.DPI/72*12;case"em":return s*a;default:return s}},falseFunction:function(){return!1},getKlass:function(i,a){return i=v.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),v.util.resolveNamespace(a)[i]},getSvgAttributes:function(i){var a=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"]);break}return a},resolveNamespace:function(i){if(!i)return v;var a=i.split("."),h=a.length,s,d=g||v.window;for(s=0;s<h;++s)d=d[a[s]];return d},loadImage:function(i,a,h,s){if(!i){a&&a.call(h,i);return}var d=v.util.createImage(),p=function(){a&&a.call(h,d,!1),d=d.onload=d.onerror=null};d.onload=p,d.onerror=function(){v.log("Error loading "+d.src),a&&a.call(h,null,!0),d=d.onload=d.onerror=null},i.indexOf("data")!==0&&s!==void 0&&s!==null&&(d.crossOrigin=s),i.substring(0,14)==="data:image/svg"&&(d.onload=null,v.util.loadImageInDom(d,p)),d.src=i},loadImageInDom:function(i,a){var h=v.document.createElement("div");h.style.width=h.style.height="1px",h.style.left=h.style.top="-100%",h.style.position="absolute",h.appendChild(i),v.document.querySelector("body").appendChild(h),i.onload=function(){a(),h.parentNode.removeChild(h),h=null}},enlivenObjects:function(i,a,h,s){i=i||[];var d=[],p=0,y=i.length;function C(){++p===y&&a&&a(d.filter(function(S){return S}))}if(!y){a&&a(d);return}i.forEach(function(S,T){if(!S||!S.type){C();return}var P=v.util.getKlass(S.type,h);P.fromObject(S,function(L,G){G||(d[T]=L),s&&s(S,L,G),C()})})},enlivenPatterns:function(i,a){i=i||[];function h(){++d===p&&a&&a(s)}var s=[],d=0,p=i.length;if(!p){a&&a(s);return}i.forEach(function(y,C){y&&y.source?new v.Pattern(y,function(S){s[C]=S,h()}):(s[C]=y,h())})},groupSVGElements:function(i,a,h){var s;return i&&i.length===1?i[0]:(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),s=new v.Group(i,a),typeof h<"u"&&(s.sourcePath=h),s)},populateWithProperties:function(i,a,h){if(h&&Object.prototype.toString.call(h)==="[object Array]")for(var s=0,d=h.length;s<d;s++)h[s]in i&&(a[h[s]]=i[h[s]])},drawDashedLine:function(i,a,h,s,d,p){var y=s-a,C=d-h,S=l(y*y+C*C),T=c(C,y),P=p.length,L=0,G=!0;for(i.save(),i.translate(a,h),i.moveTo(0,0),i.rotate(T),a=0;S>a;)a+=p[L++%P],a>S&&(a=S),i[G?"lineTo":"moveTo"](a,0),G=!G;i.restore()},createCanvasElement:function(){return v.document.createElement("canvas")},copyCanvasElement:function(i){var a=v.util.createCanvasElement();return a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0),a},toDataURL:function(i,a,h){return i.toDataURL("image/"+a,h)},createImage:function(){return v.document.createElement("img")},multiplyTransformMatrices:function(i,a,h){return[i[0]*a[0]+i[2]*a[1],i[1]*a[0]+i[3]*a[1],i[0]*a[2]+i[2]*a[3],i[1]*a[2]+i[3]*a[3],h?0:i[0]*a[4]+i[2]*a[5]+i[4],h?0:i[1]*a[4]+i[3]*a[5]+i[5]]},qrDecompose:function(i){var a=c(i[1],i[0]),h=u(i[0],2)+u(i[1],2),s=l(h),d=(i[0]*i[3]-i[2]*i[1])/s,p=c(i[0]*i[2]+i[1]*i[3],h);return{angle:a/n,scaleX:s,scaleY:d,skewX:p/n,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return v.iMatrix.concat();var a=v.util.degreesToRadians(i.angle),h=v.util.cos(a),s=v.util.sin(a);return[h,s,-s,h,0,0]},calcDimensionsMatrix:function(i){var a=typeof i.scaleX>"u"?1:i.scaleX,h=typeof i.scaleY>"u"?1:i.scaleY,s=[i.flipX?-a:a,0,0,i.flipY?-h:h,0,0],d=v.util.multiplyTransformMatrices,p=v.util.degreesToRadians;return i.skewX&&(s=d(s,[1,0,Math.tan(p(i.skewX)),1],!0)),i.skewY&&(s=d(s,[1,Math.tan(p(i.skewY)),0,1],!0)),s},composeMatrix:function(i){var a=[1,0,0,1,i.translateX||0,i.translateY||0],h=v.util.multiplyTransformMatrices;return i.angle&&(a=h(a,v.util.calcRotateMatrix(i))),(i.scaleX!==1||i.scaleY!==1||i.skewX||i.skewY||i.flipX||i.flipY)&&(a=h(a,v.util.calcDimensionsMatrix(i))),a},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,a,h,s){s>0&&(a>s?a-=s:a=0,h>s?h-=s:h=0);var d=!0,p,y,C=i.getImageData(a,h,s*2||1,s*2||1),S=C.data.length;for(p=3;p<S&&(y=C.data[p],d=y<=0,d!==!1);p+=4);return C=null,d},parsePreserveAspectRatioAttribute:function(i){var a="meet",h="Mid",s="Mid",d=i.split(" "),p;return d&&d.length&&(a=d.pop(),a!=="meet"&&a!=="slice"?(p=a,a="meet"):d.length&&(p=d.pop())),h=p!=="none"?p.slice(1,4):"none",s=p!=="none"?p.slice(5,8):"none",{meetOrSlice:a,alignX:h,alignY:s}},clearFabricFontCache:function(i){i=(i||"").toLowerCase(),i?v.charWidthsCache[i]&&delete v.charWidthsCache[i]:v.charWidthsCache={}},limitDimsByArea:function(i,a){var h=Math.sqrt(a*i),s=Math.floor(a/h);return{x:Math.floor(h),y:s}},capValue:function(i,a,h){return Math.max(i,Math.min(a,h))},findScaleToFit:function(i,a){return Math.min(a.width/i.width,a.height/i.height)},findScaleToCover:function(i,a){return Math.max(a.width/i.width,a.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(a){return v.util.toFixed(a,v.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,a){var h=v.util.invertTransform(a),s=v.util.multiplyTransformMatrices(h,i.calcOwnMatrix());v.util.applyTransformToObject(i,s)},addTransformToObject:function(i,a){v.util.applyTransformToObject(i,v.util.multiplyTransformMatrices(a,i.calcOwnMatrix()))},applyTransformToObject:function(i,a){var h=v.util.qrDecompose(a),s=new v.Point(h.translateX,h.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",h.scaleX),i.set("scaleY",h.scaleY),i.skewX=h.skewX,i.skewY=h.skewY,i.angle=h.angle,i.setPositionByOrigin(s,"center","center")},sizeAfterTransform:function(i,a,h){var s=i/2,d=a/2,p=[{x:-s,y:-d},{x:s,y:-d},{x:-s,y:d},{x:s,y:d}],y=v.util.calcDimensionsMatrix(h),C=v.util.makeBoundingBoxFromPoints(p,y);return{x:C.width,y:C.height}}}}(U),function(){var g=Array.prototype.join,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function u(x,O,j,k,E,F,b,X,N,Q,ee){var oe=v.util.cos(x),Y=v.util.sin(x),B=v.util.cos(O),K=v.util.sin(O),te=j*E*B-k*F*K+b,J=k*E*B+j*F*K+X,se=Q+N*(-j*E*Y-k*F*oe),ce=ee+N*(-k*E*Y+j*F*oe),xe=te+N*(j*E*K+k*F*B),ye=J+N*(k*E*K-j*F*B);return["C",se,ce,xe,ye,te,J]}function n(x,O,j,k,E,F,b){var X=Math.PI,N=b*X/180,Q=v.util.sin(N),ee=v.util.cos(N),oe=0,Y=0;j=Math.abs(j),k=Math.abs(k);var B=-ee*x*.5-Q*O*.5,K=-ee*O*.5+Q*x*.5,te=j*j,J=k*k,se=K*K,ce=B*B,xe=te*J-te*se-J*ce,ye=0;if(xe<0){var ie=Math.sqrt(1-xe/(te*J));j*=ie,k*=ie}else ye=(E===F?-1:1)*Math.sqrt(xe/(te*se+J*ce));var Ce=ye*j*K/k,ke=-ye*k*B/j,Fe=ee*Ce-Q*ke+x*.5,qe=Q*Ce+ee*ke+O*.5,Be=r(1,0,(B-Ce)/j,(K-ke)/k),Ye=r((B-Ce)/j,(K-ke)/k,(-B-Ce)/j,(-K-ke)/k);F===0&&Ye>0?Ye-=2*X:F===1&&Ye<0&&(Ye+=2*X);for(var Ae=Math.ceil(Math.abs(Ye/X*2)),Je=[],yt=Ye/Ae,Jt=8/3*Math.sin(yt/4)*Math.sin(yt/4)/Math.sin(yt/2),Zt=Be+yt,Dt=0;Dt<Ae;Dt++)Je[Dt]=u(Be,Zt,ee,Q,j,k,Fe,qe,Jt,oe,Y),oe=Je[Dt][5],Y=Je[Dt][6],Be=Zt,Zt+=yt;return Je}function r(x,O,j,k){var E=Math.atan2(O,x),F=Math.atan2(k,j);return F>=E?F-E:2*Math.PI-(E-F)}function i(x,O,j,k,E,F,b,X){var N;if(v.cachesBoundsOfCurve&&(N=g.call(arguments),v.boundsOfCurveCache[N]))return v.boundsOfCurveCache[N];var Q=Math.sqrt,ee=Math.min,oe=Math.max,Y=Math.abs,B=[],K=[[],[]],te,J,se,ce,xe,ye,ie,Ce;J=6*x-12*j+6*E,te=-3*x+9*j-9*E+3*b,se=3*j-3*x;for(var ke=0;ke<2;++ke){if(ke>0&&(J=6*O-12*k+6*F,te=-3*O+9*k-9*F+3*X,se=3*k-3*O),Y(te)<1e-12){if(Y(J)<1e-12)continue;ce=-se/J,0<ce&&ce<1&&B.push(ce);continue}ie=J*J-4*se*te,!(ie<0)&&(Ce=Q(ie),xe=(-J+Ce)/(2*te),0<xe&&xe<1&&B.push(xe),ye=(-J-Ce)/(2*te),0<ye&&ye<1&&B.push(ye))}for(var Fe,qe,Be=B.length,Ye=Be,Ae;Be--;)ce=B[Be],Ae=1-ce,Fe=Ae*Ae*Ae*x+3*Ae*Ae*ce*j+3*Ae*ce*ce*E+ce*ce*ce*b,K[0][Be]=Fe,qe=Ae*Ae*Ae*O+3*Ae*Ae*ce*k+3*Ae*ce*ce*F+ce*ce*ce*X,K[1][Be]=qe;K[0][Ye]=x,K[1][Ye]=O,K[0][Ye+1]=b,K[1][Ye+1]=X;var Je=[{x:ee.apply(null,K[0]),y:ee.apply(null,K[1])},{x:oe.apply(null,K[0]),y:oe.apply(null,K[1])}];return v.cachesBoundsOfCurve&&(v.boundsOfCurveCache[N]=Je),Je}function a(x,O,j){for(var k=j[1],E=j[2],F=j[3],b=j[4],X=j[5],N=j[6],Q=j[7],ee=n(N-x,Q-O,k,E,b,X,F),oe=0,Y=ee.length;oe<Y;oe++)ee[oe][1]+=x,ee[oe][2]+=O,ee[oe][3]+=x,ee[oe][4]+=O,ee[oe][5]+=x,ee[oe][6]+=O;return ee}function h(x){var O=0,j=0,k=x.length,E=0,F=0,b,X,N,Q=[],ee,oe,Y;for(X=0;X<k;++X){switch(N=!1,b=x[X].slice(0),b[0]){case"l":b[0]="L",b[1]+=O,b[2]+=j;case"L":O=b[1],j=b[2];break;case"h":b[1]+=O;case"H":b[0]="L",b[2]=j,O=b[1];break;case"v":b[1]+=j;case"V":b[0]="L",j=b[1],b[1]=O,b[2]=j;break;case"m":b[0]="M",b[1]+=O,b[2]+=j;case"M":O=b[1],j=b[2],E=b[1],F=b[2];break;case"c":b[0]="C",b[1]+=O,b[2]+=j,b[3]+=O,b[4]+=j,b[5]+=O,b[6]+=j;case"C":oe=b[3],Y=b[4],O=b[5],j=b[6];break;case"s":b[0]="S",b[1]+=O,b[2]+=j,b[3]+=O,b[4]+=j;case"S":ee==="C"?(oe=2*O-oe,Y=2*j-Y):(oe=O,Y=j),O=b[3],j=b[4],b[0]="C",b[5]=b[3],b[6]=b[4],b[3]=b[1],b[4]=b[2],b[1]=oe,b[2]=Y,oe=b[3],Y=b[4];break;case"q":b[0]="Q",b[1]+=O,b[2]+=j,b[3]+=O,b[4]+=j;case"Q":oe=b[1],Y=b[2],O=b[3],j=b[4];break;case"t":b[0]="T",b[1]+=O,b[2]+=j;case"T":ee==="Q"?(oe=2*O-oe,Y=2*j-Y):(oe=O,Y=j),b[0]="Q",O=b[1],j=b[2],b[1]=oe,b[2]=Y,b[3]=O,b[4]=j;break;case"a":b[0]="A",b[6]+=O,b[7]+=j;case"A":N=!0,Q=Q.concat(a(O,j,b)),O=b[6],j=b[7];break;case"z":case"Z":O=E,j=F;break}N||Q.push(b),ee=b[0]}return Q}function s(x,O,j,k){return Math.sqrt((j-x)*(j-x)+(k-O)*(k-O))}function d(x){return x*x*x}function p(x){return 3*x*x*(1-x)}function y(x){return 3*x*(1-x)*(1-x)}function C(x){return(1-x)*(1-x)*(1-x)}function S(x,O,j,k,E,F,b,X){return function(N){var Q=d(N),ee=p(N),oe=y(N),Y=C(N);return{x:b*Q+E*ee+j*oe+x*Y,y:X*Q+F*ee+k*oe+O*Y}}}function T(x,O,j,k,E,F,b,X){return function(N){var Q=1-N,ee=3*Q*Q*(j-x)+6*Q*N*(E-j)+3*N*N*(b-E),oe=3*Q*Q*(k-O)+6*Q*N*(F-k)+3*N*N*(X-F);return Math.atan2(oe,ee)}}function P(x){return x*x}function L(x){return 2*x*(1-x)}function G(x){return(1-x)*(1-x)}function re(x,O,j,k,E,F){return function(b){var X=P(b),N=L(b),Q=G(b);return{x:E*X+j*N+x*Q,y:F*X+k*N+O*Q}}}function le(x,O,j,k,E,F){return function(b){var X=1-b,N=2*X*(j-x)+2*b*(E-j),Q=2*X*(k-O)+2*b*(F-k);return Math.atan2(Q,N)}}function V(x,O,j){var k={x:O,y:j},E,F=0,b;for(b=1;b<=100;b+=1)E=x(b/100),F+=s(k.x,k.y,E.x,E.y),k=E;return F}function q(x,O){for(var j=0,k=0,E=x.iterator,F={x:x.x,y:x.y},b,X,N=.01,Q=x.angleFinder,ee;k<O&&j<=1&&N>1e-4;)b=E(j),ee=j,X=s(F.x,F.y,b.x,b.y),X+k>O?(N/=2,j-=N):(F=b,j+=N,k+=X);return b.angle=Q(ee),b}function ne(x){for(var O=0,j=x.length,k,E=0,F=0,b=0,X=0,N=[],Q,ee,oe,Y=0;Y<j;Y++){switch(k=x[Y],ee={x:E,y:F,command:k[0]},k[0]){case"M":ee.length=0,b=E=k[1],X=F=k[2];break;case"L":ee.length=s(E,F,k[1],k[2]),E=k[1],F=k[2];break;case"C":Q=S(E,F,k[1],k[2],k[3],k[4],k[5],k[6]),oe=T(E,F,k[1],k[2],k[3],k[4],k[5],k[6]),ee.iterator=Q,ee.angleFinder=oe,ee.length=V(Q,E,F),E=k[5],F=k[6];break;case"Q":Q=re(E,F,k[1],k[2],k[3],k[4]),oe=le(E,F,k[1],k[2],k[3],k[4]),ee.iterator=Q,ee.angleFinder=oe,ee.length=V(Q,E,F),E=k[3],F=k[4];break;case"Z":case"z":ee.destX=b,ee.destY=X,ee.length=s(E,F,b,X),E=b,F=X;break}O+=ee.length,N.push(ee)}return N.push({length:O,x:E,y:F}),N}function fe(x,O,j){j||(j=ne(x));for(var k=0;O-j[k].length>0&&k<j.length-2;)O-=j[k].length,k++;var E=j[k],F=O/E.length,b=E.command,X=x[k],N;switch(b){case"M":return{x:E.x,y:E.y,angle:0};case"Z":case"z":return N=new v.Point(E.x,E.y).lerp(new v.Point(E.destX,E.destY),F),N.angle=Math.atan2(E.destY-E.y,E.destX-E.x),N;case"L":return N=new v.Point(E.x,E.y).lerp(new v.Point(X[1],X[2]),F),N.angle=Math.atan2(X[2]-E.y,X[1]-E.x),N;case"C":return q(E,O);case"Q":return q(E,O)}}function pe(x){var O=[],j=[],k,E,F=v.rePathCommand,b="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",X="("+b+")"+v.commaWsp,N="([01])"+v.commaWsp+"?",Q=X+"?"+X+"?"+X+N+N+X+"?("+b+")",ee=new RegExp(Q,"g"),oe,Y,B;if(!x||!x.match)return O;B=x.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var K=0,te,J=B.length;K<J;K++){k=B[K],Y=k.slice(1).trim(),j.length=0;var se=k.charAt(0);if(te=[se],se.toLowerCase()==="a")for(var ce;ce=ee.exec(Y);)for(var xe=1;xe<ce.length;xe++)j.push(ce[xe]);else for(;oe=F.exec(Y);)j.push(oe[0]);for(var xe=0,ye=j.length;xe<ye;xe++)E=parseFloat(j[xe]),isNaN(E)||te.push(E);var ie=l[se.toLowerCase()],Ce=c[se]||se;if(te.length-1>ie)for(var ke=1,Fe=te.length;ke<Fe;ke+=ie)O.push([se].concat(te.slice(ke,ke+ie))),se=Ce;else O.push(te)}return O}function ge(x,O){var j=[],k,E=new v.Point(x[0].x,x[0].y),F=new v.Point(x[1].x,x[1].y),b=x.length,X=1,N=0,Q=b>2;for(O=O||0,Q&&(X=x[2].x<F.x?-1:x[2].x===F.x?0:1,N=x[2].y<F.y?-1:x[2].y===F.y?0:1),j.push(["M",E.x-X*O,E.y-N*O]),k=1;k<b;k++){if(!E.eq(F)){var ee=E.midPointFrom(F);j.push(["Q",E.x,E.y,ee.x,ee.y])}E=x[k],k+1<x.length&&(F=x[k+1])}return Q&&(X=E.x>x[k-2].x?1:E.x===x[k-2].x?0:-1,N=E.y>x[k-2].y?1:E.y===x[k-2].y?0:-1),j.push(["L",E.x+X*O,E.y+N*O]),j}function $(x,O,j){return j&&(O=v.util.multiplyTransformMatrices(O,[1,0,0,1,-j.x,-j.y])),x.map(function(k){for(var E=k.slice(0),F={},b=1;b<k.length-1;b+=2)F.x=k[b],F.y=k[b+1],F=v.util.transformPoint(F,O),E[b]=F.x,E[b+1]=F.y;return E})}function D(x,O,j,k,E,F,b,X,N){for(var Q=0,ee=0,oe,Y=[],B=n(X-x,N-O,j,k,F,b,E),K=0,te=B.length;K<te;K++)oe=i(Q,ee,B[K][1],B[K][2],B[K][3],B[K][4],B[K][5],B[K][6]),Y.push({x:oe[0].x+x,y:oe[0].y+O}),Y.push({x:oe[1].x+x,y:oe[1].y+O}),Q=B[K][5],ee=B[K][6];return Y}function I(x,O,j,k){k=k.slice(0).unshift("X");var E=a(O,j,k);E.forEach(function(F){x.bezierCurveTo.apply(x,F.slice(1))})}v.util.joinPath=function(x){return x.map(function(O){return O.join(" ")}).join(" ")},v.util.parsePath=pe,v.util.makePathSimpler=h,v.util.getSmoothPathFromPoints=ge,v.util.getPathSegmentsInfo=ne,v.util.getBoundsOfCurve=i,v.util.getPointOnPath=fe,v.util.transformPath=$,v.util.fromArcToBeizers=a,v.util.getBoundsOfArc=D,v.util.drawArc=I}(),function(){var g=Array.prototype.slice;function l(i,a){for(var h=g.call(arguments,2),s=[],d=0,p=i.length;d<p;d++)s[d]=h.length?i[d][a].apply(i[d],h):i[d][a].call(i[d]);return s}function c(i,a){return r(i,a,function(h,s){return h>=s})}function u(i,a){return r(i,a,function(h,s){return h<s})}function n(i,a){for(var h=i.length;h--;)i[h]=a;return i}function r(i,a,h){if(!(!i||i.length===0)){var s=i.length-1,d=a?i[s][a]:i[s];if(a)for(;s--;)h(i[s][a],d)&&(d=i[s][a]);else for(;s--;)h(i[s],d)&&(d=i[s]);return d}}v.util.array={fill:n,invoke:l,min:u,max:c}}(),function(){function g(c,u,n){if(n)if(!v.isLikelyNode&&u instanceof Element)c=u;else if(u instanceof Array){c=[];for(var r=0,i=u.length;r<i;r++)c[r]=g({},u[r],n)}else if(u&&typeof u=="object")for(var a in u)a==="canvas"||a==="group"?c[a]=null:u.hasOwnProperty(a)&&(c[a]=g({},u[a],n));else c=u;else for(var a in u)c[a]=u[a];return c}function l(c,u){return g({},c,u)}v.util.object={extend:g,clone:l},v.util.object.extend(v.util,v.Observable)}(),function(){function g(r){return r.replace(/-+(.)?/g,function(i,a){return a?a.toUpperCase():""})}function l(r,i){return r.charAt(0).toUpperCase()+(i?r.slice(1):r.slice(1).toLowerCase())}function c(r){return r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(r){var i=0,a,h=[];for(i=0,a;i<r.length;i++)(a=n(r,i))!==!1&&h.push(a);return h}function n(r,i){var a=r.charCodeAt(i);if(isNaN(a))return"";if(a<55296||a>57343)return r.charAt(i);if(55296<=a&&a<=56319){if(r.length<=i+1)throw"High surrogate without following low surrogate";var h=r.charCodeAt(i+1);if(56320>h||h>57343)throw"High surrogate without following low surrogate";return r.charAt(i)+r.charAt(i+1)}if(i===0)throw"Low surrogate without preceding high surrogate";var s=r.charCodeAt(i-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}v.util.string={camelize:g,capitalize:l,escapeXml:c,graphemeSplit:u}}(),function(){var g=Array.prototype.slice,l=function(){},c=function(){for(var a in{toString:1})if(a==="toString")return!1;return!0}(),u=function(a,h,s){for(var d in h)d in a.prototype&&typeof a.prototype[d]=="function"&&(h[d]+"").indexOf("callSuper")>-1?a.prototype[d]=function(p){return function(){var y=this.constructor.superclass;this.constructor.superclass=s;var C=h[p].apply(this,arguments);if(this.constructor.superclass=y,p!=="initialize")return C}}(d):a.prototype[d]=h[d],c&&(h.toString!==Object.prototype.toString&&(a.prototype.toString=h.toString),h.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=h.valueOf))};function n(){}function r(a){for(var h=null,s=this;s.constructor.superclass;){var d=s.constructor.superclass.prototype[a];if(s[a]!==d){h=d;break}s=s.constructor.superclass.prototype}return h?arguments.length>1?h.apply(this,g.call(arguments,1)):h.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}function i(){var a=null,h=g.call(arguments,0);typeof h[0]=="function"&&(a=h.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=a,s.subclasses=[],a&&(n.prototype=a.prototype,s.prototype=new n,a.subclasses.push(s));for(var d=0,p=h.length;d<p;d++)u(s,h[d],a);return s.prototype.initialize||(s.prototype.initialize=l),s.prototype.constructor=s,s.prototype.callSuper=r,s}v.util.createClass=i}(),function(){var g=!!v.document.createElement("div").attachEvent,l=["touchstart","touchmove","touchend"];v.util.addListener=function(u,n,r,i){u&&u.addEventListener(n,r,g?!1:i)},v.util.removeListener=function(u,n,r,i){u&&u.removeEventListener(n,r,g?!1:i)};function c(u){var n=u.changedTouches;return n&&n[0]?n[0]:u}v.util.getPointer=function(u){var n=u.target,r=v.util.getScrollLeftTop(n),i=c(u);return{x:i.clientX+r.left,y:i.clientY+r.top}},v.util.isTouchEvent=function(u){return l.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function g(i,a){var h=i.style;if(!h)return i;if(typeof a=="string")return i.style.cssText+=";"+a,a.indexOf("opacity")>-1?r(i,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):i;for(var s in a)if(s==="opacity")r(i,a[s]);else{var d=s==="float"||s==="cssFloat"?typeof h.styleFloat>"u"?"cssFloat":"styleFloat":s;h[d]=a[s]}return i}var l=v.document.createElement("div"),c=typeof l.style.opacity=="string",u=typeof l.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,r=function(i){return i};c?r=function(i,a){return i.style.opacity=a,i}:u&&(r=function(i,a){var h=i.style;return i.currentStyle&&!i.currentStyle.hasLayout&&(h.zoom=1),n.test(h.filter)?(a=a>=.9999?"":"alpha(opacity="+a*100+")",h.filter=h.filter.replace(n,a)):h.filter+=" alpha(opacity="+a*100+")",i}),v.util.setStyle=g}(),function(){var g=Array.prototype.slice;function l(C){return typeof C=="string"?v.document.getElementById(C):C}var c,u=function(C){return g.call(C,0)};try{c=u(v.document.childNodes)instanceof Array}catch{}c||(u=function(C){for(var S=new Array(C.length),T=C.length;T--;)S[T]=C[T];return S});function n(C,S){var T=v.document.createElement(C);for(var P in S)P==="class"?T.className=S[P]:P==="for"?T.htmlFor=S[P]:T.setAttribute(P,S[P]);return T}function r(C,S){C&&(" "+C.className+" ").indexOf(" "+S+" ")===-1&&(C.className+=(C.className?" ":"")+S)}function i(C,S,T){return typeof S=="string"&&(S=n(S,T)),C.parentNode&&C.parentNode.replaceChild(S,C),S.appendChild(C),S}function a(C){for(var S=0,T=0,P=v.document.documentElement,L=v.document.body||{scrollLeft:0,scrollTop:0};C&&(C.parentNode||C.host)&&(C=C.parentNode||C.host,C===v.document?(S=L.scrollLeft||P.scrollLeft||0,T=L.scrollTop||P.scrollTop||0):(S+=C.scrollLeft||0,T+=C.scrollTop||0),!(C.nodeType===1&&C.style.position==="fixed")););return{left:S,top:T}}function h(C){var S,T=C&&C.ownerDocument,P={left:0,top:0},L={left:0,top:0},G,re={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!T)return L;for(var le in re)L[re[le]]+=parseInt(s(C,le),10)||0;return S=T.documentElement,typeof C.getBoundingClientRect<"u"&&(P=C.getBoundingClientRect()),G=a(C),{left:P.left+G.left-(S.clientLeft||0)+L.left,top:P.top+G.top-(S.clientTop||0)+L.top}}var s;v.document.defaultView&&v.document.defaultView.getComputedStyle?s=function(C,S){var T=v.document.defaultView.getComputedStyle(C,null);return T?T[S]:void 0}:s=function(C,S){var T=C.style[S];return!T&&C.currentStyle&&(T=C.currentStyle[S]),T},function(){var C=v.document.documentElement.style,S="userSelect"in C?"userSelect":"MozUserSelect"in C?"MozUserSelect":"WebkitUserSelect"in C?"WebkitUserSelect":"KhtmlUserSelect"in C?"KhtmlUserSelect":"";function T(L){return typeof L.onselectstart<"u"&&(L.onselectstart=v.util.falseFunction),S?L.style[S]="none":typeof L.unselectable=="string"&&(L.unselectable="on"),L}function P(L){return typeof L.onselectstart<"u"&&(L.onselectstart=null),S?L.style[S]="":typeof L.unselectable=="string"&&(L.unselectable=""),L}v.util.makeElementUnselectable=T,v.util.makeElementSelectable=P}();function d(C){var S=v.jsdomImplForWrapper(C);return S._canvas||S._image}function p(C){if(v.isLikelyNode){var S=v.jsdomImplForWrapper(C);S&&(S._image=null,S._canvas=null,S._currentSrc=null,S._attributes=null,S._classList=null)}}function y(C,S){C.imageSmoothingEnabled=C.imageSmoothingEnabled||C.webkitImageSmoothingEnabled||C.mozImageSmoothingEnabled||C.msImageSmoothingEnabled||C.oImageSmoothingEnabled,C.imageSmoothingEnabled=S}v.util.setImageSmoothing=y,v.util.getById=l,v.util.toArray=u,v.util.addClass=r,v.util.makeElement=n,v.util.wrapElement=i,v.util.getScrollLeftTop=a,v.util.getElementOffset=h,v.util.getNodeCanvas=d,v.util.cleanUpJsdomNode=p}(),function(){function g(u,n){return u+(/\?/.test(u)?"&":"?")+n}function l(){}function c(u,n){n||(n={});var r=n.method?n.method.toUpperCase():"GET",i=n.onComplete||function(){},a=new v.window.XMLHttpRequest,h=n.body||n.parameters;return a.onreadystatechange=function(){a.readyState===4&&(i(a),a.onreadystatechange=l)},r==="GET"&&(h=null,typeof n.parameters=="string"&&(u=g(u,n.parameters))),a.open(r,u,!0),(r==="POST"||r==="PUT")&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(h),a}v.util.request=c}(),v.log=console.log,v.warn=console.warn,function(){function g(){return!1}function l(a,h,s,d){return-s*Math.cos(a/d*(Math.PI/2))+s+h}function c(a){var h=!1;return r(function(s){a||(a={});var d=s||+new Date,p=a.duration||500,y=d+p,C,S=a.onChange||g,T=a.abort||g,P=a.onComplete||g,L=a.easing||l,G="startValue"in a?a.startValue:0,re="endValue"in a?a.endValue:100,le=a.byValue||re-G;a.onStart&&a.onStart(),function V(q){C=q||+new Date;var ne=C>y?p:C-d,fe=ne/p,pe=L(ne,G,le,p),ge=Math.abs((pe-G)/le);if(!h){if(T(pe,ge,fe)){P(re,1,1);return}if(C>y){S(re,1,1),P(re,1,1);return}else S(pe,ge,fe),r(V)}}(d)}),function(){h=!0}}var u=v.window.requestAnimationFrame||v.window.webkitRequestAnimationFrame||v.window.mozRequestAnimationFrame||v.window.oRequestAnimationFrame||v.window.msRequestAnimationFrame||function(a){return v.window.setTimeout(a,1e3/60)},n=v.window.cancelAnimationFrame||v.window.clearTimeout;function r(){return u.apply(v.window,arguments)}function i(){return n.apply(v.window,arguments)}v.util.animate=c,v.util.requestAnimFrame=r,v.util.cancelAnimFrame=i}(),function(){function g(c,u,n){var r="rgba("+parseInt(c[0]+n*(u[0]-c[0]),10)+","+parseInt(c[1]+n*(u[1]-c[1]),10)+","+parseInt(c[2]+n*(u[2]-c[2]),10);return r+=","+(c&&u?parseFloat(c[3]+n*(u[3]-c[3])):1),r+=")",r}function l(c,u,n,r){var i=new v.Color(c).getSource(),a=new v.Color(u).getSource(),h=r.onComplete,s=r.onChange;return r=r||{},v.util.animate(v.util.object.extend(r,{duration:n||500,startValue:i,endValue:a,byValue:a,easing:function(d,p,y,C){var S=r.colorEasing?r.colorEasing(d,C):1-Math.cos(d/C*(Math.PI/2));return g(p,y,S)},onComplete:function(d,p,y){if(h)return h(g(a,a,0),p,y)},onChange:function(d,p,y){if(s){if(Array.isArray(d))return s(g(d,d,0),p,y);s(d,p,y)}}}))}v.util.animateColor=l}(),function(){function g(D,I,x,O){return D<Math.abs(I)?(D=I,O=x/4):I===0&&D===0?O=x/(2*Math.PI)*Math.asin(1):O=x/(2*Math.PI)*Math.asin(I/D),{a:D,c:I,p:x,s:O}}function l(D,I,x){return D.a*Math.pow(2,10*(I-=1))*Math.sin((I*x-D.s)*(2*Math.PI)/D.p)}function c(D,I,x,O){return x*((D=D/O-1)*D*D+1)+I}function u(D,I,x,O){return D/=O/2,D<1?x/2*D*D*D+I:x/2*((D-=2)*D*D+2)+I}function n(D,I,x,O){return x*(D/=O)*D*D*D+I}function r(D,I,x,O){return-x*((D=D/O-1)*D*D*D-1)+I}function i(D,I,x,O){return D/=O/2,D<1?x/2*D*D*D*D+I:-x/2*((D-=2)*D*D*D-2)+I}function a(D,I,x,O){return x*(D/=O)*D*D*D*D+I}function h(D,I,x,O){return x*((D=D/O-1)*D*D*D*D+1)+I}function s(D,I,x,O){return D/=O/2,D<1?x/2*D*D*D*D*D+I:x/2*((D-=2)*D*D*D*D+2)+I}function d(D,I,x,O){return-x*Math.cos(D/O*(Math.PI/2))+x+I}function p(D,I,x,O){return x*Math.sin(D/O*(Math.PI/2))+I}function y(D,I,x,O){return-x/2*(Math.cos(Math.PI*D/O)-1)+I}function C(D,I,x,O){return D===0?I:x*Math.pow(2,10*(D/O-1))+I}function S(D,I,x,O){return D===O?I+x:x*(-Math.pow(2,-10*D/O)+1)+I}function T(D,I,x,O){return D===0?I:D===O?I+x:(D/=O/2,D<1?x/2*Math.pow(2,10*(D-1))+I:x/2*(-Math.pow(2,-10*--D)+2)+I)}function P(D,I,x,O){return-x*(Math.sqrt(1-(D/=O)*D)-1)+I}function L(D,I,x,O){return x*Math.sqrt(1-(D=D/O-1)*D)+I}function G(D,I,x,O){return D/=O/2,D<1?-x/2*(Math.sqrt(1-D*D)-1)+I:x/2*(Math.sqrt(1-(D-=2)*D)+1)+I}function re(D,I,x,O){var j=1.70158,k=0,E=x;if(D===0)return I;if(D/=O,D===1)return I+x;k||(k=O*.3);var F=g(E,x,k,j);return-l(F,D,O)+I}function le(D,I,x,O){var j=1.70158,k=0,E=x;if(D===0)return I;if(D/=O,D===1)return I+x;k||(k=O*.3);var F=g(E,x,k,j);return F.a*Math.pow(2,-10*D)*Math.sin((D*O-F.s)*(2*Math.PI)/F.p)+F.c+I}function V(D,I,x,O){var j=1.70158,k=0,E=x;if(D===0)return I;if(D/=O/2,D===2)return I+x;k||(k=O*(.3*1.5));var F=g(E,x,k,j);return D<1?-.5*l(F,D,O)+I:F.a*Math.pow(2,-10*(D-=1))*Math.sin((D*O-F.s)*(2*Math.PI)/F.p)*.5+F.c+I}function q(D,I,x,O,j){return j===void 0&&(j=1.70158),x*(D/=O)*D*((j+1)*D-j)+I}function ne(D,I,x,O,j){return j===void 0&&(j=1.70158),x*((D=D/O-1)*D*((j+1)*D+j)+1)+I}function fe(D,I,x,O,j){return j===void 0&&(j=1.70158),D/=O/2,D<1?x/2*(D*D*(((j*=1.525)+1)*D-j))+I:x/2*((D-=2)*D*(((j*=1.525)+1)*D+j)+2)+I}function pe(D,I,x,O){return x-ge(O-D,0,x,O)+I}function ge(D,I,x,O){return(D/=O)<1/2.75?x*(7.5625*D*D)+I:D<2/2.75?x*(7.5625*(D-=1.5/2.75)*D+.75)+I:D<2.5/2.75?x*(7.5625*(D-=2.25/2.75)*D+.9375)+I:x*(7.5625*(D-=2.625/2.75)*D+.984375)+I}function $(D,I,x,O){return D<O/2?pe(D*2,0,x,O)*.5+I:ge(D*2-O,0,x,O)*.5+x*.5+I}v.util.ease={easeInQuad:function(D,I,x,O){return x*(D/=O)*D+I},easeOutQuad:function(D,I,x,O){return-x*(D/=O)*(D-2)+I},easeInOutQuad:function(D,I,x,O){return D/=O/2,D<1?x/2*D*D+I:-x/2*(--D*(D-2)-1)+I},easeInCubic:function(D,I,x,O){return x*(D/=O)*D*D+I},easeOutCubic:c,easeInOutCubic:u,easeInQuart:n,easeOutQuart:r,easeInOutQuart:i,easeInQuint:a,easeOutQuint:h,easeInOutQuint:s,easeInSine:d,easeOutSine:p,easeInOutSine:y,easeInExpo:C,easeOutExpo:S,easeInOutExpo:T,easeInCirc:P,easeOutCirc:L,easeInOutCirc:G,easeInElastic:re,easeOutElastic:le,easeInOutElastic:V,easeInBack:q,easeOutBack:ne,easeInOutBack:fe,easeInBounce:pe,easeOutBounce:ge,easeInOutBounce:$}}(),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.util.object.clone,n=l.util.toFixed,r=l.util.parseUnit,i=l.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],h=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],d=["symbol","g","a","svg","clipPath","defs"],p={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},C="font-size",S="clip-path";l.svgValidTagNamesRegEx=L(a),l.svgViewBoxElementsRegEx=L(h),l.svgInvalidAncestorsRegEx=L(s),l.svgValidParentsRegEx=L(d),l.cssRules={},l.gradientDefs={},l.clipPaths={};function T(k){return k in p?p[k]:k}function P(k,E,F,b){var X=Object.prototype.toString.call(E)==="[object Array]",N;if((k==="fill"||k==="stroke")&&E==="none")E="";else{if(k==="strokeUniform")return E==="non-scaling-stroke";if(k==="strokeDashArray")E==="none"?E=null:E=E.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(k==="transformMatrix")F&&F.transformMatrix?E=i(F.transformMatrix,l.parseTransformAttribute(E)):E=l.parseTransformAttribute(E);else if(k==="visible")E=E!=="none"&&E!=="hidden",F&&F.visible===!1&&(E=!1);else if(k==="opacity")E=parseFloat(E),F&&typeof F.opacity<"u"&&(E*=F.opacity);else if(k==="textAnchor")E=E==="start"?"left":E==="end"?"right":"center";else if(k==="charSpacing")N=r(E,b)/b*1e3;else if(k==="paintFirst"){var Q=E.indexOf("fill"),ee=E.indexOf("stroke"),E="fill";(Q>-1&&ee>-1&&ee<Q||Q===-1&&ee>-1)&&(E="stroke")}else{if(k==="href"||k==="xlink:href"||k==="font")return E;if(k==="imageSmoothing")return E==="optimizeQuality";N=X?E.map(r):r(E,b)}}return!X&&isNaN(N)?E:N}function L(k){return new RegExp("^("+k.join("|")+")\\b","i")}function G(k){for(var E in y)if(!(typeof k[y[E]]>"u"||k[E]==="")){if(typeof k[E]>"u"){if(!l.Object.prototype[E])continue;k[E]=l.Object.prototype[E]}if(k[E].indexOf("url(")!==0){var F=new l.Color(k[E]);k[E]=F.setAlpha(n(F.getAlpha()*k[y[E]],2)).toRgba()}}return k}function re(k,E){var F,b=[],X,N,Q;for(N=0,Q=E.length;N<Q;N++)F=E[N],X=k.getElementsByTagName(F),b=b.concat(Array.prototype.slice.call(X));return b}l.parseTransformAttribute=function(){function k(ie,Ce){var ke=l.util.cos(Ce[0]),Fe=l.util.sin(Ce[0]),qe=0,Be=0;Ce.length===3&&(qe=Ce[1],Be=Ce[2]),ie[0]=ke,ie[1]=Fe,ie[2]=-Fe,ie[3]=ke,ie[4]=qe-(ke*qe-Fe*Be),ie[5]=Be-(Fe*qe+ke*Be)}function E(ie,Ce){var ke=Ce[0],Fe=Ce.length===2?Ce[1]:Ce[0];ie[0]=ke,ie[3]=Fe}function F(ie,Ce,ke){ie[ke]=Math.tan(l.util.degreesToRadians(Ce[0]))}function b(ie,Ce){ie[4]=Ce[0],Ce.length===2&&(ie[5]=Ce[1])}var X=l.iMatrix,N=l.reNum,Q=l.commaWsp,ee="(?:(skewX)\\s*\\(\\s*("+N+")\\s*\\))",oe="(?:(skewY)\\s*\\(\\s*("+N+")\\s*\\))",Y="(?:(rotate)\\s*\\(\\s*("+N+")(?:"+Q+"("+N+")"+Q+"("+N+"))?\\s*\\))",B="(?:(scale)\\s*\\(\\s*("+N+")(?:"+Q+"("+N+"))?\\s*\\))",K="(?:(translate)\\s*\\(\\s*("+N+")(?:"+Q+"("+N+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+N+")"+Q+"("+N+")"+Q+"("+N+")"+Q+"("+N+")"+Q+"("+N+")"+Q+"("+N+")\\s*\\))",J="(?:"+te+"|"+K+"|"+B+"|"+Y+"|"+ee+"|"+oe+")",se="(?:"+J+"(?:"+Q+"*"+J+")*)",ce="^\\s*(?:"+se+"?)\\s*$",xe=new RegExp(ce),ye=new RegExp(J,"g");return function(ie){var Ce=X.concat(),ke=[];if(!ie||ie&&!xe.test(ie))return Ce;ie.replace(ye,function(qe){var Be=new RegExp(J).exec(qe).filter(function(Je){return!!Je}),Ye=Be[1],Ae=Be.slice(2).map(parseFloat);switch(Ye){case"translate":b(Ce,Ae);break;case"rotate":Ae[0]=l.util.degreesToRadians(Ae[0]),k(Ce,Ae);break;case"scale":E(Ce,Ae);break;case"skewX":F(Ce,Ae,2);break;case"skewY":F(Ce,Ae,1);break;case"matrix":Ce=Ae;break}ke.push(Ce.concat()),Ce=X.concat()});for(var Fe=ke[0];ke.length>1;)ke.shift(),Fe=l.util.multiplyTransformMatrices(Fe,ke[0]);return Fe}}();function le(k,E){var F,b;k.replace(/;\s*$/,"").split(";").forEach(function(X){var N=X.split(":");F=N[0].trim().toLowerCase(),b=N[1].trim(),E[F]=b})}function V(k,E){var F,b;for(var X in k)typeof k[X]>"u"||(F=X.toLowerCase(),b=k[X],E[F]=b)}function q(k,E){var F={};for(var b in l.cssRules[E])if(ne(k,b.split(" ")))for(var X in l.cssRules[E][b])F[X]=l.cssRules[E][b][X];return F}function ne(k,E){var F,b=!0;return F=pe(k,E.pop()),F&&E.length&&(b=fe(k,E)),F&&b&&E.length===0}function fe(k,E){for(var F,b=!0;k.parentNode&&k.parentNode.nodeType===1&&E.length;)b&&(F=E.pop()),k=k.parentNode,b=pe(k,F);return E.length===0}function pe(k,E){var F=k.nodeName,b=k.getAttribute("class"),X=k.getAttribute("id"),N,Q;if(N=new RegExp("^"+F,"i"),E=E.replace(N,""),X&&E.length&&(N=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),E=E.replace(N,"")),b&&E.length)for(b=b.split(" "),Q=b.length;Q--;)N=new RegExp("\\."+b[Q]+"(?![a-zA-Z\\-]+)","i"),E=E.replace(N,"");return E.length===0}function ge(k,E){var F;if(k.getElementById&&(F=k.getElementById(E)),F)return F;var b,X,N,Q=k.getElementsByTagName("*");for(X=0,N=Q.length;X<N;X++)if(b=Q[X],E===b.getAttribute("id"))return b}function $(k){for(var E=re(k,["use","svg:use"]),F=0;E.length&&F<E.length;){var b=E[F],X=b.getAttribute("xlink:href")||b.getAttribute("href");if(X===null)return;var N=X.substr(1),Q=b.getAttribute("x")||0,ee=b.getAttribute("y")||0,oe=ge(k,N).cloneNode(!0),Y=(oe.getAttribute("transform")||"")+" translate("+Q+", "+ee+")",B,K=E.length,te,J,se,ce,xe=l.svgNS;if(I(oe),/^svg$/i.test(oe.nodeName)){var ye=oe.ownerDocument.createElementNS(xe,"g");for(J=0,se=oe.attributes,ce=se.length;J<ce;J++)te=se.item(J),ye.setAttributeNS(xe,te.nodeName,te.nodeValue);for(;oe.firstChild;)ye.appendChild(oe.firstChild);oe=ye}for(J=0,se=b.attributes,ce=se.length;J<ce;J++)te=se.item(J),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?Y=te.nodeValue+" "+Y:oe.setAttribute(te.nodeName,te.nodeValue));oe.setAttribute("transform",Y),oe.setAttribute("instantiated_by_use","1"),oe.removeAttribute("id"),B=b.parentNode,B.replaceChild(oe,b),E.length===K&&F++}}var D=new RegExp("^\\s*("+l.reNum+"+)\\s*,?\\s*("+l.reNum+"+)\\s*,?\\s*("+l.reNum+"+)\\s*,?\\s*("+l.reNum+"+)\\s*$");function I(k){if(!l.svgViewBoxElementsRegEx.test(k.nodeName))return{};var E=k.getAttribute("viewBox"),F=1,b=1,X=0,N=0,Q,ee,oe,Y,B=k.getAttribute("width"),K=k.getAttribute("height"),te=k.getAttribute("x")||0,J=k.getAttribute("y")||0,se=k.getAttribute("preserveAspectRatio")||"",ce=!E||!(E=E.match(D)),xe=!B||!K||B==="100%"||K==="100%",ye=ce&&xe,ie={},Ce="",ke=0,Fe=0;if(ie.width=0,ie.height=0,ie.toBeParsed=ye,ce&&(te||J)&&k.parentNode&&k.parentNode.nodeName!=="#document"&&(Ce=" translate("+r(te)+" "+r(J)+") ",oe=(k.getAttribute("transform")||"")+Ce,k.setAttribute("transform",oe),k.removeAttribute("x"),k.removeAttribute("y")),ye)return ie;if(ce)return ie.width=r(B),ie.height=r(K),ie;if(X=-parseFloat(E[1]),N=-parseFloat(E[2]),Q=parseFloat(E[3]),ee=parseFloat(E[4]),ie.minX=X,ie.minY=N,ie.viewBoxWidth=Q,ie.viewBoxHeight=ee,xe?(ie.width=Q,ie.height=ee):(ie.width=r(B),ie.height=r(K),F=ie.width/Q,b=ie.height/ee),se=l.util.parsePreserveAspectRatioAttribute(se),se.alignX!=="none"&&(se.meetOrSlice==="meet"&&(b=F=F>b?b:F),se.meetOrSlice==="slice"&&(b=F=F>b?F:b),ke=ie.width-Q*F,Fe=ie.height-ee*F,se.alignX==="Mid"&&(ke/=2),se.alignY==="Mid"&&(Fe/=2),se.alignX==="Min"&&(ke=0),se.alignY==="Min"&&(Fe=0)),F===1&&b===1&&X===0&&N===0&&te===0&&J===0)return ie;if((te||J)&&k.parentNode.nodeName!=="#document"&&(Ce=" translate("+r(te)+" "+r(J)+") "),oe=Ce+" matrix("+F+" 0 0 "+b+" "+(X*F+ke)+" "+(N*b+Fe)+") ",k.nodeName==="svg"){for(Y=k.ownerDocument.createElementNS(l.svgNS,"g");k.firstChild;)Y.appendChild(k.firstChild);k.appendChild(Y)}else Y=k,Y.removeAttribute("x"),Y.removeAttribute("y"),oe=Y.getAttribute("transform")+oe;return Y.setAttribute("transform",oe),ie}function x(k,E){for(;k&&(k=k.parentNode);)if(k.nodeName&&E.test(k.nodeName.replace("svg:",""))&&!k.getAttribute("instantiated_by_use"))return!0;return!1}l.parseSVGDocument=function(k,E,F,b){if(k){$(k);var X=l.Object.__uid++,N,Q,ee=I(k),oe=l.util.toArray(k.getElementsByTagName("*"));if(ee.crossOrigin=b&&b.crossOrigin,ee.svgUid=X,oe.length===0&&l.isLikelyNode){oe=k.selectNodes('//*[name(.)!="svg"]');var Y=[];for(N=0,Q=oe.length;N<Q;N++)Y[N]=oe[N];oe=Y}var B=oe.filter(function(te){return I(te),l.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!x(te,l.svgInvalidAncestorsRegEx)});if(!B||B&&!B.length){E&&E([],{});return}var K={};oe.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var J=te.getAttribute("id");K[J]=l.util.toArray(te.getElementsByTagName("*")).filter(function(se){return l.svgValidTagNamesRegEx.test(se.nodeName.replace("svg:",""))})}),l.gradientDefs[X]=l.getGradientDefs(k),l.cssRules[X]=l.getCSSRules(k),l.clipPaths[X]=K,l.parseElements(B,function(te,J){E&&(E(te,ee,J,oe),delete l.gradientDefs[X],delete l.cssRules[X],delete l.clipPaths[X])},u(ee),F,b)}};function O(k,E){var F=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],b="xlink:href",X=E.getAttribute(b).substr(1),N=ge(k,X);if(N&&N.getAttribute(b)&&O(k,N),F.forEach(function(ee){N&&!E.hasAttribute(ee)&&N.hasAttribute(ee)&&E.setAttribute(ee,N.getAttribute(ee))}),!E.children.length)for(var Q=N.cloneNode(!0);Q.firstChild;)E.appendChild(Q.firstChild);E.removeAttribute(b)}var j=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+l.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+l.reNum+"))?\\s+(.*)");c(l,{parseFontDeclaration:function(k,E){var F=k.match(j);if(F){var b=F[1],X=F[3],N=F[4],Q=F[5],ee=F[6];b&&(E.fontStyle=b),X&&(E.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),N&&(E.fontSize=r(N)),ee&&(E.fontFamily=ee),Q&&(E.lineHeight=Q==="normal"?1:Q)}},getGradientDefs:function(k){var E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],F=re(k,E),b,X=0,N={};for(X=F.length;X--;)b=F[X],b.getAttribute("xlink:href")&&O(k,b),N[b.getAttribute("id")]=b;return N},parseAttributes:function(k,E,F){if(k){var b,X={},N,Q;typeof F>"u"&&(F=k.getAttribute("svgUid")),k.parentNode&&l.svgValidParentsRegEx.test(k.parentNode.nodeName)&&(X=l.parseAttributes(k.parentNode,E,F));var ee=E.reduce(function(se,ce){return b=k.getAttribute(ce),b&&(se[ce]=b),se},{}),oe=c(q(k,F),l.parseStyleAttribute(k));ee=c(ee,oe),oe[S]&&k.setAttribute(S,oe[S]),N=Q=X.fontSize||l.Text.DEFAULT_SVG_FONT_SIZE,ee[C]&&(ee[C]=N=r(ee[C],Q));var Y,B,K={};for(var te in ee)Y=T(te),B=P(Y,ee[te],X,N),K[Y]=B;K&&K.font&&l.parseFontDeclaration(K.font,K);var J=c(X,K);return l.svgValidParentsRegEx.test(k.nodeName)?J:G(J)}},parseElements:function(k,E,F,b,X){new l.ElementsParser(k,E,F,b,X).parse()},parseStyleAttribute:function(k){var E={},F=k.getAttribute("style");return F&&(typeof F=="string"?le(F,E):V(F,E)),E},parsePointsAttribute:function(k){if(!k)return null;k=k.replace(/,/g," ").trim(),k=k.split(/\s+/);var E=[],F,b;for(F=0,b=k.length;F<b;F+=2)E.push({x:parseFloat(k[F]),y:parseFloat(k[F+1])});return E},getCSSRules:function(k){var E=k.getElementsByTagName("style"),F,b,X={},N;for(F=0,b=E.length;F<b;F++){var Q=E[F].textContent;Q=Q.replace(/\/\*[\s\S]*?\*\//g,""),Q.trim()!==""&&(N=Q.match(/[^{]*\{[\s\S]*?\}/g),N=N.map(function(ee){return ee.trim()}),N.forEach(function(ee){var oe=ee.match(/([\s\S]*?)\s*\{([^}]*)\}/),Y={},B=oe[2].trim(),K=B.replace(/;$/,"").split(/\s*;\s*/);for(F=0,b=K.length;F<b;F++){var te=K[F].split(/\s*:\s*/),J=te[0],se=te[1];Y[J]=se}ee=oe[1],ee.split(",").forEach(function(ce){ce=ce.replace(/^svg/i,"").trim(),ce!==""&&(X[ce]?l.util.object.extend(X[ce],Y):X[ce]=l.util.object.clone(Y))})}))}return X},loadSVGFromURL:function(k,E,F,b){k=k.replace(/^\n\s*/,"").trim(),new l.util.request(k,{method:"get",onComplete:X});function X(N){var Q=N.responseXML;if(!Q||!Q.documentElement)return E&&E(null),!1;l.parseSVGDocument(Q.documentElement,function(ee,oe,Y,B){E&&E(ee,oe,Y,B)},F,b)}},loadSVGFromString:function(k,E,F,b){var X=new l.window.DOMParser,N=X.parseFromString(k.trim(),"text/xml");l.parseSVGDocument(N.documentElement,function(Q,ee,oe,Y){E(Q,ee,oe,Y)},F,b)}})}(U),v.ElementsParser=function(g,l,c,u,n,r){this.elements=g,this.callback=l,this.options=c,this.reviver=u,this.svgUid=c&&c.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var l=this;this.elements.forEach(function(c,u){c.setAttribute("svgUid",l.svgUid),l.createObject(c,u)})},g.findTag=function(l){return v[v.util.string.capitalize(l.tagName.replace("svg:",""))]},g.createObject=function(l,c){var u=this.findTag(l);if(u&&u.fromElement)try{u.fromElement(l,this.createCallback(c,l),this.options)}catch(n){v.log(n)}else this.checkIfDone()},g.createCallback=function(l,c){var u=this;return function(n){var r;u.resolveGradient(n,c,"fill"),u.resolveGradient(n,c,"stroke"),n instanceof v.Image&&n._originalElement&&(r=n.parsePreserveAspectRatioAttribute(c)),n._removeTransformMatrix(r),u.resolveClipPath(n,c),u.reviver&&u.reviver(c,n),u.instances[l]=n,u.checkIfDone()}},g.extractPropertyDefinition=function(l,c,u){var n=l[c],r=this.regexUrl;if(r.test(n)){r.lastIndex=0;var i=r.exec(n)[1];return r.lastIndex=0,v[u][this.svgUid][i]}},g.resolveGradient=function(l,c,u){var n=this.extractPropertyDefinition(l,u,"gradientDefs");if(n){var r=c.getAttribute(u+"-opacity"),i=v.Gradient.fromElement(n,l,r,this.options);l.set(u,i)}},g.createClipPathCallback=function(l,c){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,c.push(u)}},g.resolveClipPath=function(l,c){var u=this.extractPropertyDefinition(l,"clipPath","clipPaths"),n,r,i,a,h,s;if(u){a=[],i=v.util.invertTransform(l.calcTransformMatrix());for(var d=u[0].parentNode,p=c;p.parentNode&&p.getAttribute("clip-path")!==l.clipPath;)p=p.parentNode;p.parentNode.appendChild(d);for(var y=0;y<u.length;y++)n=u[y],r=this.findTag(n),r.fromElement(n,this.createClipPathCallback(l,a),this.options);a.length===1?u=a[0]:u=new v.Group(a),h=v.util.multiplyTransformMatrices(i,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,p);var s=v.util.qrDecompose(h);u.flipX=!1,u.flipY=!1,u.set("scaleX",s.scaleX),u.set("scaleY",s.scaleY),u.angle=s.angle,u.skewX=s.skewX,u.skewY=0,u.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),l.clipPath=u}else delete l.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(l){return l!=null}),this.callback(this.instances,this.elements))}}(v.ElementsParser.prototype),function(g){var l=g.fabric||(g.fabric={});if(l.Point){l.warn("fabric.Point is already defined");return}l.Point=c;function c(u,n){this.x=u,this.y=n}c.prototype={type:"point",constructor:c,add:function(u){return new c(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new c(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new c(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new c(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new c(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new c(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,n){return typeof n>"u"&&(n=.5),n=Math.max(Math.min(1,n),0),new c(this.x+(u.x-this.x)*n,this.y+(u.y-this.y)*n)},distanceFrom:function(u){var n=this.x-u.x,r=this.y-u.y;return Math.sqrt(n*n+r*r)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new c(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new c(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,n){return this.x=u,this.y=n,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var n=this.x,r=this.y;this.x=u.x,this.y=u.y,u.x=n,u.y=r},clone:function(){return new c(this.x,this.y)}}}(U),function(g){var l=g.fabric||(g.fabric={});if(l.Intersection){l.warn("fabric.Intersection is already defined");return}function c(u){this.status=u,this.points=[]}l.Intersection=c,l.Intersection.prototype={constructor:c,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},l.Intersection.intersectLineLine=function(u,n,r,i){var a,h=(i.x-r.x)*(u.y-r.y)-(i.y-r.y)*(u.x-r.x),s=(n.x-u.x)*(u.y-r.y)-(n.y-u.y)*(u.x-r.x),d=(i.y-r.y)*(n.x-u.x)-(i.x-r.x)*(n.y-u.y);if(d!==0){var p=h/d,y=s/d;0<=p&&p<=1&&0<=y&&y<=1?(a=new c("Intersection"),a.appendPoint(new l.Point(u.x+p*(n.x-u.x),u.y+p*(n.y-u.y)))):a=new c}else h===0||s===0?a=new c("Coincident"):a=new c("Parallel");return a},l.Intersection.intersectLinePolygon=function(u,n,r){var i=new c,a=r.length,h,s,d,p;for(p=0;p<a;p++)h=r[p],s=r[(p+1)%a],d=c.intersectLineLine(u,n,h,s),i.appendPoints(d.points);return i.points.length>0&&(i.status="Intersection"),i},l.Intersection.intersectPolygonPolygon=function(u,n){var r=new c,i=u.length,a;for(a=0;a<i;a++){var h=u[a],s=u[(a+1)%i],d=c.intersectLinePolygon(h,s,n);r.appendPoints(d.points)}return r.points.length>0&&(r.status="Intersection"),r},l.Intersection.intersectPolygonRectangle=function(u,n,r){var i=n.min(r),a=n.max(r),h=new l.Point(a.x,i.y),s=new l.Point(i.x,a.y),d=c.intersectLinePolygon(i,h,u),p=c.intersectLinePolygon(h,a,u),y=c.intersectLinePolygon(a,s,u),C=c.intersectLinePolygon(s,i,u),S=new c;return S.appendPoints(d.points),S.appendPoints(p.points),S.appendPoints(y.points),S.appendPoints(C.points),S.points.length>0&&(S.status="Intersection"),S}}(U),function(g){var l=g.fabric||(g.fabric={});if(l.Color){l.warn("fabric.Color is already defined.");return}function c(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}l.Color=c,l.Color.prototype={_tryParsingColor:function(n){var r;n in c.colorNameMap&&(n=c.colorNameMap[n]),n==="transparent"&&(r=[255,255,255,0]),r||(r=c.sourceFromHex(n)),r||(r=c.sourceFromRgb(n)),r||(r=c.sourceFromHsl(n)),r||(r=[0,0,0,1]),r&&this.setSource(r)},_rgbToHsl:function(n,r,i){n/=255,r/=255,i/=255;var a,h,s,d=l.util.array.max([n,r,i]),p=l.util.array.min([n,r,i]);if(s=(d+p)/2,d===p)a=h=0;else{var y=d-p;switch(h=s>.5?y/(2-d-p):y/(d+p),d){case n:a=(r-i)/y+(r<i?6:0);break;case r:a=(i-n)/y+2;break;case i:a=(n-r)/y+4;break}a/=6}return[Math.round(a*360),Math.round(h*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),r=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+r[0]+","+r[1]+"%,"+r[2]+"%)"},toHsla:function(){var n=this.getSource(),r=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),r,i,a;return r=n[0].toString(16),r=r.length===1?"0"+r:r,i=n[1].toString(16),i=i.length===1?"0"+i:i,a=n[2].toString(16),a=a.length===1?"0"+a:a,r.toUpperCase()+i.toUpperCase()+a.toUpperCase()},toHexa:function(){var n=this.getSource(),r;return r=Math.round(n[3]*255),r=r.toString(16),r=r.length===1?"0"+r:r,this.toHex()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var r=this.getSource();return r[3]=n,this.setSource(r),this},toGrayscale:function(){var n=this.getSource(),r=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),i=n[3];return this.setSource([r,r,r,i]),this},toBlackWhite:function(n){var r=this.getSource(),i=(r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),a=r[3];return n=n||127,i=Number(i)<Number(n)?0:255,this.setSource([i,i,i,a]),this},overlayWith:function(n){n instanceof c||(n=new c(n));var r=[],i=this.getAlpha(),a=.5,h=this.getSource(),s=n.getSource(),d;for(d=0;d<3;d++)r.push(Math.round(h[d]*(1-a)+s[d]*a));return r[3]=i,this.setSource(r),this}},l.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,l.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,l.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,l.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(n,r,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(r-n)*6*i:i<1/2?r:i<2/3?n+(r-n)*(2/3-i)*6:n}l.Color.fromRgb=function(n){return c.fromSource(c.sourceFromRgb(n))},l.Color.sourceFromRgb=function(n){var r=n.match(c.reRGBa);if(r){var i=parseInt(r[1],10)/(/%$/.test(r[1])?100:1)*(/%$/.test(r[1])?255:1),a=parseInt(r[2],10)/(/%$/.test(r[2])?100:1)*(/%$/.test(r[2])?255:1),h=parseInt(r[3],10)/(/%$/.test(r[3])?100:1)*(/%$/.test(r[3])?255:1);return[parseInt(i,10),parseInt(a,10),parseInt(h,10),r[4]?parseFloat(r[4]):1]}},l.Color.fromRgba=c.fromRgb,l.Color.fromHsl=function(n){return c.fromSource(c.sourceFromHsl(n))},l.Color.sourceFromHsl=function(n){var r=n.match(c.reHSLa);if(r){var i=(parseFloat(r[1])%360+360)%360/360,a=parseFloat(r[2])/(/%$/.test(r[2])?100:1),h=parseFloat(r[3])/(/%$/.test(r[3])?100:1),s,d,p;if(a===0)s=d=p=h;else{var y=h<=.5?h*(a+1):h+a-h*a,C=h*2-y;s=u(C,y,i+1/3),d=u(C,y,i),p=u(C,y,i-1/3)}return[Math.round(s*255),Math.round(d*255),Math.round(p*255),r[4]?parseFloat(r[4]):1]}},l.Color.fromHsla=c.fromHsl,l.Color.fromHex=function(n){return c.fromSource(c.sourceFromHex(n))},l.Color.sourceFromHex=function(n){if(n.match(c.reHex)){var r=n.slice(n.indexOf("#")+1),i=r.length===3||r.length===4,a=r.length===8||r.length===4,h=i?r.charAt(0)+r.charAt(0):r.substring(0,2),s=i?r.charAt(1)+r.charAt(1):r.substring(2,4),d=i?r.charAt(2)+r.charAt(2):r.substring(4,6),p=a?i?r.charAt(3)+r.charAt(3):r.substring(6,8):"FF";return[parseInt(h,16),parseInt(s,16),parseInt(d,16),parseFloat((parseInt(p,16)/255).toFixed(2))]}},l.Color.fromSource=function(n){var r=new c;return r.setSource(n),r}}(U),function(g){var l=g.fabric||(g.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],n={},r="left",i="top",a="right",h="bottom",s="center",d={top:h,bottom:i,left:a,right:r,center:s},p=l.util.radiansToDegrees,y=Math.sign||function(Y){return(Y>0)-(Y<0)||+Y};function C(Y,B){var K=Y.angle+p(Math.atan2(B.y,B.x))+360;return Math.round(K%360/45)}function S(Y,B){var K=B.transform.target,te=K.canvas,J=l.util.object.clone(B);J.target=K,te&&te.fire("object:"+Y,J),K.fire(Y,B)}function T(Y,B){var K=B.canvas,te=K.uniScaleKey,J=Y[te];return K.uniformScaling&&!J||!K.uniformScaling&&J}function P(Y){return Y.originX===s&&Y.originY===s}function L(Y,B,K){var te=Y.lockScalingX,J=Y.lockScalingY;return!!(te&&J||!B&&(te||J)&&K||te&&B==="x"||J&&B==="y")}function G(Y,B,K){var te="not-allowed",J=T(Y,K),se="";if(B.x!==0&&B.y===0?se="x":B.x===0&&B.y!==0&&(se="y"),L(K,se,J))return te;var ce=C(K,B);return c[ce]+"-resize"}function re(Y,B,K){var te="not-allowed";if(B.x!==0&&K.lockSkewingY||B.y!==0&&K.lockSkewingX)return te;var J=C(K,B)%4;return u[J]+"-resize"}function le(Y,B,K){return Y[K.canvas.altActionKey]?n.skewCursorStyleHandler(Y,B,K):n.scaleCursorStyleHandler(Y,B,K)}function V(Y,B,K){var te=Y[K.canvas.altActionKey];if(B.x===0)return te?"skewX":"scaleY";if(B.y===0)return te?"skewY":"scaleX"}function q(Y,B,K){return K.lockRotation?"not-allowed":B.cursorStyle}function ne(Y,B,K,te){return{e:Y,transform:B,pointer:{x:K,y:te}}}function fe(Y){return function(B,K,te,J){var se=K.target,ce=se.getCenterPoint(),xe=se.translateToOriginPoint(ce,K.originX,K.originY),ye=Y(B,K,te,J);return se.setPositionByOrigin(xe,K.originX,K.originY),ye}}function pe(Y,B){return function(K,te,J,se){var ce=B(K,te,J,se);return ce&&S(Y,ne(K,te,J,se)),ce}}function ge(Y,B,K,te,J){var se=Y.target,ce=se.controls[Y.corner],xe=se.canvas.getZoom(),ye=se.padding/xe,ie=se.toLocalPoint(new l.Point(te,J),B,K);return ie.x>=ye&&(ie.x-=ye),ie.x<=-ye&&(ie.x+=ye),ie.y>=ye&&(ie.y-=ye),ie.y<=ye&&(ie.y+=ye),ie.x-=ce.offsetX,ie.y-=ce.offsetY,ie}function $(Y){return Y.flipX!==Y.flipY}function D(Y,B,K,te,J){if(Y[B]!==0){var se=Y._getTransformedDimensions()[te],ce=J/se*Y[K];Y.set(K,ce)}}function I(Y,B,K,te){var J=B.target,se=J._getTransformedDimensions(0,J.skewY),ce=ge(B,B.originX,B.originY,K,te),xe=Math.abs(ce.x*2)-se.x,ye=J.skewX,ie;xe<2?ie=0:(ie=p(Math.atan2(xe/J.scaleX,se.y/J.scaleY)),B.originX===r&&B.originY===h&&(ie=-ie),B.originX===a&&B.originY===i&&(ie=-ie),$(J)&&(ie=-ie));var Ce=ye!==ie;if(Ce){var ke=J._getTransformedDimensions().y;J.set("skewX",ie),D(J,"skewY","scaleY","y",ke)}return Ce}function x(Y,B,K,te){var J=B.target,se=J._getTransformedDimensions(J.skewX,0),ce=ge(B,B.originX,B.originY,K,te),xe=Math.abs(ce.y*2)-se.y,ye=J.skewY,ie;xe<2?ie=0:(ie=p(Math.atan2(xe/J.scaleY,se.x/J.scaleX)),B.originX===r&&B.originY===h&&(ie=-ie),B.originX===a&&B.originY===i&&(ie=-ie),$(J)&&(ie=-ie));var Ce=ye!==ie;if(Ce){var ke=J._getTransformedDimensions().x;J.set("skewY",ie),D(J,"skewX","scaleX","x",ke)}return Ce}function O(Y,B,K,te){var J=B.target,se=J.skewX,ce,xe=B.originY;if(J.lockSkewingX)return!1;if(se===0){var ye=ge(B,s,s,K,te);ye.x>0?ce=r:ce=a}else se>0&&(ce=xe===i?r:a),se<0&&(ce=xe===i?a:r),$(J)&&(ce=ce===r?a:r);B.originX=ce;var ie=pe("skewing",fe(I));return ie(Y,B,K,te)}function j(Y,B,K,te){var J=B.target,se=J.skewY,ce,xe=B.originX;if(J.lockSkewingY)return!1;if(se===0){var ye=ge(B,s,s,K,te);ye.y>0?ce=i:ce=h}else se>0&&(ce=xe===r?i:h),se<0&&(ce=xe===r?h:i),$(J)&&(ce=ce===i?h:i);B.originY=ce;var ie=pe("skewing",fe(x));return ie(Y,B,K,te)}function k(Y,B,K,te){var J=B,se=J.target,ce=se.translateToOriginPoint(se.getCenterPoint(),J.originX,J.originY);if(se.lockRotation)return!1;var xe=Math.atan2(J.ey-ce.y,J.ex-ce.x),ye=Math.atan2(te-ce.y,K-ce.x),ie=p(ye-xe+J.theta),Ce=!0;if(se.snapAngle>0){var ke=se.snapAngle,Fe=se.snapThreshold||ke,qe=Math.ceil(ie/ke)*ke,Be=Math.floor(ie/ke)*ke;Math.abs(ie-Be)<Fe?ie=Be:Math.abs(ie-qe)<Fe&&(ie=qe)}return ie<0&&(ie=360+ie),ie%=360,Ce=se.angle!==ie,se.angle=ie,Ce}function E(Y,B,K,te,J){J=J||{};var se=B.target,ce=se.lockScalingX,xe=se.lockScalingY,ye=J.by,ie,Ce,ke,Fe,qe=T(Y,se),Be=L(se,ye,qe),Ye,Ae,Je=B.gestureScale;if(Be)return!1;if(Je)Ce=B.scaleX*Je,ke=B.scaleY*Je;else{if(ie=ge(B,B.originX,B.originY,K,te),Ye=ye!=="y"?y(ie.x):1,Ae=ye!=="x"?y(ie.y):1,B.signX||(B.signX=Ye),B.signY||(B.signY=Ae),se.lockScalingFlip&&(B.signX!==Ye||B.signY!==Ae))return!1;if(Fe=se._getTransformedDimensions(),qe&&!ye){var yt=Math.abs(ie.x)+Math.abs(ie.y),Jt=B.original,Zt=Math.abs(Fe.x*Jt.scaleX/se.scaleX)+Math.abs(Fe.y*Jt.scaleY/se.scaleY),Dt=yt/Zt;Ce=Jt.scaleX*Dt,ke=Jt.scaleY*Dt}else Ce=Math.abs(ie.x*se.scaleX/Fe.x),ke=Math.abs(ie.y*se.scaleY/Fe.y);P(B)&&(Ce*=2,ke*=2),B.signX!==Ye&&ye!=="y"&&(B.originX=d[B.originX],Ce*=-1,B.signX=Ye),B.signY!==Ae&&ye!=="x"&&(B.originY=d[B.originY],ke*=-1,B.signY=Ae)}var $r=se.scaleX,nn=se.scaleY;return ye?(ye==="x"&&se.set("scaleX",Ce),ye==="y"&&se.set("scaleY",ke)):(!ce&&se.set("scaleX",Ce),!xe&&se.set("scaleY",ke)),$r!==se.scaleX||nn!==se.scaleY}function F(Y,B,K,te){return E(Y,B,K,te)}function b(Y,B,K,te){return E(Y,B,K,te,{by:"x"})}function X(Y,B,K,te){return E(Y,B,K,te,{by:"y"})}function N(Y,B,K,te){return Y[B.target.canvas.altActionKey]?n.skewHandlerX(Y,B,K,te):n.scalingY(Y,B,K,te)}function Q(Y,B,K,te){return Y[B.target.canvas.altActionKey]?n.skewHandlerY(Y,B,K,te):n.scalingX(Y,B,K,te)}function ee(Y,B,K,te){var J=B.target,se=ge(B,B.originX,B.originY,K,te),ce=J.strokeWidth/(J.strokeUniform?J.scaleX:1),xe=P(B)?2:1,ye=J.width,ie=Math.abs(se.x*xe/J.scaleX)-ce;return J.set("width",Math.max(ie,0)),ye!==ie}function oe(Y,B,K,te){var J=B.target,se=K-B.offsetX,ce=te-B.offsetY,xe=!J.get("lockMovementX")&&J.left!==se,ye=!J.get("lockMovementY")&&J.top!==ce;return xe&&J.set("left",se),ye&&J.set("top",ce),(xe||ye)&&S("moving",ne(Y,B,K,te)),xe||ye}n.scaleCursorStyleHandler=G,n.skewCursorStyleHandler=re,n.scaleSkewCursorStyleHandler=le,n.rotationWithSnapping=pe("rotating",fe(k)),n.scalingEqually=pe("scaling",fe(F)),n.scalingX=pe("scaling",fe(b)),n.scalingY=pe("scaling",fe(X)),n.scalingYOrSkewingX=N,n.scalingXOrSkewingY=Q,n.changeWidth=pe("resizing",fe(ee)),n.skewHandlerX=O,n.skewHandlerY=j,n.dragHandler=oe,n.scaleOrSkewActionName=V,n.rotationStyleHandler=q,n.fireEvent=S,n.wrapWithFixedAnchor=fe,n.wrapWithFireEvent=pe,n.getLocalPoint=ge,l.controlsUtils=n}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.degreesToRadians,u=l.controlsUtils;function n(i,a,h,s,d){s=s||{};var p=this.sizeX||s.cornerSize||d.cornerSize,y=this.sizeY||s.cornerSize||d.cornerSize,C=typeof s.transparentCorners<"u"?s.transparentCorners:d.transparentCorners,S=C?"stroke":"fill",T=!C&&(s.cornerStrokeColor||d.cornerStrokeColor),P=a,L=h,G;i.save(),i.fillStyle=s.cornerColor||d.cornerColor,i.strokeStyle=s.cornerStrokeColor||d.cornerStrokeColor,p>y?(G=p,i.scale(1,y/p),L=h*p/y):y>p?(G=y,i.scale(p/y,1),P=a*y/p):G=p,i.lineWidth=1,i.beginPath(),i.arc(P,L,G/2,0,2*Math.PI,!1),i[S](),T&&i.stroke(),i.restore()}function r(i,a,h,s,d){s=s||{};var p=this.sizeX||s.cornerSize||d.cornerSize,y=this.sizeY||s.cornerSize||d.cornerSize,C=typeof s.transparentCorners<"u"?s.transparentCorners:d.transparentCorners,S=C?"stroke":"fill",T=!C&&(s.cornerStrokeColor||d.cornerStrokeColor),P=p/2,L=y/2;i.save(),i.fillStyle=s.cornerColor||d.cornerColor,i.strokeStyle=s.cornerStrokeColor||d.cornerStrokeColor,i.lineWidth=1,i.translate(a,h),i.rotate(c(d.angle)),i[S+"Rect"](-P,-L,p,y),T&&i.strokeRect(-P,-L,p,y),i.restore()}u.renderCircleControl=n,u.renderSquareControl=r}(U),function(g){var l=g.fabric||(g.fabric={});function c(u){for(var n in u)this[n]=u[n]}l.Control=c,l.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,n){return n.cursorStyle},getActionName:function(u,n){return n.actionName},getVisibility:function(u,n){var r=u._controlsVisibility;return r&&typeof r[n]<"u"?r[n]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,n){var r=l.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},n);return r},calcCornerCoords:function(u,n,r,i,a){var h,s,d,p,y=a?this.touchSizeX:this.sizeX,C=a?this.touchSizeY:this.sizeY;if(y&&C&&y!==C){var S=Math.atan2(C,y),T=Math.sqrt(y*y+C*C)/2,P=S-l.util.degreesToRadians(u),L=Math.PI/2-S-l.util.degreesToRadians(u);h=T*l.util.cos(P),s=T*l.util.sin(P),d=T*l.util.cos(L),p=T*l.util.sin(L)}else{var G=y&&C?y:n;T=G*.7071067812;var P=l.util.degreesToRadians(45-u);h=d=T*l.util.cos(P),s=p=T*l.util.sin(P)}return{tl:{x:r-p,y:i-d},tr:{x:r+h,y:i-s},bl:{x:r-h,y:i+s},br:{x:r+p,y:i+d}}},render:function(u,n,r,i,a){switch(i=i||{},i.cornerStyle||a.cornerStyle){case"circle":l.controlsUtils.renderCircleControl.call(this,u,n,r,i,a);break;default:l.controlsUtils.renderSquareControl.call(this,u,n,r,i,a)}}}}(U),function(){function g(r,i){var a=r.getAttribute("style"),h=r.getAttribute("offset")||0,s,d,p,y;if(h=parseFloat(h)/(/%$/.test(h)?100:1),h=h<0?0:h>1?1:h,a){var C=a.split(/\s*;\s*/);for(C[C.length-1]===""&&C.pop(),y=C.length;y--;){var S=C[y].split(/\s*:\s*/),T=S[0].trim(),P=S[1].trim();T==="stop-color"?s=P:T==="stop-opacity"&&(p=P)}}return s||(s=r.getAttribute("stop-color")||"rgb(0,0,0)"),p||(p=r.getAttribute("stop-opacity")),s=new v.Color(s),d=s.getAlpha(),p=isNaN(parseFloat(p))?1:parseFloat(p),p*=d*i,{offset:h,color:s.toRgb(),opacity:p}}function l(r){return{x1:r.getAttribute("x1")||0,y1:r.getAttribute("y1")||0,x2:r.getAttribute("x2")||"100%",y2:r.getAttribute("y2")||0}}function c(r){return{x1:r.getAttribute("fx")||r.getAttribute("cx")||"50%",y1:r.getAttribute("fy")||r.getAttribute("cy")||"50%",r1:0,x2:r.getAttribute("cx")||"50%",y2:r.getAttribute("cy")||"50%",r2:r.getAttribute("r")||"50%"}}var u=v.util.object.clone;v.Gradient=v.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(r){r||(r={}),r.coords||(r.coords={});var i,a=this;Object.keys(r).forEach(function(h){a[h]=r[h]}),this.id?this.id+="_"+v.Object.__uid++:this.id=v.Object.__uid++,i={x1:r.coords.x1||0,y1:r.coords.y1||0,x2:r.coords.x2||0,y2:r.coords.y2||0},this.type==="radial"&&(i.r1=r.coords.r1||0,i.r2=r.coords.r2||0),this.coords=i,this.colorStops=r.colorStops.slice()},addColorStop:function(r){for(var i in r){var a=new v.Color(r[i]);this.colorStops.push({offset:parseFloat(i),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(r){var i={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return v.util.populateWithProperties(this,i,r),i},toSVG:function(r,d){var a=u(this.coords,!0),h,s,d=d||{},p,y,C=u(this.colorStops,!0),S=a.r1>a.r2,T=this.gradientTransform?this.gradientTransform.concat():v.iMatrix.concat(),P=-this.offsetX,L=-this.offsetY,G=!!d.additionalTransform,re=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(C.sort(function(fe,pe){return fe.offset-pe.offset}),re==="objectBoundingBox"?(P/=r.width,L/=r.height):(P+=r.width/2,L+=r.height/2),r.type==="path"&&this.gradientUnits!=="percentage"&&(P-=r.pathOffset.x,L-=r.pathOffset.y),T[4]-=P,T[5]-=L,y='id="SVGID_'+this.id+'" gradientUnits="'+re+'"',y+=' gradientTransform="'+(G?d.additionalTransform+" ":"")+v.util.matrixToSVG(T)+'" ',this.type==="linear"?p=["<linearGradient ",y,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`">
`]:this.type==="radial"&&(p=["<radialGradient ",y,' cx="',S?a.x1:a.x2,'" cy="',S?a.y1:a.y2,'" r="',S?a.r1:a.r2,'" fx="',S?a.x2:a.x1,'" fy="',S?a.y2:a.y1,`">
`]),this.type==="radial"){if(S)for(C=C.concat(),C.reverse(),h=0,s=C.length;h<s;h++)C[h].offset=1-C[h].offset;var le=Math.min(a.r1,a.r2);if(le>0){var V=Math.max(a.r1,a.r2),q=le/V;for(h=0,s=C.length;h<s;h++)C[h].offset+=q*(1-C[h].offset)}}for(h=0,s=C.length;h<s;h++){var ne=C[h];p.push("<stop ",'offset="',ne.offset*100+"%",'" style="stop-color:',ne.color,typeof ne.opacity<"u"?";stop-opacity: "+ne.opacity:";",`"/>
`)}return p.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),p.join("")},toLive:function(r){var i,a=v.util.object.clone(this.coords),h,s;if(this.type){for(this.type==="linear"?i=r.createLinearGradient(a.x1,a.y1,a.x2,a.y2):this.type==="radial"&&(i=r.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),h=0,s=this.colorStops.length;h<s;h++){var d=this.colorStops[h].color,p=this.colorStops[h].opacity,y=this.colorStops[h].offset;typeof p<"u"&&(d=new v.Color(d).setAlpha(p).toRgba()),i.addColorStop(y,d)}return i}}}),v.util.object.extend(v.Gradient,{fromElement:function(r,i,a,h){var s=parseFloat(a)/(/%$/.test(a)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var d=r.getElementsByTagName("stop"),p,y=r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",C=r.getAttribute("gradientTransform")||"",S=[],T,P,L=0,G=0,re;for(r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?(p="linear",T=l(r)):(p="radial",T=c(r)),P=d.length;P--;)S.push(g(d[P],s));re=v.parseTransformAttribute(C),n(i,T,h,y),y==="pixels"&&(L=-i.left,G=-i.top);var le=new v.Gradient({id:r.getAttribute("id"),type:p,coords:T,colorStops:S,gradientUnits:y,gradientTransform:re,offsetX:L,offsetY:G});return le}});function n(r,i,a,h){var s,d;Object.keys(i).forEach(function(p){s=i[p],s==="Infinity"?d=1:s==="-Infinity"?d=0:(d=parseFloat(i[p],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(d*=.01,h==="pixels"&&((p==="x1"||p==="x2"||p==="r2")&&(d*=a.viewBoxWidth||a.width),(p==="y1"||p==="y2")&&(d*=a.viewBoxHeight||a.height)))),i[p]=d})}}(),function(){var g=v.util.toFixed;v.Pattern=v.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(l,c){if(l||(l={}),this.id=v.Object.__uid++,this.setOptions(l),!l.source||l.source&&typeof l.source!="string"){c&&c(this);return}else{var u=this;this.source=v.util.createImage(),v.util.loadImage(l.source,function(n,r){u.source=n,c&&c(u,r)},null,this.crossOrigin)}},toObject:function(l){var c=v.Object.NUM_FRACTION_DIGITS,u,n;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),n={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,c),offsetY:g(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},v.util.populateWithProperties(this,n,l),n},toSVG:function(l){var c=typeof this.source=="function"?this.source():this.source,u=c.width/l.width,n=c.height/l.height,r=this.offsetX/l.width,i=this.offsetY/l.height,a="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,i&&(n+=Math.abs(i))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,r&&(u+=Math.abs(r))),c.src?a=c.src:c.toDataURL&&(a=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+i+'" width="'+u+'" height="'+n+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+a+`"></image>
</pattern>
`},setOptions:function(l){for(var c in l)this[c]=l[c]},toLive:function(l){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":l.createPattern(c,this.repeat)}})}(),function(g){var l=g.fabric||(g.fabric={}),c=l.util.toFixed;if(l.Shadow){l.warn("fabric.Shadow is already defined.");return}l.Shadow=l.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var n in u)this[n]=u[n];this.id=l.Object.__uid++},_parseShadow:function(u){var n=u.trim(),r=l.Shadow.reOffsetsAndBlur.exec(n)||[],i=n.replace(l.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:i.trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var n=40,r=40,i=l.Object.NUM_FRACTION_DIGITS,a=l.util.rotateVector({x:this.offsetX,y:this.offsetY},l.util.degreesToRadians(-u.angle)),h=20,s=new l.Color(this.color);return u.width&&u.height&&(n=c((Math.abs(a.x)+this.blur)/u.width,i)*100+h,r=c((Math.abs(a.y)+this.blur)/u.height,i)*100+h),u.flipX&&(a.x*=-1),u.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,i)+`"></feGaussianBlur>
	<feOffset dx="`+c(a.x,i)+'" dy="'+c(a.y,i)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},n=l.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(r){this[r]!==n[r]&&(u[r]=this[r])},this),u}}),l.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(U),function(){if(v.StaticCanvas){v.warn("fabric.StaticCanvas is already defined.");return}var g=v.util.object.extend,l=v.util.getElementOffset,c=v.util.removeFromArray,u=v.util.toFixed,n=v.util.transformPoint,r=v.util.invertTransform,i=v.util.getNodeCanvas,a=v.util.createCanvasElement,h=new Error("Could not initialize `canvas` element");v.StaticCanvas=v.util.createClass(v.CommonMethods,{initialize:function(s,d){d||(d={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,d)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:v.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,d){var p=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(d),this.interactive||this._initRetinaScaling(),d.overlayImage&&this.setOverlayImage(d.overlayImage,p),d.backgroundImage&&this.setBackgroundImage(d.backgroundImage,p),d.backgroundColor&&this.setBackgroundColor(d.backgroundColor,p),d.overlayColor&&this.setOverlayColor(d.overlayColor,p),this.calcOffset()},_isRetinaScaling:function(){return v.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?v.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var s=v.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,d,p){d.setAttribute("width",this.width*s),d.setAttribute("height",this.height*s),p.scale(s,s)},calcOffset:function(){return this._offset=l(this.lowerCanvasEl),this},setOverlayImage:function(s,d,p){return this.__setBgOverlayImage("overlayImage",s,d,p)},setBackgroundImage:function(s,d,p){return this.__setBgOverlayImage("backgroundImage",s,d,p)},setOverlayColor:function(s,d){return this.__setBgOverlayColor("overlayColor",s,d)},setBackgroundColor:function(s,d){return this.__setBgOverlayColor("backgroundColor",s,d)},__setBgOverlayImage:function(s,d,p,y){return typeof d=="string"?v.util.loadImage(d,function(C,S){if(C){var T=new v.Image(C,y);this[s]=T,T.canvas=this}p&&p(C,S)},this,y&&y.crossOrigin):(y&&d.setOptions(y),this[s]=d,d&&(d.canvas=this),p&&p(d,!1)),this},__setBgOverlayColor:function(s,d,p){return this[s]=d,this._initGradient(d,s),this._initPattern(d,s,p),this},_createCanvasElement:function(){var s=a();if(!s||(s.style||(s.style={}),typeof s.getContext>"u"))throw h;return s},_initOptions:function(s){var d=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(d.width,10)||0,this.height=this.height||parseInt(d.height,10)||0,this.lowerCanvasEl.style&&(d.width=this.width,d.height=this.height,d.style.width=this.width+"px",d.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=v.util.getById(s)||this._createCanvasElement(),v.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,d){return this.setDimensions({width:s},d)},setHeight:function(s,d){return this.setDimensions({height:s},d)},setDimensions:function(s,d){var p;d=d||{};for(var y in s)p=s[y],d.cssOnly||(this._setBackstoreDimension(y,s[y]),p+="px",this.hasLostContext=!0),d.backstoreOnly||this._setCssDimension(y,p);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),d.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,d){return this.lowerCanvasEl[s]=d,this.upperCanvasEl&&(this.upperCanvasEl[s]=d),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=d),this[s]=d,this},_setCssDimension:function(s,d){return this.lowerCanvasEl.style[s]=d,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=d),this.wrapperEl&&(this.wrapperEl.style[s]=d),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var d=this._activeObject,p=this.backgroundImage,y=this.overlayImage,C,S,T;for(this.viewportTransform=s,S=0,T=this._objects.length;S<T;S++)C=this._objects[S],C.group||C.setCoords(!0);return d&&d.setCoords(),p&&p.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,d){var p=s,y=this.viewportTransform.slice(0);s=n(s,r(this.viewportTransform)),y[0]=d,y[3]=d;var C=n(s,y);return y[4]+=p.x-C.x,y[5]+=p.y-C.y,this.setViewportTransform(y)},setZoom:function(s){return this.zoomToPoint(new v.Point(0,0),s),this},absolutePan:function(s){var d=this.viewportTransform.slice(0);return d[4]=-s.x,d[5]=-s.y,this.setViewportTransform(d)},relativePan:function(s){return this.absolutePan(new v.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=v.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},d=this.width,p=this.height,y=r(this.viewportTransform);return s.tl=n({x:0,y:0},y),s.br=n({x:d,y:p},y),s.tr=new v.Point(s.br.x,s.tl.y),s.bl=new v.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(v.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,d){var p=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),v.util.setImageSmoothing(s,this.imageSmoothingEnabled),this.fire("before:render",{ctx:s}),this._renderBackground(s),s.save(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._renderObjects(s,d),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var d=this.viewportTransform,p=this.clipPath;s.save(),s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),s.globalCompositeOperation="destination-in",p.transform(s),s.scale(1/p.zoomX,1/p.zoomY),s.drawImage(p._cacheCanvas,-p.cacheTranslationX,-p.cacheTranslationY),s.restore()},_renderObjects:function(s,d){var p,y;for(p=0,y=d.length;p<y;++p)d[p]&&d[p].render(s)},_renderBackgroundOrOverlay:function(s,d){var p=this[d+"Color"],y=this[d+"Image"],C=this.viewportTransform,S=this[d+"Vpt"];if(!(!p&&!y)){if(p){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=p.toLive?p.toLive(s,this):p,S&&s.transform(C[0],C[1],C[2],C[3],C[4],C[5]),s.transform(1,0,0,1,p.offsetX||0,p.offsetY||0);var T=p.gradientTransform||p.patternTransform;T&&s.transform(T[0],T[1],T[2],T[3],T[4],T[5]),s.fill(),s.restore()}y&&(s.save(),S&&s.transform(C[0],C[1],C[2],C[3],C[4],C[5]),y.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(s){return this._centerObject(s,new v.Point(this.getCenter().left,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new v.Point(s.getCenterPoint().x,this.getCenter().top))},centerObject:function(s){var d=this.getCenter();return this._centerObject(s,new v.Point(d.left,d.top))},viewportCenterObject:function(s){var d=this.getVpCenter();return this._centerObject(s,d)},viewportCenterObjectH:function(s){var d=this.getVpCenter();return this._centerObject(s,new v.Point(d.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var d=this.getVpCenter();return this._centerObject(s,new v.Point(s.getCenterPoint().x,d.y))},getVpCenter:function(){var s=this.getCenter(),d=r(this.viewportTransform);return n({x:s.left,y:s.top},d)},_centerObject:function(s,d){return s.setPositionByOrigin(d,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,d){var p=this.clipPath,y={version:v.version,objects:this._toObjects(s,d)};return p&&!p.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,s,d)),g(y,this.__serializeBgOverlay(s,d)),v.util.populateWithProperties(this,y,d),y},_toObjects:function(s,d){return this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){return this._toObject(p,s,d)},this)},_toObject:function(s,d,p){var y;this.includeDefaultValues||(y=s.includeDefaultValues,s.includeDefaultValues=!1);var C=s[d](p);return this.includeDefaultValues||(s.includeDefaultValues=y),C},__serializeBgOverlay:function(s,d){var p={},y=this.backgroundImage,C=this.overlayImage,S=this.backgroundColor,T=this.overlayColor;return S&&S.toObject?S.excludeFromExport||(p.background=S.toObject(d)):S&&(p.background=S),T&&T.toObject?T.excludeFromExport||(p.overlay=T.toObject(d)):T&&(p.overlay=T),y&&!y.excludeFromExport&&(p.backgroundImage=this._toObject(y,s,d)),C&&!C.excludeFromExport&&(p.overlayImage=this._toObject(C,s,d)),p},svgViewportTransformation:!0,toSVG:function(s,d){s||(s={}),s.reviver=d;var p=[];return this._setSVGPreamble(p,s),this._setSVGHeader(p,s),this.clipPath&&p.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(p,"background"),this._setSVGBgOverlayImage(p,"backgroundImage",d),this._setSVGObjects(p,d),this.clipPath&&p.push(`</g>
`),this._setSVGBgOverlayColor(p,"overlay"),this._setSVGBgOverlayImage(p,"overlayImage",d),p.push("</svg>"),p.join("")},_setSVGPreamble:function(s,d){d.suppressPreamble||s.push('<?xml version="1.0" encoding="',d.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,d){var p=d.width||this.width,y=d.height||this.height,C,S='viewBox="0 0 '+this.width+" "+this.height+'" ',T=v.Object.NUM_FRACTION_DIGITS;d.viewBox?S='viewBox="'+d.viewBox.x+" "+d.viewBox.y+" "+d.viewBox.width+" "+d.viewBox.height+'" ':this.svgViewportTransformation&&(C=this.viewportTransform,S='viewBox="'+u(-C[4]/C[0],T)+" "+u(-C[5]/C[3],T)+" "+u(this.width/C[0],T)+" "+u(this.height/C[3],T)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',p,'" ','height="',y,'" ',S,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",v.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(d),`</defs>
`)},createSVGClipPathMarkup:function(s){var d=this.clipPath;return d?(d.clipPathId="CLIPPATH_"+v.Object.__uid++,'<clipPath id="'+d.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,d=["background","overlay"].map(function(p){var y=s[p+"Color"];if(y&&y.toLive){var C=s[p+"Vpt"],S=s.viewportTransform,T={width:s.width/(C?S[0]:1),height:s.height/(C?S[3]:1)};return y.toSVG(T,{additionalTransform:C?v.util.matrixToSVG(S):""})}});return d.join("")},createSVGFontFacesMarkup:function(){var s="",d={},p,y,C,S,T,P,L,G,re,le=v.fontPaths,V=[];for(this._objects.forEach(function ne(fe){V.push(fe),fe._objects&&fe._objects.forEach(ne)}),G=0,re=V.length;G<re;G++)if(p=V[G],y=p.fontFamily,!(p.type.indexOf("text")===-1||d[y]||!le[y])&&(d[y]=!0,!!p.styles)){C=p.styles;for(T in C){S=C[T];for(L in S)P=S[L],y=P.fontFamily,!d[y]&&le[y]&&(d[y]=!0)}}for(var q in d)s+=[`		@font-face {
`,"			font-family: '",q,`';
`,"			src: url('",le[q],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,d){var p,y,C,S=this._objects;for(y=0,C=S.length;y<C;y++)p=S[y],!p.excludeFromExport&&this._setSVGObject(s,p,d)},_setSVGObject:function(s,d,p){s.push(d.toSVG(p))},_setSVGBgOverlayImage:function(s,d,p){this[d]&&!this[d].excludeFromExport&&this[d].toSVG&&s.push(this[d].toSVG(p))},_setSVGBgOverlayColor:function(s,d){var p=this[d+"Color"],y=this.viewportTransform,C=this.width,S=this.height;if(p)if(p.toLive){var T=p.repeat,P=v.util.invertTransform(y),L=this[d+"Vpt"],G=L?v.util.matrixToSVG(P):"";s.push('<rect transform="'+G+" translate(",C/2,",",S/2,')"',' x="',p.offsetX-C/2,'" y="',p.offsetY-S/2,'" ','width="',T==="repeat-y"||T==="no-repeat"?p.source.width:C,'" height="',T==="repeat-x"||T==="no-repeat"?p.source.height:S,'" fill="url(#SVGID_'+p.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',p,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var d=this._activeObject,p,y,C;if(s===d&&s.type==="activeSelection")for(C=d._objects,p=C.length;p--;)y=C[p],c(this._objects,y),this._objects.unshift(y);else c(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var d=this._activeObject,p,y,C;if(s===d&&s.type==="activeSelection")for(C=d._objects,p=0;p<C.length;p++)y=C[p],c(this._objects,y),this._objects.push(y);else c(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,d){if(!s)return this;var p=this._activeObject,y,C,S,T,P,L=0;if(s===p&&s.type==="activeSelection")for(P=p._objects,y=0;y<P.length;y++)C=P[y],S=this._objects.indexOf(C),S>0+L&&(T=S-1,c(this._objects,C),this._objects.splice(T,0,C)),L++;else S=this._objects.indexOf(s),S!==0&&(T=this._findNewLowerIndex(s,S,d),c(this._objects,s),this._objects.splice(T,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,d,p){var y,C;if(p)for(y=d,C=d-1;C>=0;--C){var S=s.intersectsWithObject(this._objects[C])||s.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(s);if(S){y=C;break}}else y=d-1;return y},bringForward:function(s,d){if(!s)return this;var p=this._activeObject,y,C,S,T,P,L=0;if(s===p&&s.type==="activeSelection")for(P=p._objects,y=P.length;y--;)C=P[y],S=this._objects.indexOf(C),S<this._objects.length-1-L&&(T=S+1,c(this._objects,C),this._objects.splice(T,0,C)),L++;else S=this._objects.indexOf(s),S!==this._objects.length-1&&(T=this._findNewUpperIndex(s,S,d),c(this._objects,s),this._objects.splice(T,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,d,p){var y,C,S;if(p)for(y=d,C=d+1,S=this._objects.length;C<S;++C){var T=s.intersectsWithObject(this._objects[C])||s.isContainedWithinObject(this._objects[C])||this._objects[C].isContainedWithinObject(s);if(T){y=C;break}}else y=d+1;return y},moveTo:function(s,d){return c(this._objects,s),this._objects.splice(d,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(v.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),v.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(v.StaticCanvas.prototype,v.Observable),g(v.StaticCanvas.prototype,v.Collection),g(v.StaticCanvas.prototype,v.DataURLExporter),g(v.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var d=a();if(!d||!d.getContext)return null;var p=d.getContext("2d");if(!p)return null;switch(s){case"setLineDash":return typeof p.setLineDash<"u";default:return null}}}),v.StaticCanvas.prototype.toJSON=v.StaticCanvas.prototype.toObject,v.isLikelyNode&&(v.StaticCanvas.prototype.createPNGStream=function(){var s=i(this.lowerCanvasEl);return s&&s.createPNGStream()},v.StaticCanvas.prototype.createJPEGStream=function(s){var d=i(this.lowerCanvasEl);return d&&d.createJPEGStream(s)})}(),v.BaseBrush=v.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var g=this.canvas.contextTop;g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var l=this.canvas.viewportTransform;g.save(),g.transform(l[0],l[1],l[2],l[3],l[4],l[5])},_setShadow:function(){if(this.shadow){var g=this.canvas,l=this.shadow,c=g.contextTop,u=g.getZoom();g&&g._isRetinaScaling()&&(u*=v.devicePixelRatio),c.shadowColor=l.color,c.shadowBlur=l.blur*u,c.shadowOffsetX=l.offsetX*u,c.shadowOffsetY=l.offsetY*u}},needsFullRender:function(){var g=new v.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),function(){v.PencilBrush=v.util.createClass(v.BaseBrush,{decimate:.4,initialize:function(g){this.canvas=g,this._points=[]},_drawSegment:function(g,l,c){var u=l.midPointFrom(c);return g.quadraticCurveTo(l.x,l.y,u.x,u.y),u},onMouseDown:function(g,l){this.canvas._isMainEvent(l.e)&&(this._prepareForDrawing(g),this._captureDrawingPath(g),this._render())},onMouseMove:function(g,l){if(this.canvas._isMainEvent(l.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,u=c.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,c[u-2],c[u-1],!0),n.stroke(),n.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(g){var l=new v.Point(g.x,g.y);this._reset(),this._addPoint(l),this.canvas.contextTop.moveTo(l.x,l.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(g){var l=new v.Point(g.x,g.y);return this._addPoint(l)},_render:function(){var g=this.canvas.contextTop,l,c,u=this._points[0],n=this._points[1];if(this._saveAndTransform(g),g.beginPath(),this._points.length===2&&u.x===n.x&&u.y===n.y){var r=this.width/1e3;u=new v.Point(u.x,u.y),n=new v.Point(n.x,n.y),u.x-=r,n.x+=r}for(g.moveTo(u.x,u.y),l=1,c=this._points.length;l<c;l++)this._drawSegment(g,u,n),u=this._points[l],n=this._points[l+1];g.lineTo(u.x,u.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var l=this.width/1e3;return v.util.getSmoothPathFromPoints(g,l)},_isEmptySVGPath:function(g){var l=v.util.joinPath(g);return l==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var l=new v.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,l.shadow=new v.Shadow(this.shadow)),l},decimatePoints:function(g,l){if(g.length<=2)return g;var c=this.canvas.getZoom(),u=Math.pow(l/c,2),n,r=g.length-1,i=g[0],a=[i],h;for(n=1;n<r-1;n++)h=Math.pow(i.x-g[n].x,2)+Math.pow(i.y-g[n].y,2),h>=u&&(i=g[n],a.push(i));return a.push(g[r]),a},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var l=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(l)){this.canvas.requestRenderAll();return}var c=this.createPath(l);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),v.CircleBrush=v.util.createClass(v.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var l=this.addPoint(g),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,l),c.restore()},dot:function(g,l){g.fillStyle=l.fill,g.beginPath(),g.arc(l.x,l.y,l.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,l,c,u=this.points;for(this._saveAndTransform(g),l=0,c=u.length;l<c;l++)this.dot(g,u[l]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,l,c;this.canvas.renderOnAddRemove=!1;var u=[];for(l=0,c=this.points.length;l<c;l++){var n=this.points[l],r=new v.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&(r.shadow=new v.Shadow(this.shadow)),u.push(r)}var i=new v.Group(u);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var l=new v.Point(g.x,g.y),c=v.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new v.Color(this.color).setAlpha(v.util.getRandomInt(0,100)/100).toRgba();return l.radius=c,l.fill=u,this.points.push(l),l}}),v.SprayBrush=v.util.createClass(v.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var l=[],c=0,u=this.sprayChunks.length;c<u;c++)for(var n=this.sprayChunks[c],r=0,i=n.length;r<i;r++){var a=new v.Rect({width:n[r].width,height:n[r].width,left:n[r].x+1,top:n[r].y+1,originX:"center",originY:"center",fill:this.color});l.push(a)}this.optimizeOverlapping&&(l=this._getOptimizedRects(l));var h=new v.Group(l);this.shadow&&h.set("shadow",new v.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var l={},c,u,n;for(u=0,n=g.length;u<n;u++)c=g[u].left+""+g[u].top,l[c]||(l[c]=g[u]);var r=[];for(c in l)r.push(l[c]);return r},render:function(g){var l=this.canvas.contextTop,c,u;for(l.fillStyle=this.color,this._saveAndTransform(l),c=0,u=g.length;c<u;c++){var n=g[c];typeof n.opacity<"u"&&(l.globalAlpha=n.opacity),l.fillRect(n.x,n.y,n.width,n.width)}l.restore()},_render:function(){var g=this.canvas.contextTop,l,c;for(g.fillStyle=this.color,this._saveAndTransform(g),l=0,c=this.sprayChunks.length;l<c;l++)this.render(this.sprayChunks[l]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var l,c,u,n=this.width/2,r;for(r=0;r<this.density;r++){l=v.util.getRandomInt(g.x-n,g.x+n),c=v.util.getRandomInt(g.y-n,g.y+n),this.dotWidthVariance?u=v.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var i=new v.Point(l,c);i.width=u,this.randomOpacity&&(i.opacity=v.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),v.PatternBrush=v.util.createClass(v.PencilBrush,{getPatternSrc:function(){var g=20,l=5,c=v.util.createCanvasElement(),u=c.getContext("2d");return c.width=c.height=g+l,u.fillStyle=this.color,u.beginPath(),u.arc(g/2,g/2,g/2,0,Math.PI*2,!1),u.closePath(),u.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(g){var l=this.callSuper("createPath",g),c=l._getLeftTopCoords().scalarAdd(l.strokeWidth/2);return l.stroke=new v.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),l}}),function(){var g=v.util.getPointer,l=v.util.degreesToRadians,c=v.util.isTouchEvent;v.Canvas=v.util.createClass(v.StaticCanvas,{initialize:function(n,r){r||(r={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,r),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=v.PencilBrush&&new v.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),r,i,a;if(n.length>0&&!this.preserveObjectStacking){i=[],a=[];for(var h=0,s=this._objects.length;h<s;h++)r=this._objects[h],n.indexOf(r)===-1?i.push(r):a.push(r);n.length>1&&(this._activeObject._objects=a),i.push.apply(i,a)}else i=this._objects;return i},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,r){var i=n.calcTransformMatrix(),a=v.util.invertTransform(i),h=this.restorePointerVpt(r);return v.util.transformPoint(h,a)},isTargetTransparent:function(n,r,i){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var a=this._normalizePointer(n,{x:r,y:i}),h=Math.max(n.cacheTranslationX+a.x*n.zoomX,0),s=Math.max(n.cacheTranslationY+a.y*n.zoomY,0),C=v.util.isTransparent(n._cacheContext,Math.round(h),Math.round(s),this.targetFindTolerance);return C}var d=this.contextCache,p=n.selectionBackgroundColor,y=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(d),d.save(),d.transform(y[0],y[1],y[2],y[3],y[4],y[5]),n.render(d),d.restore(),n.selectionBackgroundColor=p;var C=v.util.isTransparent(d,r,i,this.targetFindTolerance);return C},_isSelectionKeyPressed:function(n){var r=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?r=!!this.selectionKey.find(function(i){return n[i]===!0}):r=n[this.selectionKey],r},_shouldClearSelection:function(n,r){var i=this.getActiveObjects(),a=this._activeObject;return!r||r&&a&&i.length>1&&i.indexOf(r)===-1&&a!==r&&!this._isSelectionKeyPressed(n)||r&&!r.evented||r&&!r.selectable&&a&&a!==r},_shouldCenterTransform:function(n,r,i){if(n){var a;return r==="scale"||r==="scaleX"||r==="scaleY"||r==="resizing"?a=this.centeredScaling||n.centeredScaling:r==="rotate"&&(a=this.centeredRotation||n.centeredRotation),a?!i:i}},_getOriginFromCorner:function(n,r){var i={x:n.originX,y:n.originY};return r==="ml"||r==="tl"||r==="bl"?i.x="right":(r==="mr"||r==="tr"||r==="br")&&(i.x="left"),r==="tl"||r==="mt"||r==="tr"?i.y="bottom":(r==="bl"||r==="mb"||r==="br")&&(i.y="top"),i},_getActionFromCorner:function(n,r,i,a){if(!r||!n)return"drag";var h=a.controls[r];return h.getActionName(i,h,a)},_setupCurrentTransform:function(n,r,i){if(r){var a=this.getPointer(n),h=r.__corner,s=r.controls[h],d=i&&h?s.getActionHandler(n,r,s):v.controlsUtils.dragHandler,p=this._getActionFromCorner(i,h,n,r),y=this._getOriginFromCorner(r,h),C=n[this.centeredKey],S={target:r,action:p,actionHandler:d,corner:h,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:a.x-r.left,offsetY:a.y-r.top,originX:y.x,originY:y.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:l(r.angle),width:r.width*r.scaleX,shiftKey:n.shiftKey,altKey:C,original:v.util.saveObjectTransform(r)};this._shouldCenterTransform(r,p,C)&&(S.originX="center",S.originY="center"),S.original.originX=y.x,S.original.originY=y.y,this._currentTransform=S,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var r=this._groupSelector,i=new v.Point(r.ex,r.ey),a=v.util.transformPoint(i,this.viewportTransform),h=new v.Point(r.ex+r.left,r.ey+r.top),s=v.util.transformPoint(h,this.viewportTransform),d=Math.min(a.x,s.x),p=Math.min(a.y,s.y),y=Math.max(a.x,s.x),C=Math.max(a.y,s.y),S=this.selectionLineWidth/2;this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(d,p,y-d,C-p)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,d+=S,p+=S,y-=S,C-=S,v.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(d,p,y-d,C-p))},findTarget:function(n,r){if(!this.skipTargetFind){var i=!0,a=this.getPointer(n,i),h=this._activeObject,s=this.getActiveObjects(),d,p,y=c(n),C=s.length>1&&!r||s.length===1;if(this.targets=[],C&&h._findTargetCorner(a,y)||s.length>1&&!r&&h===this._searchPossibleTargets([h],a))return h;if(s.length===1&&h===this._searchPossibleTargets([h],a))if(this.preserveObjectStacking)d=h,p=this.targets,this.targets=[];else return h;var S=this._searchPossibleTargets(this._objects,a);return n[this.altSelectionKey]&&S&&d&&S!==d&&(S=d,this.targets=p),S}},_checkTarget:function(n,r,i){if(r&&r.visible&&r.evented&&r.containsPoint(n))if((this.perPixelTargetFind||r.perPixelTargetFind)&&!r.isEditing){var a=this.isTargetTransparent(r,i.x,i.y);if(!a)return!0}else return!0},_searchPossibleTargets:function(n,r){for(var i,a=n.length,h;a--;){var s=n[a],d=s.group?this._normalizePointer(s.group,r):r;if(this._checkTarget(d,s,r)){i=n[a],i.subTargetCheck&&i instanceof v.Group&&(h=this._searchPossibleTargets(i._objects,r),h&&this.targets.push(h));break}}return i},restorePointerVpt:function(n){return v.util.transformPoint(n,v.util.invertTransform(this.viewportTransform))},getPointer:function(n,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var i=g(n),a=this.upperCanvasEl,h=a.getBoundingClientRect(),s=h.width||0,d=h.height||0,p;(!s||!d)&&("top"in h&&"bottom"in h&&(d=Math.abs(h.top-h.bottom)),"right"in h&&"left"in h&&(s=Math.abs(h.right-h.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,r||(i=this.restorePointerVpt(i));var y=this.getRetinaScaling();return y!==1&&(i.x/=y,i.y/=y),s===0||d===0?p={width:1,height:1}:p={width:a.width/s,height:a.height/d},{x:i.x*p.width,y:i.y*p.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),r=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),v.util.addClass(i,"upper-canvas "+n),this.wrapperEl.appendChild(i),this._copyCanvasStyle(r,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=v.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),v.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),v.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var r=this.width||n.width,i=this.height||n.height;v.util.setStyle(n,{position:"absolute",width:r+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=r,n.height=i,v.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,r){r.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,r){var i=!1,a=this.getActiveObjects(),h=[],s=[];n.forEach(function(d){a.indexOf(d)===-1&&(i=!0,d.fire("deselected",{e:r,target:d}),s.push(d))}),a.forEach(function(d){n.indexOf(d)===-1&&(i=!0,d.fire("selected",{e:r,target:d}),h.push(d))}),n.length>0&&a.length>0?i&&this.fire("selection:updated",{e:r,selected:h,deselected:s,updated:h[0]||s[0],target:this._activeObject}):a.length>0?this.fire("selection:created",{e:r,selected:h,target:this._activeObject}):n.length>0&&this.fire("selection:cleared",{e:r,deselected:s})},setActiveObject:function(n,r){var i=this.getActiveObjects();return this._setActiveObject(n,r),this._fireSelectionEvents(i,r),this},_setActiveObject:function(n,r){return this._activeObject===n||!this._discardActiveObject(r,n)||n.onSelect({e:r})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,r){var i=this._activeObject;if(i){if(i.onDeselect({e:n,object:r}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var r=this.getActiveObjects(),i=this.getActiveObject();return r.length&&this.fire("before:selection:cleared",{target:i,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(r,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(r){v.util.cleanUpJsdomNode(this[r]),this[r]=void 0}).bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,v.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var r=this._activeObject;r&&r._renderControls(n)},_toObject:function(n,r,i){var a=this._realizeGroupTransformOnObject(n),h=this.callSuper("_toObject",n,r,i);return this._unwindGroupTransformOnObject(n,a),h},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var r=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return r.forEach(function(a){i[a]=n[a]}),v.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),i}else return null},_unwindGroupTransformOnObject:function(n,r){r&&n.set(r)},_setSVGObject:function(n,r,i){var a=this._realizeGroupTransformOnObject(r);this.callSuper("_setSVGObject",n,r,i),this._unwindGroupTransformOnObject(r,a)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),v.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var u in v.StaticCanvas)u!=="prototype"&&(v.Canvas[u]=v.StaticCanvas[u])}(),function(){var g=v.util.addListener,l=v.util.removeListener,c=3,u=2,n=1,r={passive:!1};function i(a,h){return a.button&&a.button===h-1}v.util.object.extend(v.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,h){var s=this.upperCanvasEl,d=this._getEventPrefix();a(v.window,"resize",this._onResize),a(s,d+"down",this._onMouseDown),a(s,d+"move",this._onMouseMove,r),a(s,d+"out",this._onMouseOut),a(s,d+"enter",this._onMouseEnter),a(s,"wheel",this._onMouseWheel),a(s,"contextmenu",this._onContextMenu),a(s,"dblclick",this._onDoubleClick),a(s,"dragover",this._onDragOver),a(s,"dragenter",this._onDragEnter),a(s,"dragleave",this._onDragLeave),a(s,"drop",this._onDrop),this.enablePointerEvents||a(s,"touchstart",this._onTouchStart,r),typeof eventjs<"u"&&h in eventjs&&(eventjs[h](s,"gesture",this._onGesture),eventjs[h](s,"drag",this._onDrag),eventjs[h](s,"orientation",this._onOrientationChange),eventjs[h](s,"shake",this._onShake),eventjs[h](s,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(l,"remove");var a=this._getEventPrefix();l(v.document,a+"up",this._onMouseUp),l(v.document,"touchend",this._onTouchEnd,r),l(v.document,a+"move",this._onMouseMove,r),l(v.document,"touchmove",this._onMouseMove,r)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(a,h){this.__onTransformGesture&&this.__onTransformGesture(a,h)},_onDrag:function(a,h){this.__onDrag&&this.__onDrag(a,h)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var h=this._hoveredTarget;this.fire("mouse:out",{target:h,e:a}),this._hoveredTarget=null,h&&h.fire("mouseout",{e:a});var s=this;this._hoveredTargets.forEach(function(d){s.fire("mouse:out",{target:h,e:a}),d&&h.fire("mouseout",{e:a})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(d){d.isEditing&&d.hiddenTextarea.focus()})},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,h){this.__onOrientationChange&&this.__onOrientationChange(a,h)},_onShake:function(a,h){this.__onShake&&this.__onShake(a,h)},_onLongPress:function(a,h){this.__onLongPress&&this.__onLongPress(a,h)},_onDragOver:function(a){a.preventDefault();var h=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(h,a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var h=a.changedTouches;return h?h[0]&&h[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0?!0:a.isPrimary===!1?!1:a.type==="touchend"&&a.touches.length===0?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var h=this.upperCanvasEl,s=this._getEventPrefix();g(v.document,"touchend",this._onTouchEnd,r),g(v.document,"touchmove",this._onMouseMove,r),l(h,s+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var h=this.upperCanvasEl,s=this._getEventPrefix();l(h,s+"move",this._onMouseMove,r),g(v.document,s+"up",this._onMouseUp),g(v.document,s+"move",this._onMouseMove,r)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var h=this._getEventPrefix();l(v.document,"touchend",this._onTouchEnd,r),l(v.document,"touchmove",this._onMouseMove,r);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(s.upperCanvasEl,h+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var h=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(a)&&(l(v.document,s+"up",this._onMouseUp),l(v.document,s+"move",this._onMouseMove,r),g(h,s+"move",this._onMouseMove,r))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var h=this._activeObject;return!!h!=!!a||h&&a&&h!==a?!0:(h&&h.isEditing,!1)},__onMouseUp:function(a){var h,s=this._currentTransform,d=this._groupSelector,p=!1,y=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(a),h=this._target,this._handleEvent(a,"up:before"),i(a,c)){this.fireRightClick&&this._handleEvent(a,"up",c,y);return}if(i(a,u)){this.fireMiddleClick&&this._handleEvent(a,"up",u,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(a);return}if(this._isMainEvent(a)){if(s&&(this._finalizeCurrentTransform(a),p=s.actionPerformed),!y){var C=h===this._activeObject;this._maybeGroupObjects(a),p||(p=this._shouldRender(h)||!C&&h===this._activeObject)}if(h){if(h.selectable&&h!==this._activeObject&&h.activeOn==="up")this.setActiveObject(h,a),p=!0;else{var S=h._findTargetCorner(this.getPointer(a,!0),v.util.isTouchEvent(a)),T=h.controls[S],P=T&&T.getMouseUpHandler(a,h,T);if(P){var L=this.getPointer(a);P(a,s,L.x,L.y)}}h.isMoving=!1}this._setCursorFromEvent(a,h),this._handleEvent(a,"up",n,y),this._groupSelector=null,this._currentTransform=null,h&&(h.__corner=0),p?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(a,h){var s=this.findTarget(h),d=this.targets,p={e:h,target:s,subTargets:d};if(this.fire(a,p),s&&s.fire(a,p),!d)return s;for(var y=0;y<d.length;y++)d[y].fire(a,p);return s},_handleEvent:function(a,h,s,d){var p=this._target,y=this.targets||[],C={e:a,target:p,subTargets:y,button:s||n,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};h==="up"&&(C.currentTarget=this.findTarget(a),C.currentSubTargets=this.targets),this.fire("mouse:"+h,C),p&&p.fire("mouse"+h,C);for(var S=0;S<y.length;S++)y[S].fire("mouse"+h,C)},_finalizeCurrentTransform:function(a){var h=this._currentTransform,s=h.target,d,p={e:a,target:s,transform:h,action:h.action};s._scaling&&(s._scaling=!1),s.setCoords(),(h.actionPerformed||this.stateful&&s.hasStateChanged())&&(h.actionPerformed&&(d=this._addEventOptions(p,h),this._fire(d,p)),this._fire("modified",p))},_addEventOptions:function(a,h){var s,d;switch(h.action){case"scaleX":s="scaled",d="x";break;case"scaleY":s="scaled",d="y";break;case"skewX":s="skewed",d="x";break;case"skewY":s="skewed",d="y";break;case"scale":s="scaled",d="equally";break;case"rotate":s="rotated";break;case"drag":s="moved";break}return a.by=d,s},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var h=this.getPointer(a);this.freeDrawingBrush.onMouseDown(h,{e:a,pointer:h}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var h=this.getPointer(a);this.freeDrawingBrush.onMouseMove(h,{e:a,pointer:h})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var h=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:h}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var h=this._target;if(i(a,c)){this.fireRightClick&&this._handleEvent(a,"down",c);return}if(i(a,u)){this.fireMiddleClick&&this._handleEvent(a,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(a);return}if(this._isMainEvent(a)&&!this._currentTransform){var s=this._pointer;this._previousPointer=s;var d=this._shouldRender(h),p=this._shouldGroup(a,h);if(this._shouldClearSelection(a,h)?this.discardActiveObject(a):p&&(this._handleGrouping(a,h),h=this._activeObject),this.selection&&(!h||!h.selectable&&!h.isEditing&&h!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),h){var y=h===this._activeObject;h.selectable&&h.activeOn==="down"&&this.setActiveObject(h,a);var C=h._findTargetCorner(this.getPointer(a,!0),v.util.isTouchEvent(a));if(h.__corner=C,h===this._activeObject&&(C||!p)){this._setupCurrentTransform(a,h,y);var S=h.controls[C],s=this.getPointer(a),T=S&&S.getMouseDownHandler(a,h,S);T&&T(a,this._currentTransform,s.x,s.y)}}this._handleEvent(a,"down"),(d||p)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var h=this._currentTransform;this.stateful&&h.target.saveState(),this.fire("before:transform",{e:a,transform:h})},__onMouseMove:function(a){this._handleEvent(a,"move:before"),this._cacheTransformEventData(a);var h,s;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(a);return}if(this._isMainEvent(a)){var d=this._groupSelector;d?(s=this._absolutePointer,d.left=s.x-d.ex,d.top=s.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(h=this.findTarget(a)||null,this._setCursorFromEvent(a,h),this._fireOverOutEvents(h,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,h){var s=this._hoveredTarget,d=this._hoveredTargets,p=this.targets,y=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(a,h,{oldTarget:s,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var C=0;C<y;C++)this.fireSyntheticInOutEvents(p[C],h,{oldTarget:d[C],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,h){var s=this._draggedoverTarget,d=this._hoveredTargets,p=this.targets,y=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(a,h,{oldTarget:s,evtOut:"dragleave",evtIn:"dragenter"});for(var C=0;C<y;C++)this.fireSyntheticInOutEvents(p[C],h,{oldTarget:d[C],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,h,s){var d,p,y=s.oldTarget,C,S,T=y!==a,P=s.canvasEvtIn,L=s.canvasEvtOut;T&&(d={e:h,target:a,previousTarget:y},p={e:h,target:y,nextTarget:a}),S=a&&T,C=y&&T,C&&(L&&this.fire(L,p),y.fire(s.evtOut,p)),S&&(P&&this.fire(P,d),a.fire(s.evtIn,d))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var h=this.getPointer(a),s=this._currentTransform;s.reset=!1,s.shiftKey=a.shiftKey,s.altKey=a[this.centeredKey],this._performTransformAction(a,s,h),s.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,h,s){var d=s.x,p=s.y,y=h.action,C=!1,S=h.actionHandler;S&&(C=S(a,h,d,p)),y==="drag"&&C&&(h.target.isMoving=!0,this.setCursor(h.target.moveCursor||this.moveCursor)),h.actionPerformed=h.actionPerformed||C},_fire:v.controlsUtils.fireEvent,_setCursorFromEvent:function(a,h){if(!h)return this.setCursor(this.defaultCursor),!1;var s=h.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,p=(!d||!d.contains(h))&&h._findTargetCorner(this.getPointer(a,!0));p?this.setCursor(this.getCornerCursor(p,h,a)):(h.subTargetCheck&&this.targets.concat().reverse().map(function(y){s=y.hoverCursor||s}),this.setCursor(s))},getCornerCursor:function(a,h,s){var d=h.controls[a];return d.cursorStyleHandler(s,d,h)}})}(),function(){var g=Math.min,l=Math.max;v.util.object.extend(v.Canvas.prototype,{_shouldGroup:function(c,u){var n=this._activeObject;return n&&this._isSelectionKeyPressed(c)&&u&&u.selectable&&this.selection&&(n!==u||n.type==="activeSelection")&&!u.onSelect({e:c})},_handleGrouping:function(c,u){var n=this._activeObject;n.__corner||u===n&&(u=this.findTarget(c,!0),!u||!u.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(u,c):this._createActiveSelection(u,c))},_updateActiveSelection:function(c,u){var n=this._activeObject,r=n._objects.slice(0);n.contains(c)?(n.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),u)):(n.addWithUpdate(c),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,u)},_createActiveSelection:function(c,u){var n=this.getActiveObjects(),r=this._createGroup(c);this._hoveredTarget=r,this._setActiveObject(r,u),this._fireSelectionEvents(n,u)},_createGroup:function(c){var u=this._objects,n=u.indexOf(this._activeObject)<u.indexOf(c),r=n?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new v.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(c){var u=this._collectObjects(c),n;u.length===1?this.setActiveObject(u[0],c):u.length>1&&(n=new v.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(n,c))},_collectObjects:function(c){for(var u=[],n,r=this._groupSelector.ex,i=this._groupSelector.ey,a=r+this._groupSelector.left,h=i+this._groupSelector.top,s=new v.Point(g(r,a),g(i,h)),d=new v.Point(l(r,a),l(i,h)),p=!this.selectionFullyContained,y=r===a&&i===h,C=this._objects.length;C--&&(n=this._objects[C],!(!(!n||!n.selectable||!n.visible)&&(p&&n.intersectsWithRect(s,d,!0)||n.isContainedWithinRect(s,d,!0)||p&&n.containsPoint(s,null,!0)||p&&n.containsPoint(d,null,!0))&&(u.push(n),y))););return u.length>1&&(u=u.filter(function(S){return!S.onSelect({e:c})})),u},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){v.util.object.extend(v.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var l=g.format||"png",c=g.quality||1,u=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(u,g);return v.util.toDataURL(n,l,c)},toCanvasElement:function(g,l){g=g||1,l=l||{};var c=(l.width||this.width)*g,u=(l.height||this.height)*g,n=this.getZoom(),r=this.width,i=this.height,a=n*g,h=this.viewportTransform,s=(h[4]-(l.left||0))*g,d=(h[5]-(l.top||0))*g,p=this.interactive,y=[a,0,0,a,s,d],C=this.enableRetinaScaling,S=v.util.createCanvasElement(),T=this.contextTop;return S.width=c,S.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=c,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(S.getContext("2d"),this._objects),this.viewportTransform=h,this.width=r,this.height=i,this.calcViewportBoundaries(),this.interactive=p,this.enableRetinaScaling=C,this.contextTop=T,S}})}(),v.util.object.extend(v.StaticCanvas.prototype,{loadFromJSON:function(g,l,c){if(g){var u=typeof g=="string"?JSON.parse(g):v.util.object.clone(g),n=this,r=u.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(a){n.clear(),n._setBgOverlay(u,function(){r?n._enlivenObjects([r],function(h){n.clipPath=h[0],n.__setupCanvas.call(n,u,a,i,l)}):n.__setupCanvas.call(n,u,a,i,l)})},c),this}},__setupCanvas:function(g,l,c,u){var n=this;l.forEach(function(r,i){n.insertAt(r,i)}),this.renderOnAddRemove=c,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),u&&u()},_setBgOverlay:function(g,l){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){l&&l();return}var u=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&l&&l()};this.__setBgOverlay("backgroundImage",g.backgroundImage,c,u),this.__setBgOverlay("overlayImage",g.overlayImage,c,u),this.__setBgOverlay("backgroundColor",g.background,c,u),this.__setBgOverlay("overlayColor",g.overlay,c,u)},__setBgOverlay:function(g,l,c,u){var n=this;if(!l){c[g]=!0,u&&u();return}g==="backgroundImage"||g==="overlayImage"?v.util.enlivenObjects([l],function(r){n[g]=r[0],c[g]=!0,u&&u()}):this["set"+v.util.string.capitalize(g,!0)](l,function(){c[g]=!0,u&&u()})},_enlivenObjects:function(g,l,c){if(!g||g.length===0){l&&l([]);return}v.util.enlivenObjects(g,function(u){l&&l(u)},null,c)},_toDataURL:function(g,l){this.clone(function(c){l(c.toDataURL(g))})},_toDataURLWithMultiplier:function(g,l,c){this.clone(function(u){c(u.toDataURLWithMultiplier(g,l))})},clone:function(g,l){var c=JSON.stringify(this.toJSON(l));this.cloneWithoutData(function(u){u.loadFromJSON(c,function(){g&&g(u)})})},cloneWithoutData:function(g){var l=v.util.createCanvasElement();l.width=this.width,l.height=this.height;var c=new v.Canvas(l);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),g&&g(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):g&&g(c)}}),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.util.object.clone,n=l.util.toFixed,r=l.util.string.capitalize,i=l.util.degreesToRadians,a=!l.isLikelyNode,h=2;l.Object||(l.Object=l.util.createClass(l.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(s){s&&this.setOptions(s)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=l.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(s){var d=l.perfLimitSizeTotal,p=s.width,y=s.height,C=l.maxCacheSideLimit,S=l.minCacheSideLimit;if(p<=C&&y<=C&&p*y<=d)return p<S&&(s.width=S),y<S&&(s.height=S),s;var T=p/y,P=l.util.limitDimsByArea(T,d),L=l.util.capValue,G=L(S,P.x,C),re=L(S,P.y,C);return p>G&&(s.zoomX/=p/G,s.width=G,s.capped=!0),y>re&&(s.zoomY/=y/re,s.height=re,s.capped=!0),s},_getCacheCanvasDimensions:function(){var s=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),p=d.x*s.scaleX/this.scaleX,y=d.y*s.scaleY/this.scaleY;return{width:p+h,height:y+h,zoomX:s.scaleX,zoomY:s.scaleY,x:p,y}},_updateCacheCanvas:function(){var s=this.canvas;if(this.noScaleCache&&s&&s._currentTransform){var d=s._currentTransform.target,p=s._currentTransform.action;if(this===d&&p.slice&&p.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,C=this._limitCacheSize(this._getCacheCanvasDimensions()),S=l.minCacheSideLimit,T=C.width,P=C.height,L,G,re=C.zoomX,le=C.zoomY,V=T!==this.cacheWidth||P!==this.cacheHeight,q=this.zoomX!==re||this.zoomY!==le,ne=V||q,fe=0,pe=0,ge=!1;if(V){var $=this._cacheCanvas.width,D=this._cacheCanvas.height,I=T>$||P>D,x=(T<$*.9||P<D*.9)&&$>S&&D>S;ge=I||x,I&&!C.capped&&(T>S||P>S)&&(fe=T*.1,pe=P*.1)}return this instanceof l.Text&&this.path&&(ne=!0,ge=!0,fe+=this.getHeightOfLine(0)*this.zoomX,pe+=this.getHeightOfLine(0)*this.zoomY),ne?(ge?(y.width=Math.ceil(T+fe),y.height=Math.ceil(P+pe)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),L=C.x/2,G=C.y/2,this.cacheTranslationX=Math.round(y.width/2-L)+L,this.cacheTranslationY=Math.round(y.height/2-G)+G,this.cacheWidth=T,this.cacheHeight=P,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(re,le),this.zoomX=re,this.zoomY=le,!0):!1},setOptions:function(s){this._setOptions(s),this._initGradient(s.fill,"fill"),this._initGradient(s.stroke,"stroke"),this._initPattern(s.fill,"fill"),this._initPattern(s.stroke,"stroke")},transform:function(s){var d=this.group&&!this.group._transformDone||this.group&&this.canvas&&s===this.canvas.contextTop,p=this.calcTransformMatrix(!d);s.transform(p[0],p[1],p[2],p[3],p[4],p[5])},toObject:function(s){var d=l.Object.NUM_FRACTION_DIGITS,p={type:this.type,version:l.version,originX:this.originX,originY:this.originY,left:n(this.left,d),top:n(this.top,d),width:n(this.width,d),height:n(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,d),scaleX:n(this.scaleX,d),scaleY:n(this.scaleY,d),angle:n(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,d),skewY:n(this.skewY,d)};return this.clipPath&&!this.clipPath.excludeFromExport&&(p.clipPath=this.clipPath.toObject(s),p.clipPath.inverted=this.clipPath.inverted,p.clipPath.absolutePositioned=this.clipPath.absolutePositioned),l.util.populateWithProperties(this,p,s),this.includeDefaultValues||(p=this._removeDefaultValues(p)),p},toDatalessObject:function(s){return this.toObject(s)},_removeDefaultValues:function(s){var d=l.util.getKlass(s.type).prototype,p=d.stateProperties;return p.forEach(function(y){if(!(y==="left"||y==="top")){s[y]===d[y]&&delete s[y];var C=Object.prototype.toString.call(s[y])==="[object Array]"&&Object.prototype.toString.call(d[y])==="[object Array]";C&&s[y].length===0&&d[y].length===0&&delete s[y]}}),s},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var s=l.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(s.scaleX),scaleY:Math.abs(s.scaleY)}},getTotalObjectScaling:function(){var s=this.getObjectScaling(),d=s.scaleX,p=s.scaleY;if(this.canvas){var y=this.canvas.getZoom(),C=this.canvas.getRetinaScaling();d*=y*C,p*=y*C}return{scaleX:d,scaleY:p}},getObjectOpacity:function(){var s=this.opacity;return this.group&&(s*=this.group.getObjectOpacity()),s},_set:function(s,d){var p=s==="scaleX"||s==="scaleY",y=this[s]!==d,C=!1;return p&&(d=this._constrainScale(d)),s==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):s==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):s==="shadow"&&d&&!(d instanceof l.Shadow)?d=new l.Shadow(d):s==="dirty"&&this.group&&this.group.set("dirty",d),this[s]=d,y&&(C=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(s)>-1?(this.dirty=!0,C&&this.group.set("dirty",!0)):C&&this.stateProperties.indexOf(s)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:l.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(s){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(s.save(),this._setupCompositeOperation(s),this.drawSelectionBackground(s),this.transform(s),this._setOpacity(s),this._setShadow(s,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(s)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(s),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),s.restore())},renderCache:function(s){s=s||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,s.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(s){var d=this.clipPath;if(s.save(),d.inverted?s.globalCompositeOperation="destination-out":s.globalCompositeOperation="destination-in",d.absolutePositioned){var p=l.util.invertTransform(this.calcTransformMatrix());s.transform(p[0],p[1],p[2],p[3],p[4],p[5])}d.transform(s),s.scale(1/d.zoomX,1/d.zoomY),s.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),s.restore()},drawObject:function(s,d){var p=this.fill,y=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(s)):this._renderBackground(s),this._render(s),this._drawClipPath(s),this.fill=p,this.stroke=y},_drawClipPath:function(s){var d=this.clipPath;d&&(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(s))},drawCacheOnCanvas:function(s){s.scale(1/this.zoomX,1/this.zoomY),s.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(s){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!s&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!s){var d=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-p/2,d,p)}return!0}return!1},_renderBackground:function(s){if(this.backgroundColor){var d=this._getNonTransformedDimensions();s.fillStyle=this.backgroundColor,s.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(s)}},_setOpacity:function(s){this.group&&!this.group._transformDone?s.globalAlpha=this.getObjectOpacity():s.globalAlpha*=this.opacity},_setStrokeStyles:function(s,d){var p=d.stroke;p&&(s.lineWidth=d.strokeWidth,s.lineCap=d.strokeLineCap,s.lineDashOffset=d.strokeDashOffset,s.lineJoin=d.strokeLineJoin,s.miterLimit=d.strokeMiterLimit,p.toLive?p.gradientUnits==="percentage"||p.gradientTransform||p.patternTransform?this._applyPatternForTransformedGradient(s,p):(s.strokeStyle=p.toLive(s,this),this._applyPatternGradientTransform(s,p)):s.strokeStyle=d.stroke)},_setFillStyles:function(s,d){var p=d.fill;p&&(p.toLive?(s.fillStyle=p.toLive(s,this),this._applyPatternGradientTransform(s,d.fill)):s.fillStyle=p)},_setClippingProperties:function(s){s.globalAlpha=1,s.strokeStyle="transparent",s.fillStyle="#000000"},_setLineDash:function(s,d){!d||d.length===0||(1&d.length&&d.push.apply(d,d),s.setLineDash(d))},_renderControls:function(s,d){var p=this.getViewportTransform(),y=this.calcTransformMatrix(),C,S,T;d=d||{},S=typeof d.hasBorders<"u"?d.hasBorders:this.hasBorders,T=typeof d.hasControls<"u"?d.hasControls:this.hasControls,y=l.util.multiplyTransformMatrices(p,y),C=l.util.qrDecompose(y),s.save(),s.translate(C.translateX,C.translateY),s.lineWidth=1*this.borderScaleFactor,this.group||(s.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),s.rotate(i(C.angle)),d.forActiveSelection||this.group?S&&this.drawBordersInGroup(s,C,d):S&&this.drawBorders(s,d),T&&this.drawControls(s,d),s.restore()},_setShadow:function(s){if(this.shadow){var d=this.shadow,p=this.canvas,y,C=p&&p.viewportTransform[0]||1,S=p&&p.viewportTransform[3]||1;d.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),p&&p._isRetinaScaling()&&(C*=l.devicePixelRatio,S*=l.devicePixelRatio),s.shadowColor=d.color,s.shadowBlur=d.blur*l.browserShadowBlurConstant*(C+S)*(y.scaleX+y.scaleY)/4,s.shadowOffsetX=d.offsetX*C*y.scaleX,s.shadowOffsetY=d.offsetY*S*y.scaleY}},_removeShadow:function(s){this.shadow&&(s.shadowColor="",s.shadowBlur=s.shadowOffsetX=s.shadowOffsetY=0)},_applyPatternGradientTransform:function(s,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var p=d.gradientTransform||d.patternTransform,y=-this.width/2+d.offsetX||0,C=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?s.transform(this.width,0,0,this.height,y,C):s.transform(1,0,0,1,y,C),p&&s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),{offsetX:y,offsetY:C}},_renderPaintInOrder:function(s){this.paintFirst==="stroke"?(this._renderStroke(s),this._renderFill(s)):(this._renderFill(s),this._renderStroke(s))},_render:function(){},_renderFill:function(s){this.fill&&(s.save(),this._setFillStyles(s,this),this.fillRule==="evenodd"?s.fill("evenodd"):s.fill(),s.restore())},_renderStroke:function(s){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(s),s.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();s.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&s.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(s,this.strokeDashArray),this._setStrokeStyles(s,this),s.stroke(),s.restore()}},_applyPatternForTransformedGradient:function(s,d){var p=this._limitCacheSize(this._getCacheCanvasDimensions()),y=l.util.createCanvasElement(),C,S=this.canvas.getRetinaScaling(),T=p.x/this.scaleX/S,P=p.y/this.scaleY/S;y.width=T,y.height=P,C=y.getContext("2d"),C.beginPath(),C.moveTo(0,0),C.lineTo(T,0),C.lineTo(T,P),C.lineTo(0,P),C.closePath(),C.translate(T/2,P/2),C.scale(p.zoomX/this.scaleX/S,p.zoomY/this.scaleY/S),this._applyPatternGradientTransform(C,d),C.fillStyle=d.toLive(s),C.fill(),s.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),s.scale(S*this.scaleX/p.zoomX,S*this.scaleY/p.zoomY),s.strokeStyle=C.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var s=l.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",s.scaleX),this.set("scaleY",s.scaleY),this.angle=s.angle,this.skewX=s.skewX,this.skewY=0}},_removeTransformMatrix:function(s){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=l.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,s&&(this.scaleX*=s.scaleX,this.scaleY*=s.scaleY,this.cropX=s.cropX,this.cropY=s.cropY,d.x+=s.offsetLeft,d.y+=s.offsetTop,this.width=s.width,this.height=s.height),this.setPositionByOrigin(d,"center","center")},clone:function(s,d){var p=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(p,s):l.Object._fromObject("Object",p,s)},cloneAsImage:function(s,d){var p=this.toCanvasElement(d);return s&&s(new l.Image(p)),this},toCanvasElement:function(s){s||(s={});var d=l.util,p=d.saveObjectTransform(this),y=this.group,C=this.shadow,S=Math.abs,T=(s.multiplier||1)*(s.enableRetinaScaling?l.devicePixelRatio:1);delete this.group,s.withoutTransform&&d.resetObjectTransform(this),s.withoutShadow&&(this.shadow=null);var P=l.util.createCanvasElement(),L=this.getBoundingRect(!0,!0),G=this.shadow,re,le={x:0,y:0},V,q,ne;G&&(V=G.blur,G.nonScaling?re={scaleX:1,scaleY:1}:re=this.getObjectScaling(),le.x=2*Math.round(S(G.offsetX)+V)*S(re.scaleX),le.y=2*Math.round(S(G.offsetY)+V)*S(re.scaleY)),q=L.width+le.x,ne=L.height+le.y,P.width=Math.ceil(q),P.height=Math.ceil(ne);var fe=new l.StaticCanvas(P,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});s.format==="jpeg"&&(fe.backgroundColor="#fff"),this.setPositionByOrigin(new l.Point(fe.width/2,fe.height/2),"center","center");var pe=this.canvas;fe.add(this);var ge=fe.toCanvasElement(T||1,s);return this.shadow=C,this.set("canvas",pe),y&&(this.group=y),this.set(p).setCoords(),fe._objects=[],fe.dispose(),fe=null,ge},toDataURL:function(s){return s||(s={}),l.util.toDataURL(this.toCanvasElement(s),s.format||"png",s.quality||1)},isType:function(s){return this.type===s},complexity:function(){return 1},toJSON:function(s){return this.toObject(s)},rotate:function(s){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",s),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(s,d){d=d||this.canvas.getPointer(s);var p=new l.Point(d.x,d.y),y=this._getLeftTopCoords();return this.angle&&(p=l.util.rotatePoint(p,y,i(-this.angle))),{x:p.x-y.x,y:p.y-y.y}},_setupCompositeOperation:function(s){this.globalCompositeOperation&&(s.globalCompositeOperation=this.globalCompositeOperation)}}),l.util.createAccessors&&l.util.createAccessors(l.Object),c(l.Object.prototype,l.Observable),l.Object.NUM_FRACTION_DIGITS=2,l.Object._fromObject=function(s,d,p,y){var C=l[s];d=u(d,!0),l.util.enlivenPatterns([d.fill,d.stroke],function(S){typeof S[0]<"u"&&(d.fill=S[0]),typeof S[1]<"u"&&(d.stroke=S[1]),l.util.enlivenObjects([d.clipPath],function(T){d.clipPath=T[0];var P=y?new C(d[y],d):new C(d);p&&p(P)})})},l.Object.__uid=0)}(U),function(){var g=v.util.degreesToRadians,l={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};v.util.object.extend(v.Object.prototype,{translateToGivenOrigin:function(u,n,r,i,a){var h=u.x,s=u.y,d,p,y;return typeof n=="string"?n=l[n]:n-=.5,typeof i=="string"?i=l[i]:i-=.5,d=i-n,typeof r=="string"?r=c[r]:r-=.5,typeof a=="string"?a=c[a]:a-=.5,p=a-r,(d||p)&&(y=this._getTransformedDimensions(),h=u.x+d*y.x,s=u.y+p*y.y),new v.Point(h,s)},translateToCenterPoint:function(u,n,r){var i=this.translateToGivenOrigin(u,n,r,"center","center");return this.angle?v.util.rotatePoint(i,u,g(this.angle)):i},translateToOriginPoint:function(u,n,r){var i=this.translateToGivenOrigin(u,"center","center",n,r);return this.angle?v.util.rotatePoint(i,u,g(this.angle)):i},getCenterPoint:function(){var u=new v.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,n){var r=this.getCenterPoint();return this.translateToOriginPoint(r,u,n)},toLocalPoint:function(u,n,r){var i=this.getCenterPoint(),a,h;return typeof n<"u"&&typeof r<"u"?a=this.translateToGivenOrigin(i,"center","center",n,r):a=new v.Point(this.left,this.top),h=new v.Point(u.x,u.y),this.angle&&(h=v.util.rotatePoint(h,i,-g(this.angle))),h.subtractEquals(a)},setPositionByOrigin:function(u,n,r){var i=this.translateToCenterPoint(u,n,r),a=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(u){var n=g(this.angle),r=this.getScaledWidth(),i=v.util.cos(n)*r,a=v.util.sin(n)*r,h,s;typeof this.originX=="string"?h=l[this.originX]:h=this.originX-.5,typeof u=="string"?s=l[u]:s=u-.5,this.left+=i*(s-h),this.top+=a*(s-h),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function g(r){return[new v.Point(r.tl.x,r.tl.y),new v.Point(r.tr.x,r.tr.y),new v.Point(r.br.x,r.br.y),new v.Point(r.bl.x,r.bl.y)]}var l=v.util,c=l.degreesToRadians,u=l.multiplyTransformMatrices,n=l.transformPoint;l.object.extend(v.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(r,i){return i?r?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),r?this.aCoords:this.lineCoords)},getCoords:function(r,i){return g(this._getCoords(r,i))},intersectsWithRect:function(r,i,a,h){var s=this.getCoords(a,h),d=v.Intersection.intersectPolygonRectangle(s,r,i);return d.status==="Intersection"},intersectsWithObject:function(r,i,a){var h=v.Intersection.intersectPolygonPolygon(this.getCoords(i,a),r.getCoords(i,a));return h.status==="Intersection"||r.isContainedWithinObject(this,i,a)||this.isContainedWithinObject(r,i,a)},isContainedWithinObject:function(r,i,a){for(var h=this.getCoords(i,a),s=i?r.aCoords:r.lineCoords,d=0,p=r._getImageLines(s);d<4;d++)if(!r.containsPoint(h[d],p))return!1;return!0},isContainedWithinRect:function(r,i,a,h){var s=this.getBoundingRect(a,h);return s.left>=r.x&&s.left+s.width<=i.x&&s.top>=r.y&&s.top+s.height<=i.y},containsPoint:function(r,d,a,h){var s=this._getCoords(a,h),d=d||this._getImageLines(s),p=this._findCrossPoints(r,d);return p!==0&&p%2===1},isOnScreen:function(r){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,h=this.getCoords(!0,r);return h.some(function(s){return s.x<=a.x&&s.x>=i.x&&s.y<=a.y&&s.y>=i.y})||this.intersectsWithRect(i,a,!0,r)?!0:this._containsCenterOfCanvas(i,a,r)},_containsCenterOfCanvas:function(r,i,a){var h={x:(r.x+i.x)/2,y:(r.y+i.y)/2};return!!this.containsPoint(h,null,!0,a)},isPartiallyOnScreen:function(r){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;if(this.intersectsWithRect(i,a,!0,r))return!0;var h=this.getCoords(!0,r).every(function(s){return(s.x>=a.x||s.x<=i.x)&&(s.y>=a.y||s.y<=i.y)});return h&&this._containsCenterOfCanvas(i,a,r)},_getImageLines:function(r){var i={topline:{o:r.tl,d:r.tr},rightline:{o:r.tr,d:r.br},bottomline:{o:r.br,d:r.bl},leftline:{o:r.bl,d:r.tl}};return i},_findCrossPoints:function(r,i){var a,h,s,d,p,y=0,C;for(var S in i)if(C=i[S],!(C.o.y<r.y&&C.d.y<r.y)&&!(C.o.y>=r.y&&C.d.y>=r.y)&&(C.o.x===C.d.x&&C.o.x>=r.x?p=C.o.x:(a=0,h=(C.d.y-C.o.y)/(C.d.x-C.o.x),s=r.y-a*r.x,d=C.o.y-h*C.o.x,p=-(s-d)/(a-h)),p>=r.x&&(y+=1),y===2))break;return y},getBoundingRect:function(r,i){var a=this.getCoords(r,i);return l.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(r){return Math.abs(r)<this.minScaleLimit?r<0?-this.minScaleLimit:this.minScaleLimit:r===0?1e-4:r},scale:function(r){return this._set("scaleX",r),this._set("scaleY",r),this.setCoords()},scaleToWidth:function(r,i){var a=this.getBoundingRect(i).width/this.getScaledWidth();return this.scale(r/this.width/a)},scaleToHeight:function(r,i){var a=this.getBoundingRect(i).height/this.getScaledHeight();return this.scale(r/this.height/a)},calcCoords:function(r){return r?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var r=this.getViewportTransform(),i=this.padding,a=c(this.angle),h=l.cos(a),s=l.sin(a),d=h*i,p=s*i,y=d+p,C=d-p,S=this.calcACoords(),T={tl:n(S.tl,r),tr:n(S.tr,r),bl:n(S.bl,r),br:n(S.br,r)};return i&&(T.tl.x-=C,T.tl.y-=y,T.tr.x+=y,T.tr.y-=C,T.bl.x-=y,T.bl.y+=C,T.br.x+=C,T.br.y+=y),T},calcOCoords:function(){var r=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),a=this.getViewportTransform(),h=u(a,i),s=u(h,r),s=u(s,[1/a[0],0,0,1/a[3],0,0]),d=this._calculateCurrentDimensions(),p={};return this.forEachControl(function(y,C,S){p[C]=y.positionHandler(d,s,S)}),p},calcACoords:function(){var r=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),a=u(i,r),h=this._getTransformedDimensions(),s=h.x/2,d=h.y/2;return{tl:n({x:-s,y:-d},a),tr:n({x:s,y:-d},a),bl:n({x:-s,y:d},a),br:n({x:s,y:d},a)}},setCoords:function(r){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),r?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return l.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var r=this.getCenterPoint();return[1,0,0,1,r.x,r.y]},transformMatrixKey:function(r){var i="_",a="";return!r&&this.group&&(a=this.group.transformMatrixKey(r)+i),a+this.top+i+this.left+i+this.scaleX+i+this.scaleY+i+this.skewX+i+this.skewY+i+this.angle+i+this.originX+i+this.originY+i+this.width+i+this.height+i+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(r){var i=this.calcOwnMatrix();if(r||!this.group)return i;var a=this.transformMatrixKey(r),h=this.matrixCache||(this.matrixCache={});return h.key===a?h.value:(this.group&&(i=u(this.group.calcTransformMatrix(!1),i)),h.key=a,h.value=i,i)},calcOwnMatrix:function(){var r=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===r)return i.value;var a=this._calcTranslateMatrix(),h={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=r,i.value=l.composeMatrix(h),i.value},_calcDimensionsTransformMatrix:function(r,i,a){return l.calcDimensionsMatrix({skewX:r,skewY:i,scaleX:this.scaleX*(a&&this.flipX?-1:1),scaleY:this.scaleY*(a&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var r=this.strokeWidth,i=this.width+r,a=this.height+r;return{x:i,y:a}},_getTransformedDimensions:function(r,i){typeof r>"u"&&(r=this.skewX),typeof i>"u"&&(i=this.skewY);var a,h,s,d=r===0&&i===0;if(this.strokeUniform?(h=this.width,s=this.height):(a=this._getNonTransformedDimensions(),h=a.x,s=a.y),d)return this._finalizeDimensions(h*this.scaleX,s*this.scaleY);var p=l.sizeAfterTransform(h,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:r,skewY:i});return this._finalizeDimensions(p.x,p.y)},_finalizeDimensions:function(r,i){return this.strokeUniform?{x:r+this.strokeWidth,y:i+this.strokeWidth}:{x:r,y:i}},_calculateCurrentDimensions:function(){var r=this.getViewportTransform(),i=this._getTransformedDimensions(),a=n(i,r,!0);return a.scalarAdd(2*this.padding)}})}(),v.util.object.extend(v.Object.prototype,{sendToBack:function(){return this.group?v.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?v.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?v.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?v.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?v.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),function(){function g(c,u){if(u){if(u.toLive)return c+": url(#SVGID_"+u.id+"); ";var n=new v.Color(u),r=c+": "+n.toRgb()+"; ",i=n.getAlpha();return i!==1&&(r+=c+"-opacity: "+i.toString()+"; "),r}else return c+": none; "}var l=v.util.toFixed;v.util.object.extend(v.Object.prototype,{getSvgStyles:function(c){var u=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=typeof this.opacity<"u"?this.opacity:"1",p=this.visible?"":" visibility: hidden;",y=c?"":this.getSvgFilter(),C=g("fill",this.fill),S=g("stroke",this.stroke);return[S,"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",s,"; ",C,"fill-rule: ",u,"; ","opacity: ",d,";",y,p].join("")},getSvgSpanStyles:function(c,u){var n="; ",i=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+n:"",r=c.strokeWidth?"stroke-width: "+c.strokeWidth+n:"",i=i,a=c.fontSize?"font-size: "+c.fontSize+"px"+n:"",h=c.fontStyle?"font-style: "+c.fontStyle+n:"",s=c.fontWeight?"font-weight: "+c.fontWeight+n:"",d=c.fill?g("fill",c.fill):"",p=c.stroke?g("stroke",c.stroke):"",y=this.getSvgTextDecoration(c),C=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return y&&(y="text-decoration: "+y+n),[p,r,i,a,h,s,y,d,C,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(u){return c[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,u){var n=c?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+v.util.matrixToSVG(n);return r+(u||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var u=v.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',l(-this.width/2,u),'" y="',l(-this.height/2,u),'" width="',l(this.width,u),'" height="',l(this.height,u),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,u){u=u||{};var n=u.reviver,r=u.additionalTransform||"",i=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),a=c.indexOf("COMMON_PARTS");return c[a]=i,n?n(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,u){u=u||{};var n=u.noStyle,r=u.reviver,i=n?"":'style="'+this.getSvgStyles()+'" ',a=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",h=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,p=this.stroke,y=this.fill,C=this.shadow,S,T=[],P,L=c.indexOf("COMMON_PARTS"),G=u.additionalTransform;return h&&(h.clipPathId="CLIPPATH_"+v.Object.__uid++,P='<clipPath id="'+h.clipPathId+`" >
`+h.toClipPathSVG(r)+`</clipPath>
`),d&&T.push("<g ",a,this.getSvgCommons(),` >
`),T.push("<g ",this.getSvgTransform(!1),d?"":a+this.getSvgCommons(),` >
`),S=[i,s,n?"":this.addPaintOrder()," ",G?'transform="'+G+'" ':""].join(""),c[L]=S,y&&y.toLive&&T.push(y.toSVG(this)),p&&p.toLive&&T.push(p.toSVG(this)),C&&T.push(C.toSVG(this)),h&&T.push(P),T.push(c.join("")),T.push(`</g>
`),d&&T.push(`</g>
`),r?r(T.join("")):T.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var g=v.util.object.extend,l="stateProperties";function c(n,r,i){var a={},h=!0;i.forEach(function(s){a[s]=n[s]}),g(n[r],a,h)}function u(n,r,i){if(n===r)return!0;if(Array.isArray(n)){if(!Array.isArray(r)||n.length!==r.length)return!1;for(var a=0,h=n.length;a<h;a++)if(!u(n[a],r[a]))return!1;return!0}else if(n&&typeof n=="object"){var s=Object.keys(n),d;if(!r||typeof r!="object"||!i&&s.length!==Object.keys(r).length)return!1;for(var a=0,h=s.length;a<h;a++)if(d=s[a],!(d==="canvas"||d==="group")&&!u(n[d],r[d]))return!1;return!0}}v.util.object.extend(v.Object.prototype,{hasStateChanged:function(n){n=n||l;var r="_"+n;return Object.keys(this[r]).length<this[n].length?!0:!u(this[r],this,!0)},saveState:function(n){var r=n&&n.propertySet||l,i="_"+r;return this[i]?(c(this,i,this[r]),n&&n.stateProperties&&c(this,i,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var r=n.propertySet||l;return n.propertySet=r,this["_"+r]={},this.saveState(n),this}})}(),function(){var g=v.util.degreesToRadians;v.util.object.extend(v.Object.prototype,{_findTargetCorner:function(l,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=l.x,n=l.y,r,i,a=Object.keys(this.oCoords),h=a.length-1,s;for(this.__corner=0;h>=0;h--)if(s=a[h],!!this.isControlVisible(s)&&(i=this._getImageLines(c?this.oCoords[s].touchCorner:this.oCoords[s].corner),r=this._findCrossPoints({x:u,y:n},i),r!==0&&r%2===1))return this.__corner=s,s;return!1},forEachControl:function(l){for(var c in this.controls)l(this.controls[c],c,this)},_setCornerCoords:function(){var l=this.oCoords;for(var c in l){var u=this.controls[c];l[c].corner=u.calcCornerCoords(this.angle,this.cornerSize,l[c].x,l[c].y,!1),l[c].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,l[c].x,l[c].y,!0)}},drawSelectionBackground:function(l){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;l.save();var c=this.getCenterPoint(),u=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return l.translate(c.x,c.y),l.scale(1/n[0],1/n[3]),l.rotate(g(this.angle)),l.fillStyle=this.selectionBackgroundColor,l.fillRect(-u.x/2,-u.y/2,u.x,u.y),l.restore(),this},drawBorders:function(l,c){c=c||{};var u=this._calculateCurrentDimensions(),n=this.borderScaleFactor,r=u.x+n,i=u.y+n,a=typeof c.hasControls<"u"?c.hasControls:this.hasControls,h=!1;return l.save(),l.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(l,c.borderDashArray||this.borderDashArray),l.strokeRect(-r/2,-i/2,r,i),a&&(l.beginPath(),this.forEachControl(function(s,d,p){s.withConnection&&s.getVisibility(p,d)&&(h=!0,l.moveTo(s.x*r,s.y*i),l.lineTo(s.x*r+s.offsetX,s.y*i+s.offsetY))}),h&&l.stroke()),l.restore(),this},drawBordersInGroup:function(l,c,u){u=u||{};var n=v.util.sizeAfterTransform(this.width,this.height,c),r=this.strokeWidth,i=this.strokeUniform,a=this.borderScaleFactor,h=n.x+r*(i?this.canvas.getZoom():c.scaleX)+a,s=n.y+r*(i?this.canvas.getZoom():c.scaleY)+a;return l.save(),this._setLineDash(l,u.borderDashArray||this.borderDashArray),l.strokeStyle=u.borderColor||this.borderColor,l.strokeRect(-h/2,-s/2,h,s),l.restore(),this},drawControls:function(l,c){c=c||{},l.save();var u=this.canvas.getRetinaScaling(),n,r;return l.setTransform(u,0,0,u,0,0),l.strokeStyle=l.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(l.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(l,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl(function(i,a,h){r=h.oCoords[a],i.getVisibility(h,a)&&(n&&(r=v.util.transformPoint(r,n)),i.render(l,r.x,r.y,c,h))}),l.restore(),this},isControlVisible:function(l){return this.controls[l]&&this.controls[l].getVisibility(this,l)},setControlVisible:function(l,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[l]=c,this},setControlsVisibility:function(l){l||(l={});for(var c in l)this.setControlVisible(c,l[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),v.util.object.extend(v.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,l){l=l||{};var c=function(){},u=l.onComplete||c,n=l.onChange||c,r=this;return v.util.animate({startValue:g.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(i){g.set("left",i),r.requestRenderAll(),n()},onComplete:function(){g.setCoords(),u()}}),this},fxCenterObjectV:function(g,l){l=l||{};var c=function(){},u=l.onComplete||c,n=l.onChange||c,r=this;return v.util.animate({startValue:g.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(i){g.set("top",i),r.requestRenderAll(),n()},onComplete:function(){g.setCoords(),u()}}),this},fxRemove:function(g,l){l=l||{};var c=function(){},u=l.onComplete||c,n=l.onChange||c,r=this;return v.util.animate({startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){g.set("opacity",i),r.requestRenderAll(),n()},onComplete:function(){r.remove(g),u()}}),this}}),v.util.object.extend(v.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],l,c;for(l in arguments[0])g.push(l);for(var u=0,n=g.length;u<n;u++)l=g[u],c=u!==n-1,this._animate(l,arguments[0][l],arguments[1],c)}else this._animate.apply(this,arguments);return this},_animate:function(g,l,c,u){var n=this,r;l=l.toString(),c?c=v.util.object.clone(c):c={},~g.indexOf(".")&&(r=g.split("."));var i=n.colorProperties.indexOf(g)>-1||r&&n.colorProperties.indexOf(r[1])>-1,a=r?this.get(r[0])[r[1]]:this.get(g);"from"in c||(c.from=a),i||(~l.indexOf("=")?l=a+parseFloat(l.replace("=","")):l=parseFloat(l));var h={startValue:c.from,endValue:l,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(s,d,p){return c.abort.call(n,s,d,p)},onChange:function(s,d,p){r?n[r[0]][r[1]]=s:n.set(g,s),!u&&c.onChange&&c.onChange(s,d,p)},onComplete:function(s,d,p){u||(n.setCoords(),c.onComplete&&c.onComplete(s,d,p))}};return i?v.util.animateColor(h.startValue,h.endValue,h.duration,h):v.util.animate(h)}}),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};if(l.Line){l.warn("fabric.Line is already defined");return}l.Line=l.util.createClass(l.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:l.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,a){i||(i=[0,0,0,0]),this.callSuper("initialize",a),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(a)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,a){return this.callSuper("_set",i,a),typeof n[i]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var a=this.calcLinePoints();i.moveTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineWidth=this.strokeWidth;var h=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=h},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return c(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(i.y-=this.strokeWidth),this.height===0&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1,h=i*this.width*.5,s=a*this.height*.5,d=i*this.width*-.5,p=a*this.height*-.5;return{x1:h,x2:d,y1:s,y2:p}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,`" />
`]}}),l.Line.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),l.Line.fromElement=function(i,a,h){h=h||{};var s=l.parseAttributes(i,l.Line.ATTRIBUTE_NAMES),d=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];a(new l.Line(d,c(s,h)))},l.Line.fromObject=function(i,a){function h(d){delete d.points,a&&a(d)}var s=u(i,!0);s.points=[i.x1,i.y1,i.x2,i.y2],l.Object._fromObject("Line",s,h,"points")};function r(i,a){var h=i.origin,s=i.axis1,d=i.axis2,p=i.dimension,y=a.nearest,C=a.center,S=a.farthest;return function(){switch(this.get(h)){case y:return Math.min(this.get(s),this.get(d));case C:return Math.min(this.get(s),this.get(d))+.5*this.get(p);case S:return Math.max(this.get(s),this.get(d))}}}}(U),function(g){var l=g.fabric||(g.fabric={}),c=Math.PI;if(l.Circle){l.warn("fabric.Circle is already defined.");return}l.Circle=l.util.createClass(l.Object,{type:"circle",radius:0,startAngle:0,endAngle:c*2,cacheProperties:l.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,r){return this.callSuper("_set",n,r),n==="radius"&&this.setRadius(r),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,r=0,i=0,a=(this.endAngle-this.startAngle)%(2*c);if(a===0)n=["<circle ","COMMON_PARTS",'cx="'+r+'" cy="'+i+'" ','r="',this.radius,`" />
`];else{var h=l.util.cos(this.startAngle)*this.radius,s=l.util.sin(this.startAngle)*this.radius,d=l.util.cos(this.endAngle)*this.radius,p=l.util.sin(this.endAngle)*this.radius,y=a>c?"1":"0";n=['<path d="M '+h+" "+s," A "+this.radius+" "+this.radius," 0 ",+y+" 1"," "+d+" "+p,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),l.Circle.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),l.Circle.fromElement=function(n,r){var i=l.parseAttributes(n,l.Circle.ATTRIBUTE_NAMES);if(!u(i))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,r(new l.Circle(i))};function u(n){return"radius"in n&&n.radius>=0}l.Circle.fromObject=function(n,r){l.Object._fromObject("Circle",n,r)}}(U),function(g){var l=g.fabric||(g.fabric={});if(l.Triangle){l.warn("fabric.Triangle is already defined");return}l.Triangle=l.util.createClass(l.Object,{type:"triangle",width:100,height:100,_render:function(c){var u=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-u,n),c.lineTo(0,-n),c.lineTo(u,n),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,u=this.height/2,n=[-c+" "+u,"0 "+-u,c+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),l.Triangle.fromObject=function(c,u){return l.Object._fromObject("Triangle",c,u)}}(U),function(g){var l=g.fabric||(g.fabric={}),c=Math.PI*2;if(l.Ellipse){l.warn("fabric.Ellipse is already defined.");return}l.Ellipse=l.util.createClass(l.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:l.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,n){switch(this.callSuper("_set",u,n),u){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,c,!1),u.restore(),this._renderPaintInOrder(u)}}),l.Ellipse.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),l.Ellipse.fromElement=function(u,n){var r=l.parseAttributes(u,l.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,n(new l.Ellipse(r))},l.Ellipse.fromObject=function(u,n){l.Object._fromObject("Ellipse",u,n)}}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend;if(l.Rect){l.warn("fabric.Rect is already defined");return}l.Rect=l.util.createClass(l.Object,{stateProperties:l.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:l.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var n=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,a=this.height,h=-this.width/2,s=-this.height/2,d=n!==0||r!==0,p=1-.5522847498;u.beginPath(),u.moveTo(h+n,s),u.lineTo(h+i-n,s),d&&u.bezierCurveTo(h+i-p*n,s,h+i,s+p*r,h+i,s+r),u.lineTo(h+i,s+a-r),d&&u.bezierCurveTo(h+i,s+a-p*r,h+i-p*n,s+a,h+i-n,s+a),u.lineTo(h+n,s+a),d&&u.bezierCurveTo(h+p*n,s+a,h,s+a-p*r,h,s+a-r),u.lineTo(h,s+r),d&&u.bezierCurveTo(h,s+p*r,h+p*n,s,h+n,s),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),l.Rect.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),l.Rect.fromElement=function(u,n,r){if(!u)return n(null);r=r||{};var i=l.parseAttributes(u,l.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var a=new l.Rect(c(r?l.util.object.clone(r):{},i));a.visible=a.visible&&a.width>0&&a.height>0,n(a)},l.Rect.fromObject=function(u,n){return l.Object._fromObject("Rect",u,n)}}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.util.array.min,n=l.util.array.max,r=l.util.toFixed;if(l.Polyline){l.warn("fabric.Polyline is already defined");return}l.Polyline=l.util.createClass(l.Object,{type:"polyline",points:null,cacheProperties:l.Object.prototype.cacheProperties.concat("points"),initialize:function(i,a){a=a||{},this.points=i||[],this.callSuper("initialize",a),this._setPositionDimensions(a)},_setPositionDimensions:function(i){var a=this._calcDimensions(i),h;this.width=a.width,this.height=a.height,i.fromSVG||(h=this.translateToGivenOrigin({x:a.left-this.strokeWidth/2,y:a.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof i.left>"u"&&(this.left=i.fromSVG?a.left:h.x),typeof i.top>"u"&&(this.top=i.fromSVG?a.top:h.y),this.pathOffset={x:a.left+this.width/2,y:a.top+this.height/2}},_calcDimensions:function(){var i=this.points,a=u(i,"x")||0,h=u(i,"y")||0,s=n(i,"x")||0,d=n(i,"y")||0,p=s-a,y=d-h;return{left:a,top:h,width:p,height:y}},toObject:function(i){return c(this.callSuper("toObject",i),{points:this.points.concat()})},_toSVG:function(){for(var i=[],a=this.pathOffset.x,h=this.pathOffset.y,s=l.Object.NUM_FRACTION_DIGITS,d=0,p=this.points.length;d<p;d++)i.push(r(this.points[d].x-a,s),",",r(this.points[d].y-h,s)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',i.join(""),`" />
`]},commonRender:function(i){var a,h=this.points.length,s=this.pathOffset.x,d=this.pathOffset.y;if(!h||isNaN(this.points[h-1].y))return!1;i.beginPath(),i.moveTo(this.points[0].x-s,this.points[0].y-d);for(var p=0;p<h;p++)a=this.points[p],i.lineTo(a.x-s,a.y-d);return!0},_render:function(i){this.commonRender(i)&&this._renderPaintInOrder(i)},complexity:function(){return this.get("points").length}}),l.Polyline.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat(),l.Polyline.fromElementGenerator=function(i){return function(a,h,s){if(!a)return h(null);s||(s={});var d=l.parsePointsAttribute(a.getAttribute("points")),p=l.parseAttributes(a,l[i].ATTRIBUTE_NAMES);p.fromSVG=!0,h(new l[i](d,c(p,s)))}},l.Polyline.fromElement=l.Polyline.fromElementGenerator("Polyline"),l.Polyline.fromObject=function(i,a){return l.Object._fromObject("Polyline",i,a,"points")}}(U),function(g){var l=g.fabric||(g.fabric={});if(l.Polygon){l.warn("fabric.Polygon is already defined");return}l.Polygon=l.util.createClass(l.Polyline,{type:"polygon",_render:function(c){this.commonRender(c)&&(c.closePath(),this._renderPaintInOrder(c))}}),l.Polygon.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat(),l.Polygon.fromElement=l.Polyline.fromElementGenerator("Polygon"),l.Polygon.fromObject=function(c,u){l.Object._fromObject("Polygon",c,u,"points")}}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.array.min,u=l.util.array.max,n=l.util.object.extend,r=Object.prototype.toString,i=l.util.toFixed;if(l.Path){l.warn("fabric.Path is already defined");return}l.Path=l.util.createClass(l.Object,{type:"path",path:null,cacheProperties:l.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:l.Object.prototype.stateProperties.concat("path"),initialize:function(a,h){h=h||{},this.callSuper("initialize",h),a||(a=[]);var s=r.call(a)==="[object Array]";this.path=l.util.makePathSimpler(s?a:l.util.parsePath(a)),this.path&&l.Polyline.prototype._setPositionDimensions.call(this,h)},_renderPathCommands:function(a){var h,s=0,d=0,p=0,y=0,C=0,S=0,T=-this.pathOffset.x,P=-this.pathOffset.y;a.beginPath();for(var L=0,G=this.path.length;L<G;++L)switch(h=this.path[L],h[0]){case"L":p=h[1],y=h[2],a.lineTo(p+T,y+P);break;case"M":p=h[1],y=h[2],s=p,d=y,a.moveTo(p+T,y+P);break;case"C":p=h[5],y=h[6],C=h[3],S=h[4],a.bezierCurveTo(h[1]+T,h[2]+P,C+T,S+P,p+T,y+P);break;case"Q":a.quadraticCurveTo(h[1]+T,h[2]+P,h[3]+T,h[4]+P),p=h[3],y=h[4],C=h[1],S=h[2];break;case"z":case"Z":p=s,y=d,a.closePath();break}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return n(this.callSuper("toObject",a),{path:this.path.map(function(h){return h.slice()})})},toDatalessObject:function(a){var h=this.toObject(["sourcePath"].concat(a));return h.sourcePath&&delete h.path,h},_toSVG:function(){var a=l.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',a,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var a=l.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,a)+", "+i(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var h=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:h})},toSVG:function(a){var h=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:h})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var a=[],h=[],s,d=0,p=0,y=0,C=0,S,T=0,P=this.path.length;T<P;++T){switch(s=this.path[T],s[0]){case"L":y=s[1],C=s[2],S=[];break;case"M":y=s[1],C=s[2],d=y,p=C,S=[];break;case"C":S=l.util.getBoundsOfCurve(y,C,s[1],s[2],s[3],s[4],s[5],s[6]),y=s[5],C=s[6];break;case"Q":S=l.util.getBoundsOfCurve(y,C,s[1],s[2],s[1],s[2],s[3],s[4]),y=s[3],C=s[4];break;case"z":case"Z":y=d,C=p;break}S.forEach(function(ne){a.push(ne.x),h.push(ne.y)}),a.push(y),h.push(C)}var L=c(a)||0,G=c(h)||0,re=u(a)||0,le=u(h)||0,V=re-L,q=le-G;return{left:L,top:G,width:V,height:q}}}),l.Path.fromObject=function(a,h){if(typeof a.sourcePath=="string"){var s=a.sourcePath;l.loadSVGFromURL(s,function(d){var p=d[0];p.setOptions(a),h&&h(p)})}else l.Object._fromObject("Path",a,h,"path")},l.Path.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat(["d"]),l.Path.fromElement=function(a,h,s){var d=l.parseAttributes(a,l.Path.ATTRIBUTE_NAMES);d.fromSVG=!0,h(new l.Path(d.d,n(d,s)))}}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.array.min,u=l.util.array.max;l.Group||(l.Group=l.util.createClass(l.Object,l.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,r,i){r=r||{},this._objects=[],i&&this.callSuper("initialize",r),this._objects=n||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(i)this._updateObjectsACoords();else{var h=r&&r.centerPoint;r.originX!==void 0&&(this.originX=r.originX),r.originY!==void 0&&(this.originY=r.originY),h||this._calcBounds(),this._updateObjectsCoords(h),delete r.centerPoint,this.callSuper("initialize",r)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,r=this._objects.length;r--;)this._objects[r].setCoords(n)},_updateObjectsCoords:function(r){for(var r=r||this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],r)},_updateObjectCoords:function(n,r){var i=n.left,a=n.top,h=!0;n.set({left:i-r.x,top:a-r.y}),n.group=this,n.setCoords(h)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){var r=!!this.group;return this._restoreObjectsState(),l.util.resetObjectTransform(this),n&&(r&&l.util.removeTransformFromObject(n,this.group.calcTransformMatrix()),this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,r?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(n){return this._restoreObjectsState(),l.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,r){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(n,r);if(n==="canvas")for(;i--;)this._objects[i]._set(n,r);l.Object.prototype._set.call(this,n,r)},toObject:function(n){var r=this.includeDefaultValues,i=this._objects.filter(function(h){return!h.excludeFromExport}).map(function(h){var s=h.includeDefaultValues;h.includeDefaultValues=r;var d=h.toObject(n);return h.includeDefaultValues=s,d}),a=l.Object.prototype.toObject.call(this,n);return a.objects=i,a},toDatalessObject:function(n){var r,i=this.sourcePath;if(i)r=i;else{var a=this.includeDefaultValues;r=this._objects.map(function(s){var d=s.includeDefaultValues;s.includeDefaultValues=a;var p=s.toDatalessObject(n);return s.includeDefaultValues=d,p})}var h=l.Object.prototype.toDatalessObject.call(this,n);return h.objects=r,h},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=l.Object.prototype.shouldCache.call(this);if(n){for(var r=0,i=this._objects.length;r<i;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(l.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,r=this._objects.length;n<r;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var r=0,i=this._objects.length;r<i;r++)this._objects[r].render(n);this._drawClipPath(n)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var r=0,i=this._objects.length;r<i;r++)if(this._objects[r].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,h=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-h/2,a,h)}return!0}return!1},_restoreObjectsState:function(){var n=this.calcOwnMatrix();return this._objects.forEach(function(r){l.util.addTransformToObject(r,n),delete r.group,r.setCoords()}),this},realizeTransform:function(n,r){return l.util.addTransformToObject(n,r),n},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var n=this._objects,r=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var a=new l.ActiveSelection([]);return a.set(i),a.type="activeSelection",r.remove(this),n.forEach(function(h){h.group=a,h.dirty=!0,r.add(h)}),a.canvas=r,a._objects=n,r._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0;return this.forEachObject(function(r){r.setCoords(n)}),this},_calcBounds:function(n){for(var r=[],i=[],a,h,s,d=["tr","br","bl","tl"],p=0,y=this._objects.length,C,S=d.length;p<y;++p){for(a=this._objects[p],s=a.calcACoords(),C=0;C<S;C++)h=d[C],r.push(s[h].x),i.push(s[h].y);a.aCoords=s}this._getBounds(r,i,n)},_getBounds:function(n,r,i){var a=new l.Point(c(n),c(r)),h=new l.Point(u(n),u(r)),s=a.y||0,d=a.x||0,p=h.x-a.x||0,y=h.y-a.y||0;this.width=p,this.height=y,i||this.setPositionByOrigin({x:d,y:s},"left","top")},_toSVG:function(n){for(var r=["<g ","COMMON_PARTS",` >
`],i=0,a=this._objects.length;i<a;i++)r.push("		",this._objects[i].toSVG(n));return r.push(`</g>
`),r},getSvgStyles:function(){var n=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",r=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),r].join("")},toClipPathSVG:function(n){for(var r=[],i=0,a=this._objects.length;i<a;i++)r.push("	",this._objects[i].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(r,{reviver:n})}}),l.Group.fromObject=function(n,r){var i=n.objects,a=l.util.object.clone(n,!0);if(delete a.objects,typeof i=="string"){l.loadSVGFromURL(i,function(h){var s=l.util.groupSVGElements(h,n,i);s.set(a),r&&r(s)});return}l.util.enlivenObjects(i,function(h){l.util.enlivenObjects([n.clipPath],function(s){var d=l.util.object.clone(n,!0);d.clipPath=s[0],delete d.objects,r&&r(new l.Group(h,d,!0))})})})}(U),function(g){var l=g.fabric||(g.fabric={});l.ActiveSelection||(l.ActiveSelection=l.util.createClass(l.Group,{type:"activeSelection",initialize:function(c,u){u=u||{},this._objects=c||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),l.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var u=l.Object.prototype.toObject.call(this),n=new l.Group([]);if(delete u.type,n.set(u),c.forEach(function(i){i.canvas.remove(i),i.group=n}),n._objects=c,!this.canvas)return n;var r=this.canvas;return r.add(n),r._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,u,n){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,u),n=n||{},typeof n.hasControls>"u"&&(n.hasControls=!1),n.forActiveSelection=!0;for(var r=0,i=this._objects.length;r<i;r++)this._objects[r]._renderControls(c,n);c.restore()}}),l.ActiveSelection.fromObject=function(c,u){l.util.enlivenObjects(c.objects,function(n){delete c.objects,u&&u(new l.ActiveSelection(n,c,!0))})})}(U),function(g){var l=v.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){v.warn("fabric.Image is already defined.");return}v.Image=v.util.createClass(v.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:v.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:v.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,u){u||(u={}),this.filters=[],this.cacheKey="texture"+v.Object.__uid++,this.callSuper("initialize",u),this._initElement(c,u)},getElement:function(){return this._element||{}},setElement:function(c,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var u=v.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(c)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){v.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-u,-n),c.lineTo(u,-n),c.lineTo(u,n),c.lineTo(-u,n),c.lineTo(-u,-n),c.closePath()}},toObject:function(c){var u=[];this.filters.forEach(function(r){r&&u.push(r.toObject())});var n=l(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],u=[],n,r=this._element,i=-this.width/2,a=-this.height/2,h="",s="";if(!r)return[];if(this.hasCrop()){var d=v.Object.__uid++;c.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+i+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',a-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,s,'"',h,`></image>
`),this.stroke||this.strokeDashArray){var p=this.fill;this.fill=null,n=["	<rect ",'x="',i,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=p}return this.paintFirst!=="fill"?c=c.concat(n,u):c=c.concat(u,n),c},getSrc:function(c){var u=c?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(c,u,n){return v.util.loadImage(c,function(r,i){this.setElement(r,n),this._setWidthHeight(),u&&u(this,i)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,u=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,i=n.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||r>u&&i>u){this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,this._lastScaleY=i;return}v.filterBackend||(v.filterBackend=v.initFilterBackend());var h=v.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,d=a.width,p=a.height;h.width=d,h.height=p,this._element=h,this._lastScaleX=c.scaleX=r,this._lastScaleY=c.scaleY=i,v.filterBackend.applyFilters([c],a,d,p,this._element,s),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,n=u.naturalWidth||u.width,r=u.naturalHeight||u.height;if(this._element===this._originalElement){var i=v.util.createCanvasElement();i.width=n,i.height=r,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;return v.filterBackend||(v.filterBackend=v.initFilterBackend()),v.filterBackend.applyFilters(c,this._originalElement,n,r,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){v.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){v.util.setImageSmoothing(c,this.imageSmoothing),v.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var u=this._element;if(u){var n=this._filterScalingX,r=this._filterScalingY,i=this.width,a=this.height,h=Math.min,s=Math.max,d=s(this.cropX,0),p=s(this.cropY,0),y=u.naturalWidth||u.width,C=u.naturalHeight||u.height,S=d*n,T=p*r,P=h(i*n,y-S),L=h(a*r,C-T),G=-i/2,re=-a/2,le=h(i,y/n-d),V=h(a,C/r-p);u&&c.drawImage(u,S,T,P,L,G,re,le,V)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,u){this.setElement(v.util.getById(c),u),v.util.addClass(this.getElement(),v.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,u){c&&c.length?v.util.enlivenObjects(c,function(n){u&&u(n)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(c){c||(c={});var u=this.getElement();this.width=c.width||u.naturalWidth||u.width||0,this.height=c.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var c=v.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,n=this._element.height,r=1,i=1,a=0,h=0,s=0,d=0,p,y=this.width,C=this.height,S={width:y,height:C};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(r=i=v.util.findScaleToFit(this._element,S),p=(y-u*r)/2,c.alignX==="Min"&&(a=-p),c.alignX==="Max"&&(a=p),p=(C-n*i)/2,c.alignY==="Min"&&(h=-p),c.alignY==="Max"&&(h=p)),c.meetOrSlice==="slice"&&(r=i=v.util.findScaleToCover(this._element,S),p=u-y/r,c.alignX==="Mid"&&(s=p/2),c.alignX==="Max"&&(s=p),p=n-C/i,c.alignY==="Mid"&&(d=p/2),c.alignY==="Max"&&(d=p),u=y/r,n=C/i)):(r=y/u,i=C/n),{width:u,height:n,scaleX:r,scaleY:i,offsetLeft:a,offsetTop:h,cropX:s,cropY:d}}}),v.Image.CSS_CANVAS="canvas-img",v.Image.prototype.getSvgSrc=v.Image.prototype.getSrc,v.Image.fromObject=function(c,u){var n=v.util.object.clone(c);v.util.loadImage(n.src,function(r,i){if(i){u&&u(null,!0);return}v.Image.prototype._initFilters.call(n,n.filters,function(a){n.filters=a||[],v.Image.prototype._initFilters.call(n,[n.resizeFilter],function(h){n.resizeFilter=h[0],v.util.enlivenObjects([n.clipPath],function(s){n.clipPath=s[0];var d=new v.Image(r,n);u(d,!1)})})})},null,n.crossOrigin)},v.Image.fromURL=function(c,u,n){v.util.loadImage(c,function(r,i){u&&u(new v.Image(r,n),i)},null,n&&n.crossOrigin)},v.Image.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),v.Image.fromElement=function(c,u,n){var r=v.parseAttributes(c,v.Image.ATTRIBUTE_NAMES);v.Image.fromURL(r["xlink:href"],u,l(n?v.util.object.clone(n):{},r))}}(U),v.util.object.extend(v.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(g){g=g||{};var l=function(){},c=g.onComplete||l,u=g.onChange||l,n=this;return v.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(r){n.rotate(r),u()},onComplete:function(){n.setCoords(),c()}}),this}}),v.util.object.extend(v.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function g(c,u){var n="precision "+u+` float;
void main(){}`,r=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(r,n),c.compileShader(r),!!c.getShaderParameter(r,c.COMPILE_STATUS)}v.isWebglSupported=function(c){if(v.isLikelyNode)return!1;c=c||v.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),n=u.getContext("webgl")||u.getContext("experimental-webgl"),r=!1;if(n){v.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),r=v.maxTextureSize>=c;for(var i=["highp","mediump","lowp"],a=0;a<3;a++)if(g(n,i[a])){v.webGlPrecision=i[a];break}}return this.isSupported=r,r},v.WebglFilterBackend=l;function l(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}l.prototype={tileSize:2048,resources:{},setupGLContext:function(c,u){this.dispose(),this.createWebGLCanvas(c,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,u)},chooseFastestCopyGLTo2DMethod:function(c,u){var n=typeof window.performance<"u",r;try{new ImageData(1,1),r=!0}catch{r=!1}var i=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(n&&r&&i&&a){var h=v.util.createCanvasElement(),s=new ArrayBuffer(c*u*4);if(v.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=Ie;return}var d={imageBuffer:s,destinationWidth:c,destinationHeight:u,targetCanvas:h},p,y,C;h.width=c,h.height=u,p=window.performance.now(),Me.call(d,this.gl,d),y=window.performance.now()-p,p=window.performance.now(),Ie.call(d,this.gl,d),C=window.performance.now()-p,y>C?(this.imageBuffer=s,this.copyGLTo2D=Ie):this.copyGLTo2D=Me}},createWebGLCanvas:function(c,u){var n=v.util.createCanvasElement();n.width=c,n.height=u;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=n.getContext("webgl",r);i||(i=n.getContext("experimental-webgl",r)),i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)},applyFilters:function(c,u,n,r,i,a){var h=this.gl,s;a&&(s=this.getCachedTexture(a,u));var d={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:h,sourceTexture:this.createTexture(h,n,r,!s&&u),targetTexture:this.createTexture(h,n,r),originalTexture:s||this.createTexture(h,n,r,!s&&u),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},p=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,p),c.forEach(function(y){y&&y.applyTo(d)}),De(d),this.copyGLTo2D(h,d),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(d.sourceTexture),h.deleteTexture(d.targetTexture),h.deleteFramebuffer(p),i.getContext("2d").setTransform(1,0,0,1,0,0),d},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,u,n,r){var i=c.createTexture();return c.bindTexture(c.TEXTURE_2D,i),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),r?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,r):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,u,n,0,c.RGBA,c.UNSIGNED_BYTE,null),i},getCachedTexture:function(c,u){if(this.textureCache[c])return this.textureCache[c];var n=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[c]=n,n},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:Me,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,u={renderer:"",vendor:""};if(!c)return u;var n=c.getExtension("WEBGL_debug_renderer_info");if(n){var r=c.getParameter(n.UNMASKED_RENDERER_WEBGL),i=c.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(u.renderer=r.toLowerCase()),i&&(u.vendor=i.toLowerCase())}return this.gpuInfo=u,u}}}();function De(g){var l=g.targetCanvas,c=l.width,u=l.height,n=g.destinationWidth,r=g.destinationHeight;(c!==n||u!==r)&&(l.width=n,l.height=r)}function Me(g,l){var c=g.canvas,u=l.targetCanvas,n=u.getContext("2d");n.translate(0,u.height),n.scale(1,-1);var r=c.height-u.height;n.drawImage(c,0,r,u.width,u.height,0,0,u.width,u.height)}function Ie(g,l){var c=l.targetCanvas,u=c.getContext("2d"),n=l.destinationWidth,r=l.destinationHeight,i=n*r*4,a=new Uint8Array(this.imageBuffer,0,i),h=new Uint8ClampedArray(this.imageBuffer,0,i);g.readPixels(0,0,n,r,g.RGBA,g.UNSIGNED_BYTE,a);var s=new ImageData(h,n,r);u.putImageData(s,0,0)}(function(){var g=function(){};v.Canvas2dFilterBackend=l;function l(){}l.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(c,u,n,r,i){var a=i.getContext("2d");a.drawImage(u,0,0,n,r);var h=a.getImageData(0,0,n,r),s=a.getImageData(0,0,n,r),d={sourceWidth:n,sourceHeight:r,imageData:h,originalEl:u,originalImageData:s,canvasEl:i,ctx:a,filterBackend:this};return c.forEach(function(p){p.applyTo(d)}),(d.imageData.width!==n||d.imageData.height!==r)&&(i.width=d.imageData.width,i.height=d.imageData.height),a.putImageData(d.imageData,0,0),d}}})(),v.Image=v.Image||{},v.Image.filters=v.Image.filters||{},v.Image.filters.BaseFilter=v.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var l in g)this[l]=g[l]},createProgram:function(g,l,c){l=l||this.fragmentSource,c=c||this.vertexSource,v.webGlPrecision!=="highp"&&(l=l.replace(/precision highp float/g,"precision "+v.webGlPrecision+" float"));var u=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(u,c),g.compileShader(u),!g.getShaderParameter(u,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(u));var n=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(n,l),g.compileShader(n),!g.getShaderParameter(n,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(n));var r=g.createProgram();if(g.attachShader(r,u),g.attachShader(r,n),g.linkProgram(r),!g.getProgramParameter(r,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(r));var i=this.getAttributeLocations(g,r),a=this.getUniformLocations(g,r)||{};return a.uStepW=g.getUniformLocation(r,"uStepW"),a.uStepH=g.getUniformLocation(r,"uStepH"),{program:r,attributeLocations:i,uniformLocations:a}},getAttributeLocations:function(g,l){return{aPosition:g.getAttribLocation(l,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,l,c){var u=l.aPosition,n=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,n),g.enableVertexAttribArray(u),g.vertexAttribPointer(u,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,c,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var l=g.context,c,u;g.passes>1?(c=g.destinationWidth,u=g.destinationHeight,(g.sourceWidth!==c||g.sourceHeight!==u)&&(l.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(l,c,u)),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,g.targetTexture,0)):(l.bindFramebuffer(l.FRAMEBUFFER,null),l.finish())},_swapTextures:function(g){g.passes--,g.pass++;var l=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=l},isNeutralState:function(){var g=this.mainParameter,l=v.Image.filters[this.type].prototype;if(g)if(Array.isArray(l[g])){for(var c=l[g].length;c--;)if(this[g][c]!==l[g][c])return!1;return!0}else return l[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var l=g.context,c=this.retrieveShader(g);g.pass===0&&g.originalTexture?l.bindTexture(l.TEXTURE_2D,g.originalTexture):l.bindTexture(l.TEXTURE_2D,g.sourceTexture),l.useProgram(c.program),this.sendAttributeData(l,c.attributeLocations,g.aPosition),l.uniform1f(c.uniformLocations.uStepW,1/g.sourceWidth),l.uniform1f(c.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(l,c.uniformLocations),l.viewport(0,0,g.destinationWidth,g.destinationHeight),l.drawArrays(l.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,l,c){g.activeTexture(c),g.bindTexture(g.TEXTURE_2D,l),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,l){g.activeTexture(l),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var l=document.createElement("canvas");l.width=g.sourceWidth,l.height=g.sourceHeight,g.helpLayer=l}},toObject:function(){var g={type:this.type},l=this.mainParameter;return l&&(g[l]=this[l]),g},toJSON:function(){return this.toObject()}}),v.Image.filters.BaseFilter.fromObject=function(g,l){var c=new v.Image.filters[g.type](g);return l&&l(c),c},function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.ColorMatrix=u(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var r=n.imageData,i=r.data,a=i.length,h=this.matrix,s,d,p,y,C,S=this.colorsOnly;for(C=0;C<a;C+=4)s=i[C],d=i[C+1],p=i[C+2],S?(i[C]=s*h[0]+d*h[1]+p*h[2]+h[4]*255,i[C+1]=s*h[5]+d*h[6]+p*h[7]+h[9]*255,i[C+2]=s*h[10]+d*h[11]+p*h[12]+h[14]*255):(y=i[C+3],i[C]=s*h[0]+d*h[1]+p*h[2]+y*h[3]+h[4]*255,i[C+1]=s*h[5]+d*h[6]+p*h[7]+y*h[8]+h[9]*255,i[C+2]=s*h[10]+d*h[11]+p*h[12]+y*h[13]+h[14]*255,i[C+3]=s*h[15]+d*h[16]+p*h[17]+y*h[18]+h[19]*255)},getUniformLocations:function(n,r){return{uColorMatrix:n.getUniformLocation(r,"uColorMatrix"),uConstants:n.getUniformLocation(r,"uConstants")}},sendUniformData:function(n,r){var i=this.matrix,a=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],h=[i[4],i[9],i[14],i[19]];n.uniformMatrix4fv(r.uColorMatrix,!1,a),n.uniform4fv(r.uConstants,h)}}),l.Image.filters.ColorMatrix.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Brightness=u(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var r=n.imageData,i=r.data,a,h=i.length,s=Math.round(this.brightness*255);for(a=0;a<h;a+=4)i[a]=i[a]+s,i[a+1]=i[a+1]+s,i[a+2]=i[a+2]+s}},getUniformLocations:function(n,r){return{uBrightness:n.getUniformLocation(r,"uBrightness")}},sendUniformData:function(n,r){n.uniform1f(r.uBrightness,this.brightness)}}),l.Image.filters.Brightness.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.Image.filters,n=l.util.createClass;u.Convolute=n(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(r){var i=Math.sqrt(this.matrix.length),a=this.type+"_"+i+"_"+(this.opaque?1:0),h=this.fragmentSource[a];return r.programCache.hasOwnProperty(a)||(r.programCache[a]=this.createProgram(r.context,h)),r.programCache[a]},applyTo2d:function(r){var i=r.imageData,a=i.data,h=this.matrix,s=Math.round(Math.sqrt(h.length)),d=Math.floor(s/2),p=i.width,y=i.height,C=r.ctx.createImageData(p,y),S=C.data,T=this.opaque?1:0,P,L,G,re,le,V,q,ne,fe,pe,ge,$,D;for(ge=0;ge<y;ge++)for(pe=0;pe<p;pe++){for(le=(ge*p+pe)*4,P=0,L=0,G=0,re=0,D=0;D<s;D++)for($=0;$<s;$++)q=ge+D-d,V=pe+$-d,!(q<0||q>=y||V<0||V>=p)&&(ne=(q*p+V)*4,fe=h[D*s+$],P+=a[ne]*fe,L+=a[ne+1]*fe,G+=a[ne+2]*fe,T||(re+=a[ne+3]*fe));S[le]=P,S[le+1]=L,S[le+2]=G,T?S[le+3]=a[le+3]:S[le+3]=re}r.imageData=C},getUniformLocations:function(r,i){return{uMatrix:r.getUniformLocation(i,"uMatrix"),uOpaque:r.getUniformLocation(i,"uOpaque"),uHalfSize:r.getUniformLocation(i,"uHalfSize"),uSize:r.getUniformLocation(i,"uSize")}},sendUniformData:function(r,i){r.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),l.Image.filters.Convolute.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Grayscale=u(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var r=n.imageData,i=r.data,a,h=i.length,s,d=this.mode;for(a=0;a<h;a+=4)d==="average"?s=(i[a]+i[a+1]+i[a+2])/3:d==="lightness"?s=(Math.min(i[a],i[a+1],i[a+2])+Math.max(i[a],i[a+1],i[a+2]))/2:d==="luminosity"&&(s=.21*i[a]+.72*i[a+1]+.07*i[a+2]),i[a]=s,i[a+1]=s,i[a+2]=s},retrieveShader:function(n){var r=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(r)){var i=this.fragmentSource[this.mode];n.programCache[r]=this.createProgram(n.context,i)}return n.programCache[r]},getUniformLocations:function(n,r){return{uMode:n.getUniformLocation(r,"uMode")}},sendUniformData:function(n,r){var i=1;n.uniform1i(r.uMode,i)},isNeutralState:function(){return!1}}),l.Image.filters.Grayscale.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Invert=u(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var r=n.imageData,i=r.data,a,h=i.length;for(a=0;a<h;a+=4)i[a]=255-i[a],i[a+1]=255-i[a+1],i[a+2]=255-i[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,r){return{uInvert:n.getUniformLocation(r,"uInvert")}},sendUniformData:function(n,r){n.uniform1i(r.uInvert,this.invert)}}),l.Image.filters.Invert.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.Image.filters,n=l.util.createClass;u.Noise=n(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(r){if(this.noise!==0){var i=r.imageData,a=i.data,h,s=a.length,d=this.noise,p;for(h=0,s=a.length;h<s;h+=4)p=(.5-Math.random())*d,a[h]+=p,a[h+1]+=p,a[h+2]+=p}},getUniformLocations:function(r,i){return{uNoise:r.getUniformLocation(i,"uNoise"),uSeed:r.getUniformLocation(i,"uSeed")}},sendUniformData:function(r,i){r.uniform1f(i.uNoise,this.noise/255),r.uniform1f(i.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),l.Image.filters.Noise.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Pixelate=u(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var r=n.imageData,i=r.data,a=r.height,h=r.width,s,d,p,y,C,S,T,P,L,G,re;for(d=0;d<a;d+=this.blocksize)for(p=0;p<h;p+=this.blocksize)for(s=d*4*h+p*4,y=i[s],C=i[s+1],S=i[s+2],T=i[s+3],G=Math.min(d+this.blocksize,a),re=Math.min(p+this.blocksize,h),P=d;P<G;P++)for(L=p;L<re;L++)s=P*4*h+L*4,i[s]=y,i[s+1]=C,i[s+2]=S,i[s+3]=T},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,r){return{uBlocksize:n.getUniformLocation(r,"uBlocksize"),uStepW:n.getUniformLocation(r,"uStepW"),uStepH:n.getUniformLocation(r,"uStepH")}},sendUniformData:function(n,r){n.uniform1f(r.uBlocksize,this.blocksize)}}),l.Image.filters.Pixelate.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.extend,u=l.Image.filters,n=l.util.createClass;u.RemoveColor=n(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(r){var i=r.imageData,a=i.data,h,s=this.distance*255,d,p,y,C=new l.Color(this.color).getSource(),S=[C[0]-s,C[1]-s,C[2]-s],T=[C[0]+s,C[1]+s,C[2]+s];for(h=0;h<a.length;h+=4)d=a[h],p=a[h+1],y=a[h+2],d>S[0]&&p>S[1]&&y>S[2]&&d<T[0]&&p<T[1]&&y<T[2]&&(a[h+3]=0)},getUniformLocations:function(r,i){return{uLow:r.getUniformLocation(i,"uLow"),uHigh:r.getUniformLocation(i,"uHigh")}},sendUniformData:function(r,i){var a=new l.Color(this.color).getSource(),h=parseFloat(this.distance),s=[0+a[0]/255-h,0+a[1]/255-h,0+a[2]/255-h,1],d=[a[0]/255+h,a[1]/255+h,a[2]/255+h,1];r.uniform4fv(i.uLow,s),r.uniform4fv(i.uHigh,d)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),l.Image.filters.RemoveColor.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in n)c[r]=u(c.ColorMatrix,{type:r,matrix:n[r],mainParameter:!1,colorsOnly:!0}),l.Image.filters[r].fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric,c=l.Image.filters,u=l.util.createClass;c.BlendColor=u(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var r=this.type+"_"+this.mode,i;return n.programCache.hasOwnProperty(r)||(i=this.buildSource(this.mode),n.programCache[r]=this.createProgram(n.context,i)),n.programCache[r]},applyTo2d:function(n){var r=n.imageData,i=r.data,a=i.length,h,s,d,p,y,C,S,T=1-this.alpha;S=new l.Color(this.color).getSource(),h=S[0]*this.alpha,s=S[1]*this.alpha,d=S[2]*this.alpha;for(var P=0;P<a;P+=4)switch(p=i[P],y=i[P+1],C=i[P+2],this.mode){case"multiply":i[P]=p*h/255,i[P+1]=y*s/255,i[P+2]=C*d/255;break;case"screen":i[P]=255-(255-p)*(255-h)/255,i[P+1]=255-(255-y)*(255-s)/255,i[P+2]=255-(255-C)*(255-d)/255;break;case"add":i[P]=p+h,i[P+1]=y+s,i[P+2]=C+d;break;case"diff":case"difference":i[P]=Math.abs(p-h),i[P+1]=Math.abs(y-s),i[P+2]=Math.abs(C-d);break;case"subtract":i[P]=p-h,i[P+1]=y-s,i[P+2]=C-d;break;case"darken":i[P]=Math.min(p,h),i[P+1]=Math.min(y,s),i[P+2]=Math.min(C,d);break;case"lighten":i[P]=Math.max(p,h),i[P+1]=Math.max(y,s),i[P+2]=Math.max(C,d);break;case"overlay":i[P]=h<128?2*p*h/255:255-2*(255-p)*(255-h)/255,i[P+1]=s<128?2*y*s/255:255-2*(255-y)*(255-s)/255,i[P+2]=d<128?2*C*d/255:255-2*(255-C)*(255-d)/255;break;case"exclusion":i[P]=h+p-2*h*p/255,i[P+1]=s+y-2*s*y/255,i[P+2]=d+C-2*d*C/255;break;case"tint":i[P]=h+p*T,i[P+1]=s+y*T,i[P+2]=d+C*T}},getUniformLocations:function(n,r){return{uColor:n.getUniformLocation(r,"uColor")}},sendUniformData:function(n,r){var i=new l.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,n.uniform4fv(r.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),l.Image.filters.BlendColor.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric,c=l.Image.filters,u=l.util.createClass;c.BlendImage=u(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var r=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(r)||(n.programCache[r]=this.createProgram(n.context,i)),n.programCache[r]},applyToWebGL:function(n){var r=n.context,i=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(r,i,r.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(r,r.TEXTURE1)},createTexture:function(n,r){return n.getCachedTexture(r.cacheKey,r._element)},calculateMatrix:function(){var n=this.image,r=n._element.width,i=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/r,-n.top/i,1]},applyTo2d:function(n){var r=n.imageData,i=n.filterBackend.resources,a=r.data,h=a.length,s=r.width,d=r.height,p,y,C,S,T,P,L,G,re,le,V=this.image,q;i.blendImage||(i.blendImage=l.util.createCanvasElement()),re=i.blendImage,le=re.getContext("2d"),re.width!==s||re.height!==d?(re.width=s,re.height=d):le.clearRect(0,0,s,d),le.setTransform(V.scaleX,0,0,V.scaleY,V.left,V.top),le.drawImage(V._element,0,0,s,d),q=le.getImageData(0,0,s,d).data;for(var ne=0;ne<h;ne+=4)switch(T=a[ne],P=a[ne+1],L=a[ne+2],G=a[ne+3],p=q[ne],y=q[ne+1],C=q[ne+2],S=q[ne+3],this.mode){case"multiply":a[ne]=T*p/255,a[ne+1]=P*y/255,a[ne+2]=L*C/255,a[ne+3]=G*S/255;break;case"mask":a[ne+3]=S;break}},getUniformLocations:function(n,r){return{uTransformMatrix:n.getUniformLocation(r,"uTransformMatrix"),uImage:n.getUniformLocation(r,"uImage")}},sendUniformData:function(n,r){var i=this.calculateMatrix();n.uniform1i(r.uImage,1),n.uniformMatrix3fv(r.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),l.Image.filters.BlendImage.fromObject=function(n,r){l.Image.fromObject(n.image,function(i){var a=l.util.object.clone(n);a.image=i,r(new l.Image.filters.BlendImage(a))})}}(U),function(g){var l=g.fabric||(g.fabric={}),c=Math.pow,u=Math.floor,n=Math.sqrt,r=Math.abs,i=Math.round,a=Math.sin,h=Math.ceil,s=l.Image.filters,d=l.util.createClass;s.Resize=d(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(p,y){return{uDelta:p.getUniformLocation(y,"uDelta"),uTaps:p.getUniformLocation(y,"uTaps")}},sendUniformData:function(p,y){p.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),p.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(p){var y=this.getFilterWindow(),C=this.type+"_"+y;if(!p.programCache.hasOwnProperty(C)){var S=this.generateShader(y);p.programCache[C]=this.createProgram(p.context,S)}return p.programCache[C]},getFilterWindow:function(){var p=this.tempScale;return Math.ceil(this.lanczosLobes/p)},getTaps:function(){for(var p=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,C=this.getFilterWindow(),S=new Array(C),T=1;T<=C;T++)S[T-1]=p(T*y);return S},generateShader:function(S){for(var y=new Array(S),C=this.fragmentSourceTOP,S,T=1;T<=S;T++)y[T-1]=T+".0 * uDelta";return C+="uniform float uTaps["+S+`];
`,C+=`void main() {
`,C+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,C+=`  float sum = 1.0;
`,y.forEach(function(P,L){C+="  color += texture2D(uTexture, vTexCoord + "+P+") * uTaps["+L+`];
`,C+="  color += texture2D(uTexture, vTexCoord - "+P+") * uTaps["+L+`];
`,C+="  sum += 2.0 * uTaps["+L+`];
`}),C+=`  gl_FragColor = color / sum;
`,C+="}",C},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(p){p.webgl?(p.passes++,this.width=p.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=p.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),p.destinationWidth=this.dW,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceWidth=p.destinationWidth,this.height=p.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),p.destinationHeight=this.dH,this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p),p.sourceHeight=p.destinationHeight):this.applyTo2d(p)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(p){return function(y){if(y>=p||y<=-p)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var C=y/p;return a(y)/y*a(C)/C}},applyTo2d:function(p){var y=p.imageData,C=this.scaleX,S=this.scaleY;this.rcpScaleX=1/C,this.rcpScaleY=1/S;var T=y.width,P=y.height,L=i(T*C),G=i(P*S),re;this.resizeType==="sliceHack"?re=this.sliceByTwo(p,T,P,L,G):this.resizeType==="hermite"?re=this.hermiteFastResize(p,T,P,L,G):this.resizeType==="bilinear"?re=this.bilinearFiltering(p,T,P,L,G):this.resizeType==="lanczos"&&(re=this.lanczosResize(p,T,P,L,G)),p.imageData=re},sliceByTwo:function(p,y,C,S,T){var P=p.imageData,L=.5,G=!1,re=!1,le=y*L,V=C*L,q=l.filterBackend.resources,ne,fe,pe=0,ge=0,$=y,D=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),ne=q.sliceByTwo,(ne.width<y*1.5||ne.height<C)&&(ne.width=y*1.5,ne.height=C),fe=ne.getContext("2d"),fe.clearRect(0,0,y*1.5,C),fe.putImageData(P,0,0),S=u(S),T=u(T);!G||!re;)y=le,C=V,S<u(le*L)?le=u(le*L):(le=S,G=!0),T<u(V*L)?V=u(V*L):(V=T,re=!0),fe.drawImage(ne,pe,ge,y,C,$,D,le,V),pe=$,ge=D,D+=V;return fe.getImageData(pe,ge,S,T)},lanczosResize:function(p,y,C,S,T){function P(x){var O,j,k,E,F,b,X,N,Q,ee,oe;for(D.x=(x+.5)*V,I.x=u(D.x),O=0;O<T;O++){for(D.y=(O+.5)*q,I.y=u(D.y),F=0,b=0,X=0,N=0,Q=0,j=I.x-pe;j<=I.x+pe;j++)if(!(j<0||j>=y)){ee=u(1e3*r(j-D.x)),$[ee]||($[ee]={});for(var Y=I.y-ge;Y<=I.y+ge;Y++)Y<0||Y>=C||(oe=u(1e3*r(Y-D.y)),$[ee][oe]||($[ee][oe]=le(n(c(ee*ne,2)+c(oe*fe,2))/1e3)),k=$[ee][oe],k>0&&(E=(Y*y+j)*4,F+=k,b+=k*L[E],X+=k*L[E+1],N+=k*L[E+2],Q+=k*L[E+3]))}E=(O*S+x)*4,re[E]=b/F,re[E+1]=X/F,re[E+2]=N/F,re[E+3]=Q/F}return++x<S?P(x):G}var L=p.imageData.data,G=p.ctx.createImageData(S,T),re=G.data,le=this.lanczosCreate(this.lanczosLobes),V=this.rcpScaleX,q=this.rcpScaleY,ne=2/this.rcpScaleX,fe=2/this.rcpScaleY,pe=h(V*this.lanczosLobes/2),ge=h(q*this.lanczosLobes/2),$={},D={},I={};return P(0)},bilinearFiltering:function(p,y,C,S,T){var P,L,G,re,le,V,q,ne,fe,pe,ge,$,D=0,I,x=this.rcpScaleX,O=this.rcpScaleY,j=4*(y-1),k=p.imageData,E=k.data,F=p.ctx.createImageData(S,T),b=F.data;for(q=0;q<T;q++)for(ne=0;ne<S;ne++)for(le=u(x*ne),V=u(O*q),fe=x*ne-le,pe=O*q-V,I=4*(V*y+le),ge=0;ge<4;ge++)P=E[I+ge],L=E[I+4+ge],G=E[I+j+ge],re=E[I+j+4+ge],$=P*(1-fe)*(1-pe)+L*fe*(1-pe)+G*pe*(1-fe)+re*fe*pe,b[D++]=$;return F},hermiteFastResize:function(p,y,C,S,T){for(var P=this.rcpScaleX,L=this.rcpScaleY,G=h(P/2),re=h(L/2),le=p.imageData,V=le.data,q=p.ctx.createImageData(S,T),ne=q.data,fe=0;fe<T;fe++)for(var pe=0;pe<S;pe++){for(var ge=(pe+fe*S)*4,$=0,D=0,I=0,x=0,O=0,j=0,k=0,E=(fe+.5)*L,F=u(fe*L);F<(fe+1)*L;F++)for(var b=r(E-(F+.5))/re,X=(pe+.5)*P,N=b*b,Q=u(pe*P);Q<(pe+1)*P;Q++){var ee=r(X-(Q+.5))/G,oe=n(N+ee*ee);oe>1&&oe<-1||($=2*oe*oe*oe-3*oe*oe+1,$>0&&(ee=4*(Q+F*y),k+=$*V[ee+3],I+=$,V[ee+3]<255&&($=$*V[ee+3]/250),x+=$*V[ee],O+=$*V[ee+1],j+=$*V[ee+2],D+=$))}ne[ge]=x/D,ne[ge+1]=O/D,ne[ge+2]=j/D,ne[ge+3]=k/I}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),l.Image.filters.Resize.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Contrast=u(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var r=n.imageData,i,h,a=r.data,h=a.length,s=Math.floor(this.contrast*255),d=259*(s+255)/(255*(259-s));for(i=0;i<h;i+=4)a[i]=d*(a[i]-128)+128,a[i+1]=d*(a[i+1]-128)+128,a[i+2]=d*(a[i+2]-128)+128}},getUniformLocations:function(n,r){return{uContrast:n.getUniformLocation(r,"uContrast")}},sendUniformData:function(n,r){n.uniform1f(r.uContrast,this.contrast)}}),l.Image.filters.Contrast.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Saturation=u(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var r=n.imageData,i=r.data,a=i.length,h=-this.saturation,s,d;for(s=0;s<a;s+=4)d=Math.max(i[s],i[s+1],i[s+2]),i[s]+=d!==i[s]?(d-i[s])*h:0,i[s+1]+=d!==i[s+1]?(d-i[s+1])*h:0,i[s+2]+=d!==i[s+2]?(d-i[s+2])*h:0}},getUniformLocations:function(n,r){return{uSaturation:n.getUniformLocation(r,"uSaturation")}},sendUniformData:function(n,r){n.uniform1f(r.uSaturation,-this.saturation)}}),l.Image.filters.Saturation.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Vibrance=u(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(n){if(this.vibrance!==0){var r=n.imageData,i=r.data,a=i.length,h=-this.vibrance,s,d,p,y;for(s=0;s<a;s+=4)d=Math.max(i[s],i[s+1],i[s+2]),p=(i[s]+i[s+1]+i[s+2])/3,y=Math.abs(d-p)*2/255*h,i[s]+=d!==i[s]?(d-i[s])*y:0,i[s+1]+=d!==i[s+1]?(d-i[s+1])*y:0,i[s+2]+=d!==i[s+2]?(d-i[s+2])*y:0}},getUniformLocations:function(n,r){return{uVibrance:n.getUniformLocation(r,"uVibrance")}},sendUniformData:function(n,r){n.uniform1f(r.uVibrance,-this.vibrance)}}),l.Image.filters.Vibrance.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Blur=u(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var r=n.filterBackend.resources,i,a,h=n.imageData.width,s=n.imageData.height;r.blurLayer1||(r.blurLayer1=l.util.createCanvasElement(),r.blurLayer2=l.util.createCanvasElement()),i=r.blurLayer1,a=r.blurLayer2,(i.width!==h||i.height!==s)&&(a.width=i.width=h,a.height=i.height=s);var d=i.getContext("2d"),p=a.getContext("2d"),y=15,C,S,T,P,L=this.blur*.06*.5;for(d.putImageData(n.imageData,0,0),p.clearRect(0,0,h,s),P=-15;P<=y;P++)C=(Math.random()-.5)/4,S=P/y,T=L*S*h+C,p.globalAlpha=1-Math.abs(S),p.drawImage(i,T,C),d.drawImage(a,0,0),p.globalAlpha=1,p.clearRect(0,0,a.width,a.height);for(P=-15;P<=y;P++)C=(Math.random()-.5)/4,S=P/y,T=L*S*s+C,p.globalAlpha=1-Math.abs(S),p.drawImage(i,C,T),d.drawImage(a,0,0),p.globalAlpha=1,p.clearRect(0,0,a.width,a.height);n.ctx.drawImage(i,0,0);var G=n.ctx.getImageData(0,0,i.width,i.height);return d.globalAlpha=1,d.clearRect(0,0,i.width,i.height),G},getUniformLocations:function(n,r){return{delta:n.getUniformLocation(r,"uDelta")}},sendUniformData:function(n,r){var i=this.chooseRightDelta();n.uniform2fv(r.delta,i)},chooseRightDelta:function(){var n=1,r=[0,0],i;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),i=n*this.blur*.12,this.horizontal?r[0]=i:r[1]=i,r}}),c.Blur.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Gamma=u(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var r=n.imageData,i=r.data,a=this.gamma,h=i.length,s=1/a[0],d=1/a[1],p=1/a[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,h=256;y<h;y++)this.rVals[y]=Math.pow(y/255,s)*255,this.gVals[y]=Math.pow(y/255,d)*255,this.bVals[y]=Math.pow(y/255,p)*255;for(y=0,h=i.length;y<h;y+=4)i[y]=this.rVals[i[y]],i[y+1]=this.gVals[i[y+1]],i[y+2]=this.bVals[i[y+2]]},getUniformLocations:function(n,r){return{uGamma:n.getUniformLocation(r,"uGamma")}},sendUniformData:function(n,r){n.uniform3fv(r.uGamma,this.gamma)}}),l.Image.filters.Gamma.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.Composed=u(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(r){r.applyTo(n)})},toObject:function(){return l.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),l.Image.filters.Composed.fromObject=function(n,r){var i=n.subFilters||[],a=i.map(function(s){return new l.Image.filters[s.type](s)}),h=new l.Image.filters.Composed({subFilters:a});return r&&r(h),h}}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.Image.filters,u=l.util.createClass;c.HueRotation=u(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,r=l.util.cos(n),i=l.util.sin(n),a=1/3,h=Math.sqrt(a)*i,s=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+s/3,this.matrix[1]=a*s-h,this.matrix[2]=a*s+h,this.matrix[5]=a*s+h,this.matrix[6]=r+a*s,this.matrix[7]=a*s-h,this.matrix[10]=a*s-h,this.matrix[11]=a*s+h,this.matrix[12]=r+a*s},isNeutralState:function(n){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,n)}}),l.Image.filters.HueRotation.fromObject=l.Image.filters.BaseFilter.fromObject}(U),function(g){var l=g.fabric||(g.fabric={}),c=l.util.object.clone;if(l.Text){l.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");l.Text=l.util.createClass(l.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:l.Object.prototype.stateProperties.concat(u),cacheProperties:l.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(n,r){this.styles=r?r.styles||{}:{},this.text=n,this.__skipDimension=!0,this.callSuper("initialize",r),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var n=this.path;n&&(n.segmentsInfo=l.util.getPathSegmentsInfo(n.path))},getMeasuringContext:function(){return l._measuringContext||(l._measuringContext=this.canvas&&this.canvas.contextCache||l.util.createCanvasElement().getContext("2d")),l._measuringContext},_splitText:function(){var n=this._splitTextIntoLines(this.text);return this.textLines=n.lines,this._textLines=n.graphemeLines,this._unwrappedTextLines=n._unwrappedLines,this._text=n.graphemeText,n},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var n,r,i,a,h,s,d,p=0,y=this._textLines.length;p<y;p++)if(!(this.textAlign!=="justify"&&(p===y-1||this.isEndOfWrapping(p)))&&(a=0,h=this._textLines[p],r=this.getLineWidth(p),r<this.width&&(d=this.textLines[p].match(this._reSpacesAndTabs)))){i=d.length,n=(this.width-r)/i;for(var C=0,S=h.length;C<=S;C++)s=this.__charBounds[p][C],this._reSpaceAndTab.test(h[C])?(s.width+=n,s.kernedWidth+=n,s.left+=a,a+=n):s.left+=a}},isEndOfWrapping:function(n){return n===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var n=this.callSuper("_getCacheCanvasDimensions"),r=this.fontSize;return n.width+=r*n.zoomX,n.height+=r*n.zoomY,n},_render:function(n){var r=this.path;r&&!r.isNotVisible()&&r._render(n),this._setTextStyles(n),this._renderTextLinesBackground(n),this._renderTextDecoration(n,"underline"),this._renderText(n),this._renderTextDecoration(n,"overline"),this._renderTextDecoration(n,"linethrough")},_renderText:function(n){this.paintFirst==="stroke"?(this._renderTextStroke(n),this._renderTextFill(n)):(this._renderTextFill(n),this._renderTextStroke(n))},_setTextStyles:function(n,r,i){n.textBaseline="alphabetic",n.font=this._getFontDeclaration(r,i)},calcTextWidth:function(){for(var n=this.getLineWidth(0),r=1,i=this._textLines.length;r<i;r++){var a=this.getLineWidth(r);a>n&&(n=a)}return n},_renderTextLine:function(n,r,i,a,h,s){this._renderChars(n,r,i,a,h,s)},_renderTextLinesBackground:function(n){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var r,i,a=n.fillStyle,h,s,d=this._getLeftOffset(),p=this._getTopOffset(),y=0,C=0,S,T,P=this.path,L,G=0,re=this._textLines.length;G<re;G++){if(r=this.getHeightOfLine(G),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",G)){p+=r;continue}h=this._textLines[G],i=this._getLineLeftOffset(G),C=0,y=0,s=this.getValueOfPropertyAt(G,0,"textBackgroundColor");for(var le=0,V=h.length;le<V;le++)S=this.__charBounds[G][le],T=this.getValueOfPropertyAt(G,le,"textBackgroundColor"),P?(n.save(),n.translate(S.renderLeft,S.renderTop),n.rotate(S.angle),n.fillStyle=T,T&&n.fillRect(-S.width/2,-r/this.lineHeight*(1-this._fontSizeFraction),S.width,r/this.lineHeight),n.restore()):T!==s?(L=d+i+y,this.direction==="rtl"&&(L=this.width-L-C),n.fillStyle=s,s&&n.fillRect(L,p,C,r/this.lineHeight),y=S.left,C=S.width,s=T):C+=S.kernedWidth;T&&!P&&(L=d+i+y,this.direction==="rtl"&&(L=this.width-L-C),n.fillStyle=T,n.fillRect(L,p,C,r/this.lineHeight)),p+=r}n.fillStyle=a,this._removeShadow(n)}},getFontCache:function(n){var r=n.fontFamily.toLowerCase();l.charWidthsCache[r]||(l.charWidthsCache[r]={});var i=l.charWidthsCache[r],a=n.fontStyle.toLowerCase()+"_"+(n.fontWeight+"").toLowerCase();return i[a]||(i[a]={}),i[a]},_measureChar:function(n,r,i,a){var h=this.getFontCache(r),s=this._getFontDeclaration(r),d=this._getFontDeclaration(a),p=i+n,y=s===d,C,S,T,P=r.fontSize/this.CACHE_FONT_SIZE,L;if(i&&h[i]!==void 0&&(T=h[i]),h[n]!==void 0&&(L=C=h[n]),y&&h[p]!==void 0&&(S=h[p],L=S-T),C===void 0||T===void 0||S===void 0){var G=this.getMeasuringContext();this._setTextStyles(G,r,!0)}return C===void 0&&(L=C=G.measureText(n).width,h[n]=C),T===void 0&&y&&i&&(T=G.measureText(i).width,h[i]=T),y&&S===void 0&&(S=G.measureText(p).width,h[p]=S,L=S-T),{width:C*P,kernedWidth:L*P}},getHeightOfChar:function(n,r){return this.getValueOfPropertyAt(n,r,"fontSize")},measureLine:function(n){var r=this._measureLine(n);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r},_measureLine:function(n){var r=0,i,a,h=this._textLines[n],s,d,p=0,y=new Array(h.length),C=0,S,T,P=this.path,L=this.pathSide==="right";for(this.__charBounds[n]=y,i=0;i<h.length;i++)a=h[i],d=this._getGraphemeBox(a,n,i,s),y[i]=d,r+=d.kernedWidth,s=a;if(y[i]={left:d?d.left+d.width:0,width:0,kernedWidth:0,height:this.fontSize},P){switch(T=P.segmentsInfo[P.segmentsInfo.length-1].length,S=l.util.getPointOnPath(P.path,0,P.segmentsInfo),S.x+=P.pathOffset.x,S.y+=P.pathOffset.y,this.textAlign){case"left":C=L?T-r:0;break;case"center":C=(T-r)/2;break;case"right":C=L?0:T-r;break}for(C+=this.pathStartOffset*(L?-1:1),i=L?h.length-1:0;L?i>=0:i<h.length;L?i--:i++)d=y[i],C>T?C%=T:C<0&&(C+=T),this._setGraphemeOnPath(C,d,S),C+=d.kernedWidth}return{width:r,numOfSpaces:p}},_setGraphemeOnPath:function(n,r,i){var a=n+r.kernedWidth/2,h=this.path,s=l.util.getPointOnPath(h.path,a,h.segmentsInfo);r.renderLeft=s.x-i.x,r.renderTop=s.y-i.y,r.angle=s.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(n,r,i,a,h){var s=this.getCompleteStyleDeclaration(r,i),d=a?this.getCompleteStyleDeclaration(r,i-1):{},p=this._measureChar(n,s,a,d),y=p.kernedWidth,C=p.width,S;this.charSpacing!==0&&(S=this._getWidthOfCharSpacing(),C+=S,y+=S);var T={width:C,left:0,height:s.fontSize,kernedWidth:y,deltaY:s.deltaY};if(i>0&&!h){var P=this.__charBounds[r][i-1];T.left=P.left+P.width+p.kernedWidth-p.width}return T},getHeightOfLine:function(n){if(this.__lineHeights[n])return this.__lineHeights[n];for(var r=this._textLines[n],i=this.getHeightOfChar(n,0),a=1,h=r.length;a<h;a++)i=Math.max(this.getHeightOfChar(n,a),i);return this.__lineHeights[n]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var n,r=0,i=0,a=this._textLines.length;i<a;i++)n=this.getHeightOfLine(i),r+=i===a-1?n/this.lineHeight:n;return r},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(n,r){n.save();for(var i=0,a=this._getLeftOffset(),h=this._getTopOffset(),s=0,d=this._textLines.length;s<d;s++){var p=this.getHeightOfLine(s),y=p/this.lineHeight,C=this._getLineLeftOffset(s);this._renderTextLine(r,n,this._textLines[s],a+C,h+i+y,s),i+=p}n.restore()},_renderTextFill:function(n){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(n,"fillText")},_renderTextStroke:function(n){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(n),n.save(),this._setLineDash(n,this.strokeDashArray),n.beginPath(),this._renderTextCommon(n,"strokeText"),n.closePath(),n.restore())},_renderChars:function(n,r,i,a,h,s){var d=this.getHeightOfLine(s),p=this.textAlign.indexOf("justify")!==-1,y,C,S="",T,P=0,L,G=this.path,re=!p&&this.charSpacing===0&&this.isEmptyStyles(s)&&!G,le=this.direction==="ltr",V=this.direction==="ltr"?1:-1,q;if(r.save(),h-=d*this._fontSizeFraction/this.lineHeight,re){r.canvas.setAttribute("dir",le?"ltr":"rtl"),r.direction=le?"ltr":"rtl",r.textAlign=le?"left":"right",this._renderChar(n,r,s,0,i.join(""),a,h,d),r.restore();return}for(var ne=0,fe=i.length-1;ne<=fe;ne++)L=ne===fe||this.charSpacing||G,S+=i[ne],T=this.__charBounds[s][ne],P===0?(a+=V*(T.kernedWidth-T.width),P+=T.width):P+=T.kernedWidth,p&&!L&&this._reSpaceAndTab.test(i[ne])&&(L=!0),L||(y=y||this.getCompleteStyleDeclaration(s,ne),C=this.getCompleteStyleDeclaration(s,ne+1),L=this._hasStyleChanged(y,C)),L&&(G?(r.save(),r.translate(T.renderLeft,T.renderTop),r.rotate(T.angle),this._renderChar(n,r,s,ne,S,-P/2,0,d),r.restore()):(q=a,r.canvas.setAttribute("dir",le?"ltr":"rtl"),r.direction=le?"ltr":"rtl",r.textAlign=le?"left":"right",this._renderChar(n,r,s,ne,S,q,h,d)),S="",y=C,a+=V*P,P=0);r.restore()},_applyPatternGradientTransformText:function(n){var r=l.util.createCanvasElement(),i,a=this.width+this.strokeWidth,h=this.height+this.strokeWidth;return r.width=a,r.height=h,i=r.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(a,0),i.lineTo(a,h),i.lineTo(0,h),i.closePath(),i.translate(a/2,h/2),i.fillStyle=n.toLive(i),this._applyPatternGradientTransform(i,n),i.fill(),i.createPattern(r,"no-repeat")},handleFiller:function(n,r,i){var a,h;return i.toLive?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(a=-this.width/2,h=-this.height/2,n.translate(a,h),n[r]=this._applyPatternGradientTransformText(i),{offsetX:a,offsetY:h}):(n[r]=i.toLive(n,this),this._applyPatternGradientTransform(n,i)):(n[r]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(n,r){return n.lineWidth=r.strokeWidth,n.lineCap=this.strokeLineCap,n.lineDashOffset=this.strokeDashOffset,n.lineJoin=this.strokeLineJoin,n.miterLimit=this.strokeMiterLimit,this.handleFiller(n,"strokeStyle",r.stroke)},_setFillStyles:function(n,r){return this.handleFiller(n,"fillStyle",r.fill)},_renderChar:function(n,r,i,a,h,s,d){var p=this._getStyleDeclaration(i,a),y=this.getCompleteStyleDeclaration(i,a),C=n==="fillText"&&y.fill,S=n==="strokeText"&&y.stroke&&y.strokeWidth,T,P;!S&&!C||(r.save(),C&&(T=this._setFillStyles(r,y)),S&&(P=this._setStrokeStyles(r,y)),r.font=this._getFontDeclaration(y),p&&p.textBackgroundColor&&this._removeShadow(r),p&&p.deltaY&&(d+=p.deltaY),C&&r.fillText(h,s-T.offsetX,d-T.offsetY),S&&r.strokeText(h,s-P.offsetX,d-P.offsetY),r.restore())},setSuperscript:function(n,r){return this._setScript(n,r,this.superscript)},setSubscript:function(n,r){return this._setScript(n,r,this.subscript)},_setScript:function(n,r,i){var a=this.get2DCursorLocation(n,!0),h=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),s=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),d={fontSize:h*i.size,deltaY:s+h*i.baseline};return this.setSelectionStyles(d,n,r),this},_hasStyleChanged:function(n,r){return n.fill!==r.fill||n.stroke!==r.stroke||n.strokeWidth!==r.strokeWidth||n.fontSize!==r.fontSize||n.fontFamily!==r.fontFamily||n.fontWeight!==r.fontWeight||n.fontStyle!==r.fontStyle||n.deltaY!==r.deltaY},_hasStyleChangedForSvg:function(n,r){return this._hasStyleChanged(n,r)||n.overline!==r.overline||n.underline!==r.underline||n.linethrough!==r.linethrough},_getLineLeftOffset:function(n){var r=this.getLineWidth(n),i=this.width-r,a=this.textAlign,h=this.direction,d,s=0,d=this.isEndOfWrapping(n);return a==="justify"||a==="justify-center"&&!d||a==="justify-right"&&!d||a==="justify-left"&&!d?0:(a==="center"&&(s=i/2),a==="right"&&(s=i),a==="justify-center"&&(s=i/2),a==="justify-right"&&(s=i),h==="rtl"&&(s-=i),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var n=this._forceClearCache;return n||(n=this.hasStateChanged("_dimensionAffectingProps")),n&&(this.dirty=!0,this._forceClearCache=!1),n},getLineWidth:function(n){if(this.__lineWidths[n])return this.__lineWidths[n];var r,i=this._textLines[n],a;return i===""?r=0:(a=this.measureLine(n),r=a.width),this.__lineWidths[n]=r,r},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(n,r,i){var a=this._getStyleDeclaration(n,r);return a&&typeof a[i]<"u"?a[i]:this[i]},_renderTextDecoration:function(n,r){if(!(!this[r]&&!this.styleHas(r))){for(var i,a,h,s,d,p,y,C,S=this._getLeftOffset(),T=this._getTopOffset(),P,L,G,re,le,V,q,ne,fe=this.path,pe=this._getWidthOfCharSpacing(),ge=this.offsets[r],$=0,D=this._textLines.length;$<D;$++){if(i=this.getHeightOfLine($),!this[r]&&!this.styleHas(r,$)){T+=i;continue}y=this._textLines[$],V=i/this.lineHeight,s=this._getLineLeftOffset($),L=0,G=0,C=this.getValueOfPropertyAt($,0,r),ne=this.getValueOfPropertyAt($,0,"fill"),P=T+V*(1-this._fontSizeFraction),a=this.getHeightOfChar($,0),d=this.getValueOfPropertyAt($,0,"deltaY");for(var I=0,x=y.length;I<x;I++)if(re=this.__charBounds[$][I],le=this.getValueOfPropertyAt($,I,r),q=this.getValueOfPropertyAt($,I,"fill"),h=this.getHeightOfChar($,I),p=this.getValueOfPropertyAt($,I,"deltaY"),fe&&le&&q)n.save(),n.fillStyle=ne,n.translate(re.renderLeft,re.renderTop),n.rotate(re.angle),n.fillRect(-re.kernedWidth/2,ge*h+p,re.kernedWidth,this.fontSize/15),n.restore();else if((le!==C||q!==ne||h!==a||p!==d)&&G>0){var O=S+s+L;this.direction==="rtl"&&(O=this.width-O-G),C&&ne&&(n.fillStyle=ne,n.fillRect(O,P+ge*a+d,G,this.fontSize/15)),L=re.left,G=re.width,C=le,ne=q,a=h,d=p}else G+=re.kernedWidth;var O=S+s+L;this.direction==="rtl"&&(O=this.width-O-G),n.fillStyle=q,le&&q&&n.fillRect(O,P+ge*a+d,G-pe,this.fontSize/15),T+=i}this._removeShadow(n)}},_getFontDeclaration:function(n,r){var i=n||this,a=this.fontFamily,h=l.Text.genericFonts.indexOf(a.toLowerCase())>-1,s=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||h?i.fontFamily:'"'+i.fontFamily+'"';return[l.isLikelyNode?i.fontWeight:i.fontStyle,l.isLikelyNode?i.fontStyle:i.fontWeight,r?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",s].join(" ")},render:function(n){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",n)))},_splitTextIntoLines:function(n){for(var r=n.split(this._reNewline),i=new Array(r.length),a=[`
`],h=[],s=0;s<r.length;s++)i[s]=l.util.string.graphemeSplit(r[s]),h=h.concat(i[s],a);return h.pop(),{_unwrappedLines:i,lines:r,graphemeText:h,graphemeLines:i}},toObject:function(n){var r=u.concat(n),i=this.callSuper("toObject",r);return i.styles=c(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(n,r){this.callSuper("set",n,r);var i=!1,a=!1;if(typeof n=="object")for(var h in n)h==="path"&&this.setPathInfo(),i=i||this._dimensionAffectingProps.indexOf(h)!==-1,a=a||h==="path";else i=this._dimensionAffectingProps.indexOf(n)!==-1,a=n==="path";return a&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),l.Text.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),l.Text.DEFAULT_SVG_FONT_SIZE=16,l.Text.fromElement=function(n,r,i){if(!n)return r(null);var a=l.parseAttributes(n,l.Text.ATTRIBUTE_NAMES),h=a.textAnchor||"left";if(i=l.util.object.extend(i?c(i):{},a),i.top=i.top||0,i.left=i.left||0,a.textDecoration){var s=a.textDecoration;s.indexOf("underline")!==-1&&(i.underline=!0),s.indexOf("overline")!==-1&&(i.overline=!0),s.indexOf("line-through")!==-1&&(i.linethrough=!0),delete i.textDecoration}"dx"in a&&(i.left+=a.dx),"dy"in a&&(i.top+=a.dy),"fontSize"in i||(i.fontSize=l.Text.DEFAULT_SVG_FONT_SIZE);var d="";"textContent"in n?d=n.textContent:"firstChild"in n&&n.firstChild!==null&&"data"in n.firstChild&&n.firstChild.data!==null&&(d=n.firstChild.data),d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var p=i.strokeWidth;i.strokeWidth=0;var y=new l.Text(d,i),C=y.getScaledHeight()/y.height,S=(y.height+y.strokeWidth)*y.lineHeight-y.height,T=S*C,P=y.getScaledHeight()+T,L=0;h==="center"&&(L=y.getScaledWidth()/2),h==="right"&&(L=y.getScaledWidth()),y.set({left:y.left-L,top:y.top-(P-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof p<"u"?p:1}),r(y)},l.Text.fromObject=function(n,r){var i=c(n),a=n.path;return delete i.path,l.Object._fromObject("Text",i,function(h){a?l.Object._fromObject("Path",a,function(s){h.set("path",s),r(h)},"path"):r(h)},"text")},l.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],l.util.createAccessors&&l.util.createAccessors(l.Text)}(U),function(){v.util.object.extend(v.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var l=typeof g>"u"?this.styles:{line:this.styles[g]};for(var c in l)for(var u in l[c])for(var n in l[c][u])return!1;return!0},styleHas:function(g,l){if(!this.styles||!g||g===""||typeof l<"u"&&!this.styles[l])return!1;var c=typeof l>"u"?this.styles:{0:this.styles[l]};for(var u in c)for(var n in c[u])if(typeof c[u][n][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var l=this.styles,c=0,u,n,r=!0,i=0,a;for(var h in l){u=0;for(var s in l[h]){var a=l[h][s],d=a.hasOwnProperty(g);c++,d?(n?a[g]!==n&&(r=!1):n=a[g],a[g]===this[g]&&delete a[g]):r=!1,Object.keys(a).length!==0?u++:delete l[h][s]}u===0&&delete l[h]}for(var p=0;p<this._textLines.length;p++)i+=this._textLines[p].length;r&&c===i&&(this[g]=n,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var l=this.styles,c,u,n;for(u in l){c=l[u];for(n in c)delete c[n][g],Object.keys(c[n]).length===0&&delete c[n];Object.keys(c).length===0&&delete l[u]}}},_extendStyles:function(g,l){var c=this.get2DCursorLocation(g);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),v.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),l)},get2DCursorLocation:function(g,l){typeof g>"u"&&(g=this.selectionStart);for(var c=l?this._unwrappedTextLines:this._textLines,u=c.length,n=0;n<u;n++){if(g<=c[n].length)return{lineIndex:n,charIndex:g};g-=c[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:c[n-1].length<g?c[n-1].length:g}},getSelectionStyles:function(g,l,c){typeof g>"u"&&(g=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||g);for(var u=[],n=g;n<l;n++)u.push(this.getStyleAtPosition(n,c));return u},getStyleAtPosition:function(g,l){var c=this.get2DCursorLocation(g),u=l?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return u||{}},setSelectionStyles:function(g,l,c){typeof l>"u"&&(l=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||l);for(var u=l;u<c;u++)this._extendStyles(u,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,l){var c=this.styles&&this.styles[g];return c?c[l]:null},getCompleteStyleDeclaration:function(g,l){for(var c=this._getStyleDeclaration(g,l)||{},u={},n,r=0;r<this._styleProperties.length;r++)n=this._styleProperties[r],u[n]=typeof c[n]>"u"?this[n]:c[n];return u},_setStyleDeclaration:function(g,l,c){this.styles[g][l]=c},_deleteStyleDeclaration:function(g,l){delete this.styles[g][l]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})}(),function(){function g(l){l.textDecoration&&(l.textDecoration.indexOf("underline")>-1&&(l.underline=!0),l.textDecoration.indexOf("line-through")>-1&&(l.linethrough=!0),l.textDecoration.indexOf("overline")>-1&&(l.overline=!0),delete l.textDecoration)}v.IText=v.util.createClass(v.Text,v.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(l,c){this.callSuper("initialize",l,c),this.initBehavior()},setSelectionStart:function(l){l=Math.max(l,0),this._updateAndFire("selectionStart",l)},setSelectionEnd:function(l){l=Math.min(l,this.text.length),this._updateAndFire("selectionEnd",l)},_updateAndFire:function(l,c){this[l]!==c&&(this._fireSelectionChanged(),this[l]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(l){this.clearContextTop(),this.callSuper("render",l),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(l){this.callSuper("_render",l)},clearContextTop:function(l){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,u=this.canvas.viewportTransform;c.save(),c.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(c),this._clearTextArea(c),l||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(l,c):this.renderSelection(l,c),c.restore()}},_clearTextArea:function(l){var c=this.width+4,u=this.height+4;l.clearRect(-c/2,-u/2,c,u)},_getCursorBoundaries:function(l){typeof l>"u"&&(l=this.selectionStart);var c=this._getLeftOffset(),u=this._getTopOffset(),n=this._getCursorBoundariesOffsets(l);return{left:c,top:u,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(l){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,u,n,r=0,i=0,a,h=this.get2DCursorLocation(l);n=h.charIndex,u=h.lineIndex;for(var s=0;s<u;s++)r+=this.getHeightOfLine(s);c=this._getLineLeftOffset(u);var d=this.__charBounds[u][n];return d&&(i=d.left),this.charSpacing!==0&&n===this._textLines[u].length&&(i-=this._getWidthOfCharSpacing()),a={top:r,left:c+(i>0?i:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(l,c){var u=this.get2DCursorLocation(),n=u.lineIndex,r=u.charIndex>0?u.charIndex-1:0,i=this.getValueOfPropertyAt(n,r,"fontSize"),a=this.scaleX*this.canvas.getZoom(),h=this.cursorWidth/a,s=l.topOffset,d=this.getValueOfPropertyAt(n,r,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(l,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(l.left+l.leftOffset-h/2,s+l.top+d,h,i)},renderSelection:function(l,c){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=this.textAlign.indexOf("justify")!==-1,i=this.get2DCursorLocation(u),a=this.get2DCursorLocation(n),h=i.lineIndex,s=a.lineIndex,d=i.charIndex<0?0:i.charIndex,p=a.charIndex<0?0:a.charIndex,y=h;y<=s;y++){var C=this._getLineLeftOffset(y)||0,S=this.getHeightOfLine(y),T=0,P=0,L=0;if(y===h&&(P=this.__charBounds[h][d].left),y>=h&&y<s)L=r&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===s)if(p===0)L=this.__charBounds[s][p].left;else{var G=this._getWidthOfCharSpacing();L=this.__charBounds[s][p-1].left+this.__charBounds[s][p-1].width-G}T=S,(this.lineHeight<1||y===s&&this.lineHeight>1)&&(S/=this.lineHeight);var re=l.left+C+P,le=L-P,V=S,q=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",V=1,q=S):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(re=this.width-re-le),c.fillRect(re,l.top+l.topOffset+q,le,V),l.topOffset+=T}},getCurrentCharFontSize:function(){var l=this._getCurrentCharIndex();return this.getValueOfPropertyAt(l.l,l.c,"fontSize")},getCurrentCharColor:function(){var l=this._getCurrentCharIndex();return this.getValueOfPropertyAt(l.l,l.c,"fill")},_getCurrentCharIndex:function(){var l=this.get2DCursorLocation(this.selectionStart,!0),c=l.charIndex>0?l.charIndex-1:0;return{l:l.lineIndex,c}}}),v.IText.fromObject=function(l,c){if(g(l),l.styles)for(var u in l.styles)for(var n in l.styles[u])g(l.styles[u][n]);v.Object._fromObject("IText",l,c,"text")}}(),function(){var g=v.util.object.clone;v.util.object.extend(v.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var l=this;this.on("added",function(){var c=l.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,l._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(l))})},initRemovedHandler:function(){var l=this;this.on("removed",function(){var c=l.canvas;c&&(c._iTextInstances=c._iTextInstances||[],v.util.removeFromArray(c._iTextInstances,l),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,l._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(l){l._mouseUpITextHandler=function(){l._iTextInstances&&l._iTextInstances.forEach(function(c){c.__isMousedown=!1})},l.on("mouse:up",l._mouseUpITextHandler)},_removeCanvasHandlers:function(l){l.off("mouse:up",l._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(l,c,u,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},l.animate("_currentCursorOpacity",c,{duration:u,onComplete:function(){r.isAborted||l[n]()},onChange:function(){l.canvas&&l.selectionStart===l.selectionEnd&&l.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var l=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){l._currentTickCompleteState=l._animateCursor(l,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(l){var c=this,u=l?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},u)},abortCursorAnimation:function(){var l=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,l&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(l){var c=0,u=l-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u--;for(;/\S/.test(this._text[u])&&u>-1;)c++,u--;return l-c},findWordBoundaryRight:function(l){var c=0,u=l;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)c++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)c++,u++;return l+c},findLineBoundaryLeft:function(l){for(var c=0,u=l-1;!/\n/.test(this._text[u])&&u>-1;)c++,u--;return l-c},findLineBoundaryRight:function(l){for(var c=0,u=l;!/\n/.test(this._text[u])&&u<this._text.length;)c++,u++;return l+c},searchWordBoundary:function(l,c){for(var u=this._text,n=this._reSpace.test(u[l])?l-1:l,r=u[n],i=v.reNonWord;!i.test(r)&&n>0&&n<u.length;)n+=c,r=u[n];return i.test(r)&&(n+=c===1?0:1),n},selectWord:function(l){l=l||this.selectionStart;var c=this.searchWordBoundary(l,-1),u=this.searchWordBoundary(l,1);this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(l){l=l||this.selectionStart;var c=this.findLineBoundaryLeft(l),u=this.findLineBoundaryRight(l);return this.selectionStart=c,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(l){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(l),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(l){l._iTextInstances&&l._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(l){if(!(!this.__isMousedown||!this.isEditing)){var c=this.getSelectionStartFromPointer(l.e),u=this.selectionStart,n=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||u===n)&&(u===c||n===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(l,c,u){var n=u.slice(0,l),r=v.util.string.graphemeSplit(n).length;if(l===c)return{selectionStart:r,selectionEnd:r};var i=u.slice(l,c),a=v.util.string.graphemeSplit(i).length;return{selectionStart:r,selectionEnd:r+a}},fromGraphemeToStringSelection:function(l,c,u){var n=u.slice(0,l),r=n.join("").length;if(l===c)return{selectionStart:r,selectionEnd:r};var i=u.slice(l,c),a=i.join("").length;return{selectionStart:r,selectionEnd:r+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var l=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=l.selectionStart,this.hiddenTextarea.selectionEnd=l.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var l=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=l.selectionEnd,this.inCompositionMode||(this.selectionStart=l.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var l=this._calcTextareaPosition();this.hiddenTextarea.style.left=l.left,this.hiddenTextarea.style.top=l.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var l=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(l),u=this.get2DCursorLocation(l),n=u.lineIndex,r=u.charIndex,i=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,a=c.leftOffset,h=this.calcTransformMatrix(),s={x:c.left+a,y:c.top+c.topOffset+i},d=this.canvas.getRetinaScaling(),p=this.canvas.upperCanvasEl,y=p.width/d,C=p.height/d,S=y-i,T=C-i,P=p.clientWidth/y,L=p.clientHeight/C;return s=v.util.transformPoint(s,h),s=v.util.transformPoint(s,this.canvas.viewportTransform),s.x*=P,s.y*=L,s.x<0&&(s.x=0),s.x>S&&(s.x=S),s.y<0&&(s.y=0),s.y>T&&(s.y=T),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var l=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),l&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),l&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var l in this.styles)this._textLines[l]||delete this.styles[l]},removeStyleFromTo:function(l,c){var u=this.get2DCursorLocation(l,!0),n=this.get2DCursorLocation(c,!0),r=u.lineIndex,i=u.charIndex,a=n.lineIndex,h=n.charIndex,s,d;if(r!==a){if(this.styles[r])for(s=i;s<this._unwrappedTextLines[r].length;s++)delete this.styles[r][s];if(this.styles[a])for(s=h;s<this._unwrappedTextLines[a].length;s++)d=this.styles[a][s],d&&(this.styles[r]||(this.styles[r]={}),this.styles[r][i+s-h]=d);for(s=r+1;s<=a;s++)delete this.styles[s];this.shiftLineStyles(a,r-a)}else if(this.styles[r]){d=this.styles[r];var p=h-i,y,C;for(s=i;s<h;s++)delete d[s];for(C in this.styles[r])y=parseInt(C,10),y>=h&&(d[y-p]=d[C],delete d[C])}},shiftLineStyles:function(l,c){var u=g(this.styles);for(var n in this.styles){var r=parseInt(n,10);r>l&&(this.styles[r+c]=u[r],u[r-c]||delete this.styles[r])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(l,c,u,n){var r,i={},a=!1,h=this._unwrappedTextLines[l].length===c;u||(u=1),this.shiftLineStyles(l,u),this.styles[l]&&(r=this.styles[l][c===0?c:c-1]);for(var s in this.styles[l]){var d=parseInt(s,10);d>=c&&(a=!0,i[d-c]=this.styles[l][s],h&&c===0||delete this.styles[l][s])}var p=!1;for(a&&!h&&(this.styles[l+u]=i,p=!0),p&&u--;u>0;)n&&n[u-1]?this.styles[l+u]={0:g(n[u-1])}:r?this.styles[l+u]={0:g(r)}:delete this.styles[l+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(l,c,u,n){this.styles||(this.styles={});var r=this.styles[l],i=r?g(r):{};u||(u=1);for(var a in i){var h=parseInt(a,10);h>=c&&(r[h+u]=i[h],i[h-u]||delete r[h])}if(this._forceClearCache=!0,n){for(;u--;)Object.keys(n[u]).length&&(this.styles[l]||(this.styles[l]={}),this.styles[l][c+u]=g(n[u]));return}if(r)for(var s=r[c?c-1:1];s&&u--;)this.styles[l][c+u]=g(s)},insertNewStyleBlock:function(l,c,u){for(var n=this.get2DCursorLocation(c,!0),r=[0],i=0,a=0;a<l.length;a++)l[a]===`
`?(i++,r[i]=0):r[i]++;r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],u),u=u&&u.slice(r[0]+1)),i&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],i);for(var a=1;a<i;a++)r[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,r[a],u):u&&(this.styles[n.lineIndex+a][0]=u[0]),u=u&&u.slice(r[a]+1);r[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,r[a],u)},setSelectionStartEndWithShift:function(l,c,u){u<=l?(c===l?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=l),this.selectionStart=u):u>l&&u<c?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(c===l?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=u)},setSelectionInBoundaries:function(){var l=this.text.length;this.selectionStart>l?this.selectionStart=l:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>l?this.selectionEnd=l:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),v.util.object.extend(v.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(this.canvas){this.__newClickTime=+new Date;var l=g.pointer;this.isTripleClick(l)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=l,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var l=this.canvas._activeObject;if(l&&l!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var l=this.getSelectionStartFromPointer(g),c=this.selectionStart,u=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(c,u,l):(this.selectionStart=l,this.selectionEnd=l),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var l=this.getLocalPointer(g),c=0,u=0,n=0,r=0,i=0,a,h,s=0,d=this._textLines.length;s<d&&n<=l.y;s++)n+=this.getHeightOfLine(s)*this.scaleY,i=s,s>0&&(r+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));a=this._getLineLeftOffset(i),u=a*this.scaleX,h=this._textLines[i],this.direction==="rtl"&&(l.x=this.width*this.scaleX-l.x+u);for(var p=0,y=h.length;p<y&&(c=u,u+=this.__charBounds[i][p].kernedWidth*this.scaleX,u<=l.x);p++)r++;return this._getNewSelectionStartFromOffset(l,c,u,r,y)},_getNewSelectionStartFromOffset:function(g,l,c,u,n){var r=g.x-l,i=c-g.x,a=i>r||i<0?0:1,h=u+a;return this.flipX&&(h=n-h),h>this._text.length&&(h=this._text.length),h}}),v.util.object.extend(v.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=v.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):v.document.body.appendChild(this.hiddenTextarea),v.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),v.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),v.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),v.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),v.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),v.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(v.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(this.isEditing){var l=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in l)this[l[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var l=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,n=c.length,r,i,a=n-u,h=this.selectionStart,s=this.selectionEnd,d=h!==s,p,y,C;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),T=h>S.selectionStart;d?(r=this._text.slice(h,s),a+=s-h):n<u&&(T?r=this._text.slice(s+a,s):r=this._text.slice(h,h-a)),i=c.slice(S.selectionEnd-a,S.selectionEnd),r&&r.length&&(i.length&&(p=this.getSelectionStyles(h,h+1,!1),p=i.map(function(){return p[0]})),d?(y=h,C=s):T?(y=s-r.length,C=s):(y=s,C=s+r.length),this.removeStyleFromTo(y,C)),i.length&&(l&&i.join("")===v.copiedText&&!v.disableStyleCopyPaste&&(p=v.copiedTextStyle),this.insertNewStyleBlock(i,h,p)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(v.copiedText=this.getSelectedText(),v.disableStyleCopyPaste?v.copiedTextStyle=null:v.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||v.window.clipboardData},_getWidthBeforeCursor:function(g,l){var c=this._getLineLeftOffset(g),u;return l>0&&(u=this.__charBounds[g][l-1],c+=u.left+u.width),c},getDownCursorOffset:function(g,l){var c=this._getSelectionForOffset(g,l),u=this.get2DCursorLocation(c),n=u.lineIndex;if(n===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-c;var r=u.charIndex,i=this._getWidthBeforeCursor(n,r),a=this._getIndexOnLine(n+1,i),h=this._textLines[n].slice(r);return h.length+a+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(g,l){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&l?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,l){var c=this._getSelectionForOffset(g,l),u=this.get2DCursorLocation(c),n=u.lineIndex;if(n===0||g.metaKey||g.keyCode===33)return-c;var r=u.charIndex,i=this._getWidthBeforeCursor(n,r),a=this._getIndexOnLine(n-1,i),h=this._textLines[n].slice(0,r),s=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+a-h.length+(1-s)},_getIndexOnLine:function(g,l){for(var c=this._textLines[g],u=this._getLineLeftOffset(g),n=u,r=0,i,a,h=0,s=c.length;h<s;h++)if(i=this.__charBounds[g][h].width,n+=i,n>l){a=!0;var d=n-i,p=n,y=Math.abs(d-l),C=Math.abs(p-l);r=C<y?h:h-1;break}return a||(r=c.length-1),r},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,l){var c="get"+g+"CursorOffset",u=this[c](l,this._selectionDirection==="right");l.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var l=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,l),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,l,c){var u;if(g.altKey)u=this["findWordBoundary"+c](this[l]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)u=this["findLineBoundary"+c](this[l]);else return this[l]+=c==="Left"?-1:1,!0;if(typeof u!==void 0&&this[l]!==u)return this[l]=u,!0},_moveLeft:function(g,l){return this._move(g,l,"Left")},_moveRight:function(g,l){return this._move(g,l,"Right")},moveCursorLeftWithoutShift:function(g){var l=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(l=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,l},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,l){var c="moveCursor"+g+"With";this._currentCursorOpacity=1,l.shiftKey?c+="Shift":c+="outShift",this[c](l)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var l=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(l=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,l},removeChars:function(g,l){typeof l>"u"&&(l=g+1),this.removeStyleFromTo(g,l),this._text.splice(g,l-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,l,c,u){typeof u>"u"&&(u=c),u>c&&this.removeStyleFromTo(c,u);var n=v.util.string.graphemeSplit(g);this.insertNewStyleBlock(n,c,l),this._text=[].concat(this._text.slice(0,c),n,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var g=v.util.toFixed,l=/  +/g;v.util.object.extend(v.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var u=!0,n=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,u){var n=[],r=[],i=c,a;this._setSVGBg(r);for(var h=0,s=this._textLines.length;h<s;h++)a=this._getLineLeftOffset(h),(this.textBackgroundColor||this.styleHas("textBackgroundColor",h))&&this._setSVGTextLineBg(r,h,u+a,i),this._setSVGTextLineText(n,h,u+a,i),i+=this.getHeightOfLine(h);return{textSpans:n,textBgRects:r}},_createTextCharSpan:function(c,u,n,r){var i=c!==c.trim()||c.match(l),a=this.getSvgSpanStyles(u,i),h=a?'style="'+a+'"':"",s=u.deltaY,d="",p=v.Object.NUM_FRACTION_DIGITS;return s&&(d=' dy="'+g(s,p)+'" '),['<tspan x="',g(n,p),'" y="',g(r,p),'" ',d,h,">",v.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,u,n,r){var i=this.getHeightOfLine(u),a=this.textAlign.indexOf("justify")!==-1,h,s,d="",p,y,C=0,S=this._textLines[u],T;r+=i*(1-this._fontSizeFraction)/this.lineHeight;for(var P=0,L=S.length-1;P<=L;P++)T=P===L||this.charSpacing,d+=S[P],p=this.__charBounds[u][P],C===0?(n+=p.kernedWidth-p.width,C+=p.width):C+=p.kernedWidth,a&&!T&&this._reSpaceAndTab.test(S[P])&&(T=!0),T||(h=h||this.getCompleteStyleDeclaration(u,P),s=this.getCompleteStyleDeclaration(u,P+1),T=this._hasStyleChangedForSvg(h,s)),T&&(y=this._getStyleDeclaration(u,P)||{},c.push(this._createTextCharSpan(d,y,n,r)),d="",h=s,n+=C,C=0)},_pushTextBgRect:function(c,u,n,r,i,a){var h=v.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(u),' x="',g(n,h),'" y="',g(r,h),'" width="',g(i,h),'" height="',g(a,h),`"></rect>
`)},_setSVGTextLineBg:function(c,u,n,r){for(var i=this._textLines[u],a=this.getHeightOfLine(u)/this.lineHeight,h=0,s=0,d,p,y=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),C=0,S=i.length;C<S;C++)d=this.__charBounds[u][C],p=this.getValueOfPropertyAt(u,C,"textBackgroundColor"),p!==y?(y&&this._pushTextBgRect(c,y,n+s,r,h,a),s=d.left,h=d.width,y=p):h+=d.kernedWidth;p&&this._pushTextBgRect(c,p,n+s,r,h,a)},_getFillAttributes:function(c){var u=c&&typeof c=="string"?new v.Color(c):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+c+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var u=0,n=0,r=0;r<c;r++)u+=this.getHeightOfLine(r);return n=this.getHeightOfLine(r),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var u=v.Object.prototype.getSvgStyles.call(this,c);return u+" white-space: pre;"}})}(),function(g){var l=g.fabric||(g.fabric={});l.Textbox=l.util.createClass(l.IText,l.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:l.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var u=0,n=0,r=0,i={},a=0;a<c.graphemeLines.length;a++)c.graphemeText[r]===`
`&&a>0?(n=0,r++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[r])&&a>0&&(n++,r++),i[a]={line:u,offset:n},r+=c.graphemeLines[a].length,n+=c.graphemeLines[a].length;return i},styleHas:function(c,u){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[u];n&&(u=n.line)}return l.Text.prototype.styleHas.call(this,c,u)},isEmptyStyles:function(c){if(!this.styles)return!0;var u=0,n=c+1,r,i,a=!1,h=this._styleMap[c],s=this._styleMap[c+1];h&&(c=h.line,u=h.offset),s&&(n=s.line,a=n===c,r=s.offset),i=typeof c>"u"?this.styles:{line:this.styles[c]};for(var d in i)for(var p in i[d])if(p>=u&&(!a||p<r))for(var y in i[d][p])return!1;return!0},_getStyleDeclaration:function(c,u){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];if(!n)return null;c=n.line,u=n.offset+u}return this.callSuper("_getStyleDeclaration",c,u)},_setStyleDeclaration:function(c,u,n){var r=this._styleMap[c];c=r.line,u=r.offset+u,this.styles[c][u]=n},_deleteStyleDeclaration:function(c,u){var n=this._styleMap[c];c=n.line,u=n.offset+u,delete this.styles[c][u]},_getLineStyle:function(c){var u=this._styleMap[c];return!!this.styles[u.line]},_setLineStyle:function(c){var u=this._styleMap[c];this.styles[u.line]={}},_wrapText:function(c,u){var n=[],r;for(this.isWrapping=!0,r=0;r<c.length;r++)n=n.concat(this._wrapLine(c[r],r,u));return this.isWrapping=!1,n},_measureWord:function(c,u,n){var r=0,i,a=!0;n=n||0;for(var h=0,s=c.length;h<s;h++){var d=this._getGraphemeBox(c[h],u,h+n,i,a);r+=d.kernedWidth,i=c[h]}return r},_wrapLine:function(c,u,n,re){var i=0,a=this.splitByGrapheme,h=[],s=[],d=a?l.util.string.graphemeSplit(c):c.split(this._wordJoiners),p="",y=0,C=a?"":" ",S=0,T=0,P=0,L=!0,G=this._getWidthOfCharSpacing(),re=re||0;d.length===0&&d.push([]),n-=re;for(var le=0;le<d.length;le++)p=a?d[le]:l.util.string.graphemeSplit(d[le]),S=this._measureWord(p,u,y),y+=p.length,i+=T+S-G,i>n&&!L?(h.push(s),s=[],i=S,L=!0):i+=G,!L&&!a&&s.push(C),s=s.concat(p),T=a?0:this._measureWord([C],u,y),y++,L=!1,S>P&&(P=S);return le&&h.push(s),P+re>this.dynamicMinWidth&&(this.dynamicMinWidth=P-G+re),h},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var u=l.Text.prototype._splitTextIntoLines.call(this,c),n=this._wrapText(u.lines,this.width),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n[i].join("");return u.lines=r,u.graphemeLines=n,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var u in this._styleMap)this._textLines[u]&&(c[this._styleMap[u].line]=1);for(var u in this.styles)c[u]||delete this.styles[u]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),l.Textbox.fromObject=function(c,u){return l.Object._fromObject("Textbox",c,u,"text")}}(U),function(){var g=v.controlsUtils,l=g.scaleSkewCursorStyleHandler,c=g.scaleCursorStyleHandler,u=g.scalingEqually,n=g.scalingYOrSkewingX,r=g.scalingXOrSkewingY,i=g.scaleOrSkewActionName,a=v.Object.prototype.controls;if(a.ml=new v.Control({x:-.5,y:0,cursorStyleHandler:l,actionHandler:r,getActionName:i}),a.mr=new v.Control({x:.5,y:0,cursorStyleHandler:l,actionHandler:r,getActionName:i}),a.mb=new v.Control({x:0,y:.5,cursorStyleHandler:l,actionHandler:n,getActionName:i}),a.mt=new v.Control({x:0,y:-.5,cursorStyleHandler:l,actionHandler:n,getActionName:i}),a.tl=new v.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),a.tr=new v.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:u}),a.bl=new v.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:u}),a.br=new v.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:u}),a.mtr=new v.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),v.Textbox){var h=v.Textbox.prototype.controls={};h.mtr=a.mtr,h.tr=a.tr,h.br=a.br,h.tl=a.tl,h.bl=a.bl,h.mt=a.mt,h.mb=a.mb,h.mr=new v.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:l,actionName:"resizing"}),h.ml=new v.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:l,actionName:"resizing"})}}()}(Yo)),Yo}var Pt=Kh();const $h=()=>{const[U,v]=Qt.useState(null),[Z,ze]=Qt.useState(!1),De=Qt.useRef(null),Me=Qt.useRef(null),[Ie,g]=Qt.useState("#000000"),[l,c]=Qt.useState(5),[u,n]=Qt.useState(!1),r=["😀","😂","😍","🥰","😎","🤩","😊","🤔","👍","👏","❤️","🔥","✨","🎉","🌟","🌈","🍕","🍦","🏆","🎵","🚀","🌺","🐱","🐶","🦄","🌍","☀️","🌙","⭐","☁️"];Qt.useEffect(()=>()=>{U&&U.dispose()},[U]);const i=V=>{const q=new Pt.fabric.Canvas("canvas",{width:400,height:400,backgroundColor:"white",isDrawingMode:!1});Pt.fabric.Image.fromURL(V,ne=>{const fe=Math.min(q.width/ne.width,q.height/ne.height);ne.scale(fe),ne.set({left:(q.width-ne.width*fe)/2,top:(q.height-ne.height*fe)/2}),q.add(ne),q.renderAll()}),q.freeDrawingBrush.color=Ie,q.freeDrawingBrush.width=l,v(q)},a=V=>{const q=V.target.files[0];if(!q)return;const ne=new FileReader;ne.onload=fe=>{i(fe.target.result)},ne.readAsDataURL(q)},h=V=>{if(!U)return;const q=U.getObjects()[0];if(!q)return;const ne=q.left,fe=q.top,pe=q.scaleX,ge=q.scaleY,$=q.angle||0;switch(V){case"grayscale":q.filters.push(new Pt.fabric.Image.filters.Grayscale);break;case"sepia":q.filters.push(new Pt.fabric.Image.filters.Sepia);break;case"invert":q.filters.push(new Pt.fabric.Image.filters.Invert);break;case"retro":q.filters.push(new Pt.fabric.Image.filters.Pixelate({blocksize:5}));break;case"blur":q.filters.push(new Pt.fabric.Image.filters.Blur({value:.5}));break;case"brightness":q.filters.push(new Pt.fabric.Image.filters.Brightness({brightness:.2}));break;case"contrast":q.filters.push(new Pt.fabric.Image.filters.Contrast({contrast:.5}));break;default:q.filters=[]}q.applyFilters(),q.set({left:ne,top:fe,scaleX:pe,scaleY:ge,angle:$}),q.setCoords(),U.renderAll()},s=()=>{if(!U)return;const V=U.getObjects()[0];if(!V)return;const q=V.left,ne=V.top,fe=V.scaleX,pe=V.scaleY,ge=V.angle||0;V.filters=[],V.applyFilters(),V.set({left:q,top:ne,scaleX:fe,scaleY:pe,angle:ge}),V.setCoords(),U.renderAll()},d=()=>{if(!U||!Me.current.value)return;const V=new Pt.fabric.Text(Me.current.value,{left:50,top:50,fontSize:24,fill:"#000",selectable:!0});U.add(V),Me.current.value=""},p=V=>{U&&U.setBackgroundColor(V,U.renderAll.bind(U))},y=()=>{if(!U)return;const V=U.toDataURL({format:"png",quality:1}),q=document.createElement("a");q.href=V,q.download="edited-image.png",q.click()},C=()=>{if(!U)return;const V=U.getObjects()[0];V&&(V.rotate((V.angle||0)+90),U.renderAll())},S=()=>{if(!U)return;const V=U.getObjects()[0];if(!V)return;const q=new Pt.fabric.Image(V._element,{left:V.left,top:V.top,angle:V.angle||0,scaleX:V.scaleX,scaleY:V.scaleY,filters:V.filters.slice()});U.remove(V),U.add(q),q.filters&&q.filters.length>0&&q.applyFilters(),U.renderAll()},T=()=>{if(!U)return;const V=!Z;ze(V),U.isDrawingMode=V,V&&(U.freeDrawingBrush.color=Ie,U.freeDrawingBrush.width=l)},P=V=>{const q=V.target.value;g(q),U&&U.isDrawingMode&&(U.freeDrawingBrush.color=q)},L=V=>{const q=parseInt(V.target.value,10);c(q),U&&U.isDrawingMode&&(U.freeDrawingBrush.width=q)},G=()=>{if(!U)return;const V=U.getObjects();V.length>0&&U.remove(V[V.length-1])},re=V=>{if(!U)return;const q=new Pt.fabric.Text(V,{left:150,top:150,fontSize:40,selectable:!0});U.add(q),U.setActiveObject(q),U.renderAll(),n(!1)},le=()=>{if(!U)return;const V=U.getObjects();if(V.length>0){const q=V[0];U.clear(),q&&q.type==="image"&&U.add(q),U.renderAll()}};return Te.jsxs("div",{className:"container",children:[Te.jsx("h1",{children:"🎨 Editor de Imágenes"}),Te.jsxs("p",{className:"description",children:["¡Sube tu imagen y aplica filtros! 🌈✨",Te.jsx("br",{}),"Filtra en blanco y negro, vintage, retro, o dibuja y agrega texto. ¡Diviértete! 📷"]}),Te.jsx("input",{type:"file",accept:"image/*",onChange:a,ref:De,className:"file-input"}),Te.jsx("div",{className:"image-preview",children:Te.jsx("canvas",{id:"canvas"})}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Filtros"}),Te.jsxs("div",{className:"options",children:[Te.jsx("button",{className:"button",onClick:()=>h("grayscale"),children:"Blanco y Negro"}),Te.jsx("button",{className:"button",onClick:()=>h("sepia"),children:"Vintage"}),Te.jsx("button",{className:"button",onClick:()=>h("invert"),children:"Invertir Colores"}),Te.jsx("button",{className:"button",onClick:()=>h("retro"),children:"Retro (8 Bits)"}),Te.jsx("button",{className:"button",onClick:()=>h("blur"),children:"Desenfoque"}),Te.jsx("button",{className:"button",onClick:()=>h("brightness"),children:"Brillo"}),Te.jsx("button",{className:"button",onClick:()=>h("contrast"),children:"Contraste"}),Te.jsx("button",{className:"button",onClick:s,children:"Reiniciar Filtros"})]})]}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Herramientas de Dibujo"}),Te.jsxs("div",{className:"drawing-tools",children:[Te.jsx("button",{className:`button ${Z?"active":""}`,onClick:T,children:Z?"✏️ Desactivar Dibujo":"✏️ Activar Dibujo"}),Z&&Te.jsxs("div",{className:"drawing-options",children:[Te.jsxs("div",{className:"option-group",children:[Te.jsx("label",{children:"Color: "}),Te.jsx("input",{type:"color",value:Ie,onChange:P,className:"color-picker"})]}),Te.jsxs("div",{className:"option-group",children:[Te.jsx("label",{children:"Grosor: "}),Te.jsx("input",{type:"range",min:"1",max:"50",value:l,onChange:L,className:"width-slider"}),Te.jsxs("span",{children:[l,"px"]})]}),Te.jsx("button",{className:"button",onClick:G,children:"↩️ Deshacer"})]})]})]}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Emojis"}),Te.jsx("button",{className:"button emoji-toggle",onClick:()=>n(!u),children:u?"Ocultar Emojis":"Mostrar Emojis 😊"}),u&&Te.jsx("div",{className:"emoji-picker",children:r.map((V,q)=>Te.jsx("button",{className:"emoji-button",onClick:()=>re(V),children:V},q))})]}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Texto"}),Te.jsxs("div",{className:"text-tools",children:[Te.jsx("input",{type:"text",ref:Me,className:"textbox",placeholder:"Escribe tu texto aquí"}),Te.jsx("button",{className:"button",onClick:d,children:"Agregar Texto"})]})]}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Fondo Predefinido"}),Te.jsxs("div",{className:"background-options",children:[Te.jsx("button",{className:"button",onClick:()=>p("lightblue"),children:"Azul Claro"}),Te.jsx("button",{className:"button",onClick:()=>p("lightgreen"),children:"Verde Claro"}),Te.jsx("button",{className:"button",onClick:()=>p("lightyellow"),children:"Amarillo Claro"}),Te.jsx("button",{className:"button",onClick:()=>p("lightpink"),children:"Rosa Claro"})]})]}),Te.jsxs("div",{className:"section",children:[Te.jsx("h3",{children:"Opciones Adicionales"}),Te.jsxs("div",{className:"additional-options",children:[Te.jsx("button",{className:"button",onClick:C,children:"Rotar Imagen"}),Te.jsx("button",{className:"button",onClick:S,children:"Recortar Imagen"}),Te.jsx("button",{className:"button danger",onClick:le,children:"Limpiar Lienzo"}),Te.jsx("button",{className:"button primary",onClick:y,children:"Descargar Imagen"})]})]}),Te.jsx("style",{jsx:!0,children:`
        .container {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
          font-family: Arial, sans-serif;
        }
        
        .section {
          margin-bottom: 20px;
          border: 1px solid #ddd;
          padding: 15px;
          border-radius: 8px;
          background-color: #f9f9f9;
        }
        
        .options {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
        }
        
        .button {
          padding: 8px 12px;
          background-color: #4CAF50;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.3s;
        }
        
        .button:hover {
          background-color: #45a049;
        }
        
        .button.active {
          background-color: #2196F3;
        }
        
        .button.primary {
          background-color: #2196F3;
        }
        
        .button.danger {
          background-color: #f44336;
        }
        
        .drawing-tools, .drawing-options {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          gap: 15px;
        }
        
        .option-group {
          display: flex;
          align-items: center;
          gap: 5px;
        }
        
        .color-picker {
          width: 40px;
          height: 40px;
          padding: 0;
          border: none;
          cursor: pointer;
        }
        
        .width-slider {
          width: 100px;
        }
        
        .emoji-picker {
          display: grid;
          grid-template-columns: repeat(10, 1fr);
          gap: 5px;
          margin-top: 10px;
        }
        
        .emoji-button {
          font-size: 24px;
          background: none;
          border: 1px solid #ddd;
          border-radius: 4px;
          padding: 5px;
          cursor: pointer;
          transition: transform 0.1s;
        }
        
        .emoji-button:hover {
          transform: scale(1.2);
          background-color: #f0f0f0;
        }
        
        .image-preview {
          margin: 20px 0;
          display: flex;
          justify-content: center;
        }
        
        canvas {
          border: 1px solid #ddd;
          box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .textbox {
          padding: 8px;
          width: 250px;
          border: 1px solid #ddd;
          border-radius: 4px;
        }
        
        .file-input {
          display: block;
          margin: 10px 0;
        }
      `})]})},qh=Hh.createRoot(document.getElementById("root"));qh.render(Te.jsx(Bh.StrictMode,{children:Te.jsx($h,{})}));
