(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))p(v);new MutationObserver(v=>{for(const _ of v)if(_.type==="childList")for(const S of _.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&p(S)}).observe(document,{childList:!0,subtree:!0});function s(v){const _={};return v.integrity&&(_.integrity=v.integrity),v.referrerPolicy&&(_.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?_.credentials="include":v.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function p(v){if(v.ep)return;v.ep=!0;const _=s(v);fetch(v.href,_)}})();function jc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rc(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function p(){return this instanceof p?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(p){var v=Object.getOwnPropertyDescriptor(e,p);Object.defineProperty(s,p,v.get?v:{enumerable:!0,get:function(){return e[p]}})}),s}var _l={exports:{}},Mr={},Cl={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var En=Symbol.for("react.element"),Ic=Symbol.for("react.portal"),Bc=Symbol.for("react.fragment"),Nc=Symbol.for("react.strict_mode"),zc=Symbol.for("react.profiler"),Wc=Symbol.for("react.provider"),Xc=Symbol.for("react.context"),Yc=Symbol.for("react.forward_ref"),Uc=Symbol.for("react.suspense"),Hc=Symbol.for("react.memo"),Vc=Symbol.for("react.lazy"),ua=Symbol.iterator;function Gc(e){return e===null||typeof e!="object"?null:(e=ua&&e[ua]||e["@@iterator"],typeof e=="function"?e:null)}var Sl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wl=Object.assign,xl={};function Bi(e,t,s){this.props=e,this.context=t,this.refs=xl,this.updater=s||Sl}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Tl(){}Tl.prototype=Bi.prototype;function go(e,t,s){this.props=e,this.context=t,this.refs=xl,this.updater=s||Sl}var po=go.prototype=new Tl;po.constructor=go;wl(po,Bi.prototype);po.isPureReactComponent=!0;var ca=Array.isArray,kl=Object.prototype.hasOwnProperty,mo={current:null},Ol={key:!0,ref:!0,__self:!0,__source:!0};function El(e,t,s){var p,v={},_=null,S=null;if(t!=null)for(p in t.ref!==void 0&&(S=t.ref),t.key!==void 0&&(_=""+t.key),t)kl.call(t,p)&&!Ol.hasOwnProperty(p)&&(v[p]=t[p]);var d=arguments.length-2;if(d===1)v.children=s;else if(1<d){for(var i=Array(d),l=0;l<d;l++)i[l]=arguments[l+2];v.children=i}if(e&&e.defaultProps)for(p in d=e.defaultProps,d)v[p]===void 0&&(v[p]=d[p]);return{$$typeof:En,type:e,key:_,ref:S,props:v,_owner:mo.current}}function $c(e,t){return{$$typeof:En,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vo(e){return typeof e=="object"&&e!==null&&e.$$typeof===En}function Kc(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var ha=/\/+/g;function Gr(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kc(""+e.key):t.toString(36)}function Kn(e,t,s,p,v){var _=typeof e;(_==="undefined"||_==="boolean")&&(e=null);var S=!1;if(e===null)S=!0;else switch(_){case"string":case"number":S=!0;break;case"object":switch(e.$$typeof){case En:case Ic:S=!0}}if(S)return S=e,v=v(S),e=p===""?"."+Gr(S,0):p,ca(v)?(s="",e!=null&&(s=e.replace(ha,"$&/")+"/"),Kn(v,t,s,"",function(l){return l})):v!=null&&(vo(v)&&(v=$c(v,s+(!v.key||S&&S.key===v.key?"":(""+v.key).replace(ha,"$&/")+"/")+e)),t.push(v)),1;if(S=0,p=p===""?".":p+":",ca(e))for(var d=0;d<e.length;d++){_=e[d];var i=p+Gr(_,d);S+=Kn(_,t,s,i,v)}else if(i=Gc(e),typeof i=="function")for(e=i.call(e),d=0;!(_=e.next()).done;)_=_.value,i=p+Gr(_,d++),S+=Kn(_,t,s,i,v);else if(_==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return S}function An(e,t,s){if(e==null)return e;var p=[],v=0;return Kn(e,p,"","",function(_){return t.call(s,_,v++)}),p}function Qc(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},Qn={transition:null},qc={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Qn,ReactCurrentOwner:mo};ce.Children={map:An,forEach:function(e,t,s){An(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return An(e,function(){t++}),t},toArray:function(e){return An(e,function(t){return t})||[]},only:function(e){if(!vo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Bi;ce.Fragment=Bc;ce.Profiler=zc;ce.PureComponent=go;ce.StrictMode=Nc;ce.Suspense=Uc;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qc;ce.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var p=wl({},e.props),v=e.key,_=e.ref,S=e._owner;if(t!=null){if(t.ref!==void 0&&(_=t.ref,S=mo.current),t.key!==void 0&&(v=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(i in t)kl.call(t,i)&&!Ol.hasOwnProperty(i)&&(p[i]=t[i]===void 0&&d!==void 0?d[i]:t[i])}var i=arguments.length-2;if(i===1)p.children=s;else if(1<i){d=Array(i);for(var l=0;l<i;l++)d[l]=arguments[l+2];p.children=d}return{$$typeof:En,type:e.type,key:v,ref:_,props:p,_owner:S}};ce.createContext=function(e){return e={$$typeof:Xc,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wc,_context:e},e.Consumer=e};ce.createElement=El;ce.createFactory=function(e){var t=El.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:Yc,render:e}};ce.isValidElement=vo;ce.lazy=function(e){return{$$typeof:Vc,_payload:{_status:-1,_result:e},_init:Qc}};ce.memo=function(e,t){return{$$typeof:Hc,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Qn.transition;Qn.transition={};try{e()}finally{Qn.transition=t}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(e,t){return We.current.useCallback(e,t)};ce.useContext=function(e){return We.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return We.current.useDeferredValue(e)};ce.useEffect=function(e,t){return We.current.useEffect(e,t)};ce.useId=function(){return We.current.useId()};ce.useImperativeHandle=function(e,t,s){return We.current.useImperativeHandle(e,t,s)};ce.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return We.current.useMemo(e,t)};ce.useReducer=function(e,t,s){return We.current.useReducer(e,t,s)};ce.useRef=function(e){return We.current.useRef(e)};ce.useState=function(e){return We.current.useState(e)};ce.useSyncExternalStore=function(e,t,s){return We.current.useSyncExternalStore(e,t,s)};ce.useTransition=function(){return We.current.useTransition()};ce.version="18.2.0";Cl.exports=ce;var lt=Cl.exports;const Jc=jc(lt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=lt,eh=Symbol.for("react.element"),th=Symbol.for("react.fragment"),ih=Object.prototype.hasOwnProperty,nh=Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rh={key:!0,ref:!0,__self:!0,__source:!0};function bl(e,t,s){var p,v={},_=null,S=null;s!==void 0&&(_=""+s),t.key!==void 0&&(_=""+t.key),t.ref!==void 0&&(S=t.ref);for(p in t)ih.call(t,p)&&!rh.hasOwnProperty(p)&&(v[p]=t[p]);if(e&&e.defaultProps)for(p in t=e.defaultProps,t)v[p]===void 0&&(v[p]=t[p]);return{$$typeof:eh,type:e,key:_,ref:S,props:v,_owner:nh.current}}Mr.Fragment=th;Mr.jsx=bl;Mr.jsxs=bl;_l.exports=Mr;var se=_l.exports,Cs={},Pl={exports:{}},Ze={},Dl={exports:{}},Ml={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,x){var E=G.length;G.push(x);e:for(;0<E;){var P=E-1>>>1,D=G[P];if(0<v(D,x))G[P]=x,G[E]=D,E=P;else break e}}function s(G){return G.length===0?null:G[0]}function p(G){if(G.length===0)return null;var x=G[0],E=G.pop();if(E!==x){G[0]=E;e:for(var P=0,D=G.length,W=D>>>1;P<W;){var b=2*(P+1)-1,k=G[b],M=b+1,F=G[M];if(0>v(k,E))M<D&&0>v(F,k)?(G[P]=F,G[M]=E,P=M):(G[P]=k,G[b]=E,P=b);else if(M<D&&0>v(F,E))G[P]=F,G[M]=E,P=M;else break e}}return x}function v(G,x){var E=G.sortIndex-x.sortIndex;return E!==0?E:G.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var S=Date,d=S.now();e.unstable_now=function(){return S.now()-d}}var i=[],l=[],c=1,r=null,o=3,a=!1,n=!1,h=!1,u=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(G){for(var x=s(l);x!==null;){if(x.callback===null)p(l);else if(x.startTime<=G)p(l),x.sortIndex=x.expirationTime,t(i,x);else break;x=s(l)}}function y(G){if(h=!1,m(G),!n)if(s(i)!==null)n=!0,ne(C);else{var x=s(l);x!==null&&ie(y,x.startTime-G)}}function C(G,x){n=!1,h&&(h=!1,f(O),O=-1),a=!0;var E=o;try{for(m(x),r=s(i);r!==null&&(!(r.expirationTime>x)||G&&!K());){var P=r.callback;if(typeof P=="function"){r.callback=null,o=r.priorityLevel;var D=P(r.expirationTime<=x);x=e.unstable_now(),typeof D=="function"?r.callback=D:r===s(i)&&p(i),m(x)}else p(i);r=s(i)}if(r!==null)var W=!0;else{var b=s(l);b!==null&&ie(y,b.startTime-x),W=!1}return W}finally{r=null,o=E,a=!1}}var w=!1,T=null,O=-1,L=5,I=-1;function K(){return!(e.unstable_now()-I<L)}function B(){if(T!==null){var G=e.unstable_now();I=G;var x=!0;try{x=T(!0,G)}finally{x?z():(w=!1,T=null)}}else w=!1}var z;if(typeof g=="function")z=function(){g(B)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,te=Q.port2;Q.port1.onmessage=B,z=function(){te.postMessage(null)}}else z=function(){u(B,0)};function ne(G){T=G,w||(w=!0,z())}function ie(G,x){O=u(function(){G(e.unstable_now())},x)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){n||a||(n=!0,ne(C))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return o},e.unstable_getFirstCallbackNode=function(){return s(i)},e.unstable_next=function(G){switch(o){case 1:case 2:case 3:var x=3;break;default:x=o}var E=o;o=x;try{return G()}finally{o=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,x){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var E=o;o=G;try{return x()}finally{o=E}},e.unstable_scheduleCallback=function(G,x,E){var P=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?P+E:P):E=P,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=E+D,G={id:c++,callback:x,priorityLevel:G,startTime:E,expirationTime:D,sortIndex:-1},E>P?(G.sortIndex=E,t(l,G),s(i)===null&&G===s(l)&&(h?(f(O),O=-1):h=!0,ie(y,E-P))):(G.sortIndex=D,t(i,G),n||a||(n=!0,ne(C))),G},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(G){var x=o;return function(){var E=o;o=x;try{return G.apply(this,arguments)}finally{o=E}}}})(Ml);Dl.exports=Ml;var sh=Dl.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=lt,Je=sh;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fl=new Set,cn={};function ci(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(cn[e]=t,e=0;e<t.length;e++)Fl.add(t[e])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ss=Object.prototype.hasOwnProperty,oh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fa={},da={};function ah(e){return Ss.call(da,e)?!0:Ss.call(fa,e)?!1:oh.test(e)?da[e]=!0:(fa[e]=!0,!1)}function lh(e,t,s,p){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return p?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uh(e,t,s,p){if(t===null||typeof t>"u"||lh(e,t,s,p))return!0;if(p)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,s,p,v,_,S){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=_,this.removeEmptyString=S}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var yo=/[\-:]([a-z])/g;function _o(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yo,_o);Fe[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yo,_o);Fe[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yo,_o);Fe[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Co(e,t,s,p){var v=Fe.hasOwnProperty(t)?Fe[t]:null;(v!==null?v.type!==0:p||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uh(t,s,v,p)&&(s=null),p||v===null?ah(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):v.mustUseProperty?e[v.propertyName]=s===null?v.type===3?!1:"":s:(t=v.attributeName,p=v.attributeNamespace,s===null?e.removeAttribute(t):(v=v.type,s=v===3||v===4&&s===!0?"":""+s,p?e.setAttributeNS(p,t,s):e.setAttribute(t,s))))}var Dt=Al.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fn=Symbol.for("react.element"),di=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),So=Symbol.for("react.strict_mode"),ws=Symbol.for("react.profiler"),Ll=Symbol.for("react.provider"),jl=Symbol.for("react.context"),wo=Symbol.for("react.forward_ref"),xs=Symbol.for("react.suspense"),Ts=Symbol.for("react.suspense_list"),xo=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Rl=Symbol.for("react.offscreen"),ga=Symbol.iterator;function Xi(e){return e===null||typeof e!="object"?null:(e=ga&&e[ga]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,$r;function Qi(e){if($r===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);$r=t&&t[1]||""}return`
`+$r+e}var Kr=!1;function Qr(e,t){if(!e||Kr)return"";Kr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var p=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){p=l}e.call(t.prototype)}else{try{throw Error()}catch(l){p=l}e()}}catch(l){if(l&&p&&typeof l.stack=="string"){for(var v=l.stack.split(`
`),_=p.stack.split(`
`),S=v.length-1,d=_.length-1;1<=S&&0<=d&&v[S]!==_[d];)d--;for(;1<=S&&0<=d;S--,d--)if(v[S]!==_[d]){if(S!==1||d!==1)do if(S--,d--,0>d||v[S]!==_[d]){var i=`
`+v[S].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=S&&0<=d);break}}}finally{Kr=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Qi(e):""}function ch(e){switch(e.tag){case 5:return Qi(e.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return e=Qr(e.type,!1),e;case 11:return e=Qr(e.type.render,!1),e;case 1:return e=Qr(e.type,!0),e;default:return""}}function ks(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gi:return"Fragment";case di:return"Portal";case ws:return"Profiler";case So:return"StrictMode";case xs:return"Suspense";case Ts:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jl:return(e.displayName||"Context")+".Consumer";case Ll:return(e._context.displayName||"Context")+".Provider";case wo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xo:return t=e.displayName||null,t!==null?t:ks(e.type)||"Memo";case At:t=e._payload,e=e._init;try{return ks(e(t))}catch{}}return null}function hh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ks(t);case 8:return t===So?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Il(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fh(e){var t=Il(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),p=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var v=s.get,_=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return v.call(this)},set:function(S){p=""+S,_.call(this,S)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ln(e){e._valueTracker||(e._valueTracker=fh(e))}function Bl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),p="";return e&&(p=Il(e)?e.checked?"true":"false":e.value),e=p,e!==s?(t.setValue(e),!0):!1}function ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Os(e,t){var s=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function pa(e,t){var s=t.defaultValue==null?"":t.defaultValue,p=t.checked!=null?t.checked:t.defaultChecked;s=Vt(t.value!=null?t.value:s),e._wrapperState={initialChecked:p,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nl(e,t){t=t.checked,t!=null&&Co(e,"checked",t,!1)}function Es(e,t){Nl(e,t);var s=Vt(t.value),p=t.type;if(s!=null)p==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(p==="submit"||p==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bs(e,t.type,s):t.hasOwnProperty("defaultValue")&&bs(e,t.type,Vt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ma(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var p=t.type;if(!(p!=="submit"&&p!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function bs(e,t,s){(t!=="number"||ar(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var qi=Array.isArray;function ki(e,t,s,p){if(e=e.options,t){t={};for(var v=0;v<s.length;v++)t["$"+s[v]]=!0;for(s=0;s<e.length;s++)v=t.hasOwnProperty("$"+e[s].value),e[s].selected!==v&&(e[s].selected=v),v&&p&&(e[s].defaultSelected=!0)}else{for(s=""+Vt(s),t=null,v=0;v<e.length;v++){if(e[v].value===s){e[v].selected=!0,p&&(e[v].defaultSelected=!0);return}t!==null||e[v].disabled||(t=e[v])}t!==null&&(t.selected=!0)}}function Ps(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function va(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(J(92));if(qi(s)){if(1<s.length)throw Error(J(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Vt(s)}}function zl(e,t){var s=Vt(t.value),p=Vt(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),p!=null&&(e.defaultValue=""+p)}function ya(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wl(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ds(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wl(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jn,Xl=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,p,v){MSApp.execUnsafeLocalFunction(function(){return e(t,s,p,v)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jn=jn||document.createElement("div"),jn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dh=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(e){dh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]})});function Yl(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function Ul(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var p=s.indexOf("--")===0,v=Yl(s,t[s],p);s==="float"&&(s="cssFloat"),p?e.setProperty(s,v):e[s]=v}}var gh=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ms(e,t){if(t){if(gh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function As(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fs=null;function To(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,Oi=null,Ei=null;function _a(e){if(e=Dn(e)){if(typeof Ls!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Rr(t),Ls(e.stateNode,e.type,t))}}function Hl(e){Oi?Ei?Ei.push(e):Ei=[e]:Oi=e}function Vl(){if(Oi){var e=Oi,t=Ei;if(Ei=Oi=null,_a(e),t)for(e=0;e<t.length;e++)_a(t[e])}}function Gl(e,t){return e(t)}function $l(){}var qr=!1;function Kl(e,t,s){if(qr)return e(t,s);qr=!0;try{return Gl(e,t,s)}finally{qr=!1,(Oi!==null||Ei!==null)&&($l(),Vl())}}function fn(e,t){var s=e.stateNode;if(s===null)return null;var p=Rr(s);if(p===null)return null;s=p[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(e=e.type,p=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!p;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(J(231,t,typeof s));return s}var js=!1;if(Ot)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){js=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{js=!1}function ph(e,t,s,p,v,_,S,d,i){var l=Array.prototype.slice.call(arguments,3);try{t.apply(s,l)}catch(c){this.onError(c)}}var tn=!1,lr=null,ur=!1,Rs=null,mh={onError:function(e){tn=!0,lr=e}};function vh(e,t,s,p,v,_,S,d,i){tn=!1,lr=null,ph.apply(mh,arguments)}function yh(e,t,s,p,v,_,S,d,i){if(vh.apply(this,arguments),tn){if(tn){var l=lr;tn=!1,lr=null}else throw Error(J(198));ur||(ur=!0,Rs=l)}}function hi(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Ql(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ca(e){if(hi(e)!==e)throw Error(J(188))}function _h(e){var t=e.alternate;if(!t){if(t=hi(e),t===null)throw Error(J(188));return t!==e?null:e}for(var s=e,p=t;;){var v=s.return;if(v===null)break;var _=v.alternate;if(_===null){if(p=v.return,p!==null){s=p;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===s)return Ca(v),e;if(_===p)return Ca(v),t;_=_.sibling}throw Error(J(188))}if(s.return!==p.return)s=v,p=_;else{for(var S=!1,d=v.child;d;){if(d===s){S=!0,s=v,p=_;break}if(d===p){S=!0,p=v,s=_;break}d=d.sibling}if(!S){for(d=_.child;d;){if(d===s){S=!0,s=_,p=v;break}if(d===p){S=!0,p=_,s=v;break}d=d.sibling}if(!S)throw Error(J(189))}}if(s.alternate!==p)throw Error(J(190))}if(s.tag!==3)throw Error(J(188));return s.stateNode.current===s?e:t}function ql(e){return e=_h(e),e!==null?Jl(e):null}function Jl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jl(e);if(t!==null)return t;e=e.sibling}return null}var Zl=Je.unstable_scheduleCallback,Sa=Je.unstable_cancelCallback,Ch=Je.unstable_shouldYield,Sh=Je.unstable_requestPaint,Te=Je.unstable_now,wh=Je.unstable_getCurrentPriorityLevel,ko=Je.unstable_ImmediatePriority,eu=Je.unstable_UserBlockingPriority,cr=Je.unstable_NormalPriority,xh=Je.unstable_LowPriority,tu=Je.unstable_IdlePriority,Ar=null,_t=null;function Th(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ar,e,void 0,(e.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Eh,kh=Math.log,Oh=Math.LN2;function Eh(e){return e>>>=0,e===0?32:31-(kh(e)/Oh|0)|0}var Rn=64,In=4194304;function Ji(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hr(e,t){var s=e.pendingLanes;if(s===0)return 0;var p=0,v=e.suspendedLanes,_=e.pingedLanes,S=s&268435455;if(S!==0){var d=S&~v;d!==0?p=Ji(d):(_&=S,_!==0&&(p=Ji(_)))}else S=s&~v,S!==0?p=Ji(S):_!==0&&(p=Ji(_));if(p===0)return 0;if(t!==0&&t!==p&&!(t&v)&&(v=p&-p,_=t&-t,v>=_||v===16&&(_&4194240)!==0))return t;if(p&4&&(p|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=p;0<t;)s=31-ft(t),v=1<<s,p|=e[s],t&=~v;return p}function bh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ph(e,t){for(var s=e.suspendedLanes,p=e.pingedLanes,v=e.expirationTimes,_=e.pendingLanes;0<_;){var S=31-ft(_),d=1<<S,i=v[S];i===-1?(!(d&s)||d&p)&&(v[S]=bh(d,t)):i<=t&&(e.expiredLanes|=d),_&=~d}}function Is(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function iu(){var e=Rn;return Rn<<=1,!(Rn&4194240)&&(Rn=64),e}function Jr(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function bn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ft(t),e[t]=s}function Dh(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var p=e.eventTimes;for(e=e.expirationTimes;0<s;){var v=31-ft(s),_=1<<v;t[v]=0,p[v]=-1,e[v]=-1,s&=~_}}function Oo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var p=31-ft(s),v=1<<p;v&t|e[p]&t&&(e[p]|=t),s&=~v}}var ge=0;function nu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ru,Eo,su,ou,au,Bs=!1,Bn=[],Bt=null,Nt=null,zt=null,dn=new Map,gn=new Map,Lt=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wa(e,t){switch(e){case"focusin":case"focusout":Bt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":dn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(t.pointerId)}}function Ui(e,t,s,p,v,_){return e===null||e.nativeEvent!==_?(e={blockedOn:t,domEventName:s,eventSystemFlags:p,nativeEvent:_,targetContainers:[v]},t!==null&&(t=Dn(t),t!==null&&Eo(t)),e):(e.eventSystemFlags|=p,t=e.targetContainers,v!==null&&t.indexOf(v)===-1&&t.push(v),e)}function Ah(e,t,s,p,v){switch(t){case"focusin":return Bt=Ui(Bt,e,t,s,p,v),!0;case"dragenter":return Nt=Ui(Nt,e,t,s,p,v),!0;case"mouseover":return zt=Ui(zt,e,t,s,p,v),!0;case"pointerover":var _=v.pointerId;return dn.set(_,Ui(dn.get(_)||null,e,t,s,p,v)),!0;case"gotpointercapture":return _=v.pointerId,gn.set(_,Ui(gn.get(_)||null,e,t,s,p,v)),!0}return!1}function lu(e){var t=ei(e.target);if(t!==null){var s=hi(t);if(s!==null){if(t=s.tag,t===13){if(t=Ql(s),t!==null){e.blockedOn=t,au(e.priority,function(){su(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ns(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var p=new s.constructor(s.type,s);Fs=p,s.target.dispatchEvent(p),Fs=null}else return t=Dn(s),t!==null&&Eo(t),e.blockedOn=s,!1;t.shift()}return!0}function xa(e,t,s){qn(e)&&s.delete(t)}function Fh(){Bs=!1,Bt!==null&&qn(Bt)&&(Bt=null),Nt!==null&&qn(Nt)&&(Nt=null),zt!==null&&qn(zt)&&(zt=null),dn.forEach(xa),gn.forEach(xa)}function Hi(e,t){e.blockedOn===t&&(e.blockedOn=null,Bs||(Bs=!0,Je.unstable_scheduleCallback(Je.unstable_NormalPriority,Fh)))}function pn(e){function t(v){return Hi(v,e)}if(0<Bn.length){Hi(Bn[0],e);for(var s=1;s<Bn.length;s++){var p=Bn[s];p.blockedOn===e&&(p.blockedOn=null)}}for(Bt!==null&&Hi(Bt,e),Nt!==null&&Hi(Nt,e),zt!==null&&Hi(zt,e),dn.forEach(t),gn.forEach(t),s=0;s<Lt.length;s++)p=Lt[s],p.blockedOn===e&&(p.blockedOn=null);for(;0<Lt.length&&(s=Lt[0],s.blockedOn===null);)lu(s),s.blockedOn===null&&Lt.shift()}var bi=Dt.ReactCurrentBatchConfig,fr=!0;function Lh(e,t,s,p){var v=ge,_=bi.transition;bi.transition=null;try{ge=1,bo(e,t,s,p)}finally{ge=v,bi.transition=_}}function jh(e,t,s,p){var v=ge,_=bi.transition;bi.transition=null;try{ge=4,bo(e,t,s,p)}finally{ge=v,bi.transition=_}}function bo(e,t,s,p){if(fr){var v=Ns(e,t,s,p);if(v===null)ls(e,t,p,dr,s),wa(e,p);else if(Ah(v,e,t,s,p))p.stopPropagation();else if(wa(e,p),t&4&&-1<Mh.indexOf(e)){for(;v!==null;){var _=Dn(v);if(_!==null&&ru(_),_=Ns(e,t,s,p),_===null&&ls(e,t,p,dr,s),_===v)break;v=_}v!==null&&p.stopPropagation()}else ls(e,t,p,null,s)}}var dr=null;function Ns(e,t,s,p){if(dr=null,e=To(p),e=ei(e),e!==null)if(t=hi(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Ql(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dr=e,null}function uu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wh()){case ko:return 1;case eu:return 4;case cr:case xh:return 16;case tu:return 536870912;default:return 16}default:return 16}}var Rt=null,Po=null,Jn=null;function cu(){if(Jn)return Jn;var e,t=Po,s=t.length,p,v="value"in Rt?Rt.value:Rt.textContent,_=v.length;for(e=0;e<s&&t[e]===v[e];e++);var S=s-e;for(p=1;p<=S&&t[s-p]===v[_-p];p++);return Jn=v.slice(e,1<p?1-p:void 0)}function Zn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nn(){return!0}function Ta(){return!1}function et(e){function t(s,p,v,_,S){this._reactName=s,this._targetInst=v,this.type=p,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(s=e[d],this[d]=s?s(_):_[d]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Nn:Ta,this.isPropagationStopped=Ta,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Nn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Nn)},persist:function(){},isPersistent:Nn}),t}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Do=et(Ni),Pn=we({},Ni,{view:0,detail:0}),Rh=et(Pn),Zr,es,Vi,Fr=we({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vi&&(Vi&&e.type==="mousemove"?(Zr=e.screenX-Vi.screenX,es=e.screenY-Vi.screenY):es=Zr=0,Vi=e),Zr)},movementY:function(e){return"movementY"in e?e.movementY:es}}),ka=et(Fr),Ih=we({},Fr,{dataTransfer:0}),Bh=et(Ih),Nh=we({},Pn,{relatedTarget:0}),ts=et(Nh),zh=we({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Wh=et(zh),Xh=we({},Ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yh=et(Xh),Uh=we({},Ni,{data:0}),Oa=et(Uh),Hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gh[e])?!!t[e]:!1}function Mo(){return $h}var Kh=we({},Pn,{key:function(e){if(e.key){var t=Hh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(e){return e.type==="keypress"?Zn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qh=et(Kh),qh=we({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ea=et(qh),Jh=we({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),Zh=et(Jh),ef=we({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),tf=et(ef),nf=we({},Fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rf=et(nf),sf=[9,13,27,32],Ao=Ot&&"CompositionEvent"in window,nn=null;Ot&&"documentMode"in document&&(nn=document.documentMode);var of=Ot&&"TextEvent"in window&&!nn,hu=Ot&&(!Ao||nn&&8<nn&&11>=nn),ba=String.fromCharCode(32),Pa=!1;function fu(e,t){switch(e){case"keyup":return sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function du(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function af(e,t){switch(e){case"compositionend":return du(t);case"keypress":return t.which!==32?null:(Pa=!0,ba);case"textInput":return e=t.data,e===ba&&Pa?null:e;default:return null}}function lf(e,t){if(pi)return e==="compositionend"||!Ao&&fu(e,t)?(e=cu(),Jn=Po=Rt=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hu&&t.locale!=="ko"?null:t.data;default:return null}}var uf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uf[e.type]:t==="textarea"}function gu(e,t,s,p){Hl(p),t=gr(t,"onChange"),0<t.length&&(s=new Do("onChange","change",null,s,p),e.push({event:s,listeners:t}))}var rn=null,mn=null;function cf(e){ku(e,0)}function Lr(e){var t=yi(e);if(Bl(t))return e}function hf(e,t){if(e==="change")return t}var pu=!1;if(Ot){var is;if(Ot){var ns="oninput"in document;if(!ns){var Ma=document.createElement("div");Ma.setAttribute("oninput","return;"),ns=typeof Ma.oninput=="function"}is=ns}else is=!1;pu=is&&(!document.documentMode||9<document.documentMode)}function Aa(){rn&&(rn.detachEvent("onpropertychange",mu),mn=rn=null)}function mu(e){if(e.propertyName==="value"&&Lr(mn)){var t=[];gu(t,mn,e,To(e)),Kl(cf,t)}}function ff(e,t,s){e==="focusin"?(Aa(),rn=t,mn=s,rn.attachEvent("onpropertychange",mu)):e==="focusout"&&Aa()}function df(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lr(mn)}function gf(e,t){if(e==="click")return Lr(t)}function pf(e,t){if(e==="input"||e==="change")return Lr(t)}function mf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:mf;function vn(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),p=Object.keys(t);if(s.length!==p.length)return!1;for(p=0;p<s.length;p++){var v=s[p];if(!Ss.call(t,v)||!gt(e[v],t[v]))return!1}return!0}function Fa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function La(e,t){var s=Fa(e);e=0;for(var p;s;){if(s.nodeType===3){if(p=e+s.textContent.length,e<=t&&p>=t)return{node:s,offset:t-e};e=p}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Fa(s)}}function vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yu(){for(var e=window,t=ar();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ar(e.document)}return t}function Fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vf(e){var t=yu(),s=e.focusedElem,p=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&vu(s.ownerDocument.documentElement,s)){if(p!==null&&Fo(s)){if(t=p.start,e=p.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var v=s.textContent.length,_=Math.min(p.start,v);p=p.end===void 0?_:Math.min(p.end,v),!e.extend&&_>p&&(v=p,p=_,_=v),v=La(s,_);var S=La(s,p);v&&S&&(e.rangeCount!==1||e.anchorNode!==v.node||e.anchorOffset!==v.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(t=t.createRange(),t.setStart(v.node,v.offset),e.removeAllRanges(),_>p?(e.addRange(t),e.extend(S.node,S.offset)):(t.setEnd(S.node,S.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yf=Ot&&"documentMode"in document&&11>=document.documentMode,mi=null,zs=null,sn=null,Ws=!1;function ja(e,t,s){var p=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ws||mi==null||mi!==ar(p)||(p=mi,"selectionStart"in p&&Fo(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),sn&&vn(sn,p)||(sn=p,p=gr(zs,"onSelect"),0<p.length&&(t=new Do("onSelect","select",null,t,s),e.push({event:t,listeners:p}),t.target=mi)))}function zn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var vi={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionend:zn("Transition","TransitionEnd")},rs={},_u={};Ot&&(_u=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function jr(e){if(rs[e])return rs[e];if(!vi[e])return e;var t=vi[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in _u)return rs[e]=t[s];return e}var Cu=jr("animationend"),Su=jr("animationiteration"),wu=jr("animationstart"),xu=jr("transitionend"),Tu=new Map,Ra="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $t(e,t){Tu.set(e,t),ci(t,[e])}for(var ss=0;ss<Ra.length;ss++){var os=Ra[ss],_f=os.toLowerCase(),Cf=os[0].toUpperCase()+os.slice(1);$t(_f,"on"+Cf)}$t(Cu,"onAnimationEnd");$t(Su,"onAnimationIteration");$t(wu,"onAnimationStart");$t("dblclick","onDoubleClick");$t("focusin","onFocus");$t("focusout","onBlur");$t(xu,"onTransitionEnd");Mi("onMouseEnter",["mouseout","mouseover"]);Mi("onMouseLeave",["mouseout","mouseover"]);Mi("onPointerEnter",["pointerout","pointerover"]);Mi("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Ia(e,t,s){var p=e.type||"unknown-event";e.currentTarget=s,yh(p,t,void 0,e),e.currentTarget=null}function ku(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var p=e[s],v=p.event;p=p.listeners;e:{var _=void 0;if(t)for(var S=p.length-1;0<=S;S--){var d=p[S],i=d.instance,l=d.currentTarget;if(d=d.listener,i!==_&&v.isPropagationStopped())break e;Ia(v,d,l),_=i}else for(S=0;S<p.length;S++){if(d=p[S],i=d.instance,l=d.currentTarget,d=d.listener,i!==_&&v.isPropagationStopped())break e;Ia(v,d,l),_=i}}}if(ur)throw e=Rs,ur=!1,Rs=null,e}function me(e,t){var s=t[Vs];s===void 0&&(s=t[Vs]=new Set);var p=e+"__bubble";s.has(p)||(Ou(t,e,2,!1),s.add(p))}function as(e,t,s){var p=0;t&&(p|=4),Ou(s,e,p,t)}var Wn="_reactListening"+Math.random().toString(36).slice(2);function yn(e){if(!e[Wn]){e[Wn]=!0,Fl.forEach(function(s){s!=="selectionchange"&&(Sf.has(s)||as(s,!1,e),as(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wn]||(t[Wn]=!0,as("selectionchange",!1,t))}}function Ou(e,t,s,p){switch(uu(t)){case 1:var v=Lh;break;case 4:v=jh;break;default:v=bo}s=v.bind(null,t,s,e),v=void 0,!js||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(v=!0),p?v!==void 0?e.addEventListener(t,s,{capture:!0,passive:v}):e.addEventListener(t,s,!0):v!==void 0?e.addEventListener(t,s,{passive:v}):e.addEventListener(t,s,!1)}function ls(e,t,s,p,v){var _=p;if(!(t&1)&&!(t&2)&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var d=p.stateNode.containerInfo;if(d===v||d.nodeType===8&&d.parentNode===v)break;if(S===4)for(S=p.return;S!==null;){var i=S.tag;if((i===3||i===4)&&(i=S.stateNode.containerInfo,i===v||i.nodeType===8&&i.parentNode===v))return;S=S.return}for(;d!==null;){if(S=ei(d),S===null)return;if(i=S.tag,i===5||i===6){p=_=S;continue e}d=d.parentNode}}p=p.return}Kl(function(){var l=_,c=To(s),r=[];e:{var o=Tu.get(e);if(o!==void 0){var a=Do,n=e;switch(e){case"keypress":if(Zn(s)===0)break e;case"keydown":case"keyup":a=Qh;break;case"focusin":n="focus",a=ts;break;case"focusout":n="blur",a=ts;break;case"beforeblur":case"afterblur":a=ts;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=Bh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=Zh;break;case Cu:case Su:case wu:a=Wh;break;case xu:a=tf;break;case"scroll":a=Rh;break;case"wheel":a=rf;break;case"copy":case"cut":case"paste":a=Yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=Ea}var h=(t&4)!==0,u=!h&&e==="scroll",f=h?o!==null?o+"Capture":null:o;h=[];for(var g=l,m;g!==null;){m=g;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,f!==null&&(y=fn(g,f),y!=null&&h.push(_n(g,y,m)))),u)break;g=g.return}0<h.length&&(o=new a(o,n,null,s,c),r.push({event:o,listeners:h}))}}if(!(t&7)){e:{if(o=e==="mouseover"||e==="pointerover",a=e==="mouseout"||e==="pointerout",o&&s!==Fs&&(n=s.relatedTarget||s.fromElement)&&(ei(n)||n[Et]))break e;if((a||o)&&(o=c.window===c?c:(o=c.ownerDocument)?o.defaultView||o.parentWindow:window,a?(n=s.relatedTarget||s.toElement,a=l,n=n?ei(n):null,n!==null&&(u=hi(n),n!==u||n.tag!==5&&n.tag!==6)&&(n=null)):(a=null,n=l),a!==n)){if(h=ka,y="onMouseLeave",f="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(h=Ea,y="onPointerLeave",f="onPointerEnter",g="pointer"),u=a==null?o:yi(a),m=n==null?o:yi(n),o=new h(y,g+"leave",a,s,c),o.target=u,o.relatedTarget=m,y=null,ei(c)===l&&(h=new h(f,g+"enter",n,s,c),h.target=m,h.relatedTarget=u,y=h),u=y,a&&n)t:{for(h=a,f=n,g=0,m=h;m;m=fi(m))g++;for(m=0,y=f;y;y=fi(y))m++;for(;0<g-m;)h=fi(h),g--;for(;0<m-g;)f=fi(f),m--;for(;g--;){if(h===f||f!==null&&h===f.alternate)break t;h=fi(h),f=fi(f)}h=null}else h=null;a!==null&&Ba(r,o,a,h,!1),n!==null&&u!==null&&Ba(r,u,n,h,!0)}}e:{if(o=l?yi(l):window,a=o.nodeName&&o.nodeName.toLowerCase(),a==="select"||a==="input"&&o.type==="file")var C=hf;else if(Da(o))if(pu)C=pf;else{C=df;var w=ff}else(a=o.nodeName)&&a.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(C=gf);if(C&&(C=C(e,l))){gu(r,C,s,c);break e}w&&w(e,o,l),e==="focusout"&&(w=o._wrapperState)&&w.controlled&&o.type==="number"&&bs(o,"number",o.value)}switch(w=l?yi(l):window,e){case"focusin":(Da(w)||w.contentEditable==="true")&&(mi=w,zs=l,sn=null);break;case"focusout":sn=zs=mi=null;break;case"mousedown":Ws=!0;break;case"contextmenu":case"mouseup":case"dragend":Ws=!1,ja(r,s,c);break;case"selectionchange":if(yf)break;case"keydown":case"keyup":ja(r,s,c)}var T;if(Ao)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else pi?fu(e,s)&&(O="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(O="onCompositionStart");O&&(hu&&s.locale!=="ko"&&(pi||O!=="onCompositionStart"?O==="onCompositionEnd"&&pi&&(T=cu()):(Rt=c,Po="value"in Rt?Rt.value:Rt.textContent,pi=!0)),w=gr(l,O),0<w.length&&(O=new Oa(O,e,null,s,c),r.push({event:O,listeners:w}),T?O.data=T:(T=du(s),T!==null&&(O.data=T)))),(T=of?af(e,s):lf(e,s))&&(l=gr(l,"onBeforeInput"),0<l.length&&(c=new Oa("onBeforeInput","beforeinput",null,s,c),r.push({event:c,listeners:l}),c.data=T))}ku(r,t)})}function _n(e,t,s){return{instance:e,listener:t,currentTarget:s}}function gr(e,t){for(var s=t+"Capture",p=[];e!==null;){var v=e,_=v.stateNode;v.tag===5&&_!==null&&(v=_,_=fn(e,s),_!=null&&p.unshift(_n(e,_,v)),_=fn(e,t),_!=null&&p.push(_n(e,_,v))),e=e.return}return p}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ba(e,t,s,p,v){for(var _=t._reactName,S=[];s!==null&&s!==p;){var d=s,i=d.alternate,l=d.stateNode;if(i!==null&&i===p)break;d.tag===5&&l!==null&&(d=l,v?(i=fn(s,_),i!=null&&S.unshift(_n(s,i,d))):v||(i=fn(s,_),i!=null&&S.push(_n(s,i,d)))),s=s.return}S.length!==0&&e.push({event:t,listeners:S})}var wf=/\r\n?/g,xf=/\u0000|\uFFFD/g;function Na(e){return(typeof e=="string"?e:""+e).replace(wf,`
`).replace(xf,"")}function Xn(e,t,s){if(t=Na(t),Na(e)!==t&&s)throw Error(J(425))}function pr(){}var Xs=null,Ys=null;function Us(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hs=typeof setTimeout=="function"?setTimeout:void 0,Tf=typeof clearTimeout=="function"?clearTimeout:void 0,za=typeof Promise=="function"?Promise:void 0,kf=typeof queueMicrotask=="function"?queueMicrotask:typeof za<"u"?function(e){return za.resolve(null).then(e).catch(Of)}:Hs;function Of(e){setTimeout(function(){throw e})}function us(e,t){var s=t,p=0;do{var v=s.nextSibling;if(e.removeChild(s),v&&v.nodeType===8)if(s=v.data,s==="/$"){if(p===0){e.removeChild(v),pn(t);return}p--}else s!=="$"&&s!=="$?"&&s!=="$!"||p++;s=v}while(s);pn(t)}function Wt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wa(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),yt="__reactFiber$"+zi,Cn="__reactProps$"+zi,Et="__reactContainer$"+zi,Vs="__reactEvents$"+zi,Ef="__reactListeners$"+zi,bf="__reactHandles$"+zi;function ei(e){var t=e[yt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Et]||s[yt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Wa(e);e!==null;){if(s=e[yt])return s;e=Wa(e)}return t}e=s,s=e.parentNode}return null}function Dn(e){return e=e[yt]||e[Et],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Rr(e){return e[Cn]||null}var Gs=[],_i=-1;function Kt(e){return{current:e}}function ve(e){0>_i||(e.current=Gs[_i],Gs[_i]=null,_i--)}function pe(e,t){_i++,Gs[_i]=e.current,e.current=t}var Gt={},Ie=Kt(Gt),He=Kt(!1),si=Gt;function Ai(e,t){var s=e.type.contextTypes;if(!s)return Gt;var p=e.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===t)return p.__reactInternalMemoizedMaskedChildContext;var v={},_;for(_ in s)v[_]=t[_];return p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=v),v}function Ve(e){return e=e.childContextTypes,e!=null}function mr(){ve(He),ve(Ie)}function Xa(e,t,s){if(Ie.current!==Gt)throw Error(J(168));pe(Ie,t),pe(He,s)}function Eu(e,t,s){var p=e.stateNode;if(t=t.childContextTypes,typeof p.getChildContext!="function")return s;p=p.getChildContext();for(var v in p)if(!(v in t))throw Error(J(108,hh(e)||"Unknown",v));return we({},s,p)}function vr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gt,si=Ie.current,pe(Ie,e),pe(He,He.current),!0}function Ya(e,t,s){var p=e.stateNode;if(!p)throw Error(J(169));s?(e=Eu(e,t,si),p.__reactInternalMemoizedMergedChildContext=e,ve(He),ve(Ie),pe(Ie,e)):ve(He),pe(He,s)}var wt=null,Ir=!1,cs=!1;function bu(e){wt===null?wt=[e]:wt.push(e)}function Pf(e){Ir=!0,bu(e)}function Qt(){if(!cs&&wt!==null){cs=!0;var e=0,t=ge;try{var s=wt;for(ge=1;e<s.length;e++){var p=s[e];do p=p(!0);while(p!==null)}wt=null,Ir=!1}catch(v){throw wt!==null&&(wt=wt.slice(e+1)),Zl(ko,Qt),v}finally{ge=t,cs=!1}}return null}var Ci=[],Si=0,yr=null,_r=0,tt=[],it=0,oi=null,xt=1,Tt="";function Jt(e,t){Ci[Si++]=_r,Ci[Si++]=yr,yr=e,_r=t}function Pu(e,t,s){tt[it++]=xt,tt[it++]=Tt,tt[it++]=oi,oi=e;var p=xt;e=Tt;var v=32-ft(p)-1;p&=~(1<<v),s+=1;var _=32-ft(t)+v;if(30<_){var S=v-v%5;_=(p&(1<<S)-1).toString(32),p>>=S,v-=S,xt=1<<32-ft(t)+v|s<<v|p,Tt=_+e}else xt=1<<_|s<<v|p,Tt=e}function Lo(e){e.return!==null&&(Jt(e,1),Pu(e,1,0))}function jo(e){for(;e===yr;)yr=Ci[--Si],Ci[Si]=null,_r=Ci[--Si],Ci[Si]=null;for(;e===oi;)oi=tt[--it],tt[it]=null,Tt=tt[--it],tt[it]=null,xt=tt[--it],tt[it]=null}var qe=null,Qe=null,_e=!1,ht=null;function Du(e,t){var s=nt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Ua(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Qe=Wt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=oi!==null?{id:xt,overflow:Tt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=nt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,qe=e,Qe=null,!0):!1;default:return!1}}function $s(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ks(e){if(_e){var t=Qe;if(t){var s=t;if(!Ua(e,t)){if($s(e))throw Error(J(418));t=Wt(s.nextSibling);var p=qe;t&&Ua(e,t)?Du(p,s):(e.flags=e.flags&-4097|2,_e=!1,qe=e)}}else{if($s(e))throw Error(J(418));e.flags=e.flags&-4097|2,_e=!1,qe=e}}}function Ha(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function Yn(e){if(e!==qe)return!1;if(!_e)return Ha(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Us(e.type,e.memoizedProps)),t&&(t=Qe)){if($s(e))throw Mu(),Error(J(418));for(;t;)Du(e,t),t=Wt(t.nextSibling)}if(Ha(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Qe=Wt(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=qe?Wt(e.stateNode.nextSibling):null;return!0}function Mu(){for(var e=Qe;e;)e=Wt(e.nextSibling)}function Fi(){Qe=qe=null,_e=!1}function Ro(e){ht===null?ht=[e]:ht.push(e)}var Df=Dt.ReactCurrentBatchConfig;function ut(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var Cr=Kt(null),Sr=null,wi=null,Io=null;function Bo(){Io=wi=Sr=null}function No(e){var t=Cr.current;ve(Cr),e._currentValue=t}function Qs(e,t,s){for(;e!==null;){var p=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,p!==null&&(p.childLanes|=t)):p!==null&&(p.childLanes&t)!==t&&(p.childLanes|=t),e===s)break;e=e.return}}function Pi(e,t){Sr=e,Io=wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ue=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(Io!==e)if(e={context:e,memoizedValue:t,next:null},wi===null){if(Sr===null)throw Error(J(308));wi=e,Sr.dependencies={lanes:0,firstContext:e}}else wi=wi.next=e;return t}var ti=null;function zo(e){ti===null?ti=[e]:ti.push(e)}function Au(e,t,s,p){var v=t.interleaved;return v===null?(s.next=s,zo(t)):(s.next=v.next,v.next=s),t.interleaved=s,bt(e,p)}function bt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Ft=!1;function Wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xt(e,t,s){var p=e.updateQueue;if(p===null)return null;if(p=p.shared,fe&2){var v=p.pending;return v===null?t.next=t:(t.next=v.next,v.next=t),p.pending=t,bt(e,s)}return v=p.interleaved,v===null?(t.next=t,zo(p)):(t.next=v.next,v.next=t),p.interleaved=t,bt(e,s)}function er(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var p=t.lanes;p&=e.pendingLanes,s|=p,t.lanes=s,Oo(e,s)}}function Va(e,t){var s=e.updateQueue,p=e.alternate;if(p!==null&&(p=p.updateQueue,s===p)){var v=null,_=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};_===null?v=_=S:_=_.next=S,s=s.next}while(s!==null);_===null?v=_=t:_=_.next=t}else v=_=t;s={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:p.shared,effects:p.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function wr(e,t,s,p){var v=e.updateQueue;Ft=!1;var _=v.firstBaseUpdate,S=v.lastBaseUpdate,d=v.shared.pending;if(d!==null){v.shared.pending=null;var i=d,l=i.next;i.next=null,S===null?_=l:S.next=l,S=i;var c=e.alternate;c!==null&&(c=c.updateQueue,d=c.lastBaseUpdate,d!==S&&(d===null?c.firstBaseUpdate=l:d.next=l,c.lastBaseUpdate=i))}if(_!==null){var r=v.baseState;S=0,c=l=i=null,d=_;do{var o=d.lane,a=d.eventTime;if((p&o)===o){c!==null&&(c=c.next={eventTime:a,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var n=e,h=d;switch(o=t,a=s,h.tag){case 1:if(n=h.payload,typeof n=="function"){r=n.call(a,r,o);break e}r=n;break e;case 3:n.flags=n.flags&-65537|128;case 0:if(n=h.payload,o=typeof n=="function"?n.call(a,r,o):n,o==null)break e;r=we({},r,o);break e;case 2:Ft=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,o=v.effects,o===null?v.effects=[d]:o.push(d))}else a={eventTime:a,lane:o,tag:d.tag,payload:d.payload,callback:d.callback,next:null},c===null?(l=c=a,i=r):c=c.next=a,S|=o;if(d=d.next,d===null){if(d=v.shared.pending,d===null)break;o=d,d=o.next,o.next=null,v.lastBaseUpdate=o,v.shared.pending=null}}while(1);if(c===null&&(i=r),v.baseState=i,v.firstBaseUpdate=l,v.lastBaseUpdate=c,t=v.shared.interleaved,t!==null){v=t;do S|=v.lane,v=v.next;while(v!==t)}else _===null&&(v.shared.lanes=0);li|=S,e.lanes=S,e.memoizedState=r}}function Ga(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var p=e[t],v=p.callback;if(v!==null){if(p.callback=null,p=s,typeof v!="function")throw Error(J(191,v));v.call(p)}}}var Lu=new Al.Component().refs;function qs(e,t,s,p){t=e.memoizedState,s=s(p,t),s=s==null?t:we({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Br={isMounted:function(e){return(e=e._reactInternals)?hi(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var p=ze(),v=Ut(e),_=kt(p,v);_.payload=t,s!=null&&(_.callback=s),t=Xt(e,_,v),t!==null&&(dt(t,e,v,p),er(t,e,v))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var p=ze(),v=Ut(e),_=kt(p,v);_.tag=1,_.payload=t,s!=null&&(_.callback=s),t=Xt(e,_,v),t!==null&&(dt(t,e,v,p),er(t,e,v))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ze(),p=Ut(e),v=kt(s,p);v.tag=2,t!=null&&(v.callback=t),t=Xt(e,v,p),t!==null&&(dt(t,e,p,s),er(t,e,p))}};function $a(e,t,s,p,v,_,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(p,_,S):t.prototype&&t.prototype.isPureReactComponent?!vn(s,p)||!vn(v,_):!0}function ju(e,t,s){var p=!1,v=Gt,_=t.contextType;return typeof _=="object"&&_!==null?_=st(_):(v=Ve(t)?si:Ie.current,p=t.contextTypes,_=(p=p!=null)?Ai(e,v):Gt),t=new t(s,_),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Br,e.stateNode=t,t._reactInternals=e,p&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=v,e.__reactInternalMemoizedMaskedChildContext=_),t}function Ka(e,t,s,p){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,p),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,p),t.state!==e&&Br.enqueueReplaceState(t,t.state,null)}function Js(e,t,s,p){var v=e.stateNode;v.props=s,v.state=e.memoizedState,v.refs=Lu,Wo(e);var _=t.contextType;typeof _=="object"&&_!==null?v.context=st(_):(_=Ve(t)?si:Ie.current,v.context=Ai(e,_)),v.state=e.memoizedState,_=t.getDerivedStateFromProps,typeof _=="function"&&(qs(e,t,_,s),v.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(t=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),t!==v.state&&Br.enqueueReplaceState(v,v.state,null),wr(e,s,v,p),v.state=e.memoizedState),typeof v.componentDidMount=="function"&&(e.flags|=4194308)}function Gi(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(J(309));var p=s.stateNode}if(!p)throw Error(J(147,e));var v=p,_=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===_?t.ref:(t=function(S){var d=v.refs;d===Lu&&(d=v.refs={}),S===null?delete d[_]:d[_]=S},t._stringRef=_,t)}if(typeof e!="string")throw Error(J(284));if(!s._owner)throw Error(J(290,e))}return e}function Un(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){var t=e._init;return t(e._payload)}function Ru(e){function t(f,g){if(e){var m=f.deletions;m===null?(f.deletions=[g],f.flags|=16):m.push(g)}}function s(f,g){if(!e)return null;for(;g!==null;)t(f,g),g=g.sibling;return null}function p(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function v(f,g){return f=Ht(f,g),f.index=0,f.sibling=null,f}function _(f,g,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<g?(f.flags|=2,g):m):(f.flags|=2,g)):(f.flags|=1048576,g)}function S(f){return e&&f.alternate===null&&(f.flags|=2),f}function d(f,g,m,y){return g===null||g.tag!==6?(g=vs(m,f.mode,y),g.return=f,g):(g=v(g,m),g.return=f,g)}function i(f,g,m,y){var C=m.type;return C===gi?c(f,g,m.props.children,y,m.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===At&&Qa(C)===g.type)?(y=v(g,m.props),y.ref=Gi(f,g,m),y.return=f,y):(y=or(m.type,m.key,m.props,null,f.mode,y),y.ref=Gi(f,g,m),y.return=f,y)}function l(f,g,m,y){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=ys(m,f.mode,y),g.return=f,g):(g=v(g,m.children||[]),g.return=f,g)}function c(f,g,m,y,C){return g===null||g.tag!==7?(g=ri(m,f.mode,y,C),g.return=f,g):(g=v(g,m),g.return=f,g)}function r(f,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=vs(""+g,f.mode,m),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fn:return m=or(g.type,g.key,g.props,null,f.mode,m),m.ref=Gi(f,null,g),m.return=f,m;case di:return g=ys(g,f.mode,m),g.return=f,g;case At:var y=g._init;return r(f,y(g._payload),m)}if(qi(g)||Xi(g))return g=ri(g,f.mode,m,null),g.return=f,g;Un(f,g)}return null}function o(f,g,m,y){var C=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:d(f,g,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Fn:return m.key===C?i(f,g,m,y):null;case di:return m.key===C?l(f,g,m,y):null;case At:return C=m._init,o(f,g,C(m._payload),y)}if(qi(m)||Xi(m))return C!==null?null:c(f,g,m,y,null);Un(f,m)}return null}function a(f,g,m,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return f=f.get(m)||null,d(g,f,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fn:return f=f.get(y.key===null?m:y.key)||null,i(g,f,y,C);case di:return f=f.get(y.key===null?m:y.key)||null,l(g,f,y,C);case At:var w=y._init;return a(f,g,m,w(y._payload),C)}if(qi(y)||Xi(y))return f=f.get(m)||null,c(g,f,y,C,null);Un(g,y)}return null}function n(f,g,m,y){for(var C=null,w=null,T=g,O=g=0,L=null;T!==null&&O<m.length;O++){T.index>O?(L=T,T=null):L=T.sibling;var I=o(f,T,m[O],y);if(I===null){T===null&&(T=L);break}e&&T&&I.alternate===null&&t(f,T),g=_(I,g,O),w===null?C=I:w.sibling=I,w=I,T=L}if(O===m.length)return s(f,T),_e&&Jt(f,O),C;if(T===null){for(;O<m.length;O++)T=r(f,m[O],y),T!==null&&(g=_(T,g,O),w===null?C=T:w.sibling=T,w=T);return _e&&Jt(f,O),C}for(T=p(f,T);O<m.length;O++)L=a(T,f,O,m[O],y),L!==null&&(e&&L.alternate!==null&&T.delete(L.key===null?O:L.key),g=_(L,g,O),w===null?C=L:w.sibling=L,w=L);return e&&T.forEach(function(K){return t(f,K)}),_e&&Jt(f,O),C}function h(f,g,m,y){var C=Xi(m);if(typeof C!="function")throw Error(J(150));if(m=C.call(m),m==null)throw Error(J(151));for(var w=C=null,T=g,O=g=0,L=null,I=m.next();T!==null&&!I.done;O++,I=m.next()){T.index>O?(L=T,T=null):L=T.sibling;var K=o(f,T,I.value,y);if(K===null){T===null&&(T=L);break}e&&T&&K.alternate===null&&t(f,T),g=_(K,g,O),w===null?C=K:w.sibling=K,w=K,T=L}if(I.done)return s(f,T),_e&&Jt(f,O),C;if(T===null){for(;!I.done;O++,I=m.next())I=r(f,I.value,y),I!==null&&(g=_(I,g,O),w===null?C=I:w.sibling=I,w=I);return _e&&Jt(f,O),C}for(T=p(f,T);!I.done;O++,I=m.next())I=a(T,f,O,I.value,y),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?O:I.key),g=_(I,g,O),w===null?C=I:w.sibling=I,w=I);return e&&T.forEach(function(B){return t(f,B)}),_e&&Jt(f,O),C}function u(f,g,m,y){if(typeof m=="object"&&m!==null&&m.type===gi&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Fn:e:{for(var C=m.key,w=g;w!==null;){if(w.key===C){if(C=m.type,C===gi){if(w.tag===7){s(f,w.sibling),g=v(w,m.props.children),g.return=f,f=g;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===At&&Qa(C)===w.type){s(f,w.sibling),g=v(w,m.props),g.ref=Gi(f,w,m),g.return=f,f=g;break e}s(f,w);break}else t(f,w);w=w.sibling}m.type===gi?(g=ri(m.props.children,f.mode,y,m.key),g.return=f,f=g):(y=or(m.type,m.key,m.props,null,f.mode,y),y.ref=Gi(f,g,m),y.return=f,f=y)}return S(f);case di:e:{for(w=m.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){s(f,g.sibling),g=v(g,m.children||[]),g.return=f,f=g;break e}else{s(f,g);break}else t(f,g);g=g.sibling}g=ys(m,f.mode,y),g.return=f,f=g}return S(f);case At:return w=m._init,u(f,g,w(m._payload),y)}if(qi(m))return n(f,g,m,y);if(Xi(m))return h(f,g,m,y);Un(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(s(f,g.sibling),g=v(g,m),g.return=f,f=g):(s(f,g),g=vs(m,f.mode,y),g.return=f,f=g),S(f)):s(f,g)}return u}var Li=Ru(!0),Iu=Ru(!1),Mn={},Ct=Kt(Mn),Sn=Kt(Mn),wn=Kt(Mn);function ii(e){if(e===Mn)throw Error(J(174));return e}function Xo(e,t){switch(pe(wn,t),pe(Sn,e),pe(Ct,Mn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ds(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ds(t,e)}ve(Ct),pe(Ct,t)}function ji(){ve(Ct),ve(Sn),ve(wn)}function Bu(e){ii(wn.current);var t=ii(Ct.current),s=Ds(t,e.type);t!==s&&(pe(Sn,e),pe(Ct,s))}function Yo(e){Sn.current===e&&(ve(Ct),ve(Sn))}var Ce=Kt(0);function xr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function Uo(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var tr=Dt.ReactCurrentDispatcher,fs=Dt.ReactCurrentBatchConfig,ai=0,Se=null,Ee=null,Pe=null,Tr=!1,on=!1,xn=0,Mf=0;function Le(){throw Error(J(321))}function Ho(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!gt(e[s],t[s]))return!1;return!0}function Vo(e,t,s,p,v,_){if(ai=_,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tr.current=e===null||e.memoizedState===null?jf:Rf,e=s(p,v),on){_=0;do{if(on=!1,xn=0,25<=_)throw Error(J(301));_+=1,Pe=Ee=null,t.updateQueue=null,tr.current=If,e=s(p,v)}while(on)}if(tr.current=kr,t=Ee!==null&&Ee.next!==null,ai=0,Pe=Ee=Se=null,Tr=!1,t)throw Error(J(300));return e}function Go(){var e=xn!==0;return xn=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Se.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function ot(){if(Ee===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Pe===null?Se.memoizedState:Pe.next;if(t!==null)Pe=t,Ee=e;else{if(e===null)throw Error(J(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Pe===null?Se.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function Tn(e,t){return typeof t=="function"?t(e):t}function ds(e){var t=ot(),s=t.queue;if(s===null)throw Error(J(311));s.lastRenderedReducer=e;var p=Ee,v=p.baseQueue,_=s.pending;if(_!==null){if(v!==null){var S=v.next;v.next=_.next,_.next=S}p.baseQueue=v=_,s.pending=null}if(v!==null){_=v.next,p=p.baseState;var d=S=null,i=null,l=_;do{var c=l.lane;if((ai&c)===c)i!==null&&(i=i.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),p=l.hasEagerState?l.eagerState:e(p,l.action);else{var r={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};i===null?(d=i=r,S=p):i=i.next=r,Se.lanes|=c,li|=c}l=l.next}while(l!==null&&l!==_);i===null?S=p:i.next=d,gt(p,t.memoizedState)||(Ue=!0),t.memoizedState=p,t.baseState=S,t.baseQueue=i,s.lastRenderedState=p}if(e=s.interleaved,e!==null){v=e;do _=v.lane,Se.lanes|=_,li|=_,v=v.next;while(v!==e)}else v===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function gs(e){var t=ot(),s=t.queue;if(s===null)throw Error(J(311));s.lastRenderedReducer=e;var p=s.dispatch,v=s.pending,_=t.memoizedState;if(v!==null){s.pending=null;var S=v=v.next;do _=e(_,S.action),S=S.next;while(S!==v);gt(_,t.memoizedState)||(Ue=!0),t.memoizedState=_,t.baseQueue===null&&(t.baseState=_),s.lastRenderedState=_}return[_,p]}function Nu(){}function zu(e,t){var s=Se,p=ot(),v=t(),_=!gt(p.memoizedState,v);if(_&&(p.memoizedState=v,Ue=!0),p=p.queue,$o(Yu.bind(null,s,p,e),[e]),p.getSnapshot!==t||_||Pe!==null&&Pe.memoizedState.tag&1){if(s.flags|=2048,kn(9,Xu.bind(null,s,p,v,t),void 0,null),De===null)throw Error(J(349));ai&30||Wu(s,t,v)}return v}function Wu(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Xu(e,t,s,p){t.value=s,t.getSnapshot=p,Uu(t)&&Hu(e)}function Yu(e,t,s){return s(function(){Uu(t)&&Hu(e)})}function Uu(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!gt(e,s)}catch{return!0}}function Hu(e){var t=bt(e,1);t!==null&&dt(t,e,1,-1)}function qa(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:e},t.queue=e,e=e.dispatch=Lf.bind(null,Se,e),[t.memoizedState,e]}function kn(e,t,s,p){return e={tag:e,create:t,destroy:s,deps:p,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(p=s.next,s.next=e,e.next=p,t.lastEffect=e)),e}function Vu(){return ot().memoizedState}function ir(e,t,s,p){var v=vt();Se.flags|=e,v.memoizedState=kn(1|t,s,void 0,p===void 0?null:p)}function Nr(e,t,s,p){var v=ot();p=p===void 0?null:p;var _=void 0;if(Ee!==null){var S=Ee.memoizedState;if(_=S.destroy,p!==null&&Ho(p,S.deps)){v.memoizedState=kn(t,s,_,p);return}}Se.flags|=e,v.memoizedState=kn(1|t,s,_,p)}function Ja(e,t){return ir(8390656,8,e,t)}function $o(e,t){return Nr(2048,8,e,t)}function Gu(e,t){return Nr(4,2,e,t)}function $u(e,t){return Nr(4,4,e,t)}function Ku(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qu(e,t,s){return s=s!=null?s.concat([e]):null,Nr(4,4,Ku.bind(null,t,e),s)}function Ko(){}function qu(e,t){var s=ot();t=t===void 0?null:t;var p=s.memoizedState;return p!==null&&t!==null&&Ho(t,p[1])?p[0]:(s.memoizedState=[e,t],e)}function Ju(e,t){var s=ot();t=t===void 0?null:t;var p=s.memoizedState;return p!==null&&t!==null&&Ho(t,p[1])?p[0]:(e=e(),s.memoizedState=[e,t],e)}function Zu(e,t,s){return ai&21?(gt(s,t)||(s=iu(),Se.lanes|=s,li|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=s)}function Af(e,t){var s=ge;ge=s!==0&&4>s?s:4,e(!0);var p=fs.transition;fs.transition={};try{e(!1),t()}finally{ge=s,fs.transition=p}}function ec(){return ot().memoizedState}function Ff(e,t,s){var p=Ut(e);if(s={lane:p,action:s,hasEagerState:!1,eagerState:null,next:null},tc(e))ic(t,s);else if(s=Au(e,t,s,p),s!==null){var v=ze();dt(s,e,p,v),nc(s,t,p)}}function Lf(e,t,s){var p=Ut(e),v={lane:p,action:s,hasEagerState:!1,eagerState:null,next:null};if(tc(e))ic(t,v);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var S=t.lastRenderedState,d=_(S,s);if(v.hasEagerState=!0,v.eagerState=d,gt(d,S)){var i=t.interleaved;i===null?(v.next=v,zo(t)):(v.next=i.next,i.next=v),t.interleaved=v;return}}catch{}finally{}s=Au(e,t,v,p),s!==null&&(v=ze(),dt(s,e,p,v),nc(s,t,p))}}function tc(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function ic(e,t){on=Tr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function nc(e,t,s){if(s&4194240){var p=t.lanes;p&=e.pendingLanes,s|=p,t.lanes=s,Oo(e,s)}}var kr={readContext:st,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},jf={readContext:st,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Ja,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ir(4194308,4,Ku.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ir(4194308,4,e,t)},useInsertionEffect:function(e,t){return ir(4,2,e,t)},useMemo:function(e,t){var s=vt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var p=vt();return t=s!==void 0?s(t):t,p.memoizedState=p.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},p.queue=e,e=e.dispatch=Ff.bind(null,Se,e),[p.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:qa,useDebugValue:Ko,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=qa(!1),t=e[0];return e=Af.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var p=Se,v=vt();if(_e){if(s===void 0)throw Error(J(407));s=s()}else{if(s=t(),De===null)throw Error(J(349));ai&30||Wu(p,t,s)}v.memoizedState=s;var _={value:s,getSnapshot:t};return v.queue=_,Ja(Yu.bind(null,p,_,e),[e]),p.flags|=2048,kn(9,Xu.bind(null,p,_,s,t),void 0,null),s},useId:function(){var e=vt(),t=De.identifierPrefix;if(_e){var s=Tt,p=xt;s=(p&~(1<<32-ft(p)-1)).toString(32)+s,t=":"+t+"R"+s,s=xn++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Mf++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rf={readContext:st,useCallback:qu,useContext:st,useEffect:$o,useImperativeHandle:Qu,useInsertionEffect:Gu,useLayoutEffect:$u,useMemo:Ju,useReducer:ds,useRef:Vu,useState:function(){return ds(Tn)},useDebugValue:Ko,useDeferredValue:function(e){var t=ot();return Zu(t,Ee.memoizedState,e)},useTransition:function(){var e=ds(Tn)[0],t=ot().memoizedState;return[e,t]},useMutableSource:Nu,useSyncExternalStore:zu,useId:ec,unstable_isNewReconciler:!1},If={readContext:st,useCallback:qu,useContext:st,useEffect:$o,useImperativeHandle:Qu,useInsertionEffect:Gu,useLayoutEffect:$u,useMemo:Ju,useReducer:gs,useRef:Vu,useState:function(){return gs(Tn)},useDebugValue:Ko,useDeferredValue:function(e){var t=ot();return Ee===null?t.memoizedState=e:Zu(t,Ee.memoizedState,e)},useTransition:function(){var e=gs(Tn)[0],t=ot().memoizedState;return[e,t]},useMutableSource:Nu,useSyncExternalStore:zu,useId:ec,unstable_isNewReconciler:!1};function Ri(e,t){try{var s="",p=t;do s+=ch(p),p=p.return;while(p);var v=s}catch(_){v=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:t,stack:v,digest:null}}function ps(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Zs(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Bf=typeof WeakMap=="function"?WeakMap:Map;function rc(e,t,s){s=kt(-1,s),s.tag=3,s.payload={element:null};var p=t.value;return s.callback=function(){Er||(Er=!0,uo=p),Zs(e,t)},s}function sc(e,t,s){s=kt(-1,s),s.tag=3;var p=e.type.getDerivedStateFromError;if(typeof p=="function"){var v=t.value;s.payload=function(){return p(v)},s.callback=function(){Zs(e,t)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){Zs(e,t),typeof p!="function"&&(Yt===null?Yt=new Set([this]):Yt.add(this));var S=t.stack;this.componentDidCatch(t.value,{componentStack:S!==null?S:""})}),s}function Za(e,t,s){var p=e.pingCache;if(p===null){p=e.pingCache=new Bf;var v=new Set;p.set(t,v)}else v=p.get(t),v===void 0&&(v=new Set,p.set(t,v));v.has(s)||(v.add(s),e=Jf.bind(null,e,t,s),t.then(e,e))}function el(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tl(e,t,s,p,v){return e.mode&1?(e.flags|=65536,e.lanes=v,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=kt(-1,1),t.tag=2,Xt(s,t,1))),s.lanes|=1),e)}var Nf=Dt.ReactCurrentOwner,Ue=!1;function Ne(e,t,s,p){t.child=e===null?Iu(t,null,s,p):Li(t,e.child,s,p)}function il(e,t,s,p,v){s=s.render;var _=t.ref;return Pi(t,v),p=Vo(e,t,s,p,_,v),s=Go(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,Pt(e,t,v)):(_e&&s&&Lo(t),t.flags|=1,Ne(e,t,p,v),t.child)}function nl(e,t,s,p,v){if(e===null){var _=s.type;return typeof _=="function"&&!na(_)&&_.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=_,oc(e,t,_,p,v)):(e=or(s.type,null,p,t,t.mode,v),e.ref=t.ref,e.return=t,t.child=e)}if(_=e.child,!(e.lanes&v)){var S=_.memoizedProps;if(s=s.compare,s=s!==null?s:vn,s(S,p)&&e.ref===t.ref)return Pt(e,t,v)}return t.flags|=1,e=Ht(_,p),e.ref=t.ref,e.return=t,t.child=e}function oc(e,t,s,p,v){if(e!==null){var _=e.memoizedProps;if(vn(_,p)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=p=_,(e.lanes&v)!==0)e.flags&131072&&(Ue=!0);else return t.lanes=e.lanes,Pt(e,t,v)}return eo(e,t,s,p,v)}function ac(e,t,s){var p=t.pendingProps,v=p.children,_=e!==null?e.memoizedState:null;if(p.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Ti,Ke),Ke|=s;else{if(!(s&1073741824))return e=_!==null?_.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(Ti,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:s,pe(Ti,Ke),Ke|=p}else _!==null?(p=_.baseLanes|s,t.memoizedState=null):p=s,pe(Ti,Ke),Ke|=p;return Ne(e,t,v,s),t.child}function lc(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function eo(e,t,s,p,v){var _=Ve(s)?si:Ie.current;return _=Ai(t,_),Pi(t,v),s=Vo(e,t,s,p,_,v),p=Go(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~v,Pt(e,t,v)):(_e&&p&&Lo(t),t.flags|=1,Ne(e,t,s,v),t.child)}function rl(e,t,s,p,v){if(Ve(s)){var _=!0;vr(t)}else _=!1;if(Pi(t,v),t.stateNode===null)nr(e,t),ju(t,s,p),Js(t,s,p,v),p=!0;else if(e===null){var S=t.stateNode,d=t.memoizedProps;S.props=d;var i=S.context,l=s.contextType;typeof l=="object"&&l!==null?l=st(l):(l=Ve(s)?si:Ie.current,l=Ai(t,l));var c=s.getDerivedStateFromProps,r=typeof c=="function"||typeof S.getSnapshotBeforeUpdate=="function";r||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(d!==p||i!==l)&&Ka(t,S,p,l),Ft=!1;var o=t.memoizedState;S.state=o,wr(t,p,S,v),i=t.memoizedState,d!==p||o!==i||He.current||Ft?(typeof c=="function"&&(qs(t,s,c,p),i=t.memoizedState),(d=Ft||$a(t,s,d,p,o,i,l))?(r||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(t.flags|=4194308)):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=p,t.memoizedState=i),S.props=p,S.state=i,S.context=l,p=d):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),p=!1)}else{S=t.stateNode,Fu(e,t),d=t.memoizedProps,l=t.type===t.elementType?d:ut(t.type,d),S.props=l,r=t.pendingProps,o=S.context,i=s.contextType,typeof i=="object"&&i!==null?i=st(i):(i=Ve(s)?si:Ie.current,i=Ai(t,i));var a=s.getDerivedStateFromProps;(c=typeof a=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(d!==r||o!==i)&&Ka(t,S,p,i),Ft=!1,o=t.memoizedState,S.state=o,wr(t,p,S,v);var n=t.memoizedState;d!==r||o!==n||He.current||Ft?(typeof a=="function"&&(qs(t,s,a,p),n=t.memoizedState),(l=Ft||$a(t,s,l,p,o,n,i)||!1)?(c||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,n,i),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,n,i)),typeof S.componentDidUpdate=="function"&&(t.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof S.componentDidUpdate!="function"||d===e.memoizedProps&&o===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&o===e.memoizedState||(t.flags|=1024),t.memoizedProps=p,t.memoizedState=n),S.props=p,S.state=n,S.context=i,p=l):(typeof S.componentDidUpdate!="function"||d===e.memoizedProps&&o===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&o===e.memoizedState||(t.flags|=1024),p=!1)}return to(e,t,s,p,_,v)}function to(e,t,s,p,v,_){lc(e,t);var S=(t.flags&128)!==0;if(!p&&!S)return v&&Ya(t,s,!1),Pt(e,t,_);p=t.stateNode,Nf.current=t;var d=S&&typeof s.getDerivedStateFromError!="function"?null:p.render();return t.flags|=1,e!==null&&S?(t.child=Li(t,e.child,null,_),t.child=Li(t,null,d,_)):Ne(e,t,d,_),t.memoizedState=p.state,v&&Ya(t,s,!0),t.child}function uc(e){var t=e.stateNode;t.pendingContext?Xa(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xa(e,t.context,!1),Xo(e,t.containerInfo)}function sl(e,t,s,p,v){return Fi(),Ro(v),t.flags|=256,Ne(e,t,s,p),t.child}var io={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:null,transitions:null}}function cc(e,t,s){var p=t.pendingProps,v=Ce.current,_=!1,S=(t.flags&128)!==0,d;if((d=S)||(d=e!==null&&e.memoizedState===null?!1:(v&2)!==0),d?(_=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(v|=1),pe(Ce,v&1),e===null)return Ks(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(S=p.children,e=p.fallback,_?(p=t.mode,_=t.child,S={mode:"hidden",children:S},!(p&1)&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Xr(S,p,0,null),e=ri(e,p,s,null),_.return=t,e.return=t,_.sibling=e,t.child=_,t.child.memoizedState=no(s),t.memoizedState=io,e):Qo(t,S));if(v=e.memoizedState,v!==null&&(d=v.dehydrated,d!==null))return zf(e,t,S,p,d,v,s);if(_){_=p.fallback,S=t.mode,v=e.child,d=v.sibling;var i={mode:"hidden",children:p.children};return!(S&1)&&t.child!==v?(p=t.child,p.childLanes=0,p.pendingProps=i,t.deletions=null):(p=Ht(v,i),p.subtreeFlags=v.subtreeFlags&14680064),d!==null?_=Ht(d,_):(_=ri(_,S,s,null),_.flags|=2),_.return=t,p.return=t,p.sibling=_,t.child=p,p=_,_=t.child,S=e.child.memoizedState,S=S===null?no(s):{baseLanes:S.baseLanes|s,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=e.childLanes&~s,t.memoizedState=io,p}return _=e.child,e=_.sibling,p=Ht(_,{mode:"visible",children:p.children}),!(t.mode&1)&&(p.lanes=s),p.return=t,p.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=p,t.memoizedState=null,p}function Qo(e,t){return t=Xr({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hn(e,t,s,p){return p!==null&&Ro(p),Li(t,e.child,null,s),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zf(e,t,s,p,v,_,S){if(s)return t.flags&256?(t.flags&=-257,p=ps(Error(J(422))),Hn(e,t,S,p)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(_=p.fallback,v=t.mode,p=Xr({mode:"visible",children:p.children},v,0,null),_=ri(_,v,S,null),_.flags|=2,p.return=t,_.return=t,p.sibling=_,t.child=p,t.mode&1&&Li(t,e.child,null,S),t.child.memoizedState=no(S),t.memoizedState=io,_);if(!(t.mode&1))return Hn(e,t,S,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var d=p.dgst;return p=d,_=Error(J(419)),p=ps(_,p,void 0),Hn(e,t,S,p)}if(d=(S&e.childLanes)!==0,Ue||d){if(p=De,p!==null){switch(S&-S){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(p.suspendedLanes|S)?0:v,v!==0&&v!==_.retryLane&&(_.retryLane=v,bt(e,v),dt(p,e,v,-1))}return ia(),p=ps(Error(J(421))),Hn(e,t,S,p)}return v.data==="$?"?(t.flags|=128,t.child=e.child,t=Zf.bind(null,e),v._reactRetry=t,null):(e=_.treeContext,Qe=Wt(v.nextSibling),qe=t,_e=!0,ht=null,e!==null&&(tt[it++]=xt,tt[it++]=Tt,tt[it++]=oi,xt=e.id,Tt=e.overflow,oi=t),t=Qo(t,p.children),t.flags|=4096,t)}function ol(e,t,s){e.lanes|=t;var p=e.alternate;p!==null&&(p.lanes|=t),Qs(e.return,t,s)}function ms(e,t,s,p,v){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:p,tail:s,tailMode:v}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=s,_.tailMode=v)}function hc(e,t,s){var p=t.pendingProps,v=p.revealOrder,_=p.tail;if(Ne(e,t,p.children,s),p=Ce.current,p&2)p=p&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ol(e,s,t);else if(e.tag===19)ol(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}p&=1}if(pe(Ce,p),!(t.mode&1))t.memoizedState=null;else switch(v){case"forwards":for(s=t.child,v=null;s!==null;)e=s.alternate,e!==null&&xr(e)===null&&(v=s),s=s.sibling;s=v,s===null?(v=t.child,t.child=null):(v=s.sibling,s.sibling=null),ms(t,!1,v,s,_);break;case"backwards":for(s=null,v=t.child,t.child=null;v!==null;){if(e=v.alternate,e!==null&&xr(e)===null){t.child=v;break}e=v.sibling,v.sibling=s,s=v,v=e}ms(t,!0,s,null,_);break;case"together":ms(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),li|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,s=Ht(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ht(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Wf(e,t,s){switch(t.tag){case 3:uc(t),Fi();break;case 5:Bu(t);break;case 1:Ve(t.type)&&vr(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var p=t.type._context,v=t.memoizedProps.value;pe(Cr,p._currentValue),p._currentValue=v;break;case 13:if(p=t.memoizedState,p!==null)return p.dehydrated!==null?(pe(Ce,Ce.current&1),t.flags|=128,null):s&t.child.childLanes?cc(e,t,s):(pe(Ce,Ce.current&1),e=Pt(e,t,s),e!==null?e.sibling:null);pe(Ce,Ce.current&1);break;case 19:if(p=(s&t.childLanes)!==0,e.flags&128){if(p)return hc(e,t,s);t.flags|=128}if(v=t.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pe(Ce,Ce.current),p)break;return null;case 22:case 23:return t.lanes=0,ac(e,t,s)}return Pt(e,t,s)}var fc,ro,dc,gc;fc=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};ro=function(){};dc=function(e,t,s,p){var v=e.memoizedProps;if(v!==p){e=t.stateNode,ii(Ct.current);var _=null;switch(s){case"input":v=Os(e,v),p=Os(e,p),_=[];break;case"select":v=we({},v,{value:void 0}),p=we({},p,{value:void 0}),_=[];break;case"textarea":v=Ps(e,v),p=Ps(e,p),_=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(e.onclick=pr)}Ms(s,p);var S;s=null;for(l in v)if(!p.hasOwnProperty(l)&&v.hasOwnProperty(l)&&v[l]!=null)if(l==="style"){var d=v[l];for(S in d)d.hasOwnProperty(S)&&(s||(s={}),s[S]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(cn.hasOwnProperty(l)?_||(_=[]):(_=_||[]).push(l,null));for(l in p){var i=p[l];if(d=v!=null?v[l]:void 0,p.hasOwnProperty(l)&&i!==d&&(i!=null||d!=null))if(l==="style")if(d){for(S in d)!d.hasOwnProperty(S)||i&&i.hasOwnProperty(S)||(s||(s={}),s[S]="");for(S in i)i.hasOwnProperty(S)&&d[S]!==i[S]&&(s||(s={}),s[S]=i[S])}else s||(_||(_=[]),_.push(l,s)),s=i;else l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,d=d?d.__html:void 0,i!=null&&d!==i&&(_=_||[]).push(l,i)):l==="children"?typeof i!="string"&&typeof i!="number"||(_=_||[]).push(l,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(cn.hasOwnProperty(l)?(i!=null&&l==="onScroll"&&me("scroll",e),_||d===i||(_=[])):(_=_||[]).push(l,i))}s&&(_=_||[]).push("style",s);var l=_;(t.updateQueue=l)&&(t.flags|=4)}};gc=function(e,t,s,p){s!==p&&(t.flags|=4)};function $i(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var p=null;s!==null;)s.alternate!==null&&(p=s),s=s.sibling;p===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:p.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,p=0;if(t)for(var v=e.child;v!==null;)s|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=e,v=v.sibling;else for(v=e.child;v!==null;)s|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=e,v=v.sibling;return e.subtreeFlags|=p,e.childLanes=s,t}function Xf(e,t,s){var p=t.pendingProps;switch(jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Ve(t.type)&&mr(),je(t),null;case 3:return p=t.stateNode,ji(),ve(He),ve(Ie),Uo(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(e===null||e.child===null)&&(Yn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ht!==null&&(fo(ht),ht=null))),ro(e,t),je(t),null;case 5:Yo(t);var v=ii(wn.current);if(s=t.type,e!==null&&t.stateNode!=null)dc(e,t,s,p,v),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!p){if(t.stateNode===null)throw Error(J(166));return je(t),null}if(e=ii(Ct.current),Yn(t)){p=t.stateNode,s=t.type;var _=t.memoizedProps;switch(p[yt]=t,p[Cn]=_,e=(t.mode&1)!==0,s){case"dialog":me("cancel",p),me("close",p);break;case"iframe":case"object":case"embed":me("load",p);break;case"video":case"audio":for(v=0;v<Zi.length;v++)me(Zi[v],p);break;case"source":me("error",p);break;case"img":case"image":case"link":me("error",p),me("load",p);break;case"details":me("toggle",p);break;case"input":pa(p,_),me("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},me("invalid",p);break;case"textarea":va(p,_),me("invalid",p)}Ms(s,_),v=null;for(var S in _)if(_.hasOwnProperty(S)){var d=_[S];S==="children"?typeof d=="string"?p.textContent!==d&&(_.suppressHydrationWarning!==!0&&Xn(p.textContent,d,e),v=["children",d]):typeof d=="number"&&p.textContent!==""+d&&(_.suppressHydrationWarning!==!0&&Xn(p.textContent,d,e),v=["children",""+d]):cn.hasOwnProperty(S)&&d!=null&&S==="onScroll"&&me("scroll",p)}switch(s){case"input":Ln(p),ma(p,_,!0);break;case"textarea":Ln(p),ya(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=pr)}p=v,t.updateQueue=p,p!==null&&(t.flags|=4)}else{S=v.nodeType===9?v:v.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wl(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof p.is=="string"?e=S.createElement(s,{is:p.is}):(e=S.createElement(s),s==="select"&&(S=e,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):e=S.createElementNS(e,s),e[yt]=t,e[Cn]=p,fc(e,t,!1,!1),t.stateNode=e;e:{switch(S=As(s,p),s){case"dialog":me("cancel",e),me("close",e),v=p;break;case"iframe":case"object":case"embed":me("load",e),v=p;break;case"video":case"audio":for(v=0;v<Zi.length;v++)me(Zi[v],e);v=p;break;case"source":me("error",e),v=p;break;case"img":case"image":case"link":me("error",e),me("load",e),v=p;break;case"details":me("toggle",e),v=p;break;case"input":pa(e,p),v=Os(e,p),me("invalid",e);break;case"option":v=p;break;case"select":e._wrapperState={wasMultiple:!!p.multiple},v=we({},p,{value:void 0}),me("invalid",e);break;case"textarea":va(e,p),v=Ps(e,p),me("invalid",e);break;default:v=p}Ms(s,v),d=v;for(_ in d)if(d.hasOwnProperty(_)){var i=d[_];_==="style"?Ul(e,i):_==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Xl(e,i)):_==="children"?typeof i=="string"?(s!=="textarea"||i!=="")&&hn(e,i):typeof i=="number"&&hn(e,""+i):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(cn.hasOwnProperty(_)?i!=null&&_==="onScroll"&&me("scroll",e):i!=null&&Co(e,_,i,S))}switch(s){case"input":Ln(e),ma(e,p,!1);break;case"textarea":Ln(e),ya(e);break;case"option":p.value!=null&&e.setAttribute("value",""+Vt(p.value));break;case"select":e.multiple=!!p.multiple,_=p.value,_!=null?ki(e,!!p.multiple,_,!1):p.defaultValue!=null&&ki(e,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(e.onclick=pr)}switch(s){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)gc(e,t,e.memoizedProps,p);else{if(typeof p!="string"&&t.stateNode===null)throw Error(J(166));if(s=ii(wn.current),ii(Ct.current),Yn(t)){if(p=t.stateNode,s=t.memoizedProps,p[yt]=t,(_=p.nodeValue!==s)&&(e=qe,e!==null))switch(e.tag){case 3:Xn(p.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xn(p.nodeValue,s,(e.mode&1)!==0)}_&&(t.flags|=4)}else p=(s.nodeType===9?s:s.ownerDocument).createTextNode(p),p[yt]=t,t.stateNode=p}return je(t),null;case 13:if(ve(Ce),p=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Qe!==null&&t.mode&1&&!(t.flags&128))Mu(),Fi(),t.flags|=98560,_=!1;else if(_=Yn(t),p!==null&&p.dehydrated!==null){if(e===null){if(!_)throw Error(J(318));if(_=t.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(J(317));_[yt]=t}else Fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),_=!1}else ht!==null&&(fo(ht),ht=null),_=!0;if(!_)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(p=p!==null,p!==(e!==null&&e.memoizedState!==null)&&p&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?be===0&&(be=3):ia())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return ji(),ro(e,t),e===null&&yn(t.stateNode.containerInfo),je(t),null;case 10:return No(t.type._context),je(t),null;case 17:return Ve(t.type)&&mr(),je(t),null;case 19:if(ve(Ce),_=t.memoizedState,_===null)return je(t),null;if(p=(t.flags&128)!==0,S=_.rendering,S===null)if(p)$i(_,!1);else{if(be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(S=xr(e),S!==null){for(t.flags|=128,$i(_,!1),p=S.updateQueue,p!==null&&(t.updateQueue=p,t.flags|=4),t.subtreeFlags=0,p=s,s=t.child;s!==null;)_=s,e=p,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,e=S.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return pe(Ce,Ce.current&1|2),t.child}e=e.sibling}_.tail!==null&&Te()>Ii&&(t.flags|=128,p=!0,$i(_,!1),t.lanes=4194304)}else{if(!p)if(e=xr(S),e!==null){if(t.flags|=128,p=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),$i(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!_e)return je(t),null}else 2*Te()-_.renderingStartTime>Ii&&s!==1073741824&&(t.flags|=128,p=!0,$i(_,!1),t.lanes=4194304);_.isBackwards?(S.sibling=t.child,t.child=S):(s=_.last,s!==null?s.sibling=S:t.child=S,_.last=S)}return _.tail!==null?(t=_.tail,_.rendering=t,_.tail=t.sibling,_.renderingStartTime=Te(),t.sibling=null,s=Ce.current,pe(Ce,p?s&1|2:s&1),t):(je(t),null);case 22:case 23:return ta(),p=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==p&&(t.flags|=8192),p&&t.mode&1?Ke&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function Yf(e,t){switch(jo(t),t.tag){case 1:return Ve(t.type)&&mr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),ve(He),ve(Ie),Uo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yo(t),null;case 13:if(ve(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Fi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(Ce),null;case 4:return ji(),null;case 10:return No(t.type._context),null;case 22:case 23:return ta(),null;case 24:return null;default:return null}}var Vn=!1,Re=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,re=null;function xi(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(p){xe(e,t,p)}else s.current=null}function so(e,t,s){try{s()}catch(p){xe(e,t,p)}}var al=!1;function Hf(e,t){if(Xs=fr,e=yu(),Fo(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var p=s.getSelection&&s.getSelection();if(p&&p.rangeCount!==0){s=p.anchorNode;var v=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{s.nodeType,_.nodeType}catch{s=null;break e}var S=0,d=-1,i=-1,l=0,c=0,r=e,o=null;t:for(;;){for(var a;r!==s||v!==0&&r.nodeType!==3||(d=S+v),r!==_||p!==0&&r.nodeType!==3||(i=S+p),r.nodeType===3&&(S+=r.nodeValue.length),(a=r.firstChild)!==null;)o=r,r=a;for(;;){if(r===e)break t;if(o===s&&++l===v&&(d=S),o===_&&++c===p&&(i=S),(a=r.nextSibling)!==null)break;r=o,o=r.parentNode}r=a}s=d===-1||i===-1?null:{start:d,end:i}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ys={focusedElem:e,selectionRange:s},fr=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var n=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var h=n.memoizedProps,u=n.memoizedState,f=t.stateNode,g=f.getSnapshotBeforeUpdate(t.elementType===t.type?h:ut(t.type,h),u);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(y){xe(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return n=al,al=!1,n}function an(e,t,s){var p=t.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&e)===e){var _=v.destroy;v.destroy=void 0,_!==void 0&&so(t,s,_)}v=v.next}while(v!==p)}}function zr(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var p=s.create;s.destroy=p()}s=s.next}while(s!==t)}}function oo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function pc(e){var t=e.alternate;t!==null&&(e.alternate=null,pc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yt],delete t[Cn],delete t[Vs],delete t[Ef],delete t[bf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mc(e){return e.tag===5||e.tag===3||e.tag===4}function ll(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ao(e,t,s){var p=e.tag;if(p===5||p===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=pr));else if(p!==4&&(e=e.child,e!==null))for(ao(e,t,s),e=e.sibling;e!==null;)ao(e,t,s),e=e.sibling}function lo(e,t,s){var p=e.tag;if(p===5||p===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(p!==4&&(e=e.child,e!==null))for(lo(e,t,s),e=e.sibling;e!==null;)lo(e,t,s),e=e.sibling}var Me=null,ct=!1;function Mt(e,t,s){for(s=s.child;s!==null;)vc(e,t,s),s=s.sibling}function vc(e,t,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ar,s)}catch{}switch(s.tag){case 5:Re||xi(s,t);case 6:var p=Me,v=ct;Me=null,Mt(e,t,s),Me=p,ct=v,Me!==null&&(ct?(e=Me,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Me.removeChild(s.stateNode));break;case 18:Me!==null&&(ct?(e=Me,s=s.stateNode,e.nodeType===8?us(e.parentNode,s):e.nodeType===1&&us(e,s),pn(e)):us(Me,s.stateNode));break;case 4:p=Me,v=ct,Me=s.stateNode.containerInfo,ct=!0,Mt(e,t,s),Me=p,ct=v;break;case 0:case 11:case 14:case 15:if(!Re&&(p=s.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var _=v,S=_.destroy;_=_.tag,S!==void 0&&(_&2||_&4)&&so(s,t,S),v=v.next}while(v!==p)}Mt(e,t,s);break;case 1:if(!Re&&(xi(s,t),p=s.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=s.memoizedProps,p.state=s.memoizedState,p.componentWillUnmount()}catch(d){xe(s,t,d)}Mt(e,t,s);break;case 21:Mt(e,t,s);break;case 22:s.mode&1?(Re=(p=Re)||s.memoizedState!==null,Mt(e,t,s),Re=p):Mt(e,t,s);break;default:Mt(e,t,s)}}function ul(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Uf),t.forEach(function(p){var v=ed.bind(null,e,p);s.has(p)||(s.add(p),p.then(v,v))})}}function at(e,t){var s=t.deletions;if(s!==null)for(var p=0;p<s.length;p++){var v=s[p];try{var _=e,S=t,d=S;e:for(;d!==null;){switch(d.tag){case 5:Me=d.stateNode,ct=!1;break e;case 3:Me=d.stateNode.containerInfo,ct=!0;break e;case 4:Me=d.stateNode.containerInfo,ct=!0;break e}d=d.return}if(Me===null)throw Error(J(160));vc(_,S,v),Me=null,ct=!1;var i=v.alternate;i!==null&&(i.return=null),v.return=null}catch(l){xe(v,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yc(t,e),t=t.sibling}function yc(e,t){var s=e.alternate,p=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(at(t,e),mt(e),p&4){try{an(3,e,e.return),zr(3,e)}catch(h){xe(e,e.return,h)}try{an(5,e,e.return)}catch(h){xe(e,e.return,h)}}break;case 1:at(t,e),mt(e),p&512&&s!==null&&xi(s,s.return);break;case 5:if(at(t,e),mt(e),p&512&&s!==null&&xi(s,s.return),e.flags&32){var v=e.stateNode;try{hn(v,"")}catch(h){xe(e,e.return,h)}}if(p&4&&(v=e.stateNode,v!=null)){var _=e.memoizedProps,S=s!==null?s.memoizedProps:_,d=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{d==="input"&&_.type==="radio"&&_.name!=null&&Nl(v,_),As(d,S);var l=As(d,_);for(S=0;S<i.length;S+=2){var c=i[S],r=i[S+1];c==="style"?Ul(v,r):c==="dangerouslySetInnerHTML"?Xl(v,r):c==="children"?hn(v,r):Co(v,c,r,l)}switch(d){case"input":Es(v,_);break;case"textarea":zl(v,_);break;case"select":var o=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!_.multiple;var a=_.value;a!=null?ki(v,!!_.multiple,a,!1):o!==!!_.multiple&&(_.defaultValue!=null?ki(v,!!_.multiple,_.defaultValue,!0):ki(v,!!_.multiple,_.multiple?[]:"",!1))}v[Cn]=_}catch(h){xe(e,e.return,h)}}break;case 6:if(at(t,e),mt(e),p&4){if(e.stateNode===null)throw Error(J(162));v=e.stateNode,_=e.memoizedProps;try{v.nodeValue=_}catch(h){xe(e,e.return,h)}}break;case 3:if(at(t,e),mt(e),p&4&&s!==null&&s.memoizedState.isDehydrated)try{pn(t.containerInfo)}catch(h){xe(e,e.return,h)}break;case 4:at(t,e),mt(e);break;case 13:at(t,e),mt(e),v=e.child,v.flags&8192&&(_=v.memoizedState!==null,v.stateNode.isHidden=_,!_||v.alternate!==null&&v.alternate.memoizedState!==null||(Zo=Te())),p&4&&ul(e);break;case 22:if(c=s!==null&&s.memoizedState!==null,e.mode&1?(Re=(l=Re)||c,at(t,e),Re=l):at(t,e),mt(e),p&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(re=e,c=e.child;c!==null;){for(r=re=c;re!==null;){switch(o=re,a=o.child,o.tag){case 0:case 11:case 14:case 15:an(4,o,o.return);break;case 1:xi(o,o.return);var n=o.stateNode;if(typeof n.componentWillUnmount=="function"){p=o,s=o.return;try{t=p,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(h){xe(p,s,h)}}break;case 5:xi(o,o.return);break;case 22:if(o.memoizedState!==null){hl(r);continue}}a!==null?(a.return=o,re=a):hl(r)}c=c.sibling}e:for(c=null,r=e;;){if(r.tag===5){if(c===null){c=r;try{v=r.stateNode,l?(_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(d=r.stateNode,i=r.memoizedProps.style,S=i!=null&&i.hasOwnProperty("display")?i.display:null,d.style.display=Yl("display",S))}catch(h){xe(e,e.return,h)}}}else if(r.tag===6){if(c===null)try{r.stateNode.nodeValue=l?"":r.memoizedProps}catch(h){xe(e,e.return,h)}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}}break;case 19:at(t,e),mt(e),p&4&&ul(e);break;case 21:break;default:at(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(mc(s)){var p=s;break e}s=s.return}throw Error(J(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(hn(v,""),p.flags&=-33);var _=ll(e);lo(e,_,v);break;case 3:case 4:var S=p.stateNode.containerInfo,d=ll(e);ao(e,d,S);break;default:throw Error(J(161))}}catch(i){xe(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vf(e,t,s){re=e,_c(e)}function _c(e,t,s){for(var p=(e.mode&1)!==0;re!==null;){var v=re,_=v.child;if(v.tag===22&&p){var S=v.memoizedState!==null||Vn;if(!S){var d=v.alternate,i=d!==null&&d.memoizedState!==null||Re;d=Vn;var l=Re;if(Vn=S,(Re=i)&&!l)for(re=v;re!==null;)S=re,i=S.child,S.tag===22&&S.memoizedState!==null?fl(v):i!==null?(i.return=S,re=i):fl(v);for(;_!==null;)re=_,_c(_),_=_.sibling;re=v,Vn=d,Re=l}cl(e)}else v.subtreeFlags&8772&&_!==null?(_.return=v,re=_):cl(e)}}function cl(e){for(;re!==null;){var t=re;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Re||zr(5,t);break;case 1:var p=t.stateNode;if(t.flags&4&&!Re)if(s===null)p.componentDidMount();else{var v=t.elementType===t.type?s.memoizedProps:ut(t.type,s.memoizedProps);p.componentDidUpdate(v,s.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=t.updateQueue;_!==null&&Ga(t,_,p);break;case 3:var S=t.updateQueue;if(S!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Ga(t,S,s)}break;case 5:var d=t.stateNode;if(s===null&&t.flags&4){s=d;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break;case"img":i.src&&(s.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var r=c.dehydrated;r!==null&&pn(r)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Re||t.flags&512&&oo(t)}catch(o){xe(t,t.return,o)}}if(t===e){re=null;break}if(s=t.sibling,s!==null){s.return=t.return,re=s;break}re=t.return}}function hl(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var s=t.sibling;if(s!==null){s.return=t.return,re=s;break}re=t.return}}function fl(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{zr(4,t)}catch(i){xe(t,s,i)}break;case 1:var p=t.stateNode;if(typeof p.componentDidMount=="function"){var v=t.return;try{p.componentDidMount()}catch(i){xe(t,v,i)}}var _=t.return;try{oo(t)}catch(i){xe(t,_,i)}break;case 5:var S=t.return;try{oo(t)}catch(i){xe(t,S,i)}}}catch(i){xe(t,t.return,i)}if(t===e){re=null;break}var d=t.sibling;if(d!==null){d.return=t.return,re=d;break}re=t.return}}var Gf=Math.ceil,Or=Dt.ReactCurrentDispatcher,qo=Dt.ReactCurrentOwner,rt=Dt.ReactCurrentBatchConfig,fe=0,De=null,Oe=null,Ae=0,Ke=0,Ti=Kt(0),be=0,On=null,li=0,Wr=0,Jo=0,ln=null,Ye=null,Zo=0,Ii=1/0,St=null,Er=!1,uo=null,Yt=null,Gn=!1,It=null,br=0,un=0,co=null,rr=-1,sr=0;function ze(){return fe&6?Te():rr!==-1?rr:rr=Te()}function Ut(e){return e.mode&1?fe&2&&Ae!==0?Ae&-Ae:Df.transition!==null?(sr===0&&(sr=iu()),sr):(e=ge,e!==0||(e=window.event,e=e===void 0?16:uu(e.type)),e):1}function dt(e,t,s,p){if(50<un)throw un=0,co=null,Error(J(185));bn(e,s,p),(!(fe&2)||e!==De)&&(e===De&&(!(fe&2)&&(Wr|=s),be===4&&jt(e,Ae)),Ge(e,p),s===1&&fe===0&&!(t.mode&1)&&(Ii=Te()+500,Ir&&Qt()))}function Ge(e,t){var s=e.callbackNode;Ph(e,t);var p=hr(e,e===De?Ae:0);if(p===0)s!==null&&Sa(s),e.callbackNode=null,e.callbackPriority=0;else if(t=p&-p,e.callbackPriority!==t){if(s!=null&&Sa(s),t===1)e.tag===0?Pf(dl.bind(null,e)):bu(dl.bind(null,e)),kf(function(){!(fe&6)&&Qt()}),s=null;else{switch(nu(p)){case 1:s=ko;break;case 4:s=eu;break;case 16:s=cr;break;case 536870912:s=tu;break;default:s=cr}s=Ec(s,Cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Cc(e,t){if(rr=-1,sr=0,fe&6)throw Error(J(327));var s=e.callbackNode;if(Di()&&e.callbackNode!==s)return null;var p=hr(e,e===De?Ae:0);if(p===0)return null;if(p&30||p&e.expiredLanes||t)t=Pr(e,p);else{t=p;var v=fe;fe|=2;var _=wc();(De!==e||Ae!==t)&&(St=null,Ii=Te()+500,ni(e,t));do try{Qf();break}catch(d){Sc(e,d)}while(1);Bo(),Or.current=_,fe=v,Oe!==null?t=0:(De=null,Ae=0,t=be)}if(t!==0){if(t===2&&(v=Is(e),v!==0&&(p=v,t=ho(e,v))),t===1)throw s=On,ni(e,0),jt(e,p),Ge(e,Te()),s;if(t===6)jt(e,p);else{if(v=e.current.alternate,!(p&30)&&!$f(v)&&(t=Pr(e,p),t===2&&(_=Is(e),_!==0&&(p=_,t=ho(e,_))),t===1))throw s=On,ni(e,0),jt(e,p),Ge(e,Te()),s;switch(e.finishedWork=v,e.finishedLanes=p,t){case 0:case 1:throw Error(J(345));case 2:Zt(e,Ye,St);break;case 3:if(jt(e,p),(p&130023424)===p&&(t=Zo+500-Te(),10<t)){if(hr(e,0)!==0)break;if(v=e.suspendedLanes,(v&p)!==p){ze(),e.pingedLanes|=e.suspendedLanes&v;break}e.timeoutHandle=Hs(Zt.bind(null,e,Ye,St),t);break}Zt(e,Ye,St);break;case 4:if(jt(e,p),(p&4194240)===p)break;for(t=e.eventTimes,v=-1;0<p;){var S=31-ft(p);_=1<<S,S=t[S],S>v&&(v=S),p&=~_}if(p=v,p=Te()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Gf(p/1960))-p,10<p){e.timeoutHandle=Hs(Zt.bind(null,e,Ye,St),p);break}Zt(e,Ye,St);break;case 5:Zt(e,Ye,St);break;default:throw Error(J(329))}}}return Ge(e,Te()),e.callbackNode===s?Cc.bind(null,e):null}function ho(e,t){var s=ln;return e.current.memoizedState.isDehydrated&&(ni(e,t).flags|=256),e=Pr(e,t),e!==2&&(t=Ye,Ye=s,t!==null&&fo(t)),e}function fo(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function $f(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var p=0;p<s.length;p++){var v=s[p],_=v.getSnapshot;v=v.value;try{if(!gt(_(),v))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jt(e,t){for(t&=~Jo,t&=~Wr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-ft(t),p=1<<s;e[s]=-1,t&=~p}}function dl(e){if(fe&6)throw Error(J(327));Di();var t=hr(e,0);if(!(t&1))return Ge(e,Te()),null;var s=Pr(e,t);if(e.tag!==0&&s===2){var p=Is(e);p!==0&&(t=p,s=ho(e,p))}if(s===1)throw s=On,ni(e,0),jt(e,t),Ge(e,Te()),s;if(s===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zt(e,Ye,St),Ge(e,Te()),null}function ea(e,t){var s=fe;fe|=1;try{return e(t)}finally{fe=s,fe===0&&(Ii=Te()+500,Ir&&Qt())}}function ui(e){It!==null&&It.tag===0&&!(fe&6)&&Di();var t=fe;fe|=1;var s=rt.transition,p=ge;try{if(rt.transition=null,ge=1,e)return e()}finally{ge=p,rt.transition=s,fe=t,!(fe&6)&&Qt()}}function ta(){Ke=Ti.current,ve(Ti)}function ni(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Tf(s)),Oe!==null)for(s=Oe.return;s!==null;){var p=s;switch(jo(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&mr();break;case 3:ji(),ve(He),ve(Ie),Uo();break;case 5:Yo(p);break;case 4:ji();break;case 13:ve(Ce);break;case 19:ve(Ce);break;case 10:No(p.type._context);break;case 22:case 23:ta()}s=s.return}if(De=e,Oe=e=Ht(e.current,null),Ae=Ke=t,be=0,On=null,Jo=Wr=li=0,Ye=ln=null,ti!==null){for(t=0;t<ti.length;t++)if(s=ti[t],p=s.interleaved,p!==null){s.interleaved=null;var v=p.next,_=s.pending;if(_!==null){var S=_.next;_.next=v,p.next=S}s.pending=p}ti=null}return e}function Sc(e,t){do{var s=Oe;try{if(Bo(),tr.current=kr,Tr){for(var p=Se.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Tr=!1}if(ai=0,Pe=Ee=Se=null,on=!1,xn=0,qo.current=null,s===null||s.return===null){be=1,On=t,Oe=null;break}e:{var _=e,S=s.return,d=s,i=t;if(t=Ae,d.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var l=i,c=d,r=c.tag;if(!(c.mode&1)&&(r===0||r===11||r===15)){var o=c.alternate;o?(c.updateQueue=o.updateQueue,c.memoizedState=o.memoizedState,c.lanes=o.lanes):(c.updateQueue=null,c.memoizedState=null)}var a=el(S);if(a!==null){a.flags&=-257,tl(a,S,d,_,t),a.mode&1&&Za(_,l,t),t=a,i=l;var n=t.updateQueue;if(n===null){var h=new Set;h.add(i),t.updateQueue=h}else n.add(i);break e}else{if(!(t&1)){Za(_,l,t),ia();break e}i=Error(J(426))}}else if(_e&&d.mode&1){var u=el(S);if(u!==null){!(u.flags&65536)&&(u.flags|=256),tl(u,S,d,_,t),Ro(Ri(i,d));break e}}_=i=Ri(i,d),be!==4&&(be=2),ln===null?ln=[_]:ln.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,t&=-t,_.lanes|=t;var f=rc(_,i,t);Va(_,f);break e;case 1:d=i;var g=_.type,m=_.stateNode;if(!(_.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yt===null||!Yt.has(m)))){_.flags|=65536,t&=-t,_.lanes|=t;var y=sc(_,d,t);Va(_,y);break e}}_=_.return}while(_!==null)}Tc(s)}catch(C){t=C,Oe===s&&s!==null&&(Oe=s=s.return);continue}break}while(1)}function wc(){var e=Or.current;return Or.current=kr,e===null?kr:e}function ia(){(be===0||be===3||be===2)&&(be=4),De===null||!(li&268435455)&&!(Wr&268435455)||jt(De,Ae)}function Pr(e,t){var s=fe;fe|=2;var p=wc();(De!==e||Ae!==t)&&(St=null,ni(e,t));do try{Kf();break}catch(v){Sc(e,v)}while(1);if(Bo(),fe=s,Or.current=p,Oe!==null)throw Error(J(261));return De=null,Ae=0,be}function Kf(){for(;Oe!==null;)xc(Oe)}function Qf(){for(;Oe!==null&&!Ch();)xc(Oe)}function xc(e){var t=Oc(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?Tc(e):Oe=t,qo.current=null}function Tc(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=Yf(s,t),s!==null){s.flags&=32767,Oe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{be=6,Oe=null;return}}else if(s=Xf(s,t,Ke),s!==null){Oe=s;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);be===0&&(be=5)}function Zt(e,t,s){var p=ge,v=rt.transition;try{rt.transition=null,ge=1,qf(e,t,s,p)}finally{rt.transition=v,ge=p}return null}function qf(e,t,s,p){do Di();while(It!==null);if(fe&6)throw Error(J(327));s=e.finishedWork;var v=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var _=s.lanes|s.childLanes;if(Dh(e,_),e===De&&(Oe=De=null,Ae=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Gn||(Gn=!0,Ec(cr,function(){return Di(),null})),_=(s.flags&15990)!==0,s.subtreeFlags&15990||_){_=rt.transition,rt.transition=null;var S=ge;ge=1;var d=fe;fe|=4,qo.current=null,Hf(e,s),yc(s,e),vf(Ys),fr=!!Xs,Ys=Xs=null,e.current=s,Vf(s),Sh(),fe=d,ge=S,rt.transition=_}else e.current=s;if(Gn&&(Gn=!1,It=e,br=v),_=e.pendingLanes,_===0&&(Yt=null),Th(s.stateNode),Ge(e,Te()),t!==null)for(p=e.onRecoverableError,s=0;s<t.length;s++)v=t[s],p(v.value,{componentStack:v.stack,digest:v.digest});if(Er)throw Er=!1,e=uo,uo=null,e;return br&1&&e.tag!==0&&Di(),_=e.pendingLanes,_&1?e===co?un++:(un=0,co=e):un=0,Qt(),null}function Di(){if(It!==null){var e=nu(br),t=rt.transition,s=ge;try{if(rt.transition=null,ge=16>e?16:e,It===null)var p=!1;else{if(e=It,It=null,br=0,fe&6)throw Error(J(331));var v=fe;for(fe|=4,re=e.current;re!==null;){var _=re,S=_.child;if(re.flags&16){var d=_.deletions;if(d!==null){for(var i=0;i<d.length;i++){var l=d[i];for(re=l;re!==null;){var c=re;switch(c.tag){case 0:case 11:case 15:an(8,c,_)}var r=c.child;if(r!==null)r.return=c,re=r;else for(;re!==null;){c=re;var o=c.sibling,a=c.return;if(pc(c),c===l){re=null;break}if(o!==null){o.return=a,re=o;break}re=a}}}var n=_.alternate;if(n!==null){var h=n.child;if(h!==null){n.child=null;do{var u=h.sibling;h.sibling=null,h=u}while(h!==null)}}re=_}}if(_.subtreeFlags&2064&&S!==null)S.return=_,re=S;else e:for(;re!==null;){if(_=re,_.flags&2048)switch(_.tag){case 0:case 11:case 15:an(9,_,_.return)}var f=_.sibling;if(f!==null){f.return=_.return,re=f;break e}re=_.return}}var g=e.current;for(re=g;re!==null;){S=re;var m=S.child;if(S.subtreeFlags&2064&&m!==null)m.return=S,re=m;else e:for(S=g;re!==null;){if(d=re,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:zr(9,d)}}catch(C){xe(d,d.return,C)}if(d===S){re=null;break e}var y=d.sibling;if(y!==null){y.return=d.return,re=y;break e}re=d.return}}if(fe=v,Qt(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ar,e)}catch{}p=!0}return p}finally{ge=s,rt.transition=t}}return!1}function gl(e,t,s){t=Ri(s,t),t=rc(e,t,1),e=Xt(e,t,1),t=ze(),e!==null&&(bn(e,1,t),Ge(e,t))}function xe(e,t,s){if(e.tag===3)gl(e,e,s);else for(;t!==null;){if(t.tag===3){gl(t,e,s);break}else if(t.tag===1){var p=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Yt===null||!Yt.has(p))){e=Ri(s,e),e=sc(t,e,1),t=Xt(t,e,1),e=ze(),t!==null&&(bn(t,1,e),Ge(t,e));break}}t=t.return}}function Jf(e,t,s){var p=e.pingCache;p!==null&&p.delete(t),t=ze(),e.pingedLanes|=e.suspendedLanes&s,De===e&&(Ae&s)===s&&(be===4||be===3&&(Ae&130023424)===Ae&&500>Te()-Zo?ni(e,0):Jo|=s),Ge(e,t)}function kc(e,t){t===0&&(e.mode&1?(t=In,In<<=1,!(In&130023424)&&(In=4194304)):t=1);var s=ze();e=bt(e,t),e!==null&&(bn(e,t,s),Ge(e,s))}function Zf(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),kc(e,s)}function ed(e,t){var s=0;switch(e.tag){case 13:var p=e.stateNode,v=e.memoizedState;v!==null&&(s=v.retryLane);break;case 19:p=e.stateNode;break;default:throw Error(J(314))}p!==null&&p.delete(t),kc(e,s)}var Oc;Oc=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||He.current)Ue=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ue=!1,Wf(e,t,s);Ue=!!(e.flags&131072)}else Ue=!1,_e&&t.flags&1048576&&Pu(t,_r,t.index);switch(t.lanes=0,t.tag){case 2:var p=t.type;nr(e,t),e=t.pendingProps;var v=Ai(t,Ie.current);Pi(t,s),v=Vo(null,t,p,e,v,s);var _=Go();return t.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ve(p)?(_=!0,vr(t)):_=!1,t.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Wo(t),v.updater=Br,t.stateNode=v,v._reactInternals=t,Js(t,p,e,s),t=to(null,t,p,!0,_,s)):(t.tag=0,_e&&_&&Lo(t),Ne(null,t,v,s),t=t.child),t;case 16:p=t.elementType;e:{switch(nr(e,t),e=t.pendingProps,v=p._init,p=v(p._payload),t.type=p,v=t.tag=id(p),e=ut(p,e),v){case 0:t=eo(null,t,p,e,s);break e;case 1:t=rl(null,t,p,e,s);break e;case 11:t=il(null,t,p,e,s);break e;case 14:t=nl(null,t,p,ut(p.type,e),s);break e}throw Error(J(306,p,""))}return t;case 0:return p=t.type,v=t.pendingProps,v=t.elementType===p?v:ut(p,v),eo(e,t,p,v,s);case 1:return p=t.type,v=t.pendingProps,v=t.elementType===p?v:ut(p,v),rl(e,t,p,v,s);case 3:e:{if(uc(t),e===null)throw Error(J(387));p=t.pendingProps,_=t.memoizedState,v=_.element,Fu(e,t),wr(t,p,null,s);var S=t.memoizedState;if(p=S.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},t.updateQueue.baseState=_,t.memoizedState=_,t.flags&256){v=Ri(Error(J(423)),t),t=sl(e,t,p,s,v);break e}else if(p!==v){v=Ri(Error(J(424)),t),t=sl(e,t,p,s,v);break e}else for(Qe=Wt(t.stateNode.containerInfo.firstChild),qe=t,_e=!0,ht=null,s=Iu(t,null,p,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Fi(),p===v){t=Pt(e,t,s);break e}Ne(e,t,p,s)}t=t.child}return t;case 5:return Bu(t),e===null&&Ks(t),p=t.type,v=t.pendingProps,_=e!==null?e.memoizedProps:null,S=v.children,Us(p,v)?S=null:_!==null&&Us(p,_)&&(t.flags|=32),lc(e,t),Ne(e,t,S,s),t.child;case 6:return e===null&&Ks(t),null;case 13:return cc(e,t,s);case 4:return Xo(t,t.stateNode.containerInfo),p=t.pendingProps,e===null?t.child=Li(t,null,p,s):Ne(e,t,p,s),t.child;case 11:return p=t.type,v=t.pendingProps,v=t.elementType===p?v:ut(p,v),il(e,t,p,v,s);case 7:return Ne(e,t,t.pendingProps,s),t.child;case 8:return Ne(e,t,t.pendingProps.children,s),t.child;case 12:return Ne(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(p=t.type._context,v=t.pendingProps,_=t.memoizedProps,S=v.value,pe(Cr,p._currentValue),p._currentValue=S,_!==null)if(gt(_.value,S)){if(_.children===v.children&&!He.current){t=Pt(e,t,s);break e}}else for(_=t.child,_!==null&&(_.return=t);_!==null;){var d=_.dependencies;if(d!==null){S=_.child;for(var i=d.firstContext;i!==null;){if(i.context===p){if(_.tag===1){i=kt(-1,s&-s),i.tag=2;var l=_.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?i.next=i:(i.next=c.next,c.next=i),l.pending=i}}_.lanes|=s,i=_.alternate,i!==null&&(i.lanes|=s),Qs(_.return,s,t),d.lanes|=s;break}i=i.next}}else if(_.tag===10)S=_.type===t.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(J(341));S.lanes|=s,d=S.alternate,d!==null&&(d.lanes|=s),Qs(S,s,t),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===t){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}Ne(e,t,v.children,s),t=t.child}return t;case 9:return v=t.type,p=t.pendingProps.children,Pi(t,s),v=st(v),p=p(v),t.flags|=1,Ne(e,t,p,s),t.child;case 14:return p=t.type,v=ut(p,t.pendingProps),v=ut(p.type,v),nl(e,t,p,v,s);case 15:return oc(e,t,t.type,t.pendingProps,s);case 17:return p=t.type,v=t.pendingProps,v=t.elementType===p?v:ut(p,v),nr(e,t),t.tag=1,Ve(p)?(e=!0,vr(t)):e=!1,Pi(t,s),ju(t,p,v),Js(t,p,v,s),to(null,t,p,!0,e,s);case 19:return hc(e,t,s);case 22:return ac(e,t,s)}throw Error(J(156,t.tag))};function Ec(e,t){return Zl(e,t)}function td(e,t,s,p){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(e,t,s,p){return new td(e,t,s,p)}function na(e){return e=e.prototype,!(!e||!e.isReactComponent)}function id(e){if(typeof e=="function")return na(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wo)return 11;if(e===xo)return 14}return 2}function Ht(e,t){var s=e.alternate;return s===null?(s=nt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function or(e,t,s,p,v,_){var S=2;if(p=e,typeof e=="function")na(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case gi:return ri(s.children,v,_,t);case So:S=8,v|=8;break;case ws:return e=nt(12,s,t,v|2),e.elementType=ws,e.lanes=_,e;case xs:return e=nt(13,s,t,v),e.elementType=xs,e.lanes=_,e;case Ts:return e=nt(19,s,t,v),e.elementType=Ts,e.lanes=_,e;case Rl:return Xr(s,v,_,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ll:S=10;break e;case jl:S=9;break e;case wo:S=11;break e;case xo:S=14;break e;case At:S=16,p=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=nt(S,s,t,v),t.elementType=e,t.type=p,t.lanes=_,t}function ri(e,t,s,p){return e=nt(7,e,p,t),e.lanes=s,e}function Xr(e,t,s,p){return e=nt(22,e,p,t),e.elementType=Rl,e.lanes=s,e.stateNode={isHidden:!1},e}function vs(e,t,s){return e=nt(6,e,null,t),e.lanes=s,e}function ys(e,t,s){return t=nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nd(e,t,s,p,v){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function ra(e,t,s,p,v,_,S,d,i){return e=new nd(e,t,s,d,i),t===1?(t=1,_===!0&&(t|=8)):t=0,_=nt(3,null,null,t),e.current=_,_.stateNode=e,_.memoizedState={element:p,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wo(_),e}function rd(e,t,s){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:p==null?null:""+p,children:e,containerInfo:t,implementation:s}}function bc(e){if(!e)return Gt;e=e._reactInternals;e:{if(hi(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var s=e.type;if(Ve(s))return Eu(e,s,t)}return t}function Pc(e,t,s,p,v,_,S,d,i){return e=ra(s,p,!0,e,v,_,S,d,i),e.context=bc(null),s=e.current,p=ze(),v=Ut(s),_=kt(p,v),_.callback=t??null,Xt(s,_,v),e.current.lanes=v,bn(e,v,p),Ge(e,p),e}function Yr(e,t,s,p){var v=t.current,_=ze(),S=Ut(v);return s=bc(s),t.context===null?t.context=s:t.pendingContext=s,t=kt(_,S),t.payload={element:e},p=p===void 0?null:p,p!==null&&(t.callback=p),e=Xt(v,t,S),e!==null&&(dt(e,v,S,_),er(e,v,S)),S}function Dr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function sa(e,t){pl(e,t),(e=e.alternate)&&pl(e,t)}function sd(){return null}var Dc=typeof reportError=="function"?reportError:function(e){console.error(e)};function oa(e){this._internalRoot=e}Ur.prototype.render=oa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Yr(e,t,null,null)};Ur.prototype.unmount=oa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ui(function(){Yr(null,e,null,null)}),t[Et]=null}};function Ur(e){this._internalRoot=e}Ur.prototype.unstable_scheduleHydration=function(e){if(e){var t=ou();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Lt.length&&t!==0&&t<Lt[s].priority;s++);Lt.splice(s,0,e),s===0&&lu(e)}};function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ml(){}function od(e,t,s,p,v){if(v){if(typeof p=="function"){var _=p;p=function(){var l=Dr(S);_.call(l)}}var S=Pc(t,p,e,0,null,!1,!1,"",ml);return e._reactRootContainer=S,e[Et]=S.current,yn(e.nodeType===8?e.parentNode:e),ui(),S}for(;v=e.lastChild;)e.removeChild(v);if(typeof p=="function"){var d=p;p=function(){var l=Dr(i);d.call(l)}}var i=ra(e,0,!1,null,null,!1,!1,"",ml);return e._reactRootContainer=i,e[Et]=i.current,yn(e.nodeType===8?e.parentNode:e),ui(function(){Yr(t,i,s,p)}),i}function Vr(e,t,s,p,v){var _=s._reactRootContainer;if(_){var S=_;if(typeof v=="function"){var d=v;v=function(){var i=Dr(S);d.call(i)}}Yr(t,S,e,v)}else S=od(s,t,e,v,p);return Dr(S)}ru=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ji(t.pendingLanes);s!==0&&(Oo(t,s|1),Ge(t,Te()),!(fe&6)&&(Ii=Te()+500,Qt()))}break;case 13:ui(function(){var p=bt(e,1);if(p!==null){var v=ze();dt(p,e,1,v)}}),sa(e,1)}};Eo=function(e){if(e.tag===13){var t=bt(e,134217728);if(t!==null){var s=ze();dt(t,e,134217728,s)}sa(e,134217728)}};su=function(e){if(e.tag===13){var t=Ut(e),s=bt(e,t);if(s!==null){var p=ze();dt(s,e,t,p)}sa(e,t)}};ou=function(){return ge};au=function(e,t){var s=ge;try{return ge=e,t()}finally{ge=s}};Ls=function(e,t,s){switch(t){case"input":if(Es(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var p=s[t];if(p!==e&&p.form===e.form){var v=Rr(p);if(!v)throw Error(J(90));Bl(p),Es(p,v)}}}break;case"textarea":zl(e,s);break;case"select":t=s.value,t!=null&&ki(e,!!s.multiple,t,!1)}};Gl=ea;$l=ui;var ad={usingClientEntryPoint:!1,Events:[Dn,yi,Rr,Hl,Vl,ea]},Ki={findFiberByHostInstance:ei,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ld={bundleType:Ki.bundleType,version:Ki.version,rendererPackageName:Ki.rendererPackageName,rendererConfig:Ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ql(e),e===null?null:e.stateNode},findFiberByHostInstance:Ki.findFiberByHostInstance||sd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $n=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$n.isDisabled&&$n.supportsFiber)try{Ar=$n.inject(ld),_t=$n}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ad;Ze.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aa(t))throw Error(J(200));return rd(e,t,null,s)};Ze.createRoot=function(e,t){if(!aa(e))throw Error(J(299));var s=!1,p="",v=Dc;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(p=t.identifierPrefix),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=ra(e,1,!1,null,null,s,!1,p,v),e[Et]=t.current,yn(e.nodeType===8?e.parentNode:e),new oa(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=ql(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return ui(e)};Ze.hydrate=function(e,t,s){if(!Hr(t))throw Error(J(200));return Vr(null,e,t,!0,s)};Ze.hydrateRoot=function(e,t,s){if(!aa(e))throw Error(J(405));var p=s!=null&&s.hydratedSources||null,v=!1,_="",S=Dc;if(s!=null&&(s.unstable_strictMode===!0&&(v=!0),s.identifierPrefix!==void 0&&(_=s.identifierPrefix),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),t=Pc(t,null,e,1,s??null,v,!1,_,S),e[Et]=t.current,yn(e),p)for(e=0;e<p.length;e++)s=p[e],v=s._getVersion,v=v(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,v]:t.mutableSourceEagerHydrationData.push(s,v);return new Ur(t)};Ze.render=function(e,t,s){if(!Hr(t))throw Error(J(200));return Vr(null,e,t,!1,s)};Ze.unmountComponentAtNode=function(e){if(!Hr(e))throw Error(J(40));return e._reactRootContainer?(ui(function(){Vr(null,null,e,!1,function(){e._reactRootContainer=null,e[Et]=null})}),!0):!1};Ze.unstable_batchedUpdates=ea;Ze.unstable_renderSubtreeIntoContainer=function(e,t,s,p){if(!Hr(s))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Vr(e,t,s,!1,p)};Ze.version="18.2.0-next-9e3b772b8-20220608";function Mc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mc)}catch(e){console.error(e)}}Mc(),Pl.exports=Ze;var ud=Pl.exports,vl=ud;Cs.createRoot=vl.createRoot,Cs.hydrateRoot=vl.hydrateRoot;var $e={};const cd={},hd=Object.freeze(Object.defineProperty({__proto__:null,default:cd},Symbol.toStringTag,{value:"Module"})),_s=Rc(hd);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"4.5.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var s=_s,p=new s.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=p.document,t.jsdomImplForWrapper=_s.implForWrapper,t.nodeCanvas=_s.Canvas,t.window=p,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function d(r,o){if(this.__eventListeners[r]){var a=this.__eventListeners[r];o?a[a.indexOf(o)]=!1:t.util.array.fill(a,!1)}}function i(r,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var a in r)this.on(a,r[a]);else this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(o);return this}function l(r,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(r in this.__eventListeners)d.call(this,r);else if(arguments.length===1&&typeof arguments[0]=="object")for(var a in r)d.call(this,a,r[a]);else d.call(this,r,o);return this}function c(r,o){if(!this.__eventListeners)return this;var a=this.__eventListeners[r];if(!a)return this;for(var n=0,h=a.length;n<h;n++)a[n]&&a[n].call(this,o||{});return this.__eventListeners[r]=a.filter(function(u){return u!==!1}),this}t.Observable={fire:c,on:i,off:l}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,i=arguments.length;d<i;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,i,l){var c=this._objects;return l?c[i]=d:c.splice(i,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,i,l=!1,c=0,r=arguments.length;c<r;c++)i=d.indexOf(arguments[c]),i!==-1&&(l=!0,d.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[c]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(d,i){for(var l=this.getObjects(),c=0,r=l.length;c<r;c++)d.call(i,l[c],c,l);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d){return this._objects.indexOf(d)>-1},complexity:function(){return this._objects.reduce(function(d,i){return d+=i.complexity?i.complexity():0,d},0)}},t.CommonMethods={_setOptions:function(d){for(var i in d)this.set(i,d[i])},_initGradient:function(d,i){d&&d.colorStops&&!(d instanceof t.Gradient)&&this.set(i,new t.Gradient(d))},_initPattern:function(d,i,l){d&&d.source&&!(d instanceof t.Pattern)?this.set(i,new t.Pattern(d,l)):l&&l()},_setObject:function(d){for(var i in d)this._set(i,d[i])},set:function(d,i){return typeof d=="object"?this._setObject(d):this._set(d,i),this},_set:function(d,i){this[d]=i},toggle:function(d){var i=this.get(d);return typeof i=="boolean"&&this.set(d,!i),this},get:function(d){return this[d]}},function(d){var i=Math.sqrt,l=Math.atan2,c=Math.pow,r=Math.PI/180,o=Math.PI/2;t.util={cos:function(a){if(a===0)return 1;a<0&&(a=-a);var n=a/o;switch(n){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(a===0)return 0;var n=a/o,h=1;switch(a<0&&(h=-1),n){case 1:return h;case 2:return 0;case 3:return-h}return Math.sin(a)},removeFromArray:function(a,n){var h=a.indexOf(n);return h!==-1&&a.splice(h,1),a},getRandomInt:function(a,n){return Math.floor(Math.random()*(n-a+1))+a},degreesToRadians:function(a){return a*r},radiansToDegrees:function(a){return a/r},rotatePoint:function(a,n,h){a.subtractEquals(n);var u=t.util.rotateVector(a,h);return new t.Point(u.x,u.y).addEquals(n)},rotateVector:function(a,n){var h=t.util.sin(n),u=t.util.cos(n),f=a.x*u-a.y*h,g=a.x*h+a.y*u;return{x:f,y:g}},transformPoint:function(a,n,h){return h?new t.Point(n[0]*a.x+n[2]*a.y,n[1]*a.x+n[3]*a.y):new t.Point(n[0]*a.x+n[2]*a.y+n[4],n[1]*a.x+n[3]*a.y+n[5])},makeBoundingBoxFromPoints:function(a,n){if(n)for(var h=0;h<a.length;h++)a[h]=t.util.transformPoint(a[h],n);var u=[a[0].x,a[1].x,a[2].x,a[3].x],f=t.util.array.min(u),g=t.util.array.max(u),m=g-f,y=[a[0].y,a[1].y,a[2].y,a[3].y],C=t.util.array.min(y),w=t.util.array.max(y),T=w-C;return{left:f,top:C,width:m,height:T}},invertTransform:function(a){var n=1/(a[0]*a[3]-a[1]*a[2]),h=[n*a[3],-n*a[1],-n*a[2],n*a[0]],u=t.util.transformPoint({x:a[4],y:a[5]},h,!0);return h[4]=-u.x,h[5]=-u.y,h},toFixed:function(a,n){return parseFloat(Number(a).toFixed(n))},parseUnit:function(a,n){var h=/\D{0,2}$/.exec(a),u=parseFloat(a);switch(n||(n=t.Text.DEFAULT_SVG_FONT_SIZE),h[0]){case"mm":return u*t.DPI/25.4;case"cm":return u*t.DPI/2.54;case"in":return u*t.DPI;case"pt":return u*t.DPI/72;case"pc":return u*t.DPI/72*12;case"em":return u*n;default:return u}},falseFunction:function(){return!1},getKlass:function(a,n){return a=t.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),t.util.resolveNamespace(n)[a]},getSvgAttributes:function(a){var n=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":n=n.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":n=n.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":n=n.concat(["offset","stop-color","stop-opacity"]);break}return n},resolveNamespace:function(a){if(!a)return t;var n=a.split("."),h=n.length,u,f=d||t.window;for(u=0;u<h;++u)f=f[n[u]];return f},loadImage:function(a,n,h,u){if(!a){n&&n.call(h,a);return}var f=t.util.createImage(),g=function(){n&&n.call(h,f,!1),f=f.onload=f.onerror=null};f.onload=g,f.onerror=function(){t.log("Error loading "+f.src),n&&n.call(h,null,!0),f=f.onload=f.onerror=null},a.indexOf("data")!==0&&u!==void 0&&u!==null&&(f.crossOrigin=u),a.substring(0,14)==="data:image/svg"&&(f.onload=null,t.util.loadImageInDom(f,g)),f.src=a},loadImageInDom:function(a,n){var h=t.document.createElement("div");h.style.width=h.style.height="1px",h.style.left=h.style.top="-100%",h.style.position="absolute",h.appendChild(a),t.document.querySelector("body").appendChild(h),a.onload=function(){n(),h.parentNode.removeChild(h),h=null}},enlivenObjects:function(a,n,h,u){a=a||[];var f=[],g=0,m=a.length;function y(){++g===m&&n&&n(f.filter(function(C){return C}))}if(!m){n&&n(f);return}a.forEach(function(C,w){if(!C||!C.type){y();return}var T=t.util.getKlass(C.type,h);T.fromObject(C,function(O,L){L||(f[w]=O),u&&u(C,O,L),y()})})},enlivenPatterns:function(a,n){a=a||[];function h(){++f===g&&n&&n(u)}var u=[],f=0,g=a.length;if(!g){n&&n(u);return}a.forEach(function(m,y){m&&m.source?new t.Pattern(m,function(C){u[y]=C,h()}):(u[y]=m,h())})},groupSVGElements:function(a,n,h){var u;return a&&a.length===1?a[0]:(n&&(n.width&&n.height?n.centerPoint={x:n.width/2,y:n.height/2}:(delete n.width,delete n.height)),u=new t.Group(a,n),typeof h<"u"&&(u.sourcePath=h),u)},populateWithProperties:function(a,n,h){if(h&&Object.prototype.toString.call(h)==="[object Array]")for(var u=0,f=h.length;u<f;u++)h[u]in a&&(n[h[u]]=a[h[u]])},drawDashedLine:function(a,n,h,u,f,g){var m=u-n,y=f-h,C=i(m*m+y*y),w=l(y,m),T=g.length,O=0,L=!0;for(a.save(),a.translate(n,h),a.moveTo(0,0),a.rotate(w),n=0;C>n;)n+=g[O++%T],n>C&&(n=C),a[L?"lineTo":"moveTo"](n,0),L=!L;a.restore()},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(a){var n=t.util.createCanvasElement();return n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(a,0,0),n},toDataURL:function(a,n,h){return a.toDataURL("image/"+n,h)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(a,n,h){return[a[0]*n[0]+a[2]*n[1],a[1]*n[0]+a[3]*n[1],a[0]*n[2]+a[2]*n[3],a[1]*n[2]+a[3]*n[3],h?0:a[0]*n[4]+a[2]*n[5]+a[4],h?0:a[1]*n[4]+a[3]*n[5]+a[5]]},qrDecompose:function(a){var n=l(a[1],a[0]),h=c(a[0],2)+c(a[1],2),u=i(h),f=(a[0]*a[3]-a[2]*a[1])/u,g=l(a[0]*a[2]+a[1]*a[3],h);return{angle:n/r,scaleX:u,scaleY:f,skewX:g/r,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return t.iMatrix.concat();var n=t.util.degreesToRadians(a.angle),h=t.util.cos(n),u=t.util.sin(n);return[h,u,-u,h,0,0]},calcDimensionsMatrix:function(a){var n=typeof a.scaleX>"u"?1:a.scaleX,h=typeof a.scaleY>"u"?1:a.scaleY,u=[a.flipX?-n:n,0,0,a.flipY?-h:h,0,0],f=t.util.multiplyTransformMatrices,g=t.util.degreesToRadians;return a.skewX&&(u=f(u,[1,0,Math.tan(g(a.skewX)),1],!0)),a.skewY&&(u=f(u,[1,Math.tan(g(a.skewY)),0,1],!0)),u},composeMatrix:function(a){var n=[1,0,0,1,a.translateX||0,a.translateY||0],h=t.util.multiplyTransformMatrices;return a.angle&&(n=h(n,t.util.calcRotateMatrix(a))),(a.scaleX!==1||a.scaleY!==1||a.skewX||a.skewY||a.flipX||a.flipY)&&(n=h(n,t.util.calcDimensionsMatrix(a))),n},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},isTransparent:function(a,n,h,u){u>0&&(n>u?n-=u:n=0,h>u?h-=u:h=0);var f=!0,g,m,y=a.getImageData(n,h,u*2||1,u*2||1),C=y.data.length;for(g=3;g<C&&(m=y.data[g],f=m<=0,f!==!1);g+=4);return y=null,f},parsePreserveAspectRatioAttribute:function(a){var n="meet",h="Mid",u="Mid",f=a.split(" "),g;return f&&f.length&&(n=f.pop(),n!=="meet"&&n!=="slice"?(g=n,n="meet"):f.length&&(g=f.pop())),h=g!=="none"?g.slice(1,4):"none",u=g!=="none"?g.slice(5,8):"none",{meetOrSlice:n,alignX:h,alignY:u}},clearFabricFontCache:function(a){a=(a||"").toLowerCase(),a?t.charWidthsCache[a]&&delete t.charWidthsCache[a]:t.charWidthsCache={}},limitDimsByArea:function(a,n){var h=Math.sqrt(n*a),u=Math.floor(n/h);return{x:Math.floor(h),y:u}},capValue:function(a,n,h){return Math.max(a,Math.min(n,h))},findScaleToFit:function(a,n){return Math.min(n.width/a.width,n.height/a.height)},findScaleToCover:function(a,n){return Math.max(n.width/a.width,n.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(n){return t.util.toFixed(n,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(a,n){var h=t.util.invertTransform(n),u=t.util.multiplyTransformMatrices(h,a.calcOwnMatrix());t.util.applyTransformToObject(a,u)},addTransformToObject:function(a,n){t.util.applyTransformToObject(a,t.util.multiplyTransformMatrices(n,a.calcOwnMatrix()))},applyTransformToObject:function(a,n){var h=t.util.qrDecompose(n),u=new t.Point(h.translateX,h.translateY);a.flipX=!1,a.flipY=!1,a.set("scaleX",h.scaleX),a.set("scaleY",h.scaleY),a.skewX=h.skewX,a.skewY=h.skewY,a.angle=h.angle,a.setPositionByOrigin(u,"center","center")},sizeAfterTransform:function(a,n,h){var u=a/2,f=n/2,g=[{x:-u,y:-f},{x:u,y:-f},{x:-u,y:f},{x:u,y:f}],m=t.util.calcDimensionsMatrix(h),y=t.util.makeBoundingBoxFromPoints(g,m);return{x:y.width,y:y.height}}}}(e),function(){var d=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function c(x,E,P,D,W,b,k,M,F,X,R){var U=t.util.cos(x),q=t.util.sin(x),Z=t.util.cos(E),j=t.util.sin(E),A=P*W*Z-D*b*j+k,H=D*W*Z+P*b*j+M,V=X+F*(-P*W*q-D*b*U),N=R+F*(-D*W*q+P*b*U),$=A+F*(P*W*j+D*b*Z),ee=H+F*(D*W*j-P*b*Z);return["C",V,N,$,ee,A,H]}function r(x,E,P,D,W,b,k){var M=Math.PI,F=k*M/180,X=t.util.sin(F),R=t.util.cos(F),U=0,q=0;P=Math.abs(P),D=Math.abs(D);var Z=-R*x*.5-X*E*.5,j=-R*E*.5+X*x*.5,A=P*P,H=D*D,V=j*j,N=Z*Z,$=A*H-A*V-H*N,ee=0;if($<0){var le=Math.sqrt(1-$/(A*H));P*=le,D*=le}else ee=(W===b?-1:1)*Math.sqrt($/(A*V+H*N));var oe=ee*P*j/D,Y=-ee*D*Z/P,ae=R*oe-X*Y+x*.5,ue=X*oe+R*Y+E*.5,he=o(1,0,(Z-oe)/P,(j-Y)/D),ye=o((Z-oe)/P,(j-Y)/D,(-Z-oe)/P,(-j-Y)/D);b===0&&ye>0?ye-=2*M:b===1&&ye<0&&(ye+=2*M);for(var de=Math.ceil(Math.abs(ye/M*2)),Be=[],ke=ye/de,qt=8/3*Math.sin(ke/4)*Math.sin(ke/4)/Math.sin(ke/2),Wi=he+ke,pt=0;pt<de;pt++)Be[pt]=c(he,Wi,R,X,P,D,ae,ue,qt,U,q),U=Be[pt][5],q=Be[pt][6],he=Wi,Wi+=ke;return Be}function o(x,E,P,D){var W=Math.atan2(E,x),b=Math.atan2(D,P);return b>=W?b-W:2*Math.PI-(W-b)}function a(x,E,P,D,W,b,k,M){var F;if(t.cachesBoundsOfCurve&&(F=d.call(arguments),t.boundsOfCurveCache[F]))return t.boundsOfCurveCache[F];var X=Math.sqrt,R=Math.min,U=Math.max,q=Math.abs,Z=[],j=[[],[]],A,H,V,N,$,ee,le,oe;H=6*x-12*P+6*W,A=-3*x+9*P-9*W+3*k,V=3*P-3*x;for(var Y=0;Y<2;++Y){if(Y>0&&(H=6*E-12*D+6*b,A=-3*E+9*D-9*b+3*M,V=3*D-3*E),q(A)<1e-12){if(q(H)<1e-12)continue;N=-V/H,0<N&&N<1&&Z.push(N);continue}le=H*H-4*V*A,!(le<0)&&(oe=X(le),$=(-H+oe)/(2*A),0<$&&$<1&&Z.push($),ee=(-H-oe)/(2*A),0<ee&&ee<1&&Z.push(ee))}for(var ae,ue,he=Z.length,ye=he,de;he--;)N=Z[he],de=1-N,ae=de*de*de*x+3*de*de*N*P+3*de*N*N*W+N*N*N*k,j[0][he]=ae,ue=de*de*de*E+3*de*de*N*D+3*de*N*N*b+N*N*N*M,j[1][he]=ue;j[0][ye]=x,j[1][ye]=E,j[0][ye+1]=k,j[1][ye+1]=M;var Be=[{x:R.apply(null,j[0]),y:R.apply(null,j[1])},{x:U.apply(null,j[0]),y:U.apply(null,j[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[F]=Be),Be}function n(x,E,P){for(var D=P[1],W=P[2],b=P[3],k=P[4],M=P[5],F=P[6],X=P[7],R=r(F-x,X-E,D,W,k,M,b),U=0,q=R.length;U<q;U++)R[U][1]+=x,R[U][2]+=E,R[U][3]+=x,R[U][4]+=E,R[U][5]+=x,R[U][6]+=E;return R}function h(x){var E=0,P=0,D=x.length,W=0,b=0,k,M,F,X=[],R,U,q;for(M=0;M<D;++M){switch(F=!1,k=x[M].slice(0),k[0]){case"l":k[0]="L",k[1]+=E,k[2]+=P;case"L":E=k[1],P=k[2];break;case"h":k[1]+=E;case"H":k[0]="L",k[2]=P,E=k[1];break;case"v":k[1]+=P;case"V":k[0]="L",P=k[1],k[1]=E,k[2]=P;break;case"m":k[0]="M",k[1]+=E,k[2]+=P;case"M":E=k[1],P=k[2],W=k[1],b=k[2];break;case"c":k[0]="C",k[1]+=E,k[2]+=P,k[3]+=E,k[4]+=P,k[5]+=E,k[6]+=P;case"C":U=k[3],q=k[4],E=k[5],P=k[6];break;case"s":k[0]="S",k[1]+=E,k[2]+=P,k[3]+=E,k[4]+=P;case"S":R==="C"?(U=2*E-U,q=2*P-q):(U=E,q=P),E=k[3],P=k[4],k[0]="C",k[5]=k[3],k[6]=k[4],k[3]=k[1],k[4]=k[2],k[1]=U,k[2]=q,U=k[3],q=k[4];break;case"q":k[0]="Q",k[1]+=E,k[2]+=P,k[3]+=E,k[4]+=P;case"Q":U=k[1],q=k[2],E=k[3],P=k[4];break;case"t":k[0]="T",k[1]+=E,k[2]+=P;case"T":R==="Q"?(U=2*E-U,q=2*P-q):(U=E,q=P),k[0]="Q",E=k[1],P=k[2],k[1]=U,k[2]=q,k[3]=E,k[4]=P;break;case"a":k[0]="A",k[6]+=E,k[7]+=P;case"A":F=!0,X=X.concat(n(E,P,k)),E=k[6],P=k[7];break;case"z":case"Z":E=W,P=b;break}F||X.push(k),R=k[0]}return X}function u(x,E,P,D){return Math.sqrt((P-x)*(P-x)+(D-E)*(D-E))}function f(x){return x*x*x}function g(x){return 3*x*x*(1-x)}function m(x){return 3*x*(1-x)*(1-x)}function y(x){return(1-x)*(1-x)*(1-x)}function C(x,E,P,D,W,b,k,M){return function(F){var X=f(F),R=g(F),U=m(F),q=y(F);return{x:k*X+W*R+P*U+x*q,y:M*X+b*R+D*U+E*q}}}function w(x,E,P,D,W,b,k,M){return function(F){var X=1-F,R=3*X*X*(P-x)+6*X*F*(W-P)+3*F*F*(k-W),U=3*X*X*(D-E)+6*X*F*(b-D)+3*F*F*(M-b);return Math.atan2(U,R)}}function T(x){return x*x}function O(x){return 2*x*(1-x)}function L(x){return(1-x)*(1-x)}function I(x,E,P,D,W,b){return function(k){var M=T(k),F=O(k),X=L(k);return{x:W*M+P*F+x*X,y:b*M+D*F+E*X}}}function K(x,E,P,D,W,b){return function(k){var M=1-k,F=2*M*(P-x)+2*k*(W-P),X=2*M*(D-E)+2*k*(b-D);return Math.atan2(X,F)}}function B(x,E,P){var D={x:E,y:P},W,b=0,k;for(k=.01;k<=1;k+=.01)W=x(k),b+=u(D.x,D.y,W.x,W.y),D=W;return b}function z(x,E){for(var P=0,D=0,W=x.iterator,b={x:x.x,y:x.y},k,M,F=.01,X=x.angleFinder,R;D<E&&P<=1&&F>1e-4;)k=W(P),R=P,M=u(b.x,b.y,k.x,k.y),M+D>E?(F/=2,P-=F):(b=k,P+=F,D+=M);return k.angle=X(R),k}function Q(x){for(var E=0,P=x.length,D,W=0,b=0,k=0,M=0,F=[],X,R,U,q=0;q<P;q++){switch(D=x[q],R={x:W,y:b,command:D[0]},D[0]){case"M":R.length=0,k=W=D[1],M=b=D[2];break;case"L":R.length=u(W,b,D[1],D[2]),W=D[1],b=D[2];break;case"C":X=C(W,b,D[1],D[2],D[3],D[4],D[5],D[6]),U=w(W,b,D[1],D[2],D[3],D[4],D[5],D[6]),R.iterator=X,R.angleFinder=U,R.length=B(X,W,b),W=D[5],b=D[6];break;case"Q":X=I(W,b,D[1],D[2],D[3],D[4]),U=K(W,b,D[1],D[2],D[3],D[4]),R.iterator=X,R.angleFinder=U,R.length=B(X,W,b),W=D[3],b=D[4];break;case"Z":case"z":R.destX=k,R.destY=M,R.length=u(W,b,k,M),W=k,b=M;break}E+=R.length,F.push(R)}return F.push({length:E,x:W,y:b}),F}function te(x,E,P){P||(P=Q(x));for(var D=0;E-P[D].length>0&&D<P.length-2;)E-=P[D].length,D++;var W=P[D],b=E/W.length,k=W.command,M=x[D],F;switch(k){case"M":return{x:W.x,y:W.y,angle:0};case"Z":case"z":return F=new t.Point(W.x,W.y).lerp(new t.Point(W.destX,W.destY),b),F.angle=Math.atan2(W.destY-W.y,W.destX-W.x),F;case"L":return F=new t.Point(W.x,W.y).lerp(new t.Point(M[1],M[2]),b),F.angle=Math.atan2(M[2]-W.y,M[1]-W.x),F;case"C":return z(W,E);case"Q":return z(W,E)}}function ne(x){var E=[],P=[],D,W,b=t.rePathCommand,k="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",M="("+k+")"+t.commaWsp,F="([01])"+t.commaWsp+"?",X=M+"?"+M+"?"+M+F+F+M+"?("+k+")",R=new RegExp(X,"g"),U,q,Z;if(!x||!x.match)return E;Z=x.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var j=0,A,H=Z.length;j<H;j++){D=Z[j],q=D.slice(1).trim(),P.length=0;var V=D.charAt(0);if(A=[V],V.toLowerCase()==="a")for(var N;N=R.exec(q);)for(var $=1;$<N.length;$++)P.push(N[$]);else for(;U=b.exec(q);)P.push(U[0]);for(var $=0,ee=P.length;$<ee;$++)W=parseFloat(P[$]),isNaN(W)||A.push(W);var le=i[V.toLowerCase()],oe=l[V]||V;if(A.length-1>le)for(var Y=1,ae=A.length;Y<ae;Y+=le)E.push([V].concat(A.slice(Y,Y+le))),V=oe;else E.push(A)}return E}function ie(x,E,P,D,W,b,k,M,F){for(var X=0,R=0,U,q=[],Z=r(M-x,F-E,P,D,b,k,W),j=0,A=Z.length;j<A;j++)U=a(X,R,Z[j][1],Z[j][2],Z[j][3],Z[j][4],Z[j][5],Z[j][6]),q.push({x:U[0].x+x,y:U[0].y+E}),q.push({x:U[1].x+x,y:U[1].y+E}),X=Z[j][5],R=Z[j][6];return q}function G(x,E,P,D){D=D.slice(0).unshift("X");var W=n(E,P,D);W.forEach(function(b){x.bezierCurveTo.apply(x,b.slice(1))})}t.util.parsePath=ne,t.util.makePathSimpler=h,t.util.getPathSegmentsInfo=Q,t.util.fromArcToBeziers=n,t.util.fromArcToBeizers=n,t.util.getBoundsOfCurve=a,t.util.getPointOnPath=te,t.util.getBoundsOfArc=ie,t.util.drawArc=G}(),function(){var d=Array.prototype.slice;function i(a,n){for(var h=d.call(arguments,2),u=[],f=0,g=a.length;f<g;f++)u[f]=h.length?a[f][n].apply(a[f],h):a[f][n].call(a[f]);return u}function l(a,n){return o(a,n,function(h,u){return h>=u})}function c(a,n){return o(a,n,function(h,u){return h<u})}function r(a,n){for(var h=a.length;h--;)a[h]=n;return a}function o(a,n,h){if(!(!a||a.length===0)){var u=a.length-1,f=n?a[u][n]:a[u];if(n)for(;u--;)h(a[u][n],f)&&(f=a[u][n]);else for(;u--;)h(a[u],f)&&(f=a[u]);return f}}t.util.array={fill:r,invoke:i,min:c,max:l}}(),function(){function d(l,c,r){if(r)if(!t.isLikelyNode&&c instanceof Element)l=c;else if(c instanceof Array){l=[];for(var o=0,a=c.length;o<a;o++)l[o]=d({},c[o],r)}else if(c&&typeof c=="object")for(var n in c)n==="canvas"||n==="group"?l[n]=null:c.hasOwnProperty(n)&&(l[n]=d({},c[n],r));else l=c;else for(var n in c)l[n]=c[n];return l}function i(l,c){return d({},l,c)}t.util.object={extend:d,clone:i},t.util.object.extend(t.util,t.Observable)}(),function(){function d(o){return o.replace(/-+(.)?/g,function(a,n){return n?n.toUpperCase():""})}function i(o,a){return o.charAt(0).toUpperCase()+(a?o.slice(1):o.slice(1).toLowerCase())}function l(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(o){var a=0,n,h=[];for(a=0,n;a<o.length;a++)(n=r(o,a))!==!1&&h.push(n);return h}function r(o,a){var n=o.charCodeAt(a);if(isNaN(n))return"";if(n<55296||n>57343)return o.charAt(a);if(55296<=n&&n<=56319){if(o.length<=a+1)throw"High surrogate without following low surrogate";var h=o.charCodeAt(a+1);if(56320>h||h>57343)throw"High surrogate without following low surrogate";return o.charAt(a)+o.charAt(a+1)}if(a===0)throw"Low surrogate without preceding high surrogate";var u=o.charCodeAt(a-1);if(55296>u||u>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:d,capitalize:i,escapeXml:l,graphemeSplit:c}}(),function(){var d=Array.prototype.slice,i=function(){},l=function(){for(var n in{toString:1})if(n==="toString")return!1;return!0}(),c=function(n,h,u){for(var f in h)f in n.prototype&&typeof n.prototype[f]=="function"&&(h[f]+"").indexOf("callSuper")>-1?n.prototype[f]=function(g){return function(){var m=this.constructor.superclass;this.constructor.superclass=u;var y=h[g].apply(this,arguments);if(this.constructor.superclass=m,g!=="initialize")return y}}(f):n.prototype[f]=h[f],l&&(h.toString!==Object.prototype.toString&&(n.prototype.toString=h.toString),h.valueOf!==Object.prototype.valueOf&&(n.prototype.valueOf=h.valueOf))};function r(){}function o(n){for(var h=null,u=this;u.constructor.superclass;){var f=u.constructor.superclass.prototype[n];if(u[n]!==f){h=f;break}u=u.constructor.superclass.prototype}return h?arguments.length>1?h.apply(this,d.call(arguments,1)):h.call(this):console.log("tried to callSuper "+n+", method not found in prototype chain",this)}function a(){var n=null,h=d.call(arguments,0);typeof h[0]=="function"&&(n=h.shift());function u(){this.initialize.apply(this,arguments)}u.superclass=n,u.subclasses=[],n&&(r.prototype=n.prototype,u.prototype=new r,n.subclasses.push(u));for(var f=0,g=h.length;f<g;f++)c(u,h[f],n);return u.prototype.initialize||(u.prototype.initialize=i),u.prototype.constructor=u,u.prototype.callSuper=o,u}t.util.createClass=a}(),function(){var d=!!t.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];t.util.addListener=function(c,r,o,a){c&&c.addEventListener(r,o,d?!1:a)},t.util.removeListener=function(c,r,o,a){c&&c.removeEventListener(r,o,d?!1:a)};function l(c){var r=c.changedTouches;return r&&r[0]?r[0]:c}t.util.getPointer=function(c){var r=c.target,o=t.util.getScrollLeftTop(r),a=l(c);return{x:a.clientX+o.left,y:a.clientY+o.top}},t.util.isTouchEvent=function(c){return i.indexOf(c.type)>-1||c.pointerType==="touch"}}(),function(){function d(a,n){var h=a.style;if(!h)return a;if(typeof n=="string")return a.style.cssText+=";"+n,n.indexOf("opacity")>-1?o(a,n.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var u in n)if(u==="opacity")o(a,n[u]);else{var f=u==="float"||u==="cssFloat"?typeof h.styleFloat>"u"?"cssFloat":"styleFloat":u;h[f]=n[u]}return a}var i=t.document.createElement("div"),l=typeof i.style.opacity=="string",c=typeof i.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(a){return a};l?o=function(a,n){return a.style.opacity=n,a}:c&&(o=function(a,n){var h=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(h.zoom=1),r.test(h.filter)?(n=n>=.9999?"":"alpha(opacity="+n*100+")",h.filter=h.filter.replace(r,n)):h.filter+=" alpha(opacity="+n*100+")",a}),t.util.setStyle=d}(),function(){var d=Array.prototype.slice;function i(y){return typeof y=="string"?t.document.getElementById(y):y}var l,c=function(y){return d.call(y,0)};try{l=c(t.document.childNodes)instanceof Array}catch{}l||(c=function(y){for(var C=new Array(y.length),w=y.length;w--;)C[w]=y[w];return C});function r(y,C){var w=t.document.createElement(y);for(var T in C)T==="class"?w.className=C[T]:T==="for"?w.htmlFor=C[T]:w.setAttribute(T,C[T]);return w}function o(y,C){y&&(" "+y.className+" ").indexOf(" "+C+" ")===-1&&(y.className+=(y.className?" ":"")+C)}function a(y,C,w){return typeof C=="string"&&(C=r(C,w)),y.parentNode&&y.parentNode.replaceChild(C,y),C.appendChild(y),C}function n(y){for(var C=0,w=0,T=t.document.documentElement,O=t.document.body||{scrollLeft:0,scrollTop:0};y&&(y.parentNode||y.host)&&(y=y.parentNode||y.host,y===t.document?(C=O.scrollLeft||T.scrollLeft||0,w=O.scrollTop||T.scrollTop||0):(C+=y.scrollLeft||0,w+=y.scrollTop||0),!(y.nodeType===1&&y.style.position==="fixed")););return{left:C,top:w}}function h(y){var C,w=y&&y.ownerDocument,T={left:0,top:0},O={left:0,top:0},L,I={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return O;for(var K in I)O[I[K]]+=parseInt(u(y,K),10)||0;return C=w.documentElement,typeof y.getBoundingClientRect<"u"&&(T=y.getBoundingClientRect()),L=n(y),{left:T.left+L.left-(C.clientLeft||0)+O.left,top:T.top+L.top-(C.clientTop||0)+O.top}}var u;t.document.defaultView&&t.document.defaultView.getComputedStyle?u=function(y,C){var w=t.document.defaultView.getComputedStyle(y,null);return w?w[C]:void 0}:u=function(y,C){var w=y.style[C];return!w&&y.currentStyle&&(w=y.currentStyle[C]),w},function(){var y=t.document.documentElement.style,C="userSelect"in y?"userSelect":"MozUserSelect"in y?"MozUserSelect":"WebkitUserSelect"in y?"WebkitUserSelect":"KhtmlUserSelect"in y?"KhtmlUserSelect":"";function w(O){return typeof O.onselectstart<"u"&&(O.onselectstart=t.util.falseFunction),C?O.style[C]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function T(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),C?O.style[C]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}t.util.makeElementUnselectable=w,t.util.makeElementSelectable=T}();function f(y){var C=t.jsdomImplForWrapper(y);return C._canvas||C._image}function g(y){if(t.isLikelyNode){var C=t.jsdomImplForWrapper(y);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function m(y,C){y.imageSmoothingEnabled=y.imageSmoothingEnabled||y.webkitImageSmoothingEnabled||y.mozImageSmoothingEnabled||y.msImageSmoothingEnabled||y.oImageSmoothingEnabled,y.imageSmoothingEnabled=C}t.util.setImageSmoothing=m,t.util.getById=i,t.util.toArray=c,t.util.addClass=o,t.util.makeElement=r,t.util.wrapElement=a,t.util.getScrollLeftTop=n,t.util.getElementOffset=h,t.util.getNodeCanvas=f,t.util.cleanUpJsdomNode=g}(),function(){function d(c,r){return c+(/\?/.test(c)?"&":"?")+r}function i(){}function l(c,r){r||(r={});var o=r.method?r.method.toUpperCase():"GET",a=r.onComplete||function(){},n=new t.window.XMLHttpRequest,h=r.body||r.parameters;return n.onreadystatechange=function(){n.readyState===4&&(a(n),n.onreadystatechange=i)},o==="GET"&&(h=null,typeof r.parameters=="string"&&(c=d(c,r.parameters))),n.open(o,c,!0),(o==="POST"||o==="PUT")&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(h),n}t.util.request=l}(),t.log=console.log,t.warn=console.warn,function(){function d(){return!1}function i(n,h,u,f){return-u*Math.cos(n/f*(Math.PI/2))+u+h}function l(n){o(function(h){n||(n={});var u=h||+new Date,f=n.duration||500,g=u+f,m,y=n.onChange||d,C=n.abort||d,w=n.onComplete||d,T=n.easing||i,O="startValue"in n?n.startValue:0,L="endValue"in n?n.endValue:100,I=n.byValue||L-O;n.onStart&&n.onStart(),function K(B){m=B||+new Date;var z=m>g?f:m-u,Q=z/f,te=T(z,O,I,f),ne=Math.abs((te-O)/I);if(C()){w(L,1,1);return}if(m>g){y(L,1,1),w(L,1,1);return}else y(te,ne,Q),o(K)}(u)})}var c=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(n){return t.window.setTimeout(n,1e3/60)},r=t.window.cancelAnimationFrame||t.window.clearTimeout;function o(){return c.apply(t.window,arguments)}function a(){return r.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=o,t.util.cancelAnimFrame=a}(),function(){function d(l,c,r){var o="rgba("+parseInt(l[0]+r*(c[0]-l[0]),10)+","+parseInt(l[1]+r*(c[1]-l[1]),10)+","+parseInt(l[2]+r*(c[2]-l[2]),10);return o+=","+(l&&c?parseFloat(l[3]+r*(c[3]-l[3])):1),o+=")",o}function i(l,c,r,o){var a=new t.Color(l).getSource(),n=new t.Color(c).getSource(),h=o.onComplete,u=o.onChange;o=o||{},t.util.animate(t.util.object.extend(o,{duration:r||500,startValue:a,endValue:n,byValue:n,easing:function(f,g,m,y){var C=o.colorEasing?o.colorEasing(f,y):1-Math.cos(f/y*(Math.PI/2));return d(g,m,C)},onComplete:function(f,g,m){if(h)return h(d(n,n,0),g,m)},onChange:function(f,g,m){if(u){if(Array.isArray(f))return u(d(f,f,0),g,m);u(f,g,m)}}}))}t.util.animateColor=i}(),function(){function d(x,E,P,D){return x<Math.abs(E)?(x=E,D=P/4):E===0&&x===0?D=P/(2*Math.PI)*Math.asin(1):D=P/(2*Math.PI)*Math.asin(E/x),{a:x,c:E,p:P,s:D}}function i(x,E,P){return x.a*Math.pow(2,10*(E-=1))*Math.sin((E*P-x.s)*(2*Math.PI)/x.p)}function l(x,E,P,D){return P*((x=x/D-1)*x*x+1)+E}function c(x,E,P,D){return x/=D/2,x<1?P/2*x*x*x+E:P/2*((x-=2)*x*x+2)+E}function r(x,E,P,D){return P*(x/=D)*x*x*x+E}function o(x,E,P,D){return-P*((x=x/D-1)*x*x*x-1)+E}function a(x,E,P,D){return x/=D/2,x<1?P/2*x*x*x*x+E:-P/2*((x-=2)*x*x*x-2)+E}function n(x,E,P,D){return P*(x/=D)*x*x*x*x+E}function h(x,E,P,D){return P*((x=x/D-1)*x*x*x*x+1)+E}function u(x,E,P,D){return x/=D/2,x<1?P/2*x*x*x*x*x+E:P/2*((x-=2)*x*x*x*x+2)+E}function f(x,E,P,D){return-P*Math.cos(x/D*(Math.PI/2))+P+E}function g(x,E,P,D){return P*Math.sin(x/D*(Math.PI/2))+E}function m(x,E,P,D){return-P/2*(Math.cos(Math.PI*x/D)-1)+E}function y(x,E,P,D){return x===0?E:P*Math.pow(2,10*(x/D-1))+E}function C(x,E,P,D){return x===D?E+P:P*(-Math.pow(2,-10*x/D)+1)+E}function w(x,E,P,D){return x===0?E:x===D?E+P:(x/=D/2,x<1?P/2*Math.pow(2,10*(x-1))+E:P/2*(-Math.pow(2,-10*--x)+2)+E)}function T(x,E,P,D){return-P*(Math.sqrt(1-(x/=D)*x)-1)+E}function O(x,E,P,D){return P*Math.sqrt(1-(x=x/D-1)*x)+E}function L(x,E,P,D){return x/=D/2,x<1?-P/2*(Math.sqrt(1-x*x)-1)+E:P/2*(Math.sqrt(1-(x-=2)*x)+1)+E}function I(x,E,P,D){var W=1.70158,b=0,k=P;if(x===0)return E;if(x/=D,x===1)return E+P;b||(b=D*.3);var M=d(k,P,b,W);return-i(M,x,D)+E}function K(x,E,P,D){var W=1.70158,b=0,k=P;if(x===0)return E;if(x/=D,x===1)return E+P;b||(b=D*.3);var M=d(k,P,b,W);return M.a*Math.pow(2,-10*x)*Math.sin((x*D-M.s)*(2*Math.PI)/M.p)+M.c+E}function B(x,E,P,D){var W=1.70158,b=0,k=P;if(x===0)return E;if(x/=D/2,x===2)return E+P;b||(b=D*(.3*1.5));var M=d(k,P,b,W);return x<1?-.5*i(M,x,D)+E:M.a*Math.pow(2,-10*(x-=1))*Math.sin((x*D-M.s)*(2*Math.PI)/M.p)*.5+M.c+E}function z(x,E,P,D,W){return W===void 0&&(W=1.70158),P*(x/=D)*x*((W+1)*x-W)+E}function Q(x,E,P,D,W){return W===void 0&&(W=1.70158),P*((x=x/D-1)*x*((W+1)*x+W)+1)+E}function te(x,E,P,D,W){return W===void 0&&(W=1.70158),x/=D/2,x<1?P/2*(x*x*(((W*=1.525)+1)*x-W))+E:P/2*((x-=2)*x*(((W*=1.525)+1)*x+W)+2)+E}function ne(x,E,P,D){return P-ie(D-x,0,P,D)+E}function ie(x,E,P,D){return(x/=D)<1/2.75?P*(7.5625*x*x)+E:x<2/2.75?P*(7.5625*(x-=1.5/2.75)*x+.75)+E:x<2.5/2.75?P*(7.5625*(x-=2.25/2.75)*x+.9375)+E:P*(7.5625*(x-=2.625/2.75)*x+.984375)+E}function G(x,E,P,D){return x<D/2?ne(x*2,0,P,D)*.5+E:ie(x*2-D,0,P,D)*.5+P*.5+E}t.util.ease={easeInQuad:function(x,E,P,D){return P*(x/=D)*x+E},easeOutQuad:function(x,E,P,D){return-P*(x/=D)*(x-2)+E},easeInOutQuad:function(x,E,P,D){return x/=D/2,x<1?P/2*x*x+E:-P/2*(--x*(x-2)-1)+E},easeInCubic:function(x,E,P,D){return P*(x/=D)*x*x+E},easeOutCubic:l,easeInOutCubic:c,easeInQuart:r,easeOutQuart:o,easeInOutQuart:a,easeInQuint:n,easeOutQuint:h,easeInOutQuint:u,easeInSine:f,easeOutSine:g,easeInOutSine:m,easeInExpo:y,easeOutExpo:C,easeInOutExpo:w,easeInCirc:T,easeOutCirc:O,easeInOutCirc:L,easeInElastic:I,easeOutElastic:K,easeInOutElastic:B,easeInBack:z,easeOutBack:Q,easeInOutBack:te,easeInBounce:ne,easeOutBounce:ie,easeInOutBounce:G}}(),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.util.object.clone,r=i.util.toFixed,o=i.util.parseUnit,a=i.util.multiplyTransformMatrices,n=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],h=["symbol","image","marker","pattern","view","svg"],u=["pattern","defs","symbol","metadata","clipPath","mask","desc"],f=["symbol","g","a","svg","clipPath","defs"],g={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},m={stroke:"strokeOpacity",fill:"fillOpacity"},y="font-size",C="clip-path";i.svgValidTagNamesRegEx=O(n),i.svgViewBoxElementsRegEx=O(h),i.svgInvalidAncestorsRegEx=O(u),i.svgValidParentsRegEx=O(f),i.cssRules={},i.gradientDefs={},i.clipPaths={};function w(b){return b in g?g[b]:b}function T(b,k,M,F){var X=Object.prototype.toString.call(k)==="[object Array]",R;if((b==="fill"||b==="stroke")&&k==="none")k="";else{if(b==="strokeUniform")return k==="non-scaling-stroke";if(b==="strokeDashArray")k==="none"?k=null:k=k.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(b==="transformMatrix")M&&M.transformMatrix?k=a(M.transformMatrix,i.parseTransformAttribute(k)):k=i.parseTransformAttribute(k);else if(b==="visible")k=k!=="none"&&k!=="hidden",M&&M.visible===!1&&(k=!1);else if(b==="opacity")k=parseFloat(k),M&&typeof M.opacity<"u"&&(k*=M.opacity);else if(b==="textAnchor")k=k==="start"?"left":k==="end"?"right":"center";else if(b==="charSpacing")R=o(k,F)/F*1e3;else if(b==="paintFirst"){var U=k.indexOf("fill"),q=k.indexOf("stroke"),k="fill";(U>-1&&q>-1&&q<U||U===-1&&q>-1)&&(k="stroke")}else{if(b==="href"||b==="xlink:href"||b==="font")return k;if(b==="imageSmoothing")return k==="optimizeQuality";R=X?k.map(o):o(k,F)}}return!X&&isNaN(R)?k:R}function O(b){return new RegExp("^("+b.join("|")+")\\b","i")}function L(b){for(var k in m)if(!(typeof b[m[k]]>"u"||b[k]==="")){if(typeof b[k]>"u"){if(!i.Object.prototype[k])continue;b[k]=i.Object.prototype[k]}if(b[k].indexOf("url(")!==0){var M=new i.Color(b[k]);b[k]=M.setAlpha(r(M.getAlpha()*b[m[k]],2)).toRgba()}}return b}function I(b,k){var M,F=[],X,R,U;for(R=0,U=k.length;R<U;R++)M=k[R],X=b.getElementsByTagName(M),F=F.concat(Array.prototype.slice.call(X));return F}i.parseTransformAttribute=function(){function b(Y,ae){var ue=i.util.cos(ae[0]),he=i.util.sin(ae[0]),ye=0,de=0;ae.length===3&&(ye=ae[1],de=ae[2]),Y[0]=ue,Y[1]=he,Y[2]=-he,Y[3]=ue,Y[4]=ye-(ue*ye-he*de),Y[5]=de-(he*ye+ue*de)}function k(Y,ae){var ue=ae[0],he=ae.length===2?ae[1]:ae[0];Y[0]=ue,Y[3]=he}function M(Y,ae,ue){Y[ue]=Math.tan(i.util.degreesToRadians(ae[0]))}function F(Y,ae){Y[4]=ae[0],ae.length===2&&(Y[5]=ae[1])}var X=i.iMatrix,R=i.reNum,U=i.commaWsp,q="(?:(skewX)\\s*\\(\\s*("+R+")\\s*\\))",Z="(?:(skewY)\\s*\\(\\s*("+R+")\\s*\\))",j="(?:(rotate)\\s*\\(\\s*("+R+")(?:"+U+"("+R+")"+U+"("+R+"))?\\s*\\))",A="(?:(scale)\\s*\\(\\s*("+R+")(?:"+U+"("+R+"))?\\s*\\))",H="(?:(translate)\\s*\\(\\s*("+R+")(?:"+U+"("+R+"))?\\s*\\))",V="(?:(matrix)\\s*\\(\\s*("+R+")"+U+"("+R+")"+U+"("+R+")"+U+"("+R+")"+U+"("+R+")"+U+"("+R+")\\s*\\))",N="(?:"+V+"|"+H+"|"+A+"|"+j+"|"+q+"|"+Z+")",$="(?:"+N+"(?:"+U+"*"+N+")*)",ee="^\\s*(?:"+$+"?)\\s*$",le=new RegExp(ee),oe=new RegExp(N,"g");return function(Y){var ae=X.concat(),ue=[];if(!Y||Y&&!le.test(Y))return ae;Y.replace(oe,function(ye){var de=new RegExp(N).exec(ye).filter(function(qt){return!!qt}),Be=de[1],ke=de.slice(2).map(parseFloat);switch(Be){case"translate":F(ae,ke);break;case"rotate":ke[0]=i.util.degreesToRadians(ke[0]),b(ae,ke);break;case"scale":k(ae,ke);break;case"skewX":M(ae,ke,2);break;case"skewY":M(ae,ke,1);break;case"matrix":ae=ke;break}ue.push(ae.concat()),ae=X.concat()});for(var he=ue[0];ue.length>1;)ue.shift(),he=i.util.multiplyTransformMatrices(he,ue[0]);return he}}();function K(b,k){var M,F;b.replace(/;\s*$/,"").split(";").forEach(function(X){var R=X.split(":");M=R[0].trim().toLowerCase(),F=R[1].trim(),k[M]=F})}function B(b,k){var M,F;for(var X in b)typeof b[X]>"u"||(M=X.toLowerCase(),F=b[X],k[M]=F)}function z(b,k){var M={};for(var F in i.cssRules[k])if(Q(b,F.split(" ")))for(var X in i.cssRules[k][F])M[X]=i.cssRules[k][F][X];return M}function Q(b,k){var M,F=!0;return M=ne(b,k.pop()),M&&k.length&&(F=te(b,k)),M&&F&&k.length===0}function te(b,k){for(var M,F=!0;b.parentNode&&b.parentNode.nodeType===1&&k.length;)F&&(M=k.pop()),b=b.parentNode,F=ne(b,M);return k.length===0}function ne(b,k){var M=b.nodeName,F=b.getAttribute("class"),X=b.getAttribute("id"),R,U;if(R=new RegExp("^"+M,"i"),k=k.replace(R,""),X&&k.length&&(R=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),k=k.replace(R,"")),F&&k.length)for(F=F.split(" "),U=F.length;U--;)R=new RegExp("\\."+F[U]+"(?![a-zA-Z\\-]+)","i"),k=k.replace(R,"");return k.length===0}function ie(b,k){var M;if(b.getElementById&&(M=b.getElementById(k)),M)return M;var F,X,R,U=b.getElementsByTagName("*");for(X=0,R=U.length;X<R;X++)if(F=U[X],k===F.getAttribute("id"))return F}function G(b){for(var k=I(b,["use","svg:use"]),M=0;k.length&&M<k.length;){var F=k[M],X=F.getAttribute("xlink:href")||F.getAttribute("href");if(X===null)return;var R=X.substr(1),U=F.getAttribute("x")||0,q=F.getAttribute("y")||0,Z=ie(b,R).cloneNode(!0),j=(Z.getAttribute("transform")||"")+" translate("+U+", "+q+")",A,H=k.length,V,N,$,ee,le=i.svgNS;if(E(Z),/^svg$/i.test(Z.nodeName)){var oe=Z.ownerDocument.createElementNS(le,"g");for(N=0,$=Z.attributes,ee=$.length;N<ee;N++)V=$.item(N),oe.setAttributeNS(le,V.nodeName,V.nodeValue);for(;Z.firstChild;)oe.appendChild(Z.firstChild);Z=oe}for(N=0,$=F.attributes,ee=$.length;N<ee;N++)V=$.item(N),!(V.nodeName==="x"||V.nodeName==="y"||V.nodeName==="xlink:href"||V.nodeName==="href")&&(V.nodeName==="transform"?j=V.nodeValue+" "+j:Z.setAttribute(V.nodeName,V.nodeValue));Z.setAttribute("transform",j),Z.setAttribute("instantiated_by_use","1"),Z.removeAttribute("id"),A=F.parentNode,A.replaceChild(Z,F),k.length===H&&M++}}var x=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function E(b){if(i.svgViewBoxElementsRegEx.test(b.nodeName)){var k=b.getAttribute("viewBox"),M=1,F=1,X=0,R=0,U,q,Z,j,A=b.getAttribute("width"),H=b.getAttribute("height"),V=b.getAttribute("x")||0,N=b.getAttribute("y")||0,$=b.getAttribute("preserveAspectRatio")||"",ee=!k||!(k=k.match(x)),le=!A||!H||A==="100%"||H==="100%",oe=ee&&le,Y={},ae="",ue=0,he=0;if(Y.width=0,Y.height=0,Y.toBeParsed=oe,ee&&(V||N)&&b.parentNode&&b.parentNode.nodeName!=="#document"&&(ae=" translate("+o(V)+" "+o(N)+") ",Z=(b.getAttribute("transform")||"")+ae,b.setAttribute("transform",Z),b.removeAttribute("x"),b.removeAttribute("y")),oe)return Y;if(ee)return Y.width=o(A),Y.height=o(H),Y;if(X=-parseFloat(k[1]),R=-parseFloat(k[2]),U=parseFloat(k[3]),q=parseFloat(k[4]),Y.minX=X,Y.minY=R,Y.viewBoxWidth=U,Y.viewBoxHeight=q,le?(Y.width=U,Y.height=q):(Y.width=o(A),Y.height=o(H),M=Y.width/U,F=Y.height/q),$=i.util.parsePreserveAspectRatioAttribute($),$.alignX!=="none"&&($.meetOrSlice==="meet"&&(F=M=M>F?F:M),$.meetOrSlice==="slice"&&(F=M=M>F?M:F),ue=Y.width-U*M,he=Y.height-q*M,$.alignX==="Mid"&&(ue/=2),$.alignY==="Mid"&&(he/=2),$.alignX==="Min"&&(ue=0),$.alignY==="Min"&&(he=0)),M===1&&F===1&&X===0&&R===0&&V===0&&N===0)return Y;if((V||N)&&b.parentNode.nodeName!=="#document"&&(ae=" translate("+o(V)+" "+o(N)+") "),Z=ae+" matrix("+M+" 0 0 "+F+" "+(X*M+ue)+" "+(R*F+he)+") ",b.nodeName==="svg"){for(j=b.ownerDocument.createElementNS(i.svgNS,"g");b.firstChild;)j.appendChild(b.firstChild);b.appendChild(j)}else j=b,j.removeAttribute("x"),j.removeAttribute("y"),Z=j.getAttribute("transform")+Z;return j.setAttribute("transform",Z),Y}}function P(b,k){for(;b&&(b=b.parentNode);)if(b.nodeName&&k.test(b.nodeName.replace("svg:",""))&&!b.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(b,k,M,F){if(b){G(b);var X=i.Object.__uid++,R,U,q=E(b),Z=i.util.toArray(b.getElementsByTagName("*"));if(q.crossOrigin=F&&F.crossOrigin,q.svgUid=X,Z.length===0&&i.isLikelyNode){Z=b.selectNodes('//*[name(.)!="svg"]');var j=[];for(R=0,U=Z.length;R<U;R++)j[R]=Z[R];Z=j}var A=Z.filter(function(V){return E(V),i.svgValidTagNamesRegEx.test(V.nodeName.replace("svg:",""))&&!P(V,i.svgInvalidAncestorsRegEx)});if(!A||A&&!A.length){k&&k([],{});return}var H={};Z.filter(function(V){return V.nodeName.replace("svg:","")==="clipPath"}).forEach(function(V){var N=V.getAttribute("id");H[N]=i.util.toArray(V.getElementsByTagName("*")).filter(function($){return i.svgValidTagNamesRegEx.test($.nodeName.replace("svg:",""))})}),i.gradientDefs[X]=i.getGradientDefs(b),i.cssRules[X]=i.getCSSRules(b),i.clipPaths[X]=H,i.parseElements(A,function(V,N){k&&(k(V,q,N,Z),delete i.gradientDefs[X],delete i.cssRules[X],delete i.clipPaths[X])},c(q),M,F)}};function D(b,k){var M=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],F="xlink:href",X=k.getAttribute(F).substr(1),R=ie(b,X);if(R&&R.getAttribute(F)&&D(b,R),M.forEach(function(q){R&&!k.hasAttribute(q)&&R.hasAttribute(q)&&k.setAttribute(q,R.getAttribute(q))}),!k.children.length)for(var U=R.cloneNode(!0);U.firstChild;)k.appendChild(U.firstChild);k.removeAttribute(F)}var W=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");l(i,{parseFontDeclaration:function(b,k){var M=b.match(W);if(M){var F=M[1],X=M[3],R=M[4],U=M[5],q=M[6];F&&(k.fontStyle=F),X&&(k.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),R&&(k.fontSize=o(R)),q&&(k.fontFamily=q),U&&(k.lineHeight=U==="normal"?1:U)}},getGradientDefs:function(b){var k=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],M=I(b,k),F,X=0,R={};for(X=M.length;X--;)F=M[X],F.getAttribute("xlink:href")&&D(b,F),R[F.getAttribute("id")]=F;return R},parseAttributes:function(b,k,M){if(b){var F,X={},R,U;typeof M>"u"&&(M=b.getAttribute("svgUid")),b.parentNode&&i.svgValidParentsRegEx.test(b.parentNode.nodeName)&&(X=i.parseAttributes(b.parentNode,k,M));var q=k.reduce(function($,ee){return F=b.getAttribute(ee),F&&($[ee]=F),$},{}),Z=l(z(b,M),i.parseStyleAttribute(b));q=l(q,Z),Z[C]&&b.setAttribute(C,Z[C]),R=U=X.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,q[y]&&(q[y]=R=o(q[y],U));var j,A,H={};for(var V in q)j=w(V),A=T(j,q[V],X,R),H[j]=A;H&&H.font&&i.parseFontDeclaration(H.font,H);var N=l(X,H);return i.svgValidParentsRegEx.test(b.nodeName)?N:L(N)}},parseElements:function(b,k,M,F,X){new i.ElementsParser(b,k,M,F,X).parse()},parseStyleAttribute:function(b){var k={},M=b.getAttribute("style");return M&&(typeof M=="string"?K(M,k):B(M,k)),k},parsePointsAttribute:function(b){if(!b)return null;b=b.replace(/,/g," ").trim(),b=b.split(/\s+/);var k=[],M,F;for(M=0,F=b.length;M<F;M+=2)k.push({x:parseFloat(b[M]),y:parseFloat(b[M+1])});return k},getCSSRules:function(b){var k=b.getElementsByTagName("style"),M,F,X={},R;for(M=0,F=k.length;M<F;M++){var U=k[M].textContent;U=U.replace(/\/\*[\s\S]*?\*\//g,""),U.trim()!==""&&(R=U.match(/[^{]*\{[\s\S]*?\}/g),R=R.map(function(q){return q.trim()}),R.forEach(function(q){var Z=q.match(/([\s\S]*?)\s*\{([^}]*)\}/),j={},A=Z[2].trim(),H=A.replace(/;$/,"").split(/\s*;\s*/);for(M=0,F=H.length;M<F;M++){var V=H[M].split(/\s*:\s*/),N=V[0],$=V[1];j[N]=$}q=Z[1],q.split(",").forEach(function(ee){ee=ee.replace(/^svg/i,"").trim(),ee!==""&&(X[ee]?i.util.object.extend(X[ee],j):X[ee]=i.util.object.clone(j))})}))}return X},loadSVGFromURL:function(b,k,M,F){b=b.replace(/^\n\s*/,"").trim(),new i.util.request(b,{method:"get",onComplete:X});function X(R){var U=R.responseXML;if(!U||!U.documentElement)return k&&k(null),!1;i.parseSVGDocument(U.documentElement,function(q,Z,j,A){k&&k(q,Z,j,A)},M,F)}},loadSVGFromString:function(b,k,M,F){var X=new i.window.DOMParser,R=X.parseFromString(b.trim(),"text/xml");i.parseSVGDocument(R.documentElement,function(U,q,Z,j){k(U,q,Z,j)},M,F)}})}(e),t.ElementsParser=function(d,i,l,c,r,o){this.elements=d,this.callback=i,this.options=l,this.reviver=c,this.svgUid=l&&l.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var i=this;this.elements.forEach(function(l,c){l.setAttribute("svgUid",i.svgUid),i.createObject(l,c)})},d.findTag=function(i){return t[t.util.string.capitalize(i.tagName.replace("svg:",""))]},d.createObject=function(i,l){var c=this.findTag(i);if(c&&c.fromElement)try{c.fromElement(i,this.createCallback(l,i),this.options)}catch(r){t.log(r)}else this.checkIfDone()},d.createCallback=function(i,l){var c=this;return function(r){var o;c.resolveGradient(r,l,"fill"),c.resolveGradient(r,l,"stroke"),r instanceof t.Image&&r._originalElement&&(o=r.parsePreserveAspectRatioAttribute(l)),r._removeTransformMatrix(o),c.resolveClipPath(r,l),c.reviver&&c.reviver(l,r),c.instances[i]=r,c.checkIfDone()}},d.extractPropertyDefinition=function(i,l,c){var r=i[l],o=this.regexUrl;if(o.test(r)){o.lastIndex=0;var a=o.exec(r)[1];return o.lastIndex=0,t[c][this.svgUid][a]}},d.resolveGradient=function(i,l,c){var r=this.extractPropertyDefinition(i,c,"gradientDefs");if(r){var o=l.getAttribute(c+"-opacity"),a=t.Gradient.fromElement(r,i,o,this.options);i.set(c,a)}},d.createClipPathCallback=function(i,l){return function(c){c._removeTransformMatrix(),c.fillRule=c.clipRule,l.push(c)}},d.resolveClipPath=function(i,l){var c=this.extractPropertyDefinition(i,"clipPath","clipPaths"),r,o,a,n,h,u;if(c){n=[],a=t.util.invertTransform(i.calcTransformMatrix());for(var f=c[0].parentNode,g=l;g.parentNode&&g.getAttribute("clip-path")!==i.clipPath;)g=g.parentNode;g.parentNode.appendChild(f);for(var m=0;m<c.length;m++)r=c[m],o=this.findTag(r),o.fromElement(r,this.createClipPathCallback(i,n),this.options);n.length===1?c=n[0]:c=new t.Group(n),h=t.util.multiplyTransformMatrices(a,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,g);var u=t.util.qrDecompose(h);c.flipX=!1,c.flipY=!1,c.set("scaleX",u.scaleX),c.set("scaleY",u.scaleY),c.angle=u.angle,c.skewX=u.skewX,c.skewY=0,c.setPositionByOrigin({x:u.translateX,y:u.translateY},"center","center"),i.clipPath=c}else delete i.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(d){var i=d.fabric||(d.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=l;function l(c,r){this.x=c,this.y=r}l.prototype={type:"point",constructor:l,add:function(c){return new l(this.x+c.x,this.y+c.y)},addEquals:function(c){return this.x+=c.x,this.y+=c.y,this},scalarAdd:function(c){return new l(this.x+c,this.y+c)},scalarAddEquals:function(c){return this.x+=c,this.y+=c,this},subtract:function(c){return new l(this.x-c.x,this.y-c.y)},subtractEquals:function(c){return this.x-=c.x,this.y-=c.y,this},scalarSubtract:function(c){return new l(this.x-c,this.y-c)},scalarSubtractEquals:function(c){return this.x-=c,this.y-=c,this},multiply:function(c){return new l(this.x*c,this.y*c)},multiplyEquals:function(c){return this.x*=c,this.y*=c,this},divide:function(c){return new l(this.x/c,this.y/c)},divideEquals:function(c){return this.x/=c,this.y/=c,this},eq:function(c){return this.x===c.x&&this.y===c.y},lt:function(c){return this.x<c.x&&this.y<c.y},lte:function(c){return this.x<=c.x&&this.y<=c.y},gt:function(c){return this.x>c.x&&this.y>c.y},gte:function(c){return this.x>=c.x&&this.y>=c.y},lerp:function(c,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new l(this.x+(c.x-this.x)*r,this.y+(c.y-this.y)*r)},distanceFrom:function(c){var r=this.x-c.x,o=this.y-c.y;return Math.sqrt(r*r+o*o)},midPointFrom:function(c){return this.lerp(c)},min:function(c){return new l(Math.min(this.x,c.x),Math.min(this.y,c.y))},max:function(c){return new l(Math.max(this.x,c.x),Math.max(this.y,c.y))},toString:function(){return this.x+","+this.y},setXY:function(c,r){return this.x=c,this.y=r,this},setX:function(c){return this.x=c,this},setY:function(c){return this.y=c,this},setFromPoint:function(c){return this.x=c.x,this.y=c.y,this},swap:function(c){var r=this.x,o=this.y;this.x=c.x,this.y=c.y,c.x=r,c.y=o},clone:function(){return new l(this.x,this.y)}}}(e),function(d){var i=d.fabric||(d.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function l(c){this.status=c,this.points=[]}i.Intersection=l,i.Intersection.prototype={constructor:l,appendPoint:function(c){return this.points.push(c),this},appendPoints:function(c){return this.points=this.points.concat(c),this}},i.Intersection.intersectLineLine=function(c,r,o,a){var n,h=(a.x-o.x)*(c.y-o.y)-(a.y-o.y)*(c.x-o.x),u=(r.x-c.x)*(c.y-o.y)-(r.y-c.y)*(c.x-o.x),f=(a.y-o.y)*(r.x-c.x)-(a.x-o.x)*(r.y-c.y);if(f!==0){var g=h/f,m=u/f;0<=g&&g<=1&&0<=m&&m<=1?(n=new l("Intersection"),n.appendPoint(new i.Point(c.x+g*(r.x-c.x),c.y+g*(r.y-c.y)))):n=new l}else h===0||u===0?n=new l("Coincident"):n=new l("Parallel");return n},i.Intersection.intersectLinePolygon=function(c,r,o){var a=new l,n=o.length,h,u,f,g;for(g=0;g<n;g++)h=o[g],u=o[(g+1)%n],f=l.intersectLineLine(c,r,h,u),a.appendPoints(f.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(c,r){var o=new l,a=c.length,n;for(n=0;n<a;n++){var h=c[n],u=c[(n+1)%a],f=l.intersectLinePolygon(h,u,r);o.appendPoints(f.points)}return o.points.length>0&&(o.status="Intersection"),o},i.Intersection.intersectPolygonRectangle=function(c,r,o){var a=r.min(o),n=r.max(o),h=new i.Point(n.x,a.y),u=new i.Point(a.x,n.y),f=l.intersectLinePolygon(a,h,c),g=l.intersectLinePolygon(h,n,c),m=l.intersectLinePolygon(n,u,c),y=l.intersectLinePolygon(u,a,c),C=new l;return C.appendPoints(f.points),C.appendPoints(g.points),C.appendPoints(m.points),C.appendPoints(y.points),C.points.length>0&&(C.status="Intersection"),C}}(e),function(d){var i=d.fabric||(d.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function l(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}i.Color=l,i.Color.prototype={_tryParsingColor:function(r){var o;r in l.colorNameMap&&(r=l.colorNameMap[r]),r==="transparent"&&(o=[255,255,255,0]),o||(o=l.sourceFromHex(r)),o||(o=l.sourceFromRgb(r)),o||(o=l.sourceFromHsl(r)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(r,o,a){r/=255,o/=255,a/=255;var n,h,u,f=i.util.array.max([r,o,a]),g=i.util.array.min([r,o,a]);if(u=(f+g)/2,f===g)n=h=0;else{var m=f-g;switch(h=u>.5?m/(2-f-g):m/(f+g),f){case r:n=(o-a)/m+(o<a?6:0);break;case o:n=(a-r)/m+2;break;case a:n=(r-o)/m+4;break}n/=6}return[Math.round(n*360),Math.round(h*100),Math.round(u*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),o,a,n;return o=r[0].toString(16),o=o.length===1?"0"+o:o,a=r[1].toString(16),a=a.length===1?"0"+a:a,n=r[2].toString(16),n=n.length===1?"0"+n:n,o.toUpperCase()+a.toUpperCase()+n.toUpperCase()},toHexa:function(){var r=this.getSource(),o;return o=Math.round(r[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var o=this.getSource();return o[3]=r,this.setSource(o),this},toGrayscale:function(){var r=this.getSource(),o=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),a=r[3];return this.setSource([o,o,o,a]),this},toBlackWhite:function(r){var o=this.getSource(),a=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),n=o[3];return r=r||127,a=Number(a)<Number(r)?0:255,this.setSource([a,a,a,n]),this},overlayWith:function(r){r instanceof l||(r=new l(r));var o=[],a=this.getAlpha(),n=.5,h=this.getSource(),u=r.getSource(),f;for(f=0;f<3;f++)o.push(Math.round(h[f]*(1-n)+u[f]*n));return o[3]=a,this.setSource(o),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function c(r,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?r+(o-r)*6*a:a<1/2?o:a<2/3?r+(o-r)*(2/3-a)*6:r}i.Color.fromRgb=function(r){return l.fromSource(l.sourceFromRgb(r))},i.Color.sourceFromRgb=function(r){var o=r.match(l.reRGBa);if(o){var a=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),n=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),h=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(a,10),parseInt(n,10),parseInt(h,10),o[4]?parseFloat(o[4]):1]}},i.Color.fromRgba=l.fromRgb,i.Color.fromHsl=function(r){return l.fromSource(l.sourceFromHsl(r))},i.Color.sourceFromHsl=function(r){var o=r.match(l.reHSLa);if(o){var a=(parseFloat(o[1])%360+360)%360/360,n=parseFloat(o[2])/(/%$/.test(o[2])?100:1),h=parseFloat(o[3])/(/%$/.test(o[3])?100:1),u,f,g;if(n===0)u=f=g=h;else{var m=h<=.5?h*(n+1):h+n-h*n,y=h*2-m;u=c(y,m,a+1/3),f=c(y,m,a),g=c(y,m,a-1/3)}return[Math.round(u*255),Math.round(f*255),Math.round(g*255),o[4]?parseFloat(o[4]):1]}},i.Color.fromHsla=l.fromHsl,i.Color.fromHex=function(r){return l.fromSource(l.sourceFromHex(r))},i.Color.sourceFromHex=function(r){if(r.match(l.reHex)){var o=r.slice(r.indexOf("#")+1),a=o.length===3||o.length===4,n=o.length===8||o.length===4,h=a?o.charAt(0)+o.charAt(0):o.substring(0,2),u=a?o.charAt(1)+o.charAt(1):o.substring(2,4),f=a?o.charAt(2)+o.charAt(2):o.substring(4,6),g=n?a?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(h,16),parseInt(u,16),parseInt(f,16),parseFloat((parseInt(g,16)/255).toFixed(2))]}},i.Color.fromSource=function(r){var o=new l;return o.setSource(r),o}}(e),function(d){var i=d.fabric||(d.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],c=["ns","nesw","ew","nwse"],r={},o="left",a="top",n="right",h="bottom",u="center",f={top:h,bottom:a,left:n,right:o,center:u},g=i.util.radiansToDegrees,m=Math.sign||function(j){return(j>0)-(j<0)||+j};function y(j,A){var H=j.angle+g(Math.atan2(A.y,A.x))+360;return Math.round(H%360/45)}function C(j,A){var H=A.transform.target,V=H.canvas,N=i.util.object.clone(A);N.target=H,V&&V.fire("object:"+j,N),H.fire(j,A)}function w(j,A){var H=A.canvas,V=H.uniScaleKey,N=j[V];return H.uniformScaling&&!N||!H.uniformScaling&&N}function T(j){return j.originX===u&&j.originY===u}function O(j,A,H){var V=j.lockScalingX,N=j.lockScalingY;return!!(V&&N||!A&&(V||N)&&H||V&&A==="x"||N&&A==="y")}function L(j,A,H){var V="not-allowed",N=w(j,H),$="";if(A.x!==0&&A.y===0?$="x":A.x===0&&A.y!==0&&($="y"),O(H,$,N))return V;var ee=y(H,A);return l[ee]+"-resize"}function I(j,A,H){var V="not-allowed";if(A.x!==0&&H.lockSkewingY||A.y!==0&&H.lockSkewingX)return V;var N=y(H,A)%4;return c[N]+"-resize"}function K(j,A,H){return j[H.canvas.altActionKey]?r.skewCursorStyleHandler(j,A,H):r.scaleCursorStyleHandler(j,A,H)}function B(j,A,H){var V=j[H.canvas.altActionKey];if(A.x===0)return V?"skewX":"scaleY";if(A.y===0)return V?"skewY":"scaleX"}function z(j,A,H){return H.lockRotation?"not-allowed":A.cursorStyle}function Q(j,A,H,V){return{e:j,transform:A,pointer:{x:H,y:V}}}function te(j){return function(A,H,V,N){var $=H.target,ee=$.getCenterPoint(),le=$.translateToOriginPoint(ee,H.originX,H.originY),oe=j(A,H,V,N);return $.setPositionByOrigin(le,H.originX,H.originY),oe}}function ne(j,A){return function(H,V,N,$){var ee=A(H,V,N,$);return ee&&C(j,Q(H,V,N,$)),ee}}function ie(j,A,H,V,N){var $=j.target,ee=$.controls[j.corner],le=$.canvas.getZoom(),oe=$.padding/le,Y=$.toLocalPoint(new i.Point(V,N),A,H);return Y.x>=oe&&(Y.x-=oe),Y.x<=-oe&&(Y.x+=oe),Y.y>=oe&&(Y.y-=oe),Y.y<=oe&&(Y.y+=oe),Y.x-=ee.offsetX,Y.y-=ee.offsetY,Y}function G(j){return j.flipX!==j.flipY}function x(j,A,H,V,N){if(j[A]!==0){var $=j._getTransformedDimensions()[V],ee=N/$*j[H];j.set(H,ee)}}function E(j,A,H,V){var N=A.target,$=N._getTransformedDimensions(0,N.skewY),ee=ie(A,A.originX,A.originY,H,V),le=Math.abs(ee.x*2)-$.x,oe=N.skewX,Y;le<2?Y=0:(Y=g(Math.atan2(le/N.scaleX,$.y/N.scaleY)),A.originX===o&&A.originY===h&&(Y=-Y),A.originX===n&&A.originY===a&&(Y=-Y),G(N)&&(Y=-Y));var ae=oe!==Y;if(ae){var ue=N._getTransformedDimensions().y;N.set("skewX",Y),x(N,"skewY","scaleY","y",ue)}return ae}function P(j,A,H,V){var N=A.target,$=N._getTransformedDimensions(N.skewX,0),ee=ie(A,A.originX,A.originY,H,V),le=Math.abs(ee.y*2)-$.y,oe=N.skewY,Y;le<2?Y=0:(Y=g(Math.atan2(le/N.scaleY,$.x/N.scaleX)),A.originX===o&&A.originY===h&&(Y=-Y),A.originX===n&&A.originY===a&&(Y=-Y),G(N)&&(Y=-Y));var ae=oe!==Y;if(ae){var ue=N._getTransformedDimensions().x;N.set("skewY",Y),x(N,"skewX","scaleX","x",ue)}return ae}function D(j,A,H,V){var N=A.target,$=N.skewX,ee,le=A.originY;if(N.lockSkewingX)return!1;if($===0){var oe=ie(A,u,u,H,V);oe.x>0?ee=o:ee=n}else $>0&&(ee=le===a?o:n),$<0&&(ee=le===a?n:o),G(N)&&(ee=ee===o?n:o);A.originX=ee;var Y=ne("skewing",te(E));return Y(j,A,H,V)}function W(j,A,H,V){var N=A.target,$=N.skewY,ee,le=A.originX;if(N.lockSkewingY)return!1;if($===0){var oe=ie(A,u,u,H,V);oe.y>0?ee=a:ee=h}else $>0&&(ee=le===o?a:h),$<0&&(ee=le===o?h:a),G(N)&&(ee=ee===a?h:a);A.originY=ee;var Y=ne("skewing",te(P));return Y(j,A,H,V)}function b(j,A,H,V){var N=A,$=N.target,ee=$.translateToOriginPoint($.getCenterPoint(),N.originX,N.originY);if($.lockRotation)return!1;var le=Math.atan2(N.ey-ee.y,N.ex-ee.x),oe=Math.atan2(V-ee.y,H-ee.x),Y=g(oe-le+N.theta),ae=!0;if($.snapAngle>0){var ue=$.snapAngle,he=$.snapThreshold||ue,ye=Math.ceil(Y/ue)*ue,de=Math.floor(Y/ue)*ue;Math.abs(Y-de)<he?Y=de:Math.abs(Y-ye)<he&&(Y=ye)}return Y<0&&(Y=360+Y),Y%=360,ae=$.angle!==Y,$.angle=Y,ae}function k(j,A,H,V,N){N=N||{};var $=A.target,ee=$.lockScalingX,le=$.lockScalingY,oe=N.by,Y,ae,ue,he,ye=w(j,$),de=O($,oe,ye),Be,ke,qt=A.gestureScale;if(de)return!1;if(qt)ae=A.scaleX*qt,ue=A.scaleY*qt;else{if(Y=ie(A,A.originX,A.originY,H,V),Be=oe!=="y"?m(Y.x):1,ke=oe!=="x"?m(Y.y):1,A.signX||(A.signX=Be),A.signY||(A.signY=ke),$.lockScalingFlip&&(A.signX!==Be||A.signY!==ke))return!1;if(he=$._getTransformedDimensions(),ye&&!oe){var Wi=Math.abs(Y.x)+Math.abs(Y.y),pt=A.original,Ac=Math.abs(he.x*pt.scaleX/$.scaleX)+Math.abs(he.y*pt.scaleY/$.scaleY),la=Wi/Ac;ae=pt.scaleX*la,ue=pt.scaleY*la}else ae=Math.abs(Y.x*$.scaleX/he.x),ue=Math.abs(Y.y*$.scaleY/he.y);T(A)&&(ae*=2,ue*=2),A.signX!==Be&&oe!=="y"&&(A.originX=f[A.originX],ae*=-1,A.signX=Be),A.signY!==ke&&oe!=="x"&&(A.originY=f[A.originY],ue*=-1,A.signY=ke)}var Fc=$.scaleX,Lc=$.scaleY;return oe?(oe==="x"&&$.set("scaleX",ae),oe==="y"&&$.set("scaleY",ue)):(!ee&&$.set("scaleX",ae),!le&&$.set("scaleY",ue)),Fc!==$.scaleX||Lc!==$.scaleY}function M(j,A,H,V){return k(j,A,H,V)}function F(j,A,H,V){return k(j,A,H,V,{by:"x"})}function X(j,A,H,V){return k(j,A,H,V,{by:"y"})}function R(j,A,H,V){return j[A.target.canvas.altActionKey]?r.skewHandlerX(j,A,H,V):r.scalingY(j,A,H,V)}function U(j,A,H,V){return j[A.target.canvas.altActionKey]?r.skewHandlerY(j,A,H,V):r.scalingX(j,A,H,V)}function q(j,A,H,V){var N=A.target,$=ie(A,A.originX,A.originY,H,V),ee=N.strokeWidth/(N.strokeUniform?N.scaleX:1),le=T(A)?2:1,oe=N.width,Y=Math.abs($.x*le/N.scaleX)-ee;return N.set("width",Math.max(Y,0)),oe!==Y}function Z(j,A,H,V){var N=A.target,$=H-A.offsetX,ee=V-A.offsetY,le=!N.get("lockMovementX")&&N.left!==$,oe=!N.get("lockMovementY")&&N.top!==ee;return le&&N.set("left",$),oe&&N.set("top",ee),(le||oe)&&C("moving",Q(j,A,H,V)),le||oe}r.scaleCursorStyleHandler=L,r.skewCursorStyleHandler=I,r.scaleSkewCursorStyleHandler=K,r.rotationWithSnapping=ne("rotating",te(b)),r.scalingEqually=ne("scaling",te(M)),r.scalingX=ne("scaling",te(F)),r.scalingY=ne("scaling",te(X)),r.scalingYOrSkewingX=R,r.scalingXOrSkewingY=U,r.changeWidth=ne("resizing",te(q)),r.skewHandlerX=D,r.skewHandlerY=W,r.dragHandler=Z,r.scaleOrSkewActionName=B,r.rotationStyleHandler=z,r.fireEvent=C,r.wrapWithFixedAnchor=te,r.wrapWithFireEvent=ne,r.getLocalPoint=ie,i.controlsUtils=r}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.degreesToRadians,c=i.controlsUtils;function r(a,n,h,u,f){u=u||{};var g=this.sizeX||u.cornerSize||f.cornerSize,m=this.sizeY||u.cornerSize||f.cornerSize,y=typeof u.transparentCorners<"u"?u.transparentCorners:f.transparentCorners,C=y?"stroke":"fill",w=!y&&(u.cornerStrokeColor||f.cornerStrokeColor),T=n,O=h,L;a.save(),a.fillStyle=u.cornerColor||f.cornerColor,a.strokeStyle=u.cornerStrokeColor||f.cornerStrokeColor,g>m?(L=g,a.scale(1,m/g),O=h*g/m):m>g?(L=m,a.scale(g/m,1),T=n*m/g):L=g,a.lineWidth=1,a.beginPath(),a.arc(T,O,L/2,0,2*Math.PI,!1),a[C](),w&&a.stroke(),a.restore()}function o(a,n,h,u,f){u=u||{};var g=this.sizeX||u.cornerSize||f.cornerSize,m=this.sizeY||u.cornerSize||f.cornerSize,y=typeof u.transparentCorners<"u"?u.transparentCorners:f.transparentCorners,C=y?"stroke":"fill",w=!y&&(u.cornerStrokeColor||f.cornerStrokeColor),T=g/2,O=m/2;a.save(),a.fillStyle=u.cornerColor||f.cornerColor,a.strokeStyle=u.cornerStrokeColor||f.cornerStrokeColor,a.lineWidth=1,a.translate(n,h),a.rotate(l(f.angle)),a[C+"Rect"](-T,-O,g,m),w&&a.strokeRect(-T,-O,g,m),a.restore()}c.renderCircleControl=r,c.renderSquareControl=o}(e),function(d){var i=d.fabric||(d.fabric={});function l(c){for(var r in c)this[r]=c[r]}i.Control=l,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(c,r){return r.cursorStyle},getActionName:function(c,r){return r.actionName},getVisibility:function(c,r){var o=c._controlsVisibility;return o&&typeof o[r]<"u"?o[r]:this.visible},setVisibility:function(c){this.visible=c},positionHandler:function(c,r){var o=i.util.transformPoint({x:this.x*c.x+this.offsetX,y:this.y*c.y+this.offsetY},r);return o},calcCornerCoords:function(c,r,o,a,n){var h,u,f,g,m=n?this.touchSizeX:this.sizeX,y=n?this.touchSizeY:this.sizeY;if(m&&y&&m!==y){var C=Math.atan2(y,m),w=Math.sqrt(m*m+y*y)/2,T=C-i.util.degreesToRadians(c),O=Math.PI/2-C-i.util.degreesToRadians(c);h=w*i.util.cos(T),u=w*i.util.sin(T),f=w*i.util.cos(O),g=w*i.util.sin(O)}else{var L=m&&y?m:r;w=L*.7071067812;var T=i.util.degreesToRadians(45-c);h=f=w*i.util.cos(T),u=g=w*i.util.sin(T)}return{tl:{x:o-g,y:a-f},tr:{x:o+h,y:a-u},bl:{x:o-h,y:a+u},br:{x:o+g,y:a+f}}},render:function(c,r,o,a,n){switch(a=a||{},a.cornerStyle||n.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,c,r,o,a,n);break;default:i.controlsUtils.renderSquareControl.call(this,c,r,o,a,n)}}}}(e),function(){function d(o,a){var n=o.getAttribute("style"),h=o.getAttribute("offset")||0,u,f,g,m;if(h=parseFloat(h)/(/%$/.test(h)?100:1),h=h<0?0:h>1?1:h,n){var y=n.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),m=y.length;m--;){var C=y[m].split(/\s*:\s*/),w=C[0].trim(),T=C[1].trim();w==="stop-color"?u=T:w==="stop-opacity"&&(g=T)}}return u||(u=o.getAttribute("stop-color")||"rgb(0,0,0)"),g||(g=o.getAttribute("stop-opacity")),u=new t.Color(u),f=u.getAlpha(),g=isNaN(parseFloat(g))?1:parseFloat(g),g*=f*a,{offset:h,color:u.toRgb(),opacity:g}}function i(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function l(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var c=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var a,n=this;Object.keys(o).forEach(function(h){n[h]=o[h]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,a={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(a.r1=o.coords.r1||0,a.r2=o.coords.r2||0),this.coords=a,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var a in o){var n=new t.Color(o[a]);this.colorStops.push({offset:parseFloat(a),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(o){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,a,o),a},toSVG:function(o,f){var n=c(this.coords,!0),h,u,f=f||{},g,m,y=c(this.colorStops,!0),C=n.r1>n.r2,w=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),T=-this.offsetX,O=-this.offsetY,L=!!f.additionalTransform,I=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(y.sort(function(te,ne){return te.offset-ne.offset}),I==="objectBoundingBox"?(T/=o.width,O/=o.height):(T+=o.width/2,O+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(T-=o.pathOffset.x,O-=o.pathOffset.y),w[4]-=T,w[5]-=O,m='id="SVGID_'+this.id+'" gradientUnits="'+I+'"',m+=' gradientTransform="'+(L?f.additionalTransform+" ":"")+t.util.matrixToSVG(w)+'" ',this.type==="linear"?g=["<linearGradient ",m,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`">
`]:this.type==="radial"&&(g=["<radialGradient ",m,' cx="',C?n.x1:n.x2,'" cy="',C?n.y1:n.y2,'" r="',C?n.r1:n.r2,'" fx="',C?n.x2:n.x1,'" fy="',C?n.y2:n.y1,`">
`]),this.type==="radial"){if(C)for(y=y.concat(),y.reverse(),h=0,u=y.length;h<u;h++)y[h].offset=1-y[h].offset;var K=Math.min(n.r1,n.r2);if(K>0){var B=Math.max(n.r1,n.r2),z=K/B;for(h=0,u=y.length;h<u;h++)y[h].offset+=z*(1-y[h].offset)}}for(h=0,u=y.length;h<u;h++){var Q=y[h];g.push("<stop ",'offset="',Q.offset*100+"%",'" style="stop-color:',Q.color,typeof Q.opacity<"u"?";stop-opacity: "+Q.opacity:";",`"/>
`)}return g.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),g.join("")},toLive:function(o){var a,n=t.util.object.clone(this.coords),h,u;if(this.type){for(this.type==="linear"?a=o.createLinearGradient(n.x1,n.y1,n.x2,n.y2):this.type==="radial"&&(a=o.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),h=0,u=this.colorStops.length;h<u;h++){var f=this.colorStops[h].color,g=this.colorStops[h].opacity,m=this.colorStops[h].offset;typeof g<"u"&&(f=new t.Color(f).setAlpha(g).toRgba()),a.addColorStop(m,f)}return a}}}),t.util.object.extend(t.Gradient,{fromElement:function(o,a,n,h){var u=parseFloat(n)/(/%$/.test(n)?100:1);u=u<0?0:u>1?1:u,isNaN(u)&&(u=1);var f=o.getElementsByTagName("stop"),g,m=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",y=o.getAttribute("gradientTransform")||"",C=[],w,T,O=0,L=0,I;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(g="linear",w=i(o)):(g="radial",w=l(o)),T=f.length;T--;)C.push(d(f[T],u));I=t.parseTransformAttribute(y),r(a,w,h,m),m==="pixels"&&(O=-a.left,L=-a.top);var K=new t.Gradient({id:o.getAttribute("id"),type:g,coords:w,colorStops:C,gradientUnits:m,gradientTransform:I,offsetX:O,offsetY:L});return K}});function r(o,a,n,h){var u,f;Object.keys(a).forEach(function(g){u=a[g],u==="Infinity"?f=1:u==="-Infinity"?f=0:(f=parseFloat(a[g],10),typeof u=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(u)&&(f*=.01,h==="pixels"&&((g==="x1"||g==="x2"||g==="r2")&&(f*=n.viewBoxWidth||n.width),(g==="y1"||g==="y2")&&(f*=n.viewBoxHeight||n.height)))),a[g]=f})}}(),function(){var d=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,l){if(i||(i={}),this.id=t.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){l&&l(this);return}else{var c=this;this.source=t.util.createImage(),t.util.loadImage(i.source,function(r,o){c.source=r,l&&l(c,o)},null,this.crossOrigin)}},toObject:function(i){var l=t.Object.NUM_FRACTION_DIGITS,c,r;return typeof this.source.src=="string"?c=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(c=this.source.toDataURL()),r={type:"pattern",source:c,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,l),offsetY:d(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,r,i),r},toSVG:function(i){var l=typeof this.source=="function"?this.source():this.source,c=l.width/i.width,r=l.height/i.height,o=this.offsetX/i.width,a=this.offsetY/i.height,n="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,a&&(r+=Math.abs(a))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(c=1,o&&(c+=Math.abs(o))),l.src?n=l.src:l.toDataURL&&(n=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+a+'" width="'+c+'" height="'+r+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+n+`"></image>
</pattern>
`},setOptions:function(i){for(var l in i)this[l]=i[l]},toLive:function(i){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":i.createPattern(l,this.repeat)}})}(),function(d){var i=d.fabric||(d.fabric={}),l=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(c){typeof c=="string"&&(c=this._parseShadow(c));for(var r in c)this[r]=c[r];this.id=i.Object.__uid++},_parseShadow:function(c){var r=c.trim(),o=i.Shadow.reOffsetsAndBlur.exec(r)||[],a=r.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:a.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(c){var r=40,o=40,a=i.Object.NUM_FRACTION_DIGITS,n=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-c.angle)),h=20,u=new i.Color(this.color);return c.width&&c.height&&(r=l((Math.abs(n.x)+this.blur)/c.width,a)*100+h,o=l((Math.abs(n.y)+this.blur)/c.height,a)*100+h),c.flipX&&(n.x*=-1),c.flipY&&(n.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,a)+`"></feGaussianBlur>
	<feOffset dx="`+l(n.x,a)+'" dy="'+l(n.y,a)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+u.toRgb()+'" flood-opacity="'+u.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var c={},r=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==r[o]&&(c[o]=this[o])},this),c}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var d=t.util.object.extend,i=t.util.getElementOffset,l=t.util.removeFromArray,c=t.util.toFixed,r=t.util.transformPoint,o=t.util.invertTransform,a=t.util.getNodeCanvas,n=t.util.createCanvasElement,h=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(u,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(u,f)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(u,f){var g=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(u),this._initOptions(f),this.interactive||this._initRetinaScaling(),f.overlayImage&&this.setOverlayImage(f.overlayImage,g),f.backgroundImage&&this.setBackgroundImage(f.backgroundImage,g),f.backgroundColor&&this.setBackgroundColor(f.backgroundColor,g),f.overlayColor&&this.setOverlayColor(f.overlayColor,g),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?t.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var u=t.devicePixelRatio;this.__initRetinaScaling(u,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(u,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(u,f,g){f.setAttribute("width",this.width*u),f.setAttribute("height",this.height*u),g.scale(u,u)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(u,f,g){return this.__setBgOverlayImage("overlayImage",u,f,g)},setBackgroundImage:function(u,f,g){return this.__setBgOverlayImage("backgroundImage",u,f,g)},setOverlayColor:function(u,f){return this.__setBgOverlayColor("overlayColor",u,f)},setBackgroundColor:function(u,f){return this.__setBgOverlayColor("backgroundColor",u,f)},__setBgOverlayImage:function(u,f,g,m){return typeof f=="string"?t.util.loadImage(f,function(y,C){if(y){var w=new t.Image(y,m);this[u]=w,w.canvas=this}g&&g(y,C)},this,m&&m.crossOrigin):(m&&f.setOptions(m),this[u]=f,f&&(f.canvas=this),g&&g(f,!1)),this},__setBgOverlayColor:function(u,f,g){return this[u]=f,this._initGradient(f,u),this._initPattern(f,u,g),this},_createCanvasElement:function(){var u=n();if(!u||(u.style||(u.style={}),typeof u.getContext>"u"))throw h;return u},_initOptions:function(u){var f=this.lowerCanvasEl;this._setOptions(u),this.width=this.width||parseInt(f.width,10)||0,this.height=this.height||parseInt(f.height,10)||0,this.lowerCanvasEl.style&&(f.width=this.width,f.height=this.height,f.style.width=this.width+"px",f.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(u){u&&u.getContext?this.lowerCanvasEl=u:this.lowerCanvasEl=t.util.getById(u)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(u,f){return this.setDimensions({width:u},f)},setHeight:function(u,f){return this.setDimensions({height:u},f)},setDimensions:function(u,f){var g;f=f||{};for(var m in u)g=u[m],f.cssOnly||(this._setBackstoreDimension(m,u[m]),g+="px",this.hasLostContext=!0),f.backstoreOnly||this._setCssDimension(m,g);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),f.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(u,f){return this.lowerCanvasEl[u]=f,this.upperCanvasEl&&(this.upperCanvasEl[u]=f),this.cacheCanvasEl&&(this.cacheCanvasEl[u]=f),this[u]=f,this},_setCssDimension:function(u,f){return this.lowerCanvasEl.style[u]=f,this.upperCanvasEl&&(this.upperCanvasEl.style[u]=f),this.wrapperEl&&(this.wrapperEl.style[u]=f),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(u){var f=this._activeObject,g=this.backgroundImage,m=this.overlayImage,y,C,w;for(this.viewportTransform=u,C=0,w=this._objects.length;C<w;C++)y=this._objects[C],y.group||y.setCoords(!0);return f&&f.setCoords(),g&&g.setCoords(!0),m&&m.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(u,f){var g=u,m=this.viewportTransform.slice(0);u=r(u,o(this.viewportTransform)),m[0]=f,m[3]=f;var y=r(u,m);return m[4]+=g.x-y.x,m[5]+=g.y-y.y,this.setViewportTransform(m)},setZoom:function(u){return this.zoomToPoint(new t.Point(0,0),u),this},absolutePan:function(u){var f=this.viewportTransform.slice(0);return f[4]=-u.x,f[5]=-u.y,this.setViewportTransform(f)},relativePan:function(u){return this.absolutePan(new t.Point(-u.x-this.viewportTransform[4],-u.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(u){this.stateful&&u.setupState(),u._set("canvas",this),u.setCoords(),this.fire("object:added",{target:u}),u.fire("added")},_onObjectRemoved:function(u){this.fire("object:removed",{target:u}),u.fire("removed"),delete u.canvas},clearContext:function(u){return u.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var u=this.contextContainer;return this.renderCanvas(u,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var u={},f=this.width,g=this.height,m=o(this.viewportTransform);return u.tl=r({x:0,y:0},m),u.br=r({x:f,y:g},m),u.tr=new t.Point(u.br.x,u.tl.y),u.bl=new t.Point(u.tl.x,u.br.y),this.vptCoords=u,u},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(u,f){var g=this.viewportTransform,m=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(u),t.util.setImageSmoothing(u,this.imageSmoothingEnabled),this.fire("before:render",{ctx:u}),this._renderBackground(u),u.save(),u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._renderObjects(u,f),u.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),m&&(m.canvas=this,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(u)),this._renderOverlay(u),this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),this.fire("after:render",{ctx:u})},drawClipPathOnCanvas:function(u){var f=this.viewportTransform,g=this.clipPath;u.save(),u.transform(f[0],f[1],f[2],f[3],f[4],f[5]),u.globalCompositeOperation="destination-in",g.transform(u),u.scale(1/g.zoomX,1/g.zoomY),u.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),u.restore()},_renderObjects:function(u,f){var g,m;for(g=0,m=f.length;g<m;++g)f[g]&&f[g].render(u)},_renderBackgroundOrOverlay:function(u,f){var g=this[f+"Color"],m=this[f+"Image"],y=this.viewportTransform,C=this[f+"Vpt"];if(!(!g&&!m)){if(g){u.save(),u.beginPath(),u.moveTo(0,0),u.lineTo(this.width,0),u.lineTo(this.width,this.height),u.lineTo(0,this.height),u.closePath(),u.fillStyle=g.toLive?g.toLive(u,this):g,C&&u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),u.transform(1,0,0,1,g.offsetX||0,g.offsetY||0);var w=g.gradientTransform||g.patternTransform;w&&u.transform(w[0],w[1],w[2],w[3],w[4],w[5]),u.fill(),u.restore()}m&&(u.save(),C&&u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),m.render(u),u.restore())}},_renderBackground:function(u){this._renderBackgroundOrOverlay(u,"background")},_renderOverlay:function(u){this._renderBackgroundOrOverlay(u,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(u){return this._centerObject(u,new t.Point(this.getCenter().left,u.getCenterPoint().y))},centerObjectV:function(u){return this._centerObject(u,new t.Point(u.getCenterPoint().x,this.getCenter().top))},centerObject:function(u){var f=this.getCenter();return this._centerObject(u,new t.Point(f.left,f.top))},viewportCenterObject:function(u){var f=this.getVpCenter();return this._centerObject(u,f)},viewportCenterObjectH:function(u){var f=this.getVpCenter();return this._centerObject(u,new t.Point(f.x,u.getCenterPoint().y)),this},viewportCenterObjectV:function(u){var f=this.getVpCenter();return this._centerObject(u,new t.Point(u.getCenterPoint().x,f.y))},getVpCenter:function(){var u=this.getCenter(),f=o(this.viewportTransform);return r({x:u.left,y:u.top},f)},_centerObject:function(u,f){return u.setPositionByOrigin(f,"center","center"),u.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(u){return this.toDatalessObject(u)},toObject:function(u){return this._toObjectMethod("toObject",u)},toDatalessObject:function(u){return this._toObjectMethod("toDatalessObject",u)},_toObjectMethod:function(u,f){var g=this.clipPath,m={version:t.version,objects:this._toObjects(u,f)};return g&&(m.clipPath=this._toObject(this.clipPath,u,f)),d(m,this.__serializeBgOverlay(u,f)),t.util.populateWithProperties(this,m,f),m},_toObjects:function(u,f){return this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){return this._toObject(g,u,f)},this)},_toObject:function(u,f,g){var m;this.includeDefaultValues||(m=u.includeDefaultValues,u.includeDefaultValues=!1);var y=u[f](g);return this.includeDefaultValues||(u.includeDefaultValues=m),y},__serializeBgOverlay:function(u,f){var g={},m=this.backgroundImage,y=this.overlayImage;return this.backgroundColor&&(g.background=this.backgroundColor.toObject?this.backgroundColor.toObject(f):this.backgroundColor),this.overlayColor&&(g.overlay=this.overlayColor.toObject?this.overlayColor.toObject(f):this.overlayColor),m&&!m.excludeFromExport&&(g.backgroundImage=this._toObject(m,u,f)),y&&!y.excludeFromExport&&(g.overlayImage=this._toObject(y,u,f)),g},svgViewportTransformation:!0,toSVG:function(u,f){u||(u={}),u.reviver=f;var g=[];return this._setSVGPreamble(g,u),this._setSVGHeader(g,u),this.clipPath&&g.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(g,"background"),this._setSVGBgOverlayImage(g,"backgroundImage",f),this._setSVGObjects(g,f),this.clipPath&&g.push(`</g>
`),this._setSVGBgOverlayColor(g,"overlay"),this._setSVGBgOverlayImage(g,"overlayImage",f),g.push("</svg>"),g.join("")},_setSVGPreamble:function(u,f){f.suppressPreamble||u.push('<?xml version="1.0" encoding="',f.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(u,f){var g=f.width||this.width,m=f.height||this.height,y,C='viewBox="0 0 '+this.width+" "+this.height+'" ',w=t.Object.NUM_FRACTION_DIGITS;f.viewBox?C='viewBox="'+f.viewBox.x+" "+f.viewBox.y+" "+f.viewBox.width+" "+f.viewBox.height+'" ':this.svgViewportTransformation&&(y=this.viewportTransform,C='viewBox="'+c(-y[4]/y[0],w)+" "+c(-y[5]/y[3],w)+" "+c(this.width/y[0],w)+" "+c(this.height/y[3],w)+'" '),u.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',g,'" ','height="',m,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(f),`</defs>
`)},createSVGClipPathMarkup:function(u){var f=this.clipPath;return f?(f.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+f.clipPathId+`" >
`+this.clipPath.toClipPathSVG(u.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var u=this,f=["background","overlay"].map(function(g){var m=u[g+"Color"];if(m&&m.toLive){var y=u[g+"Vpt"],C=u.viewportTransform,w={width:u.width/(y?C[0]:1),height:u.height/(y?C[3]:1)};return m.toSVG(w,{additionalTransform:y?t.util.matrixToSVG(C):""})}});return f.join("")},createSVGFontFacesMarkup:function(){var u="",f={},g,m,y,C,w,T,O,L,I,K=t.fontPaths,B=[];for(this._objects.forEach(function Q(te){B.push(te),te._objects&&te._objects.forEach(Q)}),L=0,I=B.length;L<I;L++)if(g=B[L],m=g.fontFamily,!(g.type.indexOf("text")===-1||f[m]||!K[m])&&(f[m]=!0,!!g.styles)){y=g.styles;for(w in y){C=y[w];for(O in C)T=C[O],m=T.fontFamily,!f[m]&&K[m]&&(f[m]=!0)}}for(var z in f)u+=[`		@font-face {
`,"			font-family: '",z,`';
`,"			src: url('",K[z],`');
`,`		}
`].join("");return u&&(u=['	<style type="text/css">',`<![CDATA[
`,u,"]]>",`</style>
`].join("")),u},_setSVGObjects:function(u,f){var g,m,y,C=this._objects;for(m=0,y=C.length;m<y;m++)g=C[m],!g.excludeFromExport&&this._setSVGObject(u,g,f)},_setSVGObject:function(u,f,g){u.push(f.toSVG(g))},_setSVGBgOverlayImage:function(u,f,g){this[f]&&!this[f].excludeFromExport&&this[f].toSVG&&u.push(this[f].toSVG(g))},_setSVGBgOverlayColor:function(u,f){var g=this[f+"Color"],m=this.viewportTransform,y=this.width,C=this.height;if(g)if(g.toLive){var w=g.repeat,T=t.util.invertTransform(m),O=this[f+"Vpt"],L=O?t.util.matrixToSVG(T):"";u.push('<rect transform="'+L+" translate(",y/2,",",C/2,')"',' x="',g.offsetX-y/2,'" y="',g.offsetY-C/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?g.source.width:y,'" height="',w==="repeat-x"||w==="no-repeat"?g.source.height:C,'" fill="url(#SVGID_'+g.id+')"',`></rect>
`)}else u.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',g,'"',`></rect>
`)},sendToBack:function(u){if(!u)return this;var f=this._activeObject,g,m,y;if(u===f&&u.type==="activeSelection")for(y=f._objects,g=y.length;g--;)m=y[g],l(this._objects,m),this._objects.unshift(m);else l(this._objects,u),this._objects.unshift(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(u){if(!u)return this;var f=this._activeObject,g,m,y;if(u===f&&u.type==="activeSelection")for(y=f._objects,g=0;g<y.length;g++)m=y[g],l(this._objects,m),this._objects.push(m);else l(this._objects,u),this._objects.push(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(u,f){if(!u)return this;var g=this._activeObject,m,y,C,w,T,O=0;if(u===g&&u.type==="activeSelection")for(T=g._objects,m=0;m<T.length;m++)y=T[m],C=this._objects.indexOf(y),C>0+O&&(w=C-1,l(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(u),C!==0&&(w=this._findNewLowerIndex(u,C,f),l(this._objects,u),this._objects.splice(w,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(u,f,g){var m,y;if(g)for(m=f,y=f-1;y>=0;--y){var C=u.intersectsWithObject(this._objects[y])||u.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(u);if(C){m=y;break}}else m=f-1;return m},bringForward:function(u,f){if(!u)return this;var g=this._activeObject,m,y,C,w,T,O=0;if(u===g&&u.type==="activeSelection")for(T=g._objects,m=T.length;m--;)y=T[m],C=this._objects.indexOf(y),C<this._objects.length-1-O&&(w=C+1,l(this._objects,y),this._objects.splice(w,0,y)),O++;else C=this._objects.indexOf(u),C!==this._objects.length-1&&(w=this._findNewUpperIndex(u,C,f),l(this._objects,u),this._objects.splice(w,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(u,f,g){var m,y,C;if(g)for(m=f,y=f+1,C=this._objects.length;y<C;++y){var w=u.intersectsWithObject(this._objects[y])||u.isContainedWithinObject(this._objects[y])||this._objects[y].isContainedWithinObject(u);if(w){m=y;break}}else m=f+1;return m},moveTo:function(u,f){return l(this._objects,u),this._objects.splice(f,0,u),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(u){u.dispose&&u.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(t.StaticCanvas.prototype,t.Observable),d(t.StaticCanvas.prototype,t.Collection),d(t.StaticCanvas.prototype,t.DataURLExporter),d(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(u){var f=n();if(!f||!f.getContext)return null;var g=f.getContext("2d");if(!g)return null;switch(u){case"setLineDash":return typeof g.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var u=a(this.lowerCanvasEl);return u&&u.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(u){var f=a(this.lowerCanvasEl);return f&&f.createJPEGStream(u)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var d=this.canvas.contextTop;d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,t.StaticCanvas.supports("setLineDash")&&d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var i=this.canvas.viewportTransform;d.save(),d.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,i=this.shadow,l=d.contextTop,c=d.getZoom();d&&d._isRetinaScaling()&&(c*=t.devicePixelRatio),l.shadowColor=i.color,l.shadowBlur=i.blur*c,l.shadowOffsetX=i.offsetX*c,l.shadowOffsetY=i.offsetY*c}},needsFullRender:function(){var d=new t.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,initialize:function(d){this.canvas=d,this._points=[]},_drawSegment:function(d,i,l){var c=i.midPointFrom(l);return d.quadraticCurveTo(i.x,i.y,c.x,c.y),c},onMouseDown:function(d,i){this.canvas._isMainEvent(i.e)&&(this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,i){if(this.canvas._isMainEvent(i.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,c=l.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,l[c-2],l[c-1],!0),r.stroke(),r.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var i=new t.Point(d.x,d.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(d){var i=new t.Point(d.x,d.y);return this._addPoint(i)},_render:function(){var d=this.canvas.contextTop,i,l,c=this._points[0],r=this._points[1];if(this._saveAndTransform(d),d.beginPath(),this._points.length===2&&c.x===r.x&&c.y===r.y){var o=this.width/1e3;c=new t.Point(c.x,c.y),r=new t.Point(r.x,r.y),c.x-=o,r.x+=o}for(d.moveTo(c.x,c.y),i=1,l=this._points.length;i<l;i++)this._drawSegment(d,c,r),c=this._points[i],r=this._points[i+1];d.lineTo(c.x,c.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var i=[],l,c=this.width/1e3,r=new t.Point(d[0].x,d[0].y),o=new t.Point(d[1].x,d[1].y),a=d.length,n=1,h=0,u=a>2;for(u&&(n=d[2].x<o.x?-1:d[2].x===o.x?0:1,h=d[2].y<o.y?-1:d[2].y===o.y?0:1),i.push("M ",r.x-n*c," ",r.y-h*c," "),l=1;l<a;l++){if(!r.eq(o)){var f=r.midPointFrom(o);i.push("Q ",r.x," ",r.y," ",f.x," ",f.y," ")}r=d[l],l+1<d.length&&(o=d[l+1])}return u&&(n=r.x>d[l-2].x?1:r.x===d[l-2].x?0:-1,h=r.y>d[l-2].y?1:r.y===d[l-2].y?0:-1),i.push("L ",r.x+n*c," ",r.y+h*c),i},createPath:function(d){var i=new t.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new t.Shadow(this.shadow)),i},decimatePoints:function(d,i){if(d.length<=2)return d;var l=this.canvas.getZoom(),c=Math.pow(i/l,2),r,o=d.length-1,a=d[0],n=[a],h;for(r=1;r<o-1;r++)h=Math.pow(a.x-d[r].x,2)+Math.pow(a.y-d[r].y,2),h>=c&&(a=d[r],n.push(a));return n.push(d[o]),n},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points).join("");if(i==="M 0 0 Q 0 0 0 0 L 0 0"){this.canvas.requestRenderAll();return}var l=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var i=this.addPoint(d),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,i),l.restore()},dot:function(d,i){d.fillStyle=i.fill,d.beginPath(),d.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,i,l,c=this.points;for(this._saveAndTransform(d),i=0,l=c.length;i<l;i++)this.dot(d,c[i]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,i,l;this.canvas.renderOnAddRemove=!1;var c=[];for(i=0,l=this.points.length;i<l;i++){var r=this.points[i],o=new t.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new t.Shadow(this.shadow)),c.push(o)}var a=new t.Group(c);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var i=new t.Point(d.x,d.y),l=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,c=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return i.radius=l,i.fill=c,this.points.push(i),i}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],l=0,c=this.sprayChunks.length;l<c;l++)for(var r=this.sprayChunks[l],o=0,a=r.length;o<a;o++){var n=new t.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});i.push(n)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var h=new t.Group(i);this.shadow&&h.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var i={},l,c,r;for(c=0,r=d.length;c<r;c++)l=d[c].left+""+d[c].top,i[l]||(i[l]=d[c]);var o=[];for(l in i)o.push(i[l]);return o},render:function(d){var i=this.canvas.contextTop,l,c;for(i.fillStyle=this.color,this._saveAndTransform(i),l=0,c=d.length;l<c;l++){var r=d[l];typeof r.opacity<"u"&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var d=this.canvas.contextTop,i,l;for(d.fillStyle=this.color,this._saveAndTransform(d),i=0,l=this.sprayChunks.length;i<l;i++)this.render(this.sprayChunks[i]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var i,l,c,r=this.width/2,o;for(o=0;o<this.density;o++){i=t.util.getRandomInt(d.x-r,d.x+r),l=t.util.getRandomInt(d.y-r,d.y+r),this.dotWidthVariance?c=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):c=this.dotWidth;var a=new t.Point(i,l);a.width=c,this.randomOpacity&&(a.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var d=20,i=5,l=t.util.createCanvasElement(),c=l.getContext("2d");return l.width=l.height=d+i,c.fillStyle=this.color,c.beginPath(),c.arc(d/2,d/2,d/2,0,Math.PI*2,!1),c.closePath(),c.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(d){var i=this.callSuper("createPath",d),l=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),i}}),function(){var d=t.util.getPointer,i=t.util.degreesToRadians,l=Math.abs,c=t.StaticCanvas.supports("setLineDash"),r=t.util.isTouchEvent,o=.5;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(n,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(n,h),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var n=this.getActiveObjects(),h,u,f;if(n.length>0&&!this.preserveObjectStacking){u=[],f=[];for(var g=0,m=this._objects.length;g<m;g++)h=this._objects[g],n.indexOf(h)===-1?u.push(h):f.push(h);n.length>1&&(this._activeObject._objects=f),u.push.apply(u,f)}else u=this._objects;return u},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var n=this.contextContainer;return this.renderCanvas(n,this._chooseObjectsToRender()),this},renderTopLayer:function(n){n.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(n),this.contextTopDirty=!0),n.restore()},renderTop:function(){var n=this.contextTop;return this.clearContext(n),this.renderTopLayer(n),this.fire("after:render"),this},_normalizePointer:function(n,h){var u=n.calcTransformMatrix(),f=t.util.invertTransform(u),g=this.restorePointerVpt(h);return t.util.transformPoint(g,f)},isTargetTransparent:function(n,h,u){if(n.shouldCache()&&n._cacheCanvas&&n!==this._activeObject){var f=this._normalizePointer(n,{x:h,y:u}),g=Math.max(n.cacheTranslationX+f.x*n.zoomX,0),m=Math.max(n.cacheTranslationY+f.y*n.zoomY,0),T=t.util.isTransparent(n._cacheContext,Math.round(g),Math.round(m),this.targetFindTolerance);return T}var y=this.contextCache,C=n.selectionBackgroundColor,w=this.viewportTransform;n.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(w[0],w[1],w[2],w[3],w[4],w[5]),n.render(y),y.restore(),n.selectionBackgroundColor=C;var T=t.util.isTransparent(y,h,u,this.targetFindTolerance);return T},_isSelectionKeyPressed:function(n){var h=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?h=!!this.selectionKey.find(function(u){return n[u]===!0}):h=n[this.selectionKey],h},_shouldClearSelection:function(n,h){var u=this.getActiveObjects(),f=this._activeObject;return!h||h&&f&&u.length>1&&u.indexOf(h)===-1&&f!==h&&!this._isSelectionKeyPressed(n)||h&&!h.evented||h&&!h.selectable&&f&&f!==h},_shouldCenterTransform:function(n,h,u){if(n){var f;return h==="scale"||h==="scaleX"||h==="scaleY"||h==="resizing"?f=this.centeredScaling||n.centeredScaling:h==="rotate"&&(f=this.centeredRotation||n.centeredRotation),f?!u:u}},_getOriginFromCorner:function(n,h){var u={x:n.originX,y:n.originY};return h==="ml"||h==="tl"||h==="bl"?u.x="right":(h==="mr"||h==="tr"||h==="br")&&(u.x="left"),h==="tl"||h==="mt"||h==="tr"?u.y="bottom":(h==="bl"||h==="mb"||h==="br")&&(u.y="top"),u},_getActionFromCorner:function(n,h,u,f){if(!h||!n)return"drag";var g=f.controls[h];return g.getActionName(u,g,f)},_setupCurrentTransform:function(n,h,u){if(h){var f=this.getPointer(n),g=h.__corner,m=h.controls[g],y=u&&g?m.getActionHandler(n,h,m):t.controlsUtils.dragHandler,C=this._getActionFromCorner(u,g,n,h),w=this._getOriginFromCorner(h,g),T=n[this.centeredKey],O={target:h,action:C,actionHandler:y,corner:g,scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,offsetX:f.x-h.left,offsetY:f.y-h.top,originX:w.x,originY:w.y,ex:f.x,ey:f.y,lastX:f.x,lastY:f.y,theta:i(h.angle),width:h.width*h.scaleX,shiftKey:n.shiftKey,altKey:T,original:t.util.saveObjectTransform(h)};this._shouldCenterTransform(h,C,T)&&(O.originX="center",O.originY="center"),O.original.originX=w.x,O.original.originY=w.y,this._currentTransform=O,this._beforeTransform(n)}},setCursor:function(n){this.upperCanvasEl.style.cursor=n},_drawSelection:function(n){var h=this._groupSelector,u=h.left,f=h.top,g=l(u),m=l(f);if(this.selectionColor&&(n.fillStyle=this.selectionColor,n.fillRect(h.ex-(u>0?0:-u),h.ey-(f>0?0:-f),g,m)),!(!this.selectionLineWidth||!this.selectionBorderColor))if(n.lineWidth=this.selectionLineWidth,n.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!c){var y=h.ex+o-(u>0?0:g),C=h.ey+o-(f>0?0:m);n.beginPath(),t.util.drawDashedLine(n,y,C,y+g,C,this.selectionDashArray),t.util.drawDashedLine(n,y,C+m-1,y+g,C+m-1,this.selectionDashArray),t.util.drawDashedLine(n,y,C,y,C+m,this.selectionDashArray),t.util.drawDashedLine(n,y+g-1,C,y+g-1,C+m,this.selectionDashArray),n.closePath(),n.stroke()}else t.Object.prototype._setLineDash.call(this,n,this.selectionDashArray),n.strokeRect(h.ex+o-(u>0?0:g),h.ey+o-(f>0?0:m),g,m)},findTarget:function(n,h){if(!this.skipTargetFind){var u=!0,f=this.getPointer(n,u),g=this._activeObject,m=this.getActiveObjects(),y,C,w=r(n),T=m.length>1&&!h||m.length===1;if(this.targets=[],T&&g._findTargetCorner(f,w)||m.length>1&&!h&&g===this._searchPossibleTargets([g],f))return g;if(m.length===1&&g===this._searchPossibleTargets([g],f))if(this.preserveObjectStacking)y=g,C=this.targets,this.targets=[];else return g;var O=this._searchPossibleTargets(this._objects,f);return n[this.altSelectionKey]&&O&&y&&O!==y&&(O=y,this.targets=C),O}},_checkTarget:function(n,h,u){if(h&&h.visible&&h.evented&&h.containsPoint(n))if((this.perPixelTargetFind||h.perPixelTargetFind)&&!h.isEditing){var f=this.isTargetTransparent(h,u.x,u.y);if(!f)return!0}else return!0},_searchPossibleTargets:function(n,h){for(var u,f=n.length,g;f--;){var m=n[f],y=m.group?this._normalizePointer(m.group,h):h;if(this._checkTarget(y,m,h)){u=n[f],u.subTargetCheck&&u instanceof t.Group&&(g=this._searchPossibleTargets(u._objects,h),g&&this.targets.push(g));break}}return u},restorePointerVpt:function(n){return t.util.transformPoint(n,t.util.invertTransform(this.viewportTransform))},getPointer:function(n,h){if(this._absolutePointer&&!h)return this._absolutePointer;if(this._pointer&&h)return this._pointer;var u=d(n),f=this.upperCanvasEl,g=f.getBoundingClientRect(),m=g.width||0,y=g.height||0,C;(!m||!y)&&("top"in g&&"bottom"in g&&(y=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(m=Math.abs(g.right-g.left))),this.calcOffset(),u.x=u.x-this._offset.left,u.y=u.y-this._offset.top,h||(u=this.restorePointerVpt(u));var w=this.getRetinaScaling();return w!==1&&(u.x/=w,u.y/=w),m===0||y===0?C={width:1,height:1}:C={width:f.width/m,height:f.height/y},{x:u.x*C.width,y:u.y*C.height}},_createUpperCanvas:function(){var n=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),h=this.lowerCanvasEl,u=this.upperCanvasEl;u?u.className="":(u=this._createCanvasElement(),this.upperCanvasEl=u),t.util.addClass(u,"upper-canvas "+n),this.wrapperEl.appendChild(u),this._copyCanvasStyle(h,u),this._applyCanvasStyle(u),this.contextTop=u.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(n){var h=this.width||n.width,u=this.height||n.height;t.util.setStyle(n,{position:"absolute",width:h+"px",height:u+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),n.width=h,n.height=u,t.util.makeElementUnselectable(n)},_copyCanvasStyle:function(n,h){h.style.cssText=n.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var n=this._activeObject;return n?n.type==="activeSelection"&&n._objects?n._objects.slice(0):[n]:[]},_onObjectRemoved:function(n){n===this._activeObject&&(this.fire("before:selection:cleared",{target:n}),this._discardActiveObject(),this.fire("selection:cleared",{target:n}),n.fire("deselected")),n===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",n)},_fireSelectionEvents:function(n,h){var u=!1,f=this.getActiveObjects(),g=[],m=[];n.forEach(function(y){f.indexOf(y)===-1&&(u=!0,y.fire("deselected",{e:h,target:y}),m.push(y))}),f.forEach(function(y){n.indexOf(y)===-1&&(u=!0,y.fire("selected",{e:h,target:y}),g.push(y))}),n.length>0&&f.length>0?u&&this.fire("selection:updated",{e:h,selected:g,deselected:m,updated:g[0]||m[0],target:this._activeObject}):f.length>0?this.fire("selection:created",{e:h,selected:g,target:this._activeObject}):n.length>0&&this.fire("selection:cleared",{e:h,deselected:m})},setActiveObject:function(n,h){var u=this.getActiveObjects();return this._setActiveObject(n,h),this._fireSelectionEvents(u,h),this},_setActiveObject:function(n,h){return this._activeObject===n||!this._discardActiveObject(h,n)||n.onSelect({e:h})?!1:(this._activeObject=n,!0)},_discardActiveObject:function(n,h){var u=this._activeObject;if(u){if(u.onDeselect({e:n,object:h}))return!1;this._activeObject=null}return!0},discardActiveObject:function(n){var h=this.getActiveObjects(),u=this.getActiveObject();return h.length&&this.fire("before:selection:cleared",{target:u,e:n}),this._discardActiveObject(n),this._fireSelectionEvents(h,n),this},dispose:function(){var n=this.wrapperEl;return this.removeListeners(),n.removeChild(this.upperCanvasEl),n.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(h){t.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this)),n.parentNode&&n.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(n){var h=this._activeObject;h&&h._renderControls(n)},_toObject:function(n,h,u){var f=this._realizeGroupTransformOnObject(n),g=this.callSuper("_toObject",n,h,u);return this._unwindGroupTransformOnObject(n,f),g},_realizeGroupTransformOnObject:function(n){if(n.group&&n.group.type==="activeSelection"&&this._activeObject===n.group){var h=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],u={};return h.forEach(function(f){u[f]=n[f]}),t.util.addTransformToObject(n,this._activeObject.calcOwnMatrix()),u}else return null},_unwindGroupTransformOnObject:function(n,h){h&&n.set(h)},_setSVGObject:function(n,h,u){var f=this._realizeGroupTransformOnObject(h);this.callSuper("_setSVGObject",n,h,u),this._unwindGroupTransformOnObject(h,f)},setViewportTransform:function(n){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,n)}});for(var a in t.StaticCanvas)a!=="prototype"&&(t.Canvas[a]=t.StaticCanvas[a])}(),function(){var d=t.util.addListener,i=t.util.removeListener,l=3,c=2,r=1,o={passive:!1};function a(n,h){return n.button&&n.button===h-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(n,h){var u=this.upperCanvasEl,f=this._getEventPrefix();n(t.window,"resize",this._onResize),n(u,f+"down",this._onMouseDown),n(u,f+"move",this._onMouseMove,o),n(u,f+"out",this._onMouseOut),n(u,f+"enter",this._onMouseEnter),n(u,"wheel",this._onMouseWheel),n(u,"contextmenu",this._onContextMenu),n(u,"dblclick",this._onDoubleClick),n(u,"dragover",this._onDragOver),n(u,"dragenter",this._onDragEnter),n(u,"dragleave",this._onDragLeave),n(u,"drop",this._onDrop),this.enablePointerEvents||n(u,"touchstart",this._onTouchStart,o),typeof eventjs<"u"&&h in eventjs&&(eventjs[h](u,"gesture",this._onGesture),eventjs[h](u,"drag",this._onDrag),eventjs[h](u,"orientation",this._onOrientationChange),eventjs[h](u,"shake",this._onShake),eventjs[h](u,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var n=this._getEventPrefix();i(t.document,n+"up",this._onMouseUp),i(t.document,"touchend",this._onTouchEnd,o),i(t.document,n+"move",this._onMouseMove,o),i(t.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(n,h){this.__onTransformGesture&&this.__onTransformGesture(n,h)},_onDrag:function(n,h){this.__onDrag&&this.__onDrag(n,h)},_onMouseWheel:function(n){this.__onMouseWheel(n)},_onMouseOut:function(n){var h=this._hoveredTarget;this.fire("mouse:out",{target:h,e:n}),this._hoveredTarget=null,h&&h.fire("mouseout",{e:n});var u=this;this._hoveredTargets.forEach(function(f){u.fire("mouse:out",{target:h,e:n}),f&&h.fire("mouseout",{e:n})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(f){f.isEditing&&f.hiddenTextarea.focus()})},_onMouseEnter:function(n){!this._currentTransform&&!this.findTarget(n)&&(this.fire("mouse:over",{target:null,e:n}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(n,h){this.__onOrientationChange&&this.__onOrientationChange(n,h)},_onShake:function(n,h){this.__onShake&&this.__onShake(n,h)},_onLongPress:function(n,h){this.__onLongPress&&this.__onLongPress(n,h)},_onDragOver:function(n){n.preventDefault();var h=this._simpleEventHandler("dragover",n);this._fireEnterLeaveEvents(h,n)},_onContextMenu:function(n){return this.stopContextMenu&&(n.stopPropagation(),n.preventDefault()),!1},_onDoubleClick:function(n){this._cacheTransformEventData(n),this._handleEvent(n,"dblclick"),this._resetTransformEventData(n)},getPointerId:function(n){var h=n.changedTouches;return h?h[0]&&h[0].identifier:this.enablePointerEvents?n.pointerId:-1},_isMainEvent:function(n){return n.isPrimary===!0?!0:n.isPrimary===!1?!1:n.type==="touchend"&&n.touches.length===0?!0:n.changedTouches?n.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(n){n.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var h=this.upperCanvasEl,u=this._getEventPrefix();d(t.document,"touchend",this._onTouchEnd,o),d(t.document,"touchmove",this._onMouseMove,o),i(h,u+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var h=this.upperCanvasEl,u=this._getEventPrefix();i(h,u+"move",this._onMouseMove,o),d(t.document,u+"up",this._onMouseUp),d(t.document,u+"move",this._onMouseMove,o)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var h=this._getEventPrefix();i(t.document,"touchend",this._onTouchEnd,o),i(t.document,"touchmove",this._onMouseMove,o);var u=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(u.upperCanvasEl,h+"down",u._onMouseDown),u._willAddMouseDown=0},400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var h=this.upperCanvasEl,u=this._getEventPrefix();this._isMainEvent(n)&&(i(t.document,u+"up",this._onMouseUp),i(t.document,u+"move",this._onMouseMove,o),d(h,u+"move",this._onMouseMove,o))},_onMouseMove:function(n){!this.allowTouchScrolling&&n.preventDefault&&n.preventDefault(),this.__onMouseMove(n)},_onResize:function(){this.calcOffset()},_shouldRender:function(n){var h=this._activeObject;return!!h!=!!n||h&&n&&h!==n?!0:(h&&h.isEditing,!1)},__onMouseUp:function(n){var h,u=this._currentTransform,f=this._groupSelector,g=!1,m=!f||f.left===0&&f.top===0;if(this._cacheTransformEventData(n),h=this._target,this._handleEvent(n,"up:before"),a(n,l)){this.fireRightClick&&this._handleEvent(n,"up",l,m);return}if(a(n,c)){this.fireMiddleClick&&this._handleEvent(n,"up",c,m),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(n);return}if(this._isMainEvent(n)){if(u&&(this._finalizeCurrentTransform(n),g=u.actionPerformed),!m){var y=h===this._activeObject;this._maybeGroupObjects(n),g||(g=this._shouldRender(h)||!y&&h===this._activeObject)}if(h){if(h.selectable&&h!==this._activeObject&&h.activeOn==="up")this.setActiveObject(h,n),g=!0;else{var C=h._findTargetCorner(this.getPointer(n,!0),t.util.isTouchEvent(n)),w=h.controls[C],T=w&&w.getMouseUpHandler(n,h,w);if(T){var O=this.getPointer(n);T(n,u,O.x,O.y)}}h.isMoving=!1}this._setCursorFromEvent(n,h),this._handleEvent(n,"up",r,m),this._groupSelector=null,this._currentTransform=null,h&&(h.__corner=0),g?this.requestRenderAll():m||this.renderTop()}},_simpleEventHandler:function(n,h){var u=this.findTarget(h),f=this.targets,g={e:h,target:u,subTargets:f};if(this.fire(n,g),u&&u.fire(n,g),!f)return u;for(var m=0;m<f.length;m++)f[m].fire(n,g);return u},_handleEvent:function(n,h,u,f){var g=this._target,m=this.targets||[],y={e:n,target:g,subTargets:m,button:u||r,isClick:f||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};h==="up"&&(y.currentTarget=this.findTarget(n),y.currentSubTargets=this.targets),this.fire("mouse:"+h,y),g&&g.fire("mouse"+h,y);for(var C=0;C<m.length;C++)m[C].fire("mouse"+h,y)},_finalizeCurrentTransform:function(n){var h=this._currentTransform,u=h.target,f,g={e:n,target:u,transform:h,action:h.action};u._scaling&&(u._scaling=!1),u.setCoords(),(h.actionPerformed||this.stateful&&u.hasStateChanged())&&(h.actionPerformed&&(f=this._addEventOptions(g,h),this._fire(f,g)),this._fire("modified",g))},_addEventOptions:function(n,h){var u,f;switch(h.action){case"scaleX":u="scaled",f="x";break;case"scaleY":u="scaled",f="y";break;case"skewX":u="skewed",f="x";break;case"skewY":u="skewed",f="y";break;case"scale":u="scaled",f="equally";break;case"rotate":u="rotated";break;case"drag":u="moved";break}return n.by=f,u},_onMouseDownInDrawingMode:function(n){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(n).requestRenderAll();var h=this.getPointer(n);this.freeDrawingBrush.onMouseDown(h,{e:n,pointer:h}),this._handleEvent(n,"down")},_onMouseMoveInDrawingMode:function(n){if(this._isCurrentlyDrawing){var h=this.getPointer(n);this.freeDrawingBrush.onMouseMove(h,{e:n,pointer:h})}this.setCursor(this.freeDrawingCursor),this._handleEvent(n,"move")},_onMouseUpInDrawingMode:function(n){var h=this.getPointer(n);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:n,pointer:h}),this._handleEvent(n,"up")},__onMouseDown:function(n){this._cacheTransformEventData(n),this._handleEvent(n,"down:before");var h=this._target;if(a(n,l)){this.fireRightClick&&this._handleEvent(n,"down",l);return}if(a(n,c)){this.fireMiddleClick&&this._handleEvent(n,"down",c);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(n);return}if(this._isMainEvent(n)&&!this._currentTransform){var u=this._pointer;this._previousPointer=u;var f=this._shouldRender(h),g=this._shouldGroup(n,h);if(this._shouldClearSelection(n,h)?this.discardActiveObject(n):g&&(this._handleGrouping(n,h),h=this._activeObject),this.selection&&(!h||!h.selectable&&!h.isEditing&&h!==this._activeObject)&&(this._groupSelector={ex:u.x,ey:u.y,top:0,left:0}),h){var m=h===this._activeObject;h.selectable&&h.activeOn==="down"&&this.setActiveObject(h,n);var y=h._findTargetCorner(this.getPointer(n,!0),t.util.isTouchEvent(n));if(h.__corner=y,h===this._activeObject&&(y||!g)){this._setupCurrentTransform(n,h,m);var C=h.controls[y],u=this.getPointer(n),w=C&&C.getMouseDownHandler(n,h,C);w&&w(n,this._currentTransform,u.x,u.y)}}this._handleEvent(n,"down"),(f||g)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(n){this._resetTransformEventData(),this._pointer=this.getPointer(n,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(n)||null},_beforeTransform:function(n){var h=this._currentTransform;this.stateful&&h.target.saveState(),this.fire("before:transform",{e:n,transform:h})},__onMouseMove:function(n){this._handleEvent(n,"move:before"),this._cacheTransformEventData(n);var h,u;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(n);return}if(this._isMainEvent(n)){var f=this._groupSelector;f?(u=this._pointer,f.left=u.x-f.ex,f.top=u.y-f.ey,this.renderTop()):this._currentTransform?this._transformObject(n):(h=this.findTarget(n)||null,this._setCursorFromEvent(n,h),this._fireOverOutEvents(h,n)),this._handleEvent(n,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(n,h){var u=this._hoveredTarget,f=this._hoveredTargets,g=this.targets,m=Math.max(f.length,g.length);this.fireSyntheticInOutEvents(n,h,{oldTarget:u,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<m;y++)this.fireSyntheticInOutEvents(g[y],h,{oldTarget:f[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(n,h){var u=this._draggedoverTarget,f=this._hoveredTargets,g=this.targets,m=Math.max(f.length,g.length);this.fireSyntheticInOutEvents(n,h,{oldTarget:u,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<m;y++)this.fireSyntheticInOutEvents(g[y],h,{oldTarget:f[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=n},fireSyntheticInOutEvents:function(n,h,u){var f,g,m=u.oldTarget,y,C,w=m!==n,T=u.canvasEvtIn,O=u.canvasEvtOut;w&&(f={e:h,target:n,previousTarget:m},g={e:h,target:m,nextTarget:n}),C=n&&w,y=m&&w,y&&(O&&this.fire(O,g),m.fire(u.evtOut,g)),C&&(T&&this.fire(T,f),n.fire(u.evtIn,f))},__onMouseWheel:function(n){this._cacheTransformEventData(n),this._handleEvent(n,"wheel"),this._resetTransformEventData()},_transformObject:function(n){var h=this.getPointer(n),u=this._currentTransform;u.reset=!1,u.shiftKey=n.shiftKey,u.altKey=n[this.centeredKey],this._performTransformAction(n,u,h),u.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(n,h,u){var f=u.x,g=u.y,m=h.action,y=!1,C=h.actionHandler;C&&(y=C(n,h,f,g)),m==="drag"&&y&&(h.target.isMoving=!0,this.setCursor(h.target.moveCursor||this.moveCursor)),h.actionPerformed=h.actionPerformed||y},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(n,h){if(!h)return this.setCursor(this.defaultCursor),!1;var u=h.hoverCursor||this.hoverCursor,f=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,g=(!f||!f.contains(h))&&h._findTargetCorner(this.getPointer(n,!0));g?this.setCursor(this.getCornerCursor(g,h,n)):(h.subTargetCheck&&this.targets.concat().reverse().map(function(m){u=m.hoverCursor||u}),this.setCursor(u))},getCornerCursor:function(n,h,u){var f=h.controls[n];return f.cursorStyleHandler(u,f,h)}})}(),function(){var d=Math.min,i=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(l,c){var r=this._activeObject;return r&&this._isSelectionKeyPressed(l)&&c&&c.selectable&&this.selection&&(r!==c||r.type==="activeSelection")&&!c.onSelect({e:l})},_handleGrouping:function(l,c){var r=this._activeObject;r.__corner||c===r&&(c=this.findTarget(l,!0),!c||!c.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(c,l):this._createActiveSelection(c,l))},_updateActiveSelection:function(l,c){var r=this._activeObject,o=r._objects.slice(0);r.contains(l)?(r.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),c)):(r.addWithUpdate(l),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,c)},_createActiveSelection:function(l,c){var r=this.getActiveObjects(),o=this._createGroup(l);this._hoveredTarget=o,this._setActiveObject(o,c),this._fireSelectionEvents(r,c)},_createGroup:function(l){var c=this._objects,r=c.indexOf(this._activeObject)<c.indexOf(l),o=r?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(l){var c=this._collectObjects(l),r;c.length===1?this.setActiveObject(c[0],l):c.length>1&&(r=new t.ActiveSelection(c.reverse(),{canvas:this}),this.setActiveObject(r,l))},_collectObjects:function(l){for(var c=[],r,o=this._groupSelector.ex,a=this._groupSelector.ey,n=o+this._groupSelector.left,h=a+this._groupSelector.top,u=new t.Point(d(o,n),d(a,h)),f=new t.Point(i(o,n),i(a,h)),g=!this.selectionFullyContained,m=o===n&&a===h,y=this._objects.length;y--&&(r=this._objects[y],!(!(!r||!r.selectable||!r.visible)&&(g&&r.intersectsWithRect(u,f)||r.isContainedWithinRect(u,f)||g&&r.containsPoint(u)||g&&r.containsPoint(f))&&(c.push(r),m))););return c.length>1&&(c=c.filter(function(C){return!C.onSelect({e:l})})),c},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var i=d.format||"png",l=d.quality||1,c=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(c,d);return t.util.toDataURL(r,i,l)},toCanvasElement:function(d,i){d=d||1,i=i||{};var l=(i.width||this.width)*d,c=(i.height||this.height)*d,r=this.getZoom(),o=this.width,a=this.height,n=r*d,h=this.viewportTransform,u=(h[4]-(i.left||0))*d,f=(h[5]-(i.top||0))*d,g=this.interactive,m=[n,0,0,n,u,f],y=this.enableRetinaScaling,C=t.util.createCanvasElement(),w=this.contextTop;return C.width=l,C.height=c,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=m,this.width=l,this.height=c,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=h,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=g,this.enableRetinaScaling=y,this.contextTop=w,C}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(d,i,l){if(d){var c=typeof d=="string"?JSON.parse(d):t.util.object.clone(d),r=this,o=c.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete c.clipPath,this._enlivenObjects(c.objects,function(n){r.clear(),r._setBgOverlay(c,function(){o?r._enlivenObjects([o],function(h){r.clipPath=h[0],r.__setupCanvas.call(r,c,n,a,i)}):r.__setupCanvas.call(r,c,n,a,i)})},l),this}},__setupCanvas:function(d,i,l,c){var r=this;i.forEach(function(o,a){r.insertAt(o,a)}),this.renderOnAddRemove=l,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),c&&c()},_setBgOverlay:function(d,i){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){i&&i();return}var c=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",d.backgroundImage,l,c),this.__setBgOverlay("overlayImage",d.overlayImage,l,c),this.__setBgOverlay("backgroundColor",d.background,l,c),this.__setBgOverlay("overlayColor",d.overlay,l,c)},__setBgOverlay:function(d,i,l,c){var r=this;if(!i){l[d]=!0,c&&c();return}d==="backgroundImage"||d==="overlayImage"?t.util.enlivenObjects([i],function(o){r[d]=o[0],l[d]=!0,c&&c()}):this["set"+t.util.string.capitalize(d,!0)](i,function(){l[d]=!0,c&&c()})},_enlivenObjects:function(d,i,l){if(!d||d.length===0){i&&i([]);return}t.util.enlivenObjects(d,function(c){i&&i(c)},null,l)},_toDataURL:function(d,i){this.clone(function(l){i(l.toDataURL(d))})},_toDataURLWithMultiplier:function(d,i,l){this.clone(function(c){l(c.toDataURLWithMultiplier(d,i))})},clone:function(d,i){var l=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(c){c.loadFromJSON(l,function(){d&&d(c)})})},cloneWithoutData:function(d){var i=t.util.createCanvasElement();i.width=this.width,i.height=this.height;var l=new t.Canvas(i);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),d&&d(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):d&&d(l)}}),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.util.object.clone,r=i.util.toFixed,o=i.util.string.capitalize,a=i.util.degreesToRadians,n=i.StaticCanvas.supports("setLineDash"),h=!i.isLikelyNode,u=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(f){f&&this.setOptions(f)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(f){var g=i.perfLimitSizeTotal,m=f.width,y=f.height,C=i.maxCacheSideLimit,w=i.minCacheSideLimit;if(m<=C&&y<=C&&m*y<=g)return m<w&&(f.width=w),y<w&&(f.height=w),f;var T=m/y,O=i.util.limitDimsByArea(T,g),L=i.util.capValue,I=L(w,O.x,C),K=L(w,O.y,C);return m>I&&(f.zoomX/=m/I,f.width=I,f.capped=!0),y>K&&(f.zoomY/=y/K,f.height=K,f.capped=!0),f},_getCacheCanvasDimensions:function(){var f=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),m=g.x*f.scaleX/this.scaleX,y=g.y*f.scaleY/this.scaleY;return{width:m+u,height:y+u,zoomX:f.scaleX,zoomY:f.scaleY,x:m,y}},_updateCacheCanvas:function(){var f=this.canvas;if(this.noScaleCache&&f&&f._currentTransform){var g=f._currentTransform.target,m=f._currentTransform.action;if(this===g&&m.slice&&m.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,C=this._limitCacheSize(this._getCacheCanvasDimensions()),w=i.minCacheSideLimit,T=C.width,O=C.height,L,I,K=C.zoomX,B=C.zoomY,z=T!==this.cacheWidth||O!==this.cacheHeight,Q=this.zoomX!==K||this.zoomY!==B,te=z||Q,ne=0,ie=0,G=!1;if(z){var x=this._cacheCanvas.width,E=this._cacheCanvas.height,P=T>x||O>E,D=(T<x*.9||O<E*.9)&&x>w&&E>w;G=P||D,P&&!C.capped&&(T>w||O>w)&&(ne=T*.1,ie=O*.1)}return te?(G?(y.width=Math.ceil(T+ne),y.height=Math.ceil(O+ie)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),L=C.x/2,I=C.y/2,this.cacheTranslationX=Math.round(y.width/2-L)+L,this.cacheTranslationY=Math.round(y.height/2-I)+I,this.cacheWidth=T,this.cacheHeight=O,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(K,B),this.zoomX=K,this.zoomY=B,!0):!1},setOptions:function(f){this._setOptions(f),this._initGradient(f.fill,"fill"),this._initGradient(f.stroke,"stroke"),this._initPattern(f.fill,"fill"),this._initPattern(f.stroke,"stroke")},transform:function(f){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&f===this.canvas.contextTop,m=this.calcTransformMatrix(!g);f.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(f){var g=i.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:r(this.left,g),top:r(this.top,g),width:r(this.width,g),height:r(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,g),scaleX:r(this.scaleX,g),scaleY:r(this.scaleY,g),angle:r(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,g),skewY:r(this.skewY,g)};return this.clipPath&&(m.clipPath=this.clipPath.toObject(f),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,m,f),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(f){return this.toObject(f)},_removeDefaultValues:function(f){var g=i.util.getKlass(f.type).prototype,m=g.stateProperties;return m.forEach(function(y){if(!(y==="left"||y==="top")){f[y]===g[y]&&delete f[y];var C=Object.prototype.toString.call(f[y])==="[object Array]"&&Object.prototype.toString.call(g[y])==="[object Array]";C&&f[y].length===0&&g[y].length===0&&delete f[y]}}),f},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var f=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(f.scaleX),scaleY:Math.abs(f.scaleY)}},getTotalObjectScaling:function(){var f=this.getObjectScaling(),g=f.scaleX,m=f.scaleY;if(this.canvas){var y=this.canvas.getZoom(),C=this.canvas.getRetinaScaling();g*=y*C,m*=y*C}return{scaleX:g,scaleY:m}},getObjectOpacity:function(){var f=this.opacity;return this.group&&(f*=this.group.getObjectOpacity()),f},_set:function(f,g){var m=f==="scaleX"||f==="scaleY",y=this[f]!==g,C=!1;return m&&(g=this._constrainScale(g)),f==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):f==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):f==="shadow"&&g&&!(g instanceof i.Shadow)?g=new i.Shadow(g):f==="dirty"&&this.group&&this.group.set("dirty",g),this[f]=g,y&&(C=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(f)>-1?(this.dirty=!0,C&&this.group.set("dirty",!0)):C&&this.stateProperties.indexOf(f)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(f){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(f.save(),this._setupCompositeOperation(f),this.drawSelectionBackground(f),this.transform(f),this._setOpacity(f),this._setShadow(f,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(f)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(f),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),f.restore())},renderCache:function(f){f=f||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,f.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(f){var g=this.clipPath;if(f.save(),g.inverted?f.globalCompositeOperation="destination-out":f.globalCompositeOperation="destination-in",g.absolutePositioned){var m=i.util.invertTransform(this.calcTransformMatrix());f.transform(m[0],m[1],m[2],m[3],m[4],m[5])}g.transform(f),f.scale(1/g.zoomX,1/g.zoomY),f.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),f.restore()},drawObject:function(f,g){var m=this.fill,y=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(f)):this._renderBackground(f),this._render(f),this._drawClipPath(f),this.fill=m,this.stroke=y},_drawClipPath:function(f){var g=this.clipPath;g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(f))},drawCacheOnCanvas:function(f){f.scale(1/this.zoomX,1/this.zoomY),f.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(f){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!f&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!f){var g=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-m/2,g,m)}return!0}return!1},_renderBackground:function(f){if(this.backgroundColor){var g=this._getNonTransformedDimensions();f.fillStyle=this.backgroundColor,f.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(f)}},_setOpacity:function(f){this.group&&!this.group._transformDone?f.globalAlpha=this.getObjectOpacity():f.globalAlpha*=this.opacity},_setStrokeStyles:function(f,g){var m=g.stroke;m&&(f.lineWidth=g.strokeWidth,f.lineCap=g.strokeLineCap,f.lineDashOffset=g.strokeDashOffset,f.lineJoin=g.strokeLineJoin,f.miterLimit=g.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTrasnform||m.patternTransform?this._applyPatternForTransformedGradient(f,m):(f.strokeStyle=m.toLive(f,this),this._applyPatternGradientTransform(f,m)):f.strokeStyle=g.stroke)},_setFillStyles:function(f,g){var m=g.fill;m&&(m.toLive?(f.fillStyle=m.toLive(f,this),this._applyPatternGradientTransform(f,g.fill)):f.fillStyle=m)},_setClippingProperties:function(f){f.globalAlpha=1,f.strokeStyle="transparent",f.fillStyle="#000000"},_setLineDash:function(f,g,m){!g||g.length===0||(1&g.length&&g.push.apply(g,g),n?f.setLineDash(g):m&&m(f))},_renderControls:function(f,g){var m=this.getViewportTransform(),y=this.calcTransformMatrix(),C,w,T;g=g||{},w=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,T=typeof g.hasControls<"u"?g.hasControls:this.hasControls,y=i.util.multiplyTransformMatrices(m,y),C=i.util.qrDecompose(y),f.save(),f.translate(C.translateX,C.translateY),f.lineWidth=1*this.borderScaleFactor,this.group||(f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),g.forActiveSelection?(f.rotate(a(C.angle)),w&&this.drawBordersInGroup(f,C,g)):(f.rotate(a(this.angle)),w&&this.drawBorders(f,g)),T&&this.drawControls(f,g),f.restore()},_setShadow:function(f){if(this.shadow){var g=this.shadow,m=this.canvas,y,C=m&&m.viewportTransform[0]||1,w=m&&m.viewportTransform[3]||1;g.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),m&&m._isRetinaScaling()&&(C*=i.devicePixelRatio,w*=i.devicePixelRatio),f.shadowColor=g.color,f.shadowBlur=g.blur*i.browserShadowBlurConstant*(C+w)*(y.scaleX+y.scaleY)/4,f.shadowOffsetX=g.offsetX*C*y.scaleX,f.shadowOffsetY=g.offsetY*w*y.scaleY}},_removeShadow:function(f){this.shadow&&(f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0)},_applyPatternGradientTransform:function(f,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var m=g.gradientTransform||g.patternTransform,y=-this.width/2+g.offsetX||0,C=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?f.transform(this.width,0,0,this.height,y,C):f.transform(1,0,0,1,y,C),m&&f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:y,offsetY:C}},_renderPaintInOrder:function(f){this.paintFirst==="stroke"?(this._renderStroke(f),this._renderFill(f)):(this._renderFill(f),this._renderStroke(f))},_render:function(){},_renderFill:function(f){this.fill&&(f.save(),this._setFillStyles(f,this),this.fillRule==="evenodd"?f.fill("evenodd"):f.fill(),f.restore())},_renderStroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(f),f.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();f.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&f.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(f,this.strokeDashArray,this._renderDashedStroke),this._setStrokeStyles(f,this),f.stroke(),f.restore()}},_applyPatternForTransformedGradient:function(f,g){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=i.util.createCanvasElement(),C,w=this.canvas.getRetinaScaling(),T=m.x/this.scaleX/w,O=m.y/this.scaleY/w;y.width=T,y.height=O,C=y.getContext("2d"),C.beginPath(),C.moveTo(0,0),C.lineTo(T,0),C.lineTo(T,O),C.lineTo(0,O),C.closePath(),C.translate(T/2,O/2),C.scale(m.zoomX/this.scaleX/w,m.zoomY/this.scaleY/w),this._applyPatternGradientTransform(C,g),C.fillStyle=g.toLive(f),C.fill(),f.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),f.scale(w*this.scaleX/m.zoomX,w*this.scaleY/m.zoomY),f.strokeStyle=C.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var f=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",f.scaleX),this.set("scaleY",f.scaleY),this.angle=f.angle,this.skewX=f.skewX,this.skewY=0}},_removeTransformMatrix:function(f){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=i.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,f&&(this.scaleX*=f.scaleX,this.scaleY*=f.scaleY,this.cropX=f.cropX,this.cropY=f.cropY,g.x+=f.offsetLeft,g.y+=f.offsetTop,this.width=f.width,this.height=f.height),this.setPositionByOrigin(g,"center","center")},clone:function(f,g){var m=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(m,f):i.Object._fromObject("Object",m,f)},cloneAsImage:function(f,g){var m=this.toCanvasElement(g);return f&&f(new i.Image(m)),this},toCanvasElement:function(f){f||(f={});var g=i.util,m=g.saveObjectTransform(this),y=this.group,C=this.shadow,w=Math.abs,T=(f.multiplier||1)*(f.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,f.withoutTransform&&g.resetObjectTransform(this),f.withoutShadow&&(this.shadow=null);var O=i.util.createCanvasElement(),L=this.getBoundingRect(!0,!0),I=this.shadow,K,B={x:0,y:0},z,Q,te;I&&(z=I.blur,I.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),B.x=2*Math.round(w(I.offsetX)+z)*w(K.scaleX),B.y=2*Math.round(w(I.offsetY)+z)*w(K.scaleY)),Q=L.width+B.x,te=L.height+B.y,O.width=Math.ceil(Q),O.height=Math.ceil(te);var ne=new i.StaticCanvas(O,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});f.format==="jpeg"&&(ne.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(ne.width/2,ne.height/2),"center","center");var ie=this.canvas;ne.add(this);var G=ne.toCanvasElement(T||1,f);return this.shadow=C,this.set("canvas",ie),y&&(this.group=y),this.set(m).setCoords(),ne._objects=[],ne.dispose(),ne=null,G},toDataURL:function(f){return f||(f={}),i.util.toDataURL(this.toCanvasElement(f),f.format||"png",f.quality||1)},isType:function(f){return this.type===f},complexity:function(){return 1},toJSON:function(f){return this.toObject(f)},rotate:function(f){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",f),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(f,g){g=g||this.canvas.getPointer(f);var m=new i.Point(g.x,g.y),y=this._getLeftTopCoords();return this.angle&&(m=i.util.rotatePoint(m,y,a(-this.angle))),{x:m.x-y.x,y:m.y-y.y}},_setupCompositeOperation:function(f){this.globalCompositeOperation&&(f.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),l(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(f,g,m,y){var C=i[f];g=c(g,!0),i.util.enlivenPatterns([g.fill,g.stroke],function(w){typeof w[0]<"u"&&(g.fill=w[0]),typeof w[1]<"u"&&(g.stroke=w[1]),i.util.enlivenObjects([g.clipPath],function(T){g.clipPath=T[0];var O=y?new C(g[y],g):new C(g);m&&m(O)})})},i.Object.__uid=0)}(e),function(){var d=t.util.degreesToRadians,i={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(c,r,o,a,n){var h=c.x,u=c.y,f,g,m;return typeof r=="string"?r=i[r]:r-=.5,typeof a=="string"?a=i[a]:a-=.5,f=a-r,typeof o=="string"?o=l[o]:o-=.5,typeof n=="string"?n=l[n]:n-=.5,g=n-o,(f||g)&&(m=this._getTransformedDimensions(),h=c.x+f*m.x,u=c.y+g*m.y),new t.Point(h,u)},translateToCenterPoint:function(c,r,o){var a=this.translateToGivenOrigin(c,r,o,"center","center");return this.angle?t.util.rotatePoint(a,c,d(this.angle)):a},translateToOriginPoint:function(c,r,o){var a=this.translateToGivenOrigin(c,"center","center",r,o);return this.angle?t.util.rotatePoint(a,c,d(this.angle)):a},getCenterPoint:function(){var c=new t.Point(this.left,this.top);return this.translateToCenterPoint(c,this.originX,this.originY)},getPointByOrigin:function(c,r){var o=this.getCenterPoint();return this.translateToOriginPoint(o,c,r)},toLocalPoint:function(c,r,o){var a=this.getCenterPoint(),n,h;return typeof r<"u"&&typeof o<"u"?n=this.translateToGivenOrigin(a,"center","center",r,o):n=new t.Point(this.left,this.top),h=new t.Point(c.x,c.y),this.angle&&(h=t.util.rotatePoint(h,a,-d(this.angle))),h.subtractEquals(n)},setPositionByOrigin:function(c,r,o){var a=this.translateToCenterPoint(c,r,o),n=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(c){var r=d(this.angle),o=this.getScaledWidth(),a=t.util.cos(r)*o,n=t.util.sin(r)*o,h,u;typeof this.originX=="string"?h=i[this.originX]:h=this.originX-.5,typeof c=="string"?u=i[c]:u=c-.5,this.left+=a*(u-h),this.top+=n*(u-h),this.setCoords(),this.originX=c},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var c=this.getCenterPoint();this.originX="center",this.originY="center",this.left=c.x,this.top=c.y},_resetOrigin:function(){var c=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=c.x,this.top=c.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(o){return[new t.Point(o.tl.x,o.tl.y),new t.Point(o.tr.x,o.tr.y),new t.Point(o.br.x,o.br.y),new t.Point(o.bl.x,o.bl.y)]}var i=t.util,l=i.degreesToRadians,c=i.multiplyTransformMatrices,r=i.transformPoint;i.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,a){return a?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,a){return d(this._getCoords(o,a))},intersectsWithRect:function(o,a,n,h){var u=this.getCoords(n,h),f=t.Intersection.intersectPolygonRectangle(u,o,a);return f.status==="Intersection"},intersectsWithObject:function(o,a,n){var h=t.Intersection.intersectPolygonPolygon(this.getCoords(a,n),o.getCoords(a,n));return h.status==="Intersection"||o.isContainedWithinObject(this,a,n)||this.isContainedWithinObject(o,a,n)},isContainedWithinObject:function(o,a,n){for(var h=this.getCoords(a,n),u=a?o.aCoords:o.lineCoords,f=0,g=o._getImageLines(u);f<4;f++)if(!o.containsPoint(h[f],g))return!1;return!0},isContainedWithinRect:function(o,a,n,h){var u=this.getBoundingRect(n,h);return u.left>=o.x&&u.left+u.width<=a.x&&u.top>=o.y&&u.top+u.height<=a.y},containsPoint:function(o,f,n,h){var u=this._getCoords(n,h),f=f||this._getImageLines(u),g=this._findCrossPoints(o,f);return g!==0&&g%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,h=this.getCoords(!0,o);return h.some(function(u){return u.x<=n.x&&u.x>=a.x&&u.y<=n.y&&u.y>=a.y})||this.intersectsWithRect(a,n,!0,o)?!0:this._containsCenterOfCanvas(a,n,o)},_containsCenterOfCanvas:function(o,a,n){var h={x:(o.x+a.x)/2,y:(o.y+a.y)/2};return!!this.containsPoint(h,null,!0,n)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;if(this.intersectsWithRect(a,n,!0,o))return!0;var h=this.getCoords(!0,o).every(function(u){return(u.x>=n.x||u.x<=a.x)&&(u.y>=n.y||u.y<=a.y)});return h&&this._containsCenterOfCanvas(a,n,o)},_getImageLines:function(o){var a={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return a},_findCrossPoints:function(o,a){var n,h,u,f,g,m=0,y;for(var C in a)if(y=a[C],!(y.o.y<o.y&&y.d.y<o.y)&&!(y.o.y>=o.y&&y.d.y>=o.y)&&(y.o.x===y.d.x&&y.o.x>=o.x?g=y.o.x:(n=0,h=(y.d.y-y.o.y)/(y.d.x-y.o.x),u=o.y-n*o.x,f=y.o.y-h*y.o.x,g=-(u-f)/(n-h)),g>=o.x&&(m+=1),m===2))break;return m},getBoundingRect:function(o,a){var n=this.getCoords(o,a);return i.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,a){var n=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(o/this.width/n)},scaleToHeight:function(o,a){var n=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(o/this.height/n)},calcCoords:function(o){return o?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var o=this.getViewportTransform(),a=this.padding,n=l(this.angle),h=i.cos(n),u=i.sin(n),f=h*a,g=u*a,m=f+g,y=f-g,C=this.calcACoords(),w={tl:r(C.tl,o),tr:r(C.tr,o),bl:r(C.bl,o),br:r(C.br,o)};return a&&(w.tl.x-=y,w.tl.y-=m,w.tr.x+=m,w.tr.y-=y,w.bl.x-=m,w.bl.y+=y,w.br.x+=y,w.br.y+=m),w},calcOCoords:function(){var o=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),n=this.getViewportTransform(),h=c(n,a),u=c(h,o),u=c(u,[1/n[0],0,0,1/n[3],0,0]),f=this._calculateCurrentDimensions(),g={};return this.forEachControl(function(m,y,C){g[y]=m.positionHandler(f,u,C)}),g},calcACoords:function(){var o=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),n=c(a,o),h=this._getTransformedDimensions(),u=h.x/2,f=h.y/2;return{tl:r({x:-u,y:-f},n),tr:r({x:u,y:-f},n),bl:r({x:-u,y:f},n),br:r({x:u,y:f},n)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var a="_",n="";return!o&&this.group&&(n=this.group.transformMatrixKey(o)+a),n+this.top+a+this.left+a+this.scaleX+a+this.scaleY+a+this.skewX+a+this.skewY+a+this.angle+a+this.originX+a+this.originY+a+this.width+a+this.height+a+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var a=this.calcOwnMatrix();if(o||!this.group)return a;var n=this.transformMatrixKey(o),h=this.matrixCache||(this.matrixCache={});return h.key===n?h.value:(this.group&&(a=c(this.group.calcTransformMatrix(!1),a)),h.key=n,h.value=a,a)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===o)return a.value;var n=this._calcTranslateMatrix(),h={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return a.key=o,a.value=i.composeMatrix(h),a.value},_calcDimensionsTransformMatrix:function(o,a,n){return i.calcDimensionsMatrix({skewX:o,skewY:a,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var o=this.strokeWidth,a=this.width+o,n=this.height+o;return{x:a,y:n}},_getTransformedDimensions:function(o,a){typeof o>"u"&&(o=this.skewX),typeof a>"u"&&(a=this.skewY);var n=this._getNonTransformedDimensions(),h,u,f=o===0&&a===0;if(this.strokeUniform?(h=this.width,u=this.height):(h=n.x,u=n.y),f)return this._finalizeDimensions(h*this.scaleX,u*this.scaleY);var g=i.sizeAfterTransform(h,u,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:a});return this._finalizeDimensions(g.x,g.y)},_finalizeDimensions:function(o,a){return this.strokeUniform?{x:o+this.strokeWidth,y:a+this.strokeWidth}:{x:o,y:a}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),a=this._getTransformedDimensions(),n=r(a,o,!0);return n.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(l,c){if(c){if(c.toLive)return l+": url(#SVGID_"+c.id+"); ";var r=new t.Color(c),o=l+": "+r.toRgb()+"; ",a=r.getAlpha();return a!==1&&(o+=l+"-opacity: "+a.toString()+"; "),o}else return l+": none; "}var i=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(l){var c=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",n=this.strokeLineCap?this.strokeLineCap:"butt",h=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=typeof this.opacity<"u"?this.opacity:"1",g=this.visible?"":" visibility: hidden;",m=l?"":this.getSvgFilter(),y=d("fill",this.fill),C=d("stroke",this.stroke);return[C,"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",n,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",h,"; ","stroke-miterlimit: ",u,"; ",y,"fill-rule: ",c,"; ","opacity: ",f,";",m,g].join("")},getSvgSpanStyles:function(l,c){var r="; ",a=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+r:"",o=l.strokeWidth?"stroke-width: "+l.strokeWidth+r:"",a=a,n=l.fontSize?"font-size: "+l.fontSize+"px"+r:"",h=l.fontStyle?"font-style: "+l.fontStyle+r:"",u=l.fontWeight?"font-weight: "+l.fontWeight+r:"",f=l.fill?d("fill",l.fill):"",g=l.stroke?d("stroke",l.stroke):"",m=this.getSvgTextDecoration(l),y=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return m&&(m="text-decoration: "+m+r),[g,o,a,n,h,u,m,f,y,c?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(c){return l[c.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,c){var r=l?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+t.util.matrixToSVG(r);return o+(c||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var c=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,c),'" y="',i(-this.height/2,c),'" width="',i(this.width,c),'" height="',i(this.height,c),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,c){c=c||{};var r=c.reviver,o=c.additionalTransform||"",a=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),n=l.indexOf("COMMON_PARTS");return l[n]=a,r?r(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,c){c=c||{};var r=c.noStyle,o=c.reviver,a=r?"":'style="'+this.getSvgStyles()+'" ',n=c.withShadow?'style="'+this.getSvgFilter()+'" ':"",h=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",f=h&&h.absolutePositioned,g=this.stroke,m=this.fill,y=this.shadow,C,w=[],T,O=l.indexOf("COMMON_PARTS"),L=c.additionalTransform;return h&&(h.clipPathId="CLIPPATH_"+t.Object.__uid++,T='<clipPath id="'+h.clipPathId+`" >
`+h.toClipPathSVG(o)+`</clipPath>
`),f&&w.push("<g ",n,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),f?"":n+this.getSvgCommons(),` >
`),C=[a,u,r?"":this.addPaintOrder()," ",L?'transform="'+L+'" ':""].join(""),l[O]=C,m&&m.toLive&&w.push(m.toSVG(this)),g&&g.toLive&&w.push(g.toSVG(this)),y&&w.push(y.toSVG(this)),h&&w.push(T),w.push(l.join("")),w.push(`</g>
`),f&&w.push(`</g>
`),o?o(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=t.util.object.extend,i="stateProperties";function l(r,o,a){var n={},h=!0;a.forEach(function(u){n[u]=r[u]}),d(r[o],n,h)}function c(r,o,a){if(r===o)return!0;if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(var n=0,h=r.length;n<h;n++)if(!c(r[n],o[n]))return!1;return!0}else if(r&&typeof r=="object"){var u=Object.keys(r),f;if(!o||typeof o!="object"||!a&&u.length!==Object.keys(o).length)return!1;for(var n=0,h=u.length;n<h;n++)if(f=u[n],!(f==="canvas"||f==="group")&&!c(r[f],o[f]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(r){r=r||i;var o="_"+r;return Object.keys(this[o]).length<this[r].length?!0:!c(this[o],this,!0)},saveState:function(r){var o=r&&r.propertySet||i,a="_"+o;return this[a]?(l(this,a,this[o]),r&&r.stateProperties&&l(this,a,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var o=r.propertySet||i;return r.propertySet=o,this["_"+o]={},this.saveState(r),this}})}(),function(){var d=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(i,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,r=i.y,o,a,n=Object.keys(this.oCoords),h=n.length-1,u;for(this.__corner=0;h>=0;h--)if(u=n[h],!!this.isControlVisible(u)&&(a=this._getImageLines(l?this.oCoords[u].touchCorner:this.oCoords[u].corner),o=this._findCrossPoints({x:c,y:r},a),o!==0&&o%2===1))return this.__corner=u,u;return!1},forEachControl:function(i){for(var l in this.controls)i(this.controls[l],l,this)},_setCornerCoords:function(){var i=this.oCoords;for(var l in i){var c=this.controls[l];i[l].corner=c.calcCornerCoords(this.angle,this.cornerSize,i[l].x,i[l].y,!1),i[l].touchCorner=c.calcCornerCoords(this.angle,this.touchCornerSize,i[l].x,i[l].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var l=this.getCenterPoint(),c=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return i.translate(l.x,l.y),i.scale(1/r[0],1/r[3]),i.rotate(d(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-c.x/2,-c.y/2,c.x,c.y),i.restore(),this},drawBorders:function(i,l){l=l||{};var c=this._calculateCurrentDimensions(),r=this.borderScaleFactor,o=c.x+r,a=c.y+r,n=typeof l.hasControls<"u"?l.hasControls:this.hasControls,h=!1;return i.save(),i.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(i,l.borderDashArray||this.borderDashArray,null),i.strokeRect(-o/2,-a/2,o,a),n&&(i.beginPath(),this.forEachControl(function(u,f,g){u.withConnection&&u.getVisibility(g,f)&&(h=!0,i.moveTo(u.x*o,u.y*a),i.lineTo(u.x*o+u.offsetX,u.y*a+u.offsetY))}),h&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,l,c){c=c||{};var r=t.util.sizeAfterTransform(this.width,this.height,l),o=this.strokeWidth,a=this.strokeUniform,n=this.borderScaleFactor,h=r.x+o*(a?this.canvas.getZoom():l.scaleX)+n,u=r.y+o*(a?this.canvas.getZoom():l.scaleY)+n;return i.save(),this._setLineDash(i,c.borderDashArray||this.borderDashArray,null),i.strokeStyle=c.borderColor||this.borderColor,i.strokeRect(-h/2,-u/2,h,u),i.restore(),this},drawControls:function(i,l){return l=l||{},i.save(),i.setTransform(this.canvas.getRetinaScaling(),0,0,this.canvas.getRetinaScaling(),0,0),i.strokeStyle=i.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,l.cornerDashArray||this.cornerDashArray,null),this.setCoords(),this.forEachControl(function(c,r,o){c.getVisibility(o,r)&&c.render(i,o.oCoords[r].x,o.oCoords[r].y,l,o)}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=l,this},setControlsVisibility:function(i){i||(i={});for(var l in i)this.setControlVisible(l,i[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,i){i=i||{};var l=function(){},c=i.onComplete||l,r=i.onChange||l,o=this;return t.util.animate({startValue:d.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(a){d.set("left",a),o.requestRenderAll(),r()},onComplete:function(){d.setCoords(),c()}}),this},fxCenterObjectV:function(d,i){i=i||{};var l=function(){},c=i.onComplete||l,r=i.onChange||l,o=this;return t.util.animate({startValue:d.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(a){d.set("top",a),o.requestRenderAll(),r()},onComplete:function(){d.setCoords(),c()}}),this},fxRemove:function(d,i){i=i||{};var l=function(){},c=i.onComplete||l,r=i.onChange||l,o=this;return t.util.animate({startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){d.set("opacity",a),o.requestRenderAll(),r()},onComplete:function(){o.remove(d),c()}}),this}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],i,l;for(i in arguments[0])d.push(i);for(var c=0,r=d.length;c<r;c++)i=d[c],l=c!==r-1,this._animate(i,arguments[0][i],arguments[1],l)}else this._animate.apply(this,arguments);return this},_animate:function(d,i,l,c){var r=this,o;i=i.toString(),l?l=t.util.object.clone(l):l={},~d.indexOf(".")&&(o=d.split("."));var a=r.colorProperties.indexOf(d)>-1||o&&r.colorProperties.indexOf(o[1])>-1,n=o?this.get(o[0])[o[1]]:this.get(d);"from"in l||(l.from=n),a||(~i.indexOf("=")?i=n+parseFloat(i.replace("=","")):i=parseFloat(i));var h={startValue:l.from,endValue:i,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(){return l.abort.call(r)},onChange:function(u,f,g){o?r[o[0]][o[1]]=u:r.set(d,u),!c&&l.onChange&&l.onChange(u,f,g)},onComplete:function(u,f,g){c||(r.setCoords(),l.onComplete&&l.onComplete(u,f,g))}};a?t.util.animateColor(h.startValue,h.endValue,h.duration,h):t.util.animate(h)}}),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.util.object.clone,r={x1:1,x2:1,y1:1,y2:1},o=i.StaticCanvas.supports("setLineDash");if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,h){n||(n=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(h)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,h){return this.callSuper("_set",n,h),typeof r[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){if(n.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var h=this.calcLinePoints();n.moveTo(h.x1,h.y1),n.lineTo(h.x2,h.y2)}n.lineWidth=this.strokeWidth;var u=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=u},_renderDashedStroke:function(n){var h=this.calcLinePoints();n.beginPath(),i.util.drawDashedLine(n,h.x1,h.y1,h.x2,h.y2,this.strokeDashArray),n.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return l(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,u=n*this.width*.5,f=h*this.height*.5,g=n*this.width*-.5,m=h*this.height*-.5;return{x1:u,x2:g,y1:f,y2:m}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(n,h,u){u=u||{};var f=i.parseAttributes(n,i.Line.ATTRIBUTE_NAMES),g=[f.x1||0,f.y1||0,f.x2||0,f.y2||0];h(new i.Line(g,l(f,u)))},i.Line.fromObject=function(n,h){function u(g){delete g.points,h&&h(g)}var f=c(n,!0);f.points=[n.x1,n.y1,n.x2,n.y2],i.Object._fromObject("Line",f,u,"points")};function a(n,h){var u=n.origin,f=n.axis1,g=n.axis2,m=n.dimension,y=h.nearest,C=h.center,w=h.farthest;return function(){switch(this.get(u)){case y:return Math.min(this.get(f),this.get(g));case C:return Math.min(this.get(f),this.get(g))+.5*this.get(m);case w:return Math.max(this.get(f),this.get(g))}}}}(e),function(d){var i=d.fabric||(d.fabric={}),l=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:l*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,o){return this.callSuper("_set",r,o),r==="radius"&&this.setRadius(o),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,o=0,a=0,n=(this.endAngle-this.startAngle)%(2*l);if(n===0)r=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+a+'" ','r="',this.radius,`" />
`];else{var h=i.util.cos(this.startAngle)*this.radius,u=i.util.sin(this.startAngle)*this.radius,f=i.util.cos(this.endAngle)*this.radius,g=i.util.sin(this.endAngle)*this.radius,m=n>l?"1":"0";r=['<path d="M '+h+" "+u," A "+this.radius+" "+this.radius," 0 ",+m+" 1"," "+f+" "+g,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(r,o){var a=i.parseAttributes(r,i.Circle.ATTRIBUTE_NAMES);if(!c(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,o(new i.Circle(a))};function c(r){return"radius"in r&&r.radius>=0}i.Circle.fromObject=function(r,o){return i.Object._fromObject("Circle",r,o)}}(e),function(d){var i=d.fabric||(d.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(l){var c=this.width/2,r=this.height/2;l.beginPath(),l.moveTo(-c,r),l.lineTo(0,-r),l.lineTo(c,r),l.closePath(),this._renderPaintInOrder(l)},_renderDashedStroke:function(l){var c=this.width/2,r=this.height/2;l.beginPath(),i.util.drawDashedLine(l,-c,r,0,-r,this.strokeDashArray),i.util.drawDashedLine(l,0,-r,c,r,this.strokeDashArray),i.util.drawDashedLine(l,c,r,-c,r,this.strokeDashArray),l.closePath()},_toSVG:function(){var l=this.width/2,c=this.height/2,r=[-l+" "+c,"0 "+-c,l+" "+c].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),i.Triangle.fromObject=function(l,c){return i.Object._fromObject("Triangle",l,c)}}(e),function(d){var i=d.fabric||(d.fabric={}),l=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this.set("rx",c&&c.rx||0),this.set("ry",c&&c.ry||0)},_set:function(c,r){switch(this.callSuper("_set",c,r),c){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(c){c.beginPath(),c.save(),c.transform(1,0,0,this.ry/this.rx,0,0),c.arc(0,0,this.rx,0,l,!1),c.restore(),this._renderPaintInOrder(c)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(c,r){var o=i.parseAttributes(c,i.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,r(new i.Ellipse(o))},i.Ellipse.fromObject=function(c,r){return i.Object._fromObject("Ellipse",c,r)}}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(c){this.callSuper("initialize",c),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(c){var r=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,n=this.height,h=-this.width/2,u=-this.height/2,f=r!==0||o!==0,g=1-.5522847498;c.beginPath(),c.moveTo(h+r,u),c.lineTo(h+a-r,u),f&&c.bezierCurveTo(h+a-g*r,u,h+a,u+g*o,h+a,u+o),c.lineTo(h+a,u+n-o),f&&c.bezierCurveTo(h+a,u+n-g*o,h+a-g*r,u+n,h+a-r,u+n),c.lineTo(h+r,u+n),f&&c.bezierCurveTo(h+g*r,u+n,h,u+n-g*o,h,u+n-o),c.lineTo(h,u+o),f&&c.bezierCurveTo(h,u+g*o,h+g*r,u,h+r,u),c.closePath(),this._renderPaintInOrder(c)},_renderDashedStroke:function(c){var r=-this.width/2,o=-this.height/2,a=this.width,n=this.height;c.beginPath(),i.util.drawDashedLine(c,r,o,r+a,o,this.strokeDashArray),i.util.drawDashedLine(c,r+a,o,r+a,o+n,this.strokeDashArray),i.util.drawDashedLine(c,r+a,o+n,r,o+n,this.strokeDashArray),i.util.drawDashedLine(c,r,o+n,r,o,this.strokeDashArray),c.closePath()},toObject:function(c){return this.callSuper("toObject",["rx","ry"].concat(c))},_toSVG:function(){var c=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',c,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(c,r,o){if(!c)return r(null);o=o||{};var a=i.parseAttributes(c,i.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var n=new i.Rect(l(o?i.util.object.clone(o):{},a));n.visible=n.visible&&n.width>0&&n.height>0,r(n)},i.Rect.fromObject=function(c,r){return i.Object._fromObject("Rect",c,r)}}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.util.array.min,r=i.util.array.max,o=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(a,n){n=n||{},this.points=a||[],this.callSuper("initialize",n),this._setPositionDimensions(n)},_setPositionDimensions:function(a){var n=this._calcDimensions(a),h;this.width=n.width,this.height=n.height,a.fromSVG||(h=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof a.left>"u"&&(this.left=a.fromSVG?n.left:h.x),typeof a.top>"u"&&(this.top=a.fromSVG?n.top:h.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var a=this.points,n=c(a,"x")||0,h=c(a,"y")||0,u=r(a,"x")||0,f=r(a,"y")||0,g=u-n,m=f-h;return{left:n,top:h,width:g,height:m}},toObject:function(a){return l(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],n=this.pathOffset.x,h=this.pathOffset.y,u=i.Object.NUM_FRACTION_DIGITS,f=0,g=this.points.length;f<g;f++)a.push(o(this.points[f].x-n,u),",",o(this.points[f].y-h,u)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var n,h=this.points.length,u=this.pathOffset.x,f=this.pathOffset.y;if(!h||isNaN(this.points[h-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-u,this.points[0].y-f);for(var g=0;g<h;g++)n=this.points[g],a.lineTo(n.x-u,n.y-f);return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},_renderDashedStroke:function(a){var n,h;a.beginPath();for(var u=0,f=this.points.length;u<f;u++)n=this.points[u],h=this.points[u+1]||n,i.util.drawDashedLine(a,n.x,n.y,h.x,h.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(a){return function(n,h,u){if(!n)return h(null);u||(u={});var f=i.parsePointsAttribute(n.getAttribute("points")),g=i.parseAttributes(n,i[a].ATTRIBUTE_NAMES);g.fromSVG=!0,h(new i[a](f,l(g,u)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(a,n){return i.Object._fromObject("Polyline",a,n,"points")}}(e),function(d){var i=d.fabric||(d.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))},_renderDashedStroke:function(l){this.callSuper("_renderDashedStroke",l),l.closePath()}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(l,c){return i.Object._fromObject("Polygon",l,c,"points")}}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.array.min,c=i.util.array.max,r=i.util.object.extend,o=Object.prototype.toString,a=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(n,h){h=h||{},this.callSuper("initialize",h),n||(n=[]);var u=o.call(n)==="[object Array]";this.path=u?i.util.makePathSimpler(n):i.util.makePathSimpler(i.util.parsePath(n)),this.path&&i.Polyline.prototype._setPositionDimensions.call(this,h)},_renderPathCommands:function(n){var h,u=0,f=0,g=0,m=0,y=0,C=0,w=-this.pathOffset.x,T=-this.pathOffset.y;n.beginPath();for(var O=0,L=this.path.length;O<L;++O)switch(h=this.path[O],h[0]){case"L":g=h[1],m=h[2],n.lineTo(g+w,m+T);break;case"M":g=h[1],m=h[2],u=g,f=m,n.moveTo(g+w,m+T);break;case"C":g=h[5],m=h[6],y=h[3],C=h[4],n.bezierCurveTo(h[1]+w,h[2]+T,y+w,C+T,g+w,m+T);break;case"Q":n.quadraticCurveTo(h[1]+w,h[2]+T,h[3]+w,h[4]+T),g=h[3],m=h[4],y=h[1],C=h[2];break;case"z":case"Z":g=u,m=f,n.closePath();break}},_render:function(n){this._renderPathCommands(n),this._renderPaintInOrder(n)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(n){return r(this.callSuper("toObject",n),{path:this.path.map(function(h){return h.slice()})})},toDatalessObject:function(n){var h=this.toObject(["sourcePath"].concat(n));return h.sourcePath&&delete h.path,h},_toSVG:function(){var n=this.path.map(function(h){return h.join(" ")}).join(" ");return["<path ","COMMON_PARTS",'d="',n,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var n=i.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,n)+", "+a(-this.pathOffset.y,n)+")"},toClipPathSVG:function(n){var h=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:n,additionalTransform:h})},toSVG:function(n){var h=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,additionalTransform:h})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var n=[],h=[],u,f=0,g=0,m=0,y=0,C,w=0,T=this.path.length;w<T;++w){switch(u=this.path[w],u[0]){case"L":m=u[1],y=u[2],C=[];break;case"M":m=u[1],y=u[2],f=m,g=y,C=[];break;case"C":C=i.util.getBoundsOfCurve(m,y,u[1],u[2],u[3],u[4],u[5],u[6]),m=u[5],y=u[6];break;case"Q":C=i.util.getBoundsOfCurve(m,y,u[1],u[2],u[1],u[2],u[3],u[4]),m=u[3],y=u[4];break;case"z":case"Z":m=f,y=g;break}C.forEach(function(Q){n.push(Q.x),h.push(Q.y)}),n.push(m),h.push(y)}var O=l(n)||0,L=l(h)||0,I=c(n)||0,K=c(h)||0,B=I-O,z=K-L;return{left:O,top:L,width:B,height:z}}}),i.Path.fromObject=function(n,h){if(typeof n.sourcePath=="string"){var u=n.sourcePath;i.loadSVGFromURL(u,function(f){var g=f[0];g.setOptions(n),h&&h(g)})}else i.Object._fromObject("Path",n,h,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(n,h,u){var f=i.parseAttributes(n,i.Path.ATTRIBUTE_NAMES);f.fromSVG=!0,h(new i.Path(f.d,r(f,u)))}}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.array.min,c=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,o,a){o=o||{},this._objects=[],a&&this.callSuper("initialize",o),this._objects=r||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(a)this._updateObjectsACoords();else{var h=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),h||this._calcBounds(),this._updateObjectsCoords(h),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,o=this._objects.length;o--;)this._objects[o].setCoords(r)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],o)},_updateObjectCoords:function(r,o){var a=r.left,n=r.top,h=!0;r.set({left:a-o.x,top:n-o.y}),r.group=this,r.setCoords(h)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var o=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),r&&(o&&i.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,o){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(r,o);if(r==="canvas")for(;a--;)this._objects[a]._set(r,o);i.Object.prototype._set.call(this,r,o)},toObject:function(r){var o=this.includeDefaultValues,a=this._objects.map(function(h){var u=h.includeDefaultValues;h.includeDefaultValues=o;var f=h.toObject(r);return h.includeDefaultValues=u,f}),n=i.Object.prototype.toObject.call(this,r);return n.objects=a,n},toDatalessObject:function(r){var o,a=this.sourcePath;if(a)o=a;else{var n=this.includeDefaultValues;o=this._objects.map(function(u){var f=u.includeDefaultValues;u.includeDefaultValues=n;var g=u.toDatalessObject(r);return u.includeDefaultValues=f,g})}var h=i.Object.prototype.toDatalessObject.call(this,r);return h.objects=o,h},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=i.Object.prototype.shouldCache.call(this);if(r){for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,o=this._objects.length;r<o;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var o=0,a=this._objects.length;o<a;o++)this._objects[o].render(r);this._drawClipPath(r)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,h=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-h/2,n,h)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(o){i.util.addTransformToObject(o,r),delete o.group,o.setCoords()}),this},realizeTransform:function(r,o){return i.util.addTransformToObject(r,o),r},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var r=this._objects,o=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var n=new i.ActiveSelection([]);return n.set(a),n.type="activeSelection",o.remove(this),r.forEach(function(h){h.group=n,h.dirty=!0,o.add(h)}),n.canvas=o,n._objects=r,o._activeObject=n,n.setCoords(),n}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(o){o.setCoords(r)}),this},_calcBounds:function(r){for(var o=[],a=[],n,h,u,f=["tr","br","bl","tl"],g=0,m=this._objects.length,y,C=f.length;g<m;++g){for(n=this._objects[g],u=n.calcACoords(),y=0;y<C;y++)h=f[y],o.push(u[h].x),a.push(u[h].y);n.aCoords=u}this._getBounds(o,a,r)},_getBounds:function(r,o,a){var n=new i.Point(l(r),l(o)),h=new i.Point(c(r),c(o)),u=n.y||0,f=n.x||0,g=h.x-n.x||0,m=h.y-n.y||0;this.width=g,this.height=m,a||this.setPositionByOrigin({x:f,y:u},"left","top")},_toSVG:function(r){for(var o=["<g ","COMMON_PARTS",` >
`],a=0,n=this._objects.length;a<n;a++)o.push("		",this._objects[a].toSVG(r));return o.push(`</g>
`),o},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),o].join("")},toClipPathSVG:function(r){for(var o=[],a=0,n=this._objects.length;a<n;a++)o.push("	",this._objects[a].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(o,{reviver:r})}}),i.Group.fromObject=function(r,o){var a=r.objects,n=i.util.object.clone(r,!0);if(delete n.objects,typeof a=="string"){i.loadSVGFromURL(a,function(h){var u=i.util.groupSVGElements(h,r,a);u.set(n),o&&o(u)});return}i.util.enlivenObjects(a,function(h){i.util.enlivenObjects([r.clipPath],function(u){var f=i.util.object.clone(r,!0);f.clipPath=u[0],delete f.objects,o&&o(new i.Group(h,f,!0))})})})}(e),function(d){var i=d.fabric||(d.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(l,c){c=c||{},this._objects=l||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;c.originX&&(this.originX=c.originX),c.originY&&(this.originY=c.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,c),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var c=i.Object.prototype.toObject.call(this),r=new i.Group([]);if(delete c.type,r.set(c),l.forEach(function(a){a.canvas.remove(a),a.group=r}),r._objects=l,!this.canvas)return r;var o=this.canvas;return o.add(r),o._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,c,r){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,c),r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var o=0,a=this._objects.length;o<a;o++)this._objects[o]._renderControls(l,r);l.restore()}}),i.ActiveSelection.fromObject=function(l,c){i.util.enlivenObjects(l.objects,function(r){delete l.objects,c&&c(new i.ActiveSelection(r,l,!0))})})}(e),function(d){var i=t.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,c){c||(c={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",c),this._initElement(l,c)},getElement:function(){return this._element||{}},setElement:function(l,c){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(c),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var c=t.filterBackend;c&&c.evictCachesForKey&&c.evictCachesForKey(l)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var c=this.width/2,r=this.height/2;l.beginPath(),l.moveTo(-c,-r),l.lineTo(c,-r),l.lineTo(c,r),l.lineTo(-c,r),l.lineTo(-c,-r),l.closePath()}},_renderDashedStroke:function(l){var c=-this.width/2,r=-this.height/2,o=this.width,a=this.height;l.save(),this._setStrokeStyles(l,this),l.beginPath(),t.util.drawDashedLine(l,c,r,c+o,r,this.strokeDashArray),t.util.drawDashedLine(l,c+o,r,c+o,r+a,this.strokeDashArray),t.util.drawDashedLine(l,c+o,r+a,c,r+a,this.strokeDashArray),t.util.drawDashedLine(l,c,r+a,c,r,this.strokeDashArray),l.closePath(),l.restore()},toObject:function(l){var c=[];this.filters.forEach(function(o){o&&c.push(o.toObject())});var r=i(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:c});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],c=[],r,o=this._element,a=-this.width/2,n=-this.height/2,h="",u="";if(!o)return[];if(this.hasCrop()){var f=t.Object.__uid++;l.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+a+'" y="'+n+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),h=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(u='" image-rendering="optimizeSpeed'),c.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',n-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,u,'"',h,`></image>
`),this.stroke||this.strokeDashArray){var g=this.fill;this.fill=null,r=["	<rect ",'x="',a,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=g}return this.paintFirst!=="fill"?l=l.concat(r,c):l=l.concat(c,r),l},getSrc:function(l){var c=l?this._element:this._originalElement;return c?c.toDataURL?c.toDataURL():this.srcFromAttribute?c.getAttribute("src"):c.src:this.src||""},setSrc:function(l,c,r){return t.util.loadImage(l,function(o,a){this.setElement(o,r),this._setWidthHeight(),c&&c(this,a)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,c=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.scaleX,a=r.scaleY,n=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||o>c&&a>c){this._element=n,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=a;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var h=t.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,f=n.width,g=n.height;h.width=f,h.height=g,this._element=h,this._lastScaleX=l.scaleX=o,this._lastScaleY=l.scaleY=a,t.filterBackend.applyFilters([l],n,f,g,this._element,u),this._filterScalingX=h.width/this._originalElement.width,this._filterScalingY=h.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(n){return n&&!n.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var c=this._originalElement,r=c.naturalWidth||c.width,o=c.naturalHeight||c.height;if(this._element===this._originalElement){var a=t.util.createCanvasElement();a.width=r,a.height=o,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(l,this._originalElement,r,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var c=this._element;if(c){var r=this._filterScalingX,o=this._filterScalingY,a=this.width,n=this.height,h=Math.min,u=Math.max,f=u(this.cropX,0),g=u(this.cropY,0),m=c.naturalWidth||c.width,y=c.naturalHeight||c.height,C=f*r,w=g*o,T=h(a*r,m-C),O=h(n*o,y-w),L=-a/2,I=-n/2,K=h(a,m/r-f),B=h(n,y/o-g);c&&l.drawImage(c,C,w,T,O,L,I,K,B)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,c){this.setElement(t.util.getById(l),c),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,c){l&&l.length?t.util.enlivenObjects(l,function(r){c&&c(r)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(l){l||(l={});var c=this.getElement();this.width=l.width||c.naturalWidth||c.width||0,this.height=l.height||c.naturalHeight||c.height||0},parsePreserveAspectRatioAttribute:function(){var l=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),c=this._element.width,r=this._element.height,o=1,a=1,n=0,h=0,u=0,f=0,g,m=this.width,y=this.height,C={width:m,height:y};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(o=a=t.util.findScaleToFit(this._element,C),g=(m-c*o)/2,l.alignX==="Min"&&(n=-g),l.alignX==="Max"&&(n=g),g=(y-r*a)/2,l.alignY==="Min"&&(h=-g),l.alignY==="Max"&&(h=g)),l.meetOrSlice==="slice"&&(o=a=t.util.findScaleToCover(this._element,C),g=c-m/o,l.alignX==="Mid"&&(u=g/2),l.alignX==="Max"&&(u=g),g=r-y/a,l.alignY==="Mid"&&(f=g/2),l.alignY==="Max"&&(f=g),c=m/o,r=y/a)):(o=m/c,a=y/r),{width:c,height:r,scaleX:o,scaleY:a,offsetLeft:n,offsetTop:h,cropX:u,cropY:f}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(l,c){var r=t.util.object.clone(l);t.util.loadImage(r.src,function(o,a){if(a){c&&c(null,!0);return}t.Image.prototype._initFilters.call(r,r.filters,function(n){r.filters=n||[],t.Image.prototype._initFilters.call(r,[r.resizeFilter],function(h){r.resizeFilter=h[0],t.util.enlivenObjects([r.clipPath],function(u){r.clipPath=u[0];var f=new t.Image(o,r);c(f,!1)})})})},null,r.crossOrigin)},t.Image.fromURL=function(l,c,r){t.util.loadImage(l,function(o,a){c&&c(new t.Image(o,r),a)},null,r&&r.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(l,c,r){var o=t.parseAttributes(l,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(o["xlink:href"],c,i(r?t.util.object.clone(r):{},o))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(d){d=d||{};var i=function(){},l=d.onComplete||i,c=d.onChange||i,r=this;return t.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){r.rotate(o),c()},onComplete:function(){r.setCoords(),l()}}),this}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function d(l,c){var r="precision "+c+` float;
void main(){}`,o=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(o,r),l.compileShader(o),!!l.getShaderParameter(o,l.COMPILE_STATUS)}t.isWebglSupported=function(l){if(t.isLikelyNode)return!1;l=l||t.WebglFilterBackend.prototype.tileSize;var c=document.createElement("canvas"),r=c.getContext("webgl")||c.getContext("experimental-webgl"),o=!1;if(r){t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),o=t.maxTextureSize>=l;for(var a=["highp","mediump","lowp"],n=0;n<3;n++)if(d(r,a[n])){t.webGlPrecision=a[n];break}}return this.isSupported=o,o},t.WebglFilterBackend=i;function i(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(l,c){this.dispose(),this.createWebGLCanvas(l,c),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,c)},chooseFastestCopyGLTo2DMethod:function(l,c){var r=typeof window.performance<"u",o;try{new ImageData(1,1),o=!0}catch{o=!1}var a=typeof ArrayBuffer<"u",n=typeof Uint8ClampedArray<"u";if(r&&o&&a&&n){var h=t.util.createCanvasElement(),u=new ArrayBuffer(l*c*4);if(t.forceGLPutImageData){this.imageBuffer=u,this.copyGLTo2D=S;return}var f={imageBuffer:u,destinationWidth:l,destinationHeight:c,targetCanvas:h},g,m,y;h.width=l,h.height=c,g=window.performance.now(),_.call(f,this.gl,f),m=window.performance.now()-g,g=window.performance.now(),S.call(f,this.gl,f),y=window.performance.now()-g,m>y?(this.imageBuffer=u,this.copyGLTo2D=S):this.copyGLTo2D=_}},createWebGLCanvas:function(l,c){var r=t.util.createCanvasElement();r.width=l,r.height=c;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=r.getContext("webgl",o);a||(a=r.getContext("experimental-webgl",o)),a&&(a.clearColor(0,0,0,0),this.canvas=r,this.gl=a)},applyFilters:function(l,c,r,o,a,n){var h=this.gl,u;n&&(u=this.getCachedTexture(n,c));var f={originalWidth:c.width||c.originalWidth,originalHeight:c.height||c.originalHeight,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:h,sourceTexture:this.createTexture(h,r,o,!u&&c),targetTexture:this.createTexture(h,r,o),originalTexture:u||this.createTexture(h,r,o,!u&&c),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},g=h.createFramebuffer();return h.bindFramebuffer(h.FRAMEBUFFER,g),l.forEach(function(m){m&&m.applyTo(f)}),v(f),this.copyGLTo2D(h,f),h.bindTexture(h.TEXTURE_2D,null),h.deleteTexture(f.sourceTexture),h.deleteTexture(f.targetTexture),h.deleteFramebuffer(g),a.getContext("2d").setTransform(1,0,0,1,0,0),f},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,c,r,o){var a=l.createTexture();return l.bindTexture(l.TEXTURE_2D,a),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),o?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,o):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,c,r,0,l.RGBA,l.UNSIGNED_BYTE,null),a},getCachedTexture:function(l,c){if(this.textureCache[l])return this.textureCache[l];var r=this.createTexture(this.gl,c.width,c.height,c);return this.textureCache[l]=r,r},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:_,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,c={renderer:"",vendor:""};if(!l)return c;var r=l.getExtension("WEBGL_debug_renderer_info");if(r){var o=l.getParameter(r.UNMASKED_RENDERER_WEBGL),a=l.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(c.renderer=o.toLowerCase()),a&&(c.vendor=a.toLowerCase())}return this.gpuInfo=c,c}}}();function v(d){var i=d.targetCanvas,l=i.width,c=i.height,r=d.destinationWidth,o=d.destinationHeight;(l!==r||c!==o)&&(i.width=r,i.height=o)}function _(d,i){var l=d.canvas,c=i.targetCanvas,r=c.getContext("2d");r.translate(0,c.height),r.scale(1,-1);var o=l.height-c.height;r.drawImage(l,0,o,c.width,c.height,0,0,c.width,c.height)}function S(d,i){var l=i.targetCanvas,c=l.getContext("2d"),r=i.destinationWidth,o=i.destinationHeight,a=r*o*4,n=new Uint8Array(this.imageBuffer,0,a),h=new Uint8ClampedArray(this.imageBuffer,0,a);d.readPixels(0,0,r,o,d.RGBA,d.UNSIGNED_BYTE,n);var u=new ImageData(h,r,o);c.putImageData(u,0,0)}(function(){var d=function(){};t.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(l,c,r,o,a){var n=a.getContext("2d");n.drawImage(c,0,0,r,o);var h=n.getImageData(0,0,r,o),u=n.getImageData(0,0,r,o),f={sourceWidth:r,sourceHeight:o,imageData:h,originalEl:c,originalImageData:u,canvasEl:a,ctx:n,filterBackend:this};return l.forEach(function(g){g.applyTo(f)}),(f.imageData.width!==r||f.imageData.height!==o)&&(a.width=f.imageData.width,a.height=f.imageData.height),n.putImageData(f.imageData,0,0),f}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var i in d)this[i]=d[i]},createProgram:function(d,i,l){i=i||this.fragmentSource,l=l||this.vertexSource,t.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var c=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(c,l),d.compileShader(c),!d.getShaderParameter(c,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(c));var r=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(r,i),d.compileShader(r),!d.getShaderParameter(r,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(r));var o=d.createProgram();if(d.attachShader(o,c),d.attachShader(o,r),d.linkProgram(o),!d.getProgramParameter(o,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(o));var a=this.getAttributeLocations(d,o),n=this.getUniformLocations(d,o)||{};return n.uStepW=d.getUniformLocation(o,"uStepW"),n.uStepH=d.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:n}},getAttributeLocations:function(d,i){return{aPosition:d.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,i,l){var c=i.aPosition,r=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,r),d.enableVertexAttribArray(c),d.vertexAttribPointer(c,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,l,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var i=d.context,l,c;d.passes>1?(l=d.destinationWidth,c=d.destinationHeight,(d.sourceWidth!==l||d.sourceHeight!==c)&&(i.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(i,l,c)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,d.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(d){d.passes--,d.pass++;var i=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=i},isNeutralState:function(){var d=this.mainParameter,i=t.Image.filters[this.type].prototype;if(d)if(Array.isArray(i[d])){for(var l=i[d].length;l--;)if(this[d][l]!==i[d][l])return!1;return!0}else return i[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var i=d.context,l=this.retrieveShader(d);d.pass===0&&d.originalTexture?i.bindTexture(i.TEXTURE_2D,d.originalTexture):i.bindTexture(i.TEXTURE_2D,d.sourceTexture),i.useProgram(l.program),this.sendAttributeData(i,l.attributeLocations,d.aPosition),i.uniform1f(l.uniformLocations.uStepW,1/d.sourceWidth),i.uniform1f(l.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(i,l.uniformLocations),i.viewport(0,0,d.destinationWidth,d.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,i,l){d.activeTexture(l),d.bindTexture(d.TEXTURE_2D,i),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,i){d.activeTexture(i),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var i=document.createElement("canvas");i.width=d.sourceWidth,i.height=d.sourceHeight,d.helpLayer=i}},toObject:function(){var d={type:this.type},i=this.mainParameter;return i&&(d[i]=this[i]),d},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(d,i){var l=new t.Image.filters[d.type](d);return i&&i(l),l},function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.ColorMatrix=c(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var o=r.imageData,a=o.data,n=a.length,h=this.matrix,u,f,g,m,y,C=this.colorsOnly;for(y=0;y<n;y+=4)u=a[y],f=a[y+1],g=a[y+2],C?(a[y]=u*h[0]+f*h[1]+g*h[2]+h[4]*255,a[y+1]=u*h[5]+f*h[6]+g*h[7]+h[9]*255,a[y+2]=u*h[10]+f*h[11]+g*h[12]+h[14]*255):(m=a[y+3],a[y]=u*h[0]+f*h[1]+g*h[2]+m*h[3]+h[4]*255,a[y+1]=u*h[5]+f*h[6]+g*h[7]+m*h[8]+h[9]*255,a[y+2]=u*h[10]+f*h[11]+g*h[12]+m*h[13]+h[14]*255,a[y+3]=u*h[15]+f*h[16]+g*h[17]+m*h[18]+h[19]*255)},getUniformLocations:function(r,o){return{uColorMatrix:r.getUniformLocation(o,"uColorMatrix"),uConstants:r.getUniformLocation(o,"uConstants")}},sendUniformData:function(r,o){var a=this.matrix,n=[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]],h=[a[4],a[9],a[14],a[19]];r.uniformMatrix4fv(o.uColorMatrix,!1,n),r.uniform4fv(o.uConstants,h)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Brightness=c(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var o=r.imageData,a=o.data,n,h=a.length,u=Math.round(this.brightness*255);for(n=0;n<h;n+=4)a[n]=a[n]+u,a[n+1]=a[n+1]+u,a[n+2]=a[n+2]+u}},getUniformLocations:function(r,o){return{uBrightness:r.getUniformLocation(o,"uBrightness")}},sendUniformData:function(r,o){r.uniform1f(o.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.Image.filters,r=i.util.createClass;c.Convolute=r(c.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var a=Math.sqrt(this.matrix.length),n=this.type+"_"+a+"_"+(this.opaque?1:0),h=this.fragmentSource[n];return o.programCache.hasOwnProperty(n)||(o.programCache[n]=this.createProgram(o.context,h)),o.programCache[n]},applyTo2d:function(o){var a=o.imageData,n=a.data,h=this.matrix,u=Math.round(Math.sqrt(h.length)),f=Math.floor(u/2),g=a.width,m=a.height,y=o.ctx.createImageData(g,m),C=y.data,w=this.opaque?1:0,T,O,L,I,K,B,z,Q,te,ne,ie,G,x;for(ie=0;ie<m;ie++)for(ne=0;ne<g;ne++){for(K=(ie*g+ne)*4,T=0,O=0,L=0,I=0,x=0;x<u;x++)for(G=0;G<u;G++)z=ie+x-f,B=ne+G-f,!(z<0||z>=m||B<0||B>=g)&&(Q=(z*g+B)*4,te=h[x*u+G],T+=n[Q]*te,O+=n[Q+1]*te,L+=n[Q+2]*te,w||(I+=n[Q+3]*te));C[K]=T,C[K+1]=O,C[K+2]=L,w?C[K+3]=n[K+3]:C[K+3]=I}o.imageData=y},getUniformLocations:function(o,a){return{uMatrix:o.getUniformLocation(a,"uMatrix"),uOpaque:o.getUniformLocation(a,"uOpaque"),uHalfSize:o.getUniformLocation(a,"uHalfSize"),uSize:o.getUniformLocation(a,"uSize")}},sendUniformData:function(o,a){o.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Grayscale=c(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var o=r.imageData,a=o.data,n,h=a.length,u,f=this.mode;for(n=0;n<h;n+=4)f==="average"?u=(a[n]+a[n+1]+a[n+2])/3:f==="lightness"?u=(Math.min(a[n],a[n+1],a[n+2])+Math.max(a[n],a[n+1],a[n+2]))/2:f==="luminosity"&&(u=.21*a[n]+.72*a[n+1]+.07*a[n+2]),a[n]=u,a[n+1]=u,a[n+2]=u},retrieveShader:function(r){var o=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(o)){var a=this.fragmentSource[this.mode];r.programCache[o]=this.createProgram(r.context,a)}return r.programCache[o]},getUniformLocations:function(r,o){return{uMode:r.getUniformLocation(o,"uMode")}},sendUniformData:function(r,o){var a=1;r.uniform1i(o.uMode,a)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Invert=c(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var o=r.imageData,a=o.data,n,h=a.length;for(n=0;n<h;n+=4)a[n]=255-a[n],a[n+1]=255-a[n+1],a[n+2]=255-a[n+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,o){return{uInvert:r.getUniformLocation(o,"uInvert")}},sendUniformData:function(r,o){r.uniform1i(o.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.Image.filters,r=i.util.createClass;c.Noise=r(c.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var a=o.imageData,n=a.data,h,u=n.length,f=this.noise,g;for(h=0,u=n.length;h<u;h+=4)g=(.5-Math.random())*f,n[h]+=g,n[h+1]+=g,n[h+2]+=g}},getUniformLocations:function(o,a){return{uNoise:o.getUniformLocation(a,"uNoise"),uSeed:o.getUniformLocation(a,"uSeed")}},sendUniformData:function(o,a){o.uniform1f(a.uNoise,this.noise/255),o.uniform1f(a.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Pixelate=c(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var o=r.imageData,a=o.data,n=o.height,h=o.width,u,f,g,m,y,C,w,T,O,L,I;for(f=0;f<n;f+=this.blocksize)for(g=0;g<h;g+=this.blocksize)for(u=f*4*h+g*4,m=a[u],y=a[u+1],C=a[u+2],w=a[u+3],L=Math.min(f+this.blocksize,n),I=Math.min(g+this.blocksize,h),T=f;T<L;T++)for(O=g;O<I;O++)u=T*4*h+O*4,a[u]=m,a[u+1]=y,a[u+2]=C,a[u+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,o){return{uBlocksize:r.getUniformLocation(o,"uBlocksize"),uStepW:r.getUniformLocation(o,"uStepW"),uStepH:r.getUniformLocation(o,"uStepH")}},sendUniformData:function(r,o){r.uniform1f(o.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.extend,c=i.Image.filters,r=i.util.createClass;c.RemoveColor=r(c.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var a=o.imageData,n=a.data,h,u=this.distance*255,f,g,m,y=new i.Color(this.color).getSource(),C=[y[0]-u,y[1]-u,y[2]-u],w=[y[0]+u,y[1]+u,y[2]+u];for(h=0;h<n.length;h+=4)f=n[h],g=n[h+1],m=n[h+2],f>C[0]&&g>C[1]&&m>C[2]&&f<w[0]&&g<w[1]&&m<w[2]&&(n[h+3]=0)},getUniformLocations:function(o,a){return{uLow:o.getUniformLocation(a,"uLow"),uHigh:o.getUniformLocation(a,"uHigh")}},sendUniformData:function(o,a){var n=new i.Color(this.color).getSource(),h=parseFloat(this.distance),u=[0+n[0]/255-h,0+n[1]/255-h,0+n[2]/255-h,1],f=[n[0]/255+h,n[1]/255+h,n[2]/255+h,1];o.uniform4fv(a.uLow,u),o.uniform4fv(a.uHigh,f)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)l[o]=c(l.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),i.Image.filters[o].fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric,l=i.Image.filters,c=i.util.createClass;l.BlendColor=c(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,a;return r.programCache.hasOwnProperty(o)||(a=this.buildSource(this.mode),r.programCache[o]=this.createProgram(r.context,a)),r.programCache[o]},applyTo2d:function(r){var o=r.imageData,a=o.data,n=a.length,h,u,f,g,m,y,C,w=1-this.alpha;C=new i.Color(this.color).getSource(),h=C[0]*this.alpha,u=C[1]*this.alpha,f=C[2]*this.alpha;for(var T=0;T<n;T+=4)switch(g=a[T],m=a[T+1],y=a[T+2],this.mode){case"multiply":a[T]=g*h/255,a[T+1]=m*u/255,a[T+2]=y*f/255;break;case"screen":a[T]=255-(255-g)*(255-h)/255,a[T+1]=255-(255-m)*(255-u)/255,a[T+2]=255-(255-y)*(255-f)/255;break;case"add":a[T]=g+h,a[T+1]=m+u,a[T+2]=y+f;break;case"diff":case"difference":a[T]=Math.abs(g-h),a[T+1]=Math.abs(m-u),a[T+2]=Math.abs(y-f);break;case"subtract":a[T]=g-h,a[T+1]=m-u,a[T+2]=y-f;break;case"darken":a[T]=Math.min(g,h),a[T+1]=Math.min(m,u),a[T+2]=Math.min(y,f);break;case"lighten":a[T]=Math.max(g,h),a[T+1]=Math.max(m,u),a[T+2]=Math.max(y,f);break;case"overlay":a[T]=h<128?2*g*h/255:255-2*(255-g)*(255-h)/255,a[T+1]=u<128?2*m*u/255:255-2*(255-m)*(255-u)/255,a[T+2]=f<128?2*y*f/255:255-2*(255-y)*(255-f)/255;break;case"exclusion":a[T]=h+g-2*h*g/255,a[T+1]=u+m-2*u*m/255,a[T+2]=f+y-2*f*y/255;break;case"tint":a[T]=h+g*w,a[T+1]=u+m*w,a[T+2]=f+y*w}},getUniformLocations:function(r,o){return{uColor:r.getUniformLocation(o,"uColor")}},sendUniformData:function(r,o){var a=new i.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,r.uniform4fv(o.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric,l=i.Image.filters,c=i.util.createClass;l.BlendImage=c(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(o)||(r.programCache[o]=this.createProgram(r.context,a)),r.programCache[o]},applyToWebGL:function(r){var o=r.context,a=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(o,a,o.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(r,o){return r.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var r=this.image,o=r._element.width,a=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/o,-r.top/a,1]},applyTo2d:function(r){var o=r.imageData,a=r.filterBackend.resources,n=o.data,h=n.length,u=o.width,f=o.height,g,m,y,C,w,T,O,L,I,K,B=this.image,z;a.blendImage||(a.blendImage=i.util.createCanvasElement()),I=a.blendImage,K=I.getContext("2d"),I.width!==u||I.height!==f?(I.width=u,I.height=f):K.clearRect(0,0,u,f),K.setTransform(B.scaleX,0,0,B.scaleY,B.left,B.top),K.drawImage(B._element,0,0,u,f),z=K.getImageData(0,0,u,f).data;for(var Q=0;Q<h;Q+=4)switch(w=n[Q],T=n[Q+1],O=n[Q+2],L=n[Q+3],g=z[Q],m=z[Q+1],y=z[Q+2],C=z[Q+3],this.mode){case"multiply":n[Q]=w*g/255,n[Q+1]=T*m/255,n[Q+2]=O*y/255,n[Q+3]=L*C/255;break;case"mask":n[Q+3]=C;break}},getUniformLocations:function(r,o){return{uTransformMatrix:r.getUniformLocation(o,"uTransformMatrix"),uImage:r.getUniformLocation(o,"uImage")}},sendUniformData:function(r,o){var a=this.calculateMatrix();r.uniform1i(o.uImage,1),r.uniformMatrix3fv(o.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(r,o){i.Image.fromObject(r.image,function(a){var n=i.util.object.clone(r);n.image=a,o(new i.Image.filters.BlendImage(n))})}}(e),function(d){var i=d.fabric||(d.fabric={}),l=Math.pow,c=Math.floor,r=Math.sqrt,o=Math.abs,a=Math.round,n=Math.sin,h=Math.ceil,u=i.Image.filters,f=i.util.createClass;u.Resize=f(u.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(g,m){return{uDelta:g.getUniformLocation(m,"uDelta"),uTaps:g.getUniformLocation(m,"uTaps")}},sendUniformData:function(g,m){g.uniform2fv(m.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),g.uniform1fv(m.uTaps,this.taps)},retrieveShader:function(g){var m=this.getFilterWindow(),y=this.type+"_"+m;if(!g.programCache.hasOwnProperty(y)){var C=this.generateShader(m);g.programCache[y]=this.createProgram(g.context,C)}return g.programCache[y]},getFilterWindow:function(){var g=this.tempScale;return Math.ceil(this.lanczosLobes/g)},getTaps:function(){for(var g=this.lanczosCreate(this.lanczosLobes),m=this.tempScale,y=this.getFilterWindow(),C=new Array(y),w=1;w<=y;w++)C[w-1]=g(w*m);return C},generateShader:function(C){for(var m=new Array(C),y=this.fragmentSourceTOP,C,w=1;w<=C;w++)m[w-1]=w+".0 * uDelta";return y+="uniform float uTaps["+C+`];
`,y+=`void main() {
`,y+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,y+=`  float sum = 1.0;
`,m.forEach(function(T,O){y+="  color += texture2D(uTexture, vTexCoord + "+T+") * uTaps["+O+`];
`,y+="  color += texture2D(uTexture, vTexCoord - "+T+") * uTaps["+O+`];
`,y+="  sum += 2.0 * uTaps["+O+`];
`}),y+=`  gl_FragColor = color / sum;
`,y+="}",y},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(g){g.webgl?(g.passes++,this.width=g.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=g.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),g.destinationWidth=this.dW,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceWidth=g.destinationWidth,this.height=g.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),g.destinationHeight=this.dH,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceHeight=g.destinationHeight):this.applyTo2d(g)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(g){return function(m){if(m>=g||m<=-g)return 0;if(m<11920929e-14&&m>-11920929e-14)return 1;m*=Math.PI;var y=m/g;return n(m)/m*n(y)/y}},applyTo2d:function(g){var m=g.imageData,y=this.scaleX,C=this.scaleY;this.rcpScaleX=1/y,this.rcpScaleY=1/C;var w=m.width,T=m.height,O=a(w*y),L=a(T*C),I;this.resizeType==="sliceHack"?I=this.sliceByTwo(g,w,T,O,L):this.resizeType==="hermite"?I=this.hermiteFastResize(g,w,T,O,L):this.resizeType==="bilinear"?I=this.bilinearFiltering(g,w,T,O,L):this.resizeType==="lanczos"&&(I=this.lanczosResize(g,w,T,O,L)),g.imageData=I},sliceByTwo:function(g,m,y,C,w){var T=g.imageData,O=.5,L=!1,I=!1,K=m*O,B=y*O,z=i.filterBackend.resources,Q,te,ne=0,ie=0,G=m,x=0;for(z.sliceByTwo||(z.sliceByTwo=document.createElement("canvas")),Q=z.sliceByTwo,(Q.width<m*1.5||Q.height<y)&&(Q.width=m*1.5,Q.height=y),te=Q.getContext("2d"),te.clearRect(0,0,m*1.5,y),te.putImageData(T,0,0),C=c(C),w=c(w);!L||!I;)m=K,y=B,C<c(K*O)?K=c(K*O):(K=C,L=!0),w<c(B*O)?B=c(B*O):(B=w,I=!0),te.drawImage(Q,ne,ie,m,y,G,x,K,B),ne=G,ie=x,x+=B;return te.getImageData(ne,ie,C,w)},lanczosResize:function(g,m,y,C,w){function T(P){var D,W,b,k,M,F,X,R,U,q,Z;for(x.x=(P+.5)*B,E.x=c(x.x),D=0;D<w;D++){for(x.y=(D+.5)*z,E.y=c(x.y),M=0,F=0,X=0,R=0,U=0,W=E.x-ne;W<=E.x+ne;W++)if(!(W<0||W>=m)){q=c(1e3*o(W-x.x)),G[q]||(G[q]={});for(var j=E.y-ie;j<=E.y+ie;j++)j<0||j>=y||(Z=c(1e3*o(j-x.y)),G[q][Z]||(G[q][Z]=K(r(l(q*Q,2)+l(Z*te,2))/1e3)),b=G[q][Z],b>0&&(k=(j*m+W)*4,M+=b,F+=b*O[k],X+=b*O[k+1],R+=b*O[k+2],U+=b*O[k+3]))}k=(D*C+P)*4,I[k]=F/M,I[k+1]=X/M,I[k+2]=R/M,I[k+3]=U/M}return++P<C?T(P):L}var O=g.imageData.data,L=g.ctx.createImageData(C,w),I=L.data,K=this.lanczosCreate(this.lanczosLobes),B=this.rcpScaleX,z=this.rcpScaleY,Q=2/this.rcpScaleX,te=2/this.rcpScaleY,ne=h(B*this.lanczosLobes/2),ie=h(z*this.lanczosLobes/2),G={},x={},E={};return T(0)},bilinearFiltering:function(g,m,y,C,w){var T,O,L,I,K,B,z,Q,te,ne,ie,G,x=0,E,P=this.rcpScaleX,D=this.rcpScaleY,W=4*(m-1),b=g.imageData,k=b.data,M=g.ctx.createImageData(C,w),F=M.data;for(z=0;z<w;z++)for(Q=0;Q<C;Q++)for(K=c(P*Q),B=c(D*z),te=P*Q-K,ne=D*z-B,E=4*(B*m+K),ie=0;ie<4;ie++)T=k[E+ie],O=k[E+4+ie],L=k[E+W+ie],I=k[E+W+4+ie],G=T*(1-te)*(1-ne)+O*te*(1-ne)+L*ne*(1-te)+I*te*ne,F[x++]=G;return M},hermiteFastResize:function(g,m,y,C,w){for(var T=this.rcpScaleX,O=this.rcpScaleY,L=h(T/2),I=h(O/2),K=g.imageData,B=K.data,z=g.ctx.createImageData(C,w),Q=z.data,te=0;te<w;te++)for(var ne=0;ne<C;ne++){for(var ie=(ne+te*C)*4,G=0,x=0,E=0,P=0,D=0,W=0,b=0,k=(te+.5)*O,M=c(te*O);M<(te+1)*O;M++)for(var F=o(k-(M+.5))/I,X=(ne+.5)*T,R=F*F,U=c(ne*T);U<(ne+1)*T;U++){var q=o(X-(U+.5))/L,Z=r(R+q*q);Z>1&&Z<-1||(G=2*Z*Z*Z-3*Z*Z+1,G>0&&(q=4*(U+M*m),b+=G*B[q+3],E+=G,B[q+3]<255&&(G=G*B[q+3]/250),P+=G*B[q],D+=G*B[q+1],W+=G*B[q+2],x+=G))}Q[ie]=P/x,Q[ie+1]=D/x,Q[ie+2]=W/x,Q[ie+3]=b/E}return z},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Contrast=c(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var o=r.imageData,a,h,n=o.data,h=n.length,u=Math.floor(this.contrast*255),f=259*(u+255)/(255*(259-u));for(a=0;a<h;a+=4)n[a]=f*(n[a]-128)+128,n[a+1]=f*(n[a+1]-128)+128,n[a+2]=f*(n[a+2]-128)+128}},getUniformLocations:function(r,o){return{uContrast:r.getUniformLocation(o,"uContrast")}},sendUniformData:function(r,o){r.uniform1f(o.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Saturation=c(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var o=r.imageData,a=o.data,n=a.length,h=-this.saturation,u,f;for(u=0;u<n;u+=4)f=Math.max(a[u],a[u+1],a[u+2]),a[u]+=f!==a[u]?(f-a[u])*h:0,a[u+1]+=f!==a[u+1]?(f-a[u+1])*h:0,a[u+2]+=f!==a[u+2]?(f-a[u+2])*h:0}},getUniformLocations:function(r,o){return{uSaturation:r.getUniformLocation(o,"uSaturation")}},sendUniformData:function(r,o){r.uniform1f(o.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Blur=c(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var o=r.filterBackend.resources,a,n,h=r.imageData.width,u=r.imageData.height;o.blurLayer1||(o.blurLayer1=i.util.createCanvasElement(),o.blurLayer2=i.util.createCanvasElement()),a=o.blurLayer1,n=o.blurLayer2,(a.width!==h||a.height!==u)&&(n.width=a.width=h,n.height=a.height=u);var f=a.getContext("2d"),g=n.getContext("2d"),m=15,y,C,w,T,O=this.blur*.06*.5;for(f.putImageData(r.imageData,0,0),g.clearRect(0,0,h,u),T=-m;T<=m;T++)y=(Math.random()-.5)/4,C=T/m,w=O*C*h+y,g.globalAlpha=1-Math.abs(C),g.drawImage(a,w,y),f.drawImage(n,0,0),g.globalAlpha=1,g.clearRect(0,0,n.width,n.height);for(T=-m;T<=m;T++)y=(Math.random()-.5)/4,C=T/m,w=O*C*u+y,g.globalAlpha=1-Math.abs(C),g.drawImage(a,y,w),f.drawImage(n,0,0),g.globalAlpha=1,g.clearRect(0,0,n.width,n.height);r.ctx.drawImage(a,0,0);var L=r.ctx.getImageData(0,0,a.width,a.height);return f.globalAlpha=1,f.clearRect(0,0,a.width,a.height),L},getUniformLocations:function(r,o){return{delta:r.getUniformLocation(o,"uDelta")}},sendUniformData:function(r,o){var a=this.chooseRightDelta();r.uniform2fv(o.delta,a)},chooseRightDelta:function(){var r=1,o=[0,0],a;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),a=r*this.blur*.12,this.horizontal?o[0]=a:o[1]=a,o}}),l.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Gamma=c(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var o=r.imageData,a=o.data,n=this.gamma,h=a.length,u=1/n[0],f=1/n[1],g=1/n[2],m;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),m=0,h=256;m<h;m++)this.rVals[m]=Math.pow(m/255,u)*255,this.gVals[m]=Math.pow(m/255,f)*255,this.bVals[m]=Math.pow(m/255,g)*255;for(m=0,h=a.length;m<h;m+=4)a[m]=this.rVals[a[m]],a[m+1]=this.gVals[a[m+1]],a[m+2]=this.bVals[a[m+2]]},getUniformLocations:function(r,o){return{uGamma:r.getUniformLocation(o,"uGamma")}},sendUniformData:function(r,o){r.uniform3fv(o.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.Composed=c(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(r)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(r,o){var a=r.subFilters||[],n=a.map(function(u){return new i.Image.filters[u.type](u)}),h=new i.Image.filters.Composed({subFilters:n});return o&&o(h),h}}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.Image.filters,c=i.util.createClass;l.HueRotation=c(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,o=i.util.cos(r),a=i.util.sin(r),n=1/3,h=Math.sqrt(n)*a,u=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+u/3,this.matrix[1]=n*u-h,this.matrix[2]=n*u+h,this.matrix[5]=n*u+h,this.matrix[6]=o+n*u,this.matrix[7]=n*u-h,this.matrix[10]=n*u-h,this.matrix[11]=n*u+h,this.matrix[12]=o+n*u},isNeutralState:function(r){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,r)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(d){var i=d.fabric||(d.fabric={}),l=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var c="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(c),cacheProperties:i.Object.prototype.cacheProperties.concat(c),stroke:null,shadow:null,path:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,o){this.styles=o?o.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=i.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,o,a,n,h,u,f,g=0,m=this._textLines.length;g<m;g++)if(!(this.textAlign!=="justify"&&(g===m-1||this.isEndOfWrapping(g)))&&(n=0,h=this._textLines[g],o=this.getLineWidth(g),o<this.width&&(f=this.textLines[g].match(this._reSpacesAndTabs)))){a=f.length,r=(this.width-o)/a;for(var y=0,C=h.length;y<=C;y++)u=this.__charBounds[g][y],this._reSpaceAndTab.test(h[y])?(u.width+=r,u.kernedWidth+=r,u.left+=n,n+=r):u.left+=n}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return r.width+=o*r.zoomX,r.height+=o*r.zoomY,r},_render:function(r){this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,o,a){r.textBaseline="alphabetic",r.font=this._getFontDeclaration(o,a)},calcTextWidth:function(){for(var r=this.getLineWidth(0),o=1,a=this._textLines.length;o<a;o++){var n=this.getLineWidth(o);n>r&&(r=n)}return r},_renderTextLine:function(r,o,a,n,h,u){this._renderChars(r,o,a,n,h,u)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,a,n=r.fillStyle,h,u,f=this._getLeftOffset(),g=this._getTopOffset(),m=0,y=0,C,w,T=this.path,O,L=0,I=this._textLines.length;L<I;L++){if(o=this.getHeightOfLine(L),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",L)){g+=o;continue}h=this._textLines[L],a=this._getLineLeftOffset(L),y=0,m=0,u=this.getValueOfPropertyAt(L,0,"textBackgroundColor");for(var K=0,B=h.length;K<B;K++)C=this.__charBounds[L][K],w=this.getValueOfPropertyAt(L,K,"textBackgroundColor"),T?(r.save(),r.translate(C.renderLeft,C.renderTop),r.rotate(C.angle),r.fillStyle=w,w&&r.fillRect(-C.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),C.width,o/this.lineHeight),r.restore()):w!==u?(O=f+a+m,this.direction==="rtl"&&(O=this.width-O-y),r.fillStyle=u,u&&r.fillRect(O,g,y,o/this.lineHeight),m=C.left,y=C.width,u=w):y+=C.kernedWidth;w&&!T&&(O=f+a+m,this.direction==="rtl"&&(O=this.width-O-y),r.fillStyle=w,r.fillRect(O,g,y,o/this.lineHeight)),g+=o}r.fillStyle=n,this._removeShadow(r)}},getFontCache:function(r){var o=r.fontFamily.toLowerCase();i.charWidthsCache[o]||(i.charWidthsCache[o]={});var a=i.charWidthsCache[o],n=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return a[n]||(a[n]={}),a[n]},_measureChar:function(r,o,a,n){var h=this.getFontCache(o),u=this._getFontDeclaration(o),f=this._getFontDeclaration(n),g=a+r,m=u===f,y,C,w,T=o.fontSize/this.CACHE_FONT_SIZE,O;if(a&&h[a]!==void 0&&(w=h[a]),h[r]!==void 0&&(O=y=h[r]),m&&h[g]!==void 0&&(C=h[g],O=C-w),y===void 0||w===void 0||C===void 0){var L=this.getMeasuringContext();this._setTextStyles(L,o,!0)}return y===void 0&&(O=y=L.measureText(r).width,h[r]=y),w===void 0&&m&&a&&(w=L.measureText(a).width,h[a]=w),m&&C===void 0&&(C=L.measureText(g).width,h[g]=C,O=C-w),{width:y*T,kernedWidth:O*T}},getHeightOfChar:function(r,o){return this.getValueOfPropertyAt(r,o,"fontSize")},measureLine:function(r){var o=this._measureLine(r);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(r){var o=0,a,n,h=this._textLines[r],u,f,g=0,m=new Array(h.length),y=0,C,w,T=this.path;for(this.__charBounds[r]=m,T&&(C=i.util.getPointOnPath(T.path,0,T.segmentsInfo),w=T.segmentsInfo[T.segmentsInfo.length-1].length,C.x+=T.pathOffset.x,C.y+=T.pathOffset.y),a=0;a<h.length;a++)n=h[a],f=this._getGraphemeBox(n,r,a,u),T&&(y>w&&(y%=w),this._setGraphemeOnPath(y,f,C)),m[a]=f,o+=f.kernedWidth,y+=f.kernedWidth,u=n;return m[a]={left:f?f.left+f.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:o,numOfSpaces:g}},_setGraphemeOnPath:function(r,o,a){var n=r+o.kernedWidth/2,h=this.path,u=i.util.getPointOnPath(h.path,n,h.segmentsInfo);o.renderLeft=u.x-a.x,o.renderTop=u.y-a.y,o.angle=u.angle},_getGraphemeBox:function(r,o,a,n,h){var u=this.getCompleteStyleDeclaration(o,a),f=n?this.getCompleteStyleDeclaration(o,a-1):{},g=this._measureChar(r,u,n,f),m=g.kernedWidth,y=g.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),y+=C,m+=C);var w={width:y,left:0,height:u.fontSize,kernedWidth:m,deltaY:u.deltaY};if(a>0&&!h){var T=this.__charBounds[o][a-1];w.left=T.left+T.width+g.kernedWidth-g.width}return w},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var o=this._textLines[r],a=this.getHeightOfChar(r,0),n=1,h=o.length;n<h;n++)a=Math.max(this.getHeightOfChar(r,n),a);return this.__lineHeights[r]=a*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,o=0,a=0,n=this._textLines.length;a<n;a++)r=this.getHeightOfLine(a),o+=a===n-1?r/this.lineHeight:r;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,o){r.save();for(var a=0,n=this._getLeftOffset(),h=this._getTopOffset(),u=0,f=this._textLines.length;u<f;u++){var g=this.getHeightOfLine(u),m=g/this.lineHeight,y=this._getLineLeftOffset(u);this._renderTextLine(o,r,this._textLines[u],n+y,h+a+m,u),a+=g}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,o,a,n,h,u){var f=this.getHeightOfLine(u),g=this.textAlign.indexOf("justify")!==-1,m,y,C="",w,T=0,O,L=this.path,I=!g&&this.charSpacing===0&&this.isEmptyStyles(u)&&!L,K=this.direction==="ltr",B=this.direction==="ltr"?1:-1,z;if(o.save(),h-=f*this._fontSizeFraction/this.lineHeight,I){o.canvas.setAttribute("dir",K?"ltr":"rtl"),o.direction=K?"ltr":"rtl",this._renderChar(r,o,u,0,a.join(""),n,h,f),o.restore();return}for(var Q=0,te=a.length-1;Q<=te;Q++)O=Q===te||this.charSpacing||L,C+=a[Q],w=this.__charBounds[u][Q],T===0?(n+=B*(w.kernedWidth-w.width),T+=w.width):T+=w.kernedWidth,g&&!O&&this._reSpaceAndTab.test(a[Q])&&(O=!0),O||(m=m||this.getCompleteStyleDeclaration(u,Q),y=this.getCompleteStyleDeclaration(u,Q+1),O=this._hasStyleChanged(m,y)),O&&(L?(o.save(),o.translate(w.renderLeft,w.renderTop),o.rotate(w.angle),this._renderChar(r,o,u,Q,C,-T/2,0,f),o.restore()):(z=n,o.canvas.setAttribute("dir",K?"ltr":"rtl"),o.direction=K?"ltr":"rtl",this._renderChar(r,o,u,Q,C,z,h,f)),C="",m=y,n+=B*T,T=0);o.restore()},_applyPatternGradientTransformText:function(r){var o=i.util.createCanvasElement(),a,n=this.width+this.strokeWidth,h=this.height+this.strokeWidth;return o.width=n,o.height=h,a=o.getContext("2d"),a.beginPath(),a.moveTo(0,0),a.lineTo(n,0),a.lineTo(n,h),a.lineTo(0,h),a.closePath(),a.translate(n/2,h/2),a.fillStyle=r.toLive(a),this._applyPatternGradientTransform(a,r),a.fill(),a.createPattern(o,"no-repeat")},handleFiller:function(r,o,a){var n,h;return a.toLive?a.gradientUnits==="percentage"||a.gradientTrasnform||a.patternTransform?(n=-this.width/2,h=-this.height/2,r.translate(n,h),r[o]=this._applyPatternGradientTransformText(a),{offsetX:n,offsetY:h}):(r[o]=a.toLive(r,this),this._applyPatternGradientTransform(r,a)):(r[o]=a,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,o){return r.lineWidth=o.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",o.stroke)},_setFillStyles:function(r,o){return this.handleFiller(r,"fillStyle",o.fill)},_renderChar:function(r,o,a,n,h,u,f){var g=this._getStyleDeclaration(a,n),m=this.getCompleteStyleDeclaration(a,n),y=r==="fillText"&&m.fill,C=r==="strokeText"&&m.stroke&&m.strokeWidth,w,T;!C&&!y||(o.save(),y&&(w=this._setFillStyles(o,m)),C&&(T=this._setStrokeStyles(o,m)),o.font=this._getFontDeclaration(m),g&&g.textBackgroundColor&&this._removeShadow(o),g&&g.deltaY&&(f+=g.deltaY),y&&o.fillText(h,u-w.offsetX,f-w.offsetY),C&&o.strokeText(h,u-T.offsetX,f-T.offsetY),o.restore())},setSuperscript:function(r,o){return this._setScript(r,o,this.superscript)},setSubscript:function(r,o){return this._setScript(r,o,this.subscript)},_setScript:function(r,o,a){var n=this.get2DCursorLocation(r,!0),h=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),u=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),f={fontSize:h*a.size,deltaY:u+h*a.baseline};return this.setSelectionStyles(f,r,o),this},_hasStyleChanged:function(r,o){return r.fill!==o.fill||r.stroke!==o.stroke||r.strokeWidth!==o.strokeWidth||r.fontSize!==o.fontSize||r.fontFamily!==o.fontFamily||r.fontWeight!==o.fontWeight||r.fontStyle!==o.fontStyle||r.deltaY!==o.deltaY},_hasStyleChangedForSvg:function(r,o){return this._hasStyleChanged(r,o)||r.overline!==o.overline||r.underline!==o.underline||r.linethrough!==o.linethrough},_getLineLeftOffset:function(r){var o=this.getLineWidth(r),a=this.width-o,n=this.textAlign,h=this.direction,f,u=0,f=this.isEndOfWrapping(r);return n==="justify"||n==="justify-center"&&!f||n==="justify-right"&&!f||n==="justify-left"&&!f?0:(n==="center"&&(u=a/2),n==="right"&&(u=a),n==="justify-center"&&(u=a/2),n==="justify-right"&&(u=a),h==="rtl"&&(u-=a),u)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r])return this.__lineWidths[r];var o,a=this._textLines[r],n;return a===""?o=0:(n=this.measureLine(r),o=n.width),this.__lineWidths[r]=o,o},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,o,a){var n=this._getStyleDeclaration(r,o);return n&&typeof n[a]<"u"?n[a]:this[a]},_renderTextDecoration:function(r,o){if(!(!this[o]&&!this.styleHas(o))){for(var a,n,h,u,f,g,m,y,C=this._getLeftOffset(),w=this._getTopOffset(),T,O,L,I,K,B,z,Q,te=this.path,ne=this._getWidthOfCharSpacing(),ie=0,G=this._textLines.length;ie<G;ie++){if(a=this.getHeightOfLine(ie),!this[o]&&!this.styleHas(o,ie)){w+=a;continue}m=this._textLines[ie],B=a/this.lineHeight,u=this._getLineLeftOffset(ie),O=0,L=0,y=this.getValueOfPropertyAt(ie,0,o),Q=this.getValueOfPropertyAt(ie,0,"fill"),T=w+B*(1-this._fontSizeFraction),n=this.getHeightOfChar(ie,0),f=this.getValueOfPropertyAt(ie,0,"deltaY");for(var x=0,E=m.length;x<E;x++)if(I=this.__charBounds[ie][x],K=this.getValueOfPropertyAt(ie,x,o),z=this.getValueOfPropertyAt(ie,x,"fill"),h=this.getHeightOfChar(ie,x),g=this.getValueOfPropertyAt(ie,x,"deltaY"),te&&K&&z)r.save(),r.fillStyle=Q,r.translate(I.renderLeft,I.renderTop),r.rotate(I.angle),r.fillRect(-I.kernedWidth/2,this.offsets[o]*h+g,I.kernedWidth,this.fontSize/15),r.restore();else if((K!==y||z!==Q||h!==n||g!==f)&&L>0){var P=C+u+O;this.direction==="rtl"&&(P=this.width-P-L),y&&Q&&(r.fillStyle=Q,r.fillRect(P,T+this.offsets[o]*n+f,L,this.fontSize/15)),O=I.left,L=I.width,y=K,Q=z,n=h,f=g}else L+=I.kernedWidth;r.fillStyle=z,K&&z&&r.fillRect(C+u+O,T+this.offsets[o]*n+f,L-ne,this.fontSize/15),w+=a}this._removeShadow(r)}},_getFontDeclaration:function(r,o){var a=r||this,n=this.fontFamily,h=i.Text.genericFonts.indexOf(n.toLowerCase())>-1,u=n===void 0||n.indexOf("'")>-1||n.indexOf(",")>-1||n.indexOf('"')>-1||h?a.fontFamily:'"'+a.fontFamily+'"';return[i.isLikelyNode?a.fontWeight:a.fontStyle,i.isLikelyNode?a.fontStyle:a.fontWeight,o?this.CACHE_FONT_SIZE+"px":a.fontSize+"px",u].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var o=r.split(this._reNewline),a=new Array(o.length),n=[`
`],h=[],u=0;u<o.length;u++)a[u]=i.util.string.graphemeSplit(o[u]),h=h.concat(a[u],n);return h.pop(),{_unwrappedLines:a,lines:o,graphemeText:h,graphemeLines:a}},toObject:function(r){var o=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing","path","direction"].concat(r),a=this.callSuper("toObject",o);return a.styles=l(this.styles,!0),a.path=this.path&&this.path.toObject(),a},set:function(r,o){this.callSuper("set",r,o);var a=!1,n=!1;if(typeof r=="object")for(var h in r)h==="path"&&this.setPathInfo(),a=a||this._dimensionAffectingProps.indexOf(h)!==-1,n=n||h==="path";else a=this._dimensionAffectingProps.indexOf(r)!==-1,n=r==="path";return n&&this.setPathInfo(),a&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,o,a){if(!r)return o(null);var n=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),h=n.textAnchor||"left";if(a=i.util.object.extend(a?l(a):{},n),a.top=a.top||0,a.left=a.left||0,n.textDecoration){var u=n.textDecoration;u.indexOf("underline")!==-1&&(a.underline=!0),u.indexOf("overline")!==-1&&(a.overline=!0),u.indexOf("line-through")!==-1&&(a.linethrough=!0),delete a.textDecoration}"dx"in n&&(a.left+=n.dx),"dy"in n&&(a.top+=n.dy),"fontSize"in a||(a.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var f="";"textContent"in r?f=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(f=r.firstChild.data),f=f.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var g=a.strokeWidth;a.strokeWidth=0;var m=new i.Text(f,a),y=m.getScaledHeight()/m.height,C=(m.height+m.strokeWidth)*m.lineHeight-m.height,w=C*y,T=m.getScaledHeight()+w,O=0;h==="center"&&(O=m.getScaledWidth()/2),h==="right"&&(O=m.getScaledWidth()),m.set({left:m.left-O,top:m.top-(T-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:typeof g<"u"?g:1}),o(m)},i.Text.fromObject=function(r,o){var a=l(r),n=r.path;return delete a.path,i.Object._fromObject("Text",a,function(h){n?i.Object._fromObject("Path",n,function(u){h.set("path",u),o(h)},"path"):o(h)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var i=typeof d>"u"?this.styles:{line:this.styles[d]};for(var l in i)for(var c in i[l])for(var r in i[l][c])return!1;return!0},styleHas:function(d,i){if(!this.styles||!d||d===""||typeof i<"u"&&!this.styles[i])return!1;var l=typeof i>"u"?this.styles:{0:this.styles[i]};for(var c in l)for(var r in l[c])if(typeof l[c][r][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var i=this.styles,l=0,c,r,o=!0,a=0,n;for(var h in i){c=0;for(var u in i[h]){var n=i[h][u],f=n.hasOwnProperty(d);l++,f?(r?n[d]!==r&&(o=!1):r=n[d],n[d]===this[d]&&delete n[d]):o=!1,Object.keys(n).length!==0?c++:delete i[h][u]}c===0&&delete i[h]}for(var g=0;g<this._textLines.length;g++)a+=this._textLines[g].length;o&&l===a&&(this[d]=r,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var i=this.styles,l,c,r;for(c in i){l=i[c];for(r in l)delete l[r][d],Object.keys(l[r]).length===0&&delete l[r];Object.keys(l).length===0&&delete i[c]}}},_extendStyles:function(d,i){var l=this.get2DCursorLocation(d);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),i)},get2DCursorLocation:function(d,i){typeof d>"u"&&(d=this.selectionStart);for(var l=i?this._unwrappedTextLines:this._textLines,c=l.length,r=0;r<c;r++){if(d<=l[r].length)return{lineIndex:r,charIndex:d};d-=l[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:l[r-1].length<d?l[r-1].length:d}},getSelectionStyles:function(d,i,l){typeof d>"u"&&(d=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||d);for(var c=[],r=d;r<i;r++)c.push(this.getStyleAtPosition(r,l));return c},getStyleAtPosition:function(d,i){var l=this.get2DCursorLocation(d),c=i?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return c||{}},setSelectionStyles:function(d,i,l){typeof i>"u"&&(i=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||i);for(var c=i;c<l;c++)this._extendStyles(c,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,i){var l=this.styles&&this.styles[d];return l?l[i]:null},getCompleteStyleDeclaration:function(d,i){for(var l=this._getStyleDeclaration(d,i)||{},c={},r,o=0;o<this._styleProperties.length;o++)r=this._styleProperties[o],c[r]=typeof l[r]>"u"?this[r]:l[r];return c},_setStyleDeclaration:function(d,i,l){this.styles[d][i]=l},_deleteStyleDeclaration:function(d,i){delete this.styles[d][i]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,l){this.callSuper("initialize",i,l),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,l){this[i]!==l&&(this._fireSelectionChanged(),this[i]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,c=this.canvas.viewportTransform;l.save(),l.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this.transform(l),this._clearTextArea(l),i||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,l):this.renderSelection(i,l),l.restore()}},_clearTextArea:function(i){var l=this.width+4,c=this.height+4;i.clearRect(-l/2,-c/2,l,c)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var l=this._getLeftOffset(),c=this._getTopOffset(),r=this._getCursorBoundariesOffsets(i);return{left:l,top:c,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,c,r,o=0,a=0,n,h=this.get2DCursorLocation(i);r=h.charIndex,c=h.lineIndex;for(var u=0;u<c;u++)o+=this.getHeightOfLine(u);l=this._getLineLeftOffset(c);var f=this.__charBounds[c][r];return f&&(a=f.left),this.charSpacing!==0&&r===this._textLines[c].length&&(a-=this._getWidthOfCharSpacing()),n={top:o,left:l+(a>0?a:0)},this.direction==="rtl"&&(n.left*=-1),this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(i,l){var c=this.get2DCursorLocation(),r=c.lineIndex,o=c.charIndex>0?c.charIndex-1:0,a=this.getValueOfPropertyAt(r,o,"fontSize"),n=this.scaleX*this.canvas.getZoom(),h=this.cursorWidth/n,u=i.topOffset,f=this.getValueOfPropertyAt(r,o,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,o,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(i.left+i.leftOffset-h/2,u+i.top+f,h,a)},renderSelection:function(i,l){for(var c=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,a=this.get2DCursorLocation(c),n=this.get2DCursorLocation(r),h=a.lineIndex,u=n.lineIndex,f=a.charIndex<0?0:a.charIndex,g=n.charIndex<0?0:n.charIndex,m=h;m<=u;m++){var y=this._getLineLeftOffset(m)||0,C=this.getHeightOfLine(m),w=0,T=0,O=0;if(m===h&&(T=this.__charBounds[h][f].left),m>=h&&m<u)O=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===u)if(g===0)O=this.__charBounds[u][g].left;else{var L=this._getWidthOfCharSpacing();O=this.__charBounds[u][g-1].left+this.__charBounds[u][g-1].width-L}w=C,(this.lineHeight<1||m===u&&this.lineHeight>1)&&(C/=this.lineHeight);var I=i.left+y+T,K=O-T,B=C,z=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",B=1,z=C):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(I=this.width-I-K),l.fillRect(I,i.top+i.topOffset+z,K,B),i.topOffset+=w}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),l=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:l}}}),t.IText.fromObject=function(i,l){if(d(i),i.styles)for(var c in i.styles)for(var r in i.styles[c])d(i.styles[c][r]);t.Object._fromObject("IText",i,l,"text")}}(),function(){var d=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var l=i.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,i._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var l=i.canvas;l&&(l._iTextInstances=l._iTextInstances||[],t.util.removeFromArray(l._iTextInstances,i),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,i._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,l,c,r){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",l,{duration:c,onComplete:function(){o.isAborted||i[r]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var l=this,c=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},c)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var l=0,c=i-1;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c--;for(;/\S/.test(this._text[c])&&c>-1;)l++,c--;return i-l},findWordBoundaryRight:function(i){var l=0,c=i;if(this._reSpace.test(this._text[c]))for(;this._reSpace.test(this._text[c]);)l++,c++;for(;/\S/.test(this._text[c])&&c<this._text.length;)l++,c++;return i+l},findLineBoundaryLeft:function(i){for(var l=0,c=i-1;!/\n/.test(this._text[c])&&c>-1;)l++,c--;return i-l},findLineBoundaryRight:function(i){for(var l=0,c=i;!/\n/.test(this._text[c])&&c<this._text.length;)l++,c++;return i+l},searchWordBoundary:function(i,l){for(var c=this._text,r=this._reSpace.test(c[i])?i-1:i,o=c[r],a=t.reNonWord;!a.test(o)&&r>0&&r<c.length;)r+=l,o=c[r];return a.test(o)&&(r+=l===1?0:1),r},selectWord:function(i){i=i||this.selectionStart;var l=this.searchWordBoundary(i,-1),c=this.searchWordBoundary(i,1);this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var l=this.findLineBoundaryLeft(i),c=this.findLineBoundaryRight(i);return this.selectionStart=l,this.selectionEnd=c,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var l=this.getSelectionStartFromPointer(i.e),c=this.selectionStart,r=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||c===r)&&(c===l||r===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==c||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,l,c){var r=c.slice(0,i),o=t.util.string.graphemeSplit(r).length;if(i===l)return{selectionStart:o,selectionEnd:o};var a=c.slice(i,l),n=t.util.string.graphemeSplit(a).length;return{selectionStart:o,selectionEnd:o+n}},fromGraphemeToStringSelection:function(i,l,c){var r=c.slice(0,i),o=r.join("").length;if(i===l)return{selectionStart:o,selectionEnd:o};var a=c.slice(i,l),n=a.join("").length;return{selectionStart:o,selectionEnd:o+n}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(i),c=this.get2DCursorLocation(i),r=c.lineIndex,o=c.charIndex,a=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,n=l.leftOffset,h=this.calcTransformMatrix(),u={x:l.left+n,y:l.top+l.topOffset+a},f=this.canvas.getRetinaScaling(),g=this.canvas.upperCanvasEl,m=g.width/f,y=g.height/f,C=m-a,w=y-a,T=g.clientWidth/m,O=g.clientHeight/y;return u=t.util.transformPoint(u,h),u=t.util.transformPoint(u,this.canvas.viewportTransform),u.x*=T,u.y*=O,u.x<0&&(u.x=0),u.x>C&&(u.x=C),u.y<0&&(u.y=0),u.y>w&&(u.y=w),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,l){var c=this.get2DCursorLocation(i,!0),r=this.get2DCursorLocation(l,!0),o=c.lineIndex,a=c.charIndex,n=r.lineIndex,h=r.charIndex,u,f;if(o!==n){if(this.styles[o])for(u=a;u<this._unwrappedTextLines[o].length;u++)delete this.styles[o][u];if(this.styles[n])for(u=h;u<this._unwrappedTextLines[n].length;u++)f=this.styles[n][u],f&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+u-h]=f);for(u=o+1;u<=n;u++)delete this.styles[u];this.shiftLineStyles(n,o-n)}else if(this.styles[o]){f=this.styles[o];var g=h-a,m,y;for(u=a;u<h;u++)delete f[u];for(y in this.styles[o])m=parseInt(y,10),m>=h&&(f[m-g]=f[y],delete f[y])}},shiftLineStyles:function(i,l){var c=d(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>i&&(this.styles[o+l]=c[o],c[o-l]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,l,c,r){var o,a={},n=!1,h=this._unwrappedTextLines[i].length===l;c||(c=1),this.shiftLineStyles(i,c),this.styles[i]&&(o=this.styles[i][l===0?l:l-1]);for(var u in this.styles[i]){var f=parseInt(u,10);f>=l&&(n=!0,a[f-l]=this.styles[i][u],h&&l===0||delete this.styles[i][u])}var g=!1;for(n&&!h&&(this.styles[i+c]=a,g=!0),g&&c--;c>0;)r&&r[c-1]?this.styles[i+c]={0:d(r[c-1])}:o?this.styles[i+c]={0:d(o)}:delete this.styles[i+c],c--;this._forceClearCache=!0},insertCharStyleObject:function(i,l,c,r){this.styles||(this.styles={});var o=this.styles[i],a=o?d(o):{};c||(c=1);for(var n in a){var h=parseInt(n,10);h>=l&&(o[h+c]=a[h],a[h-c]||delete o[h])}if(this._forceClearCache=!0,r){for(;c--;)Object.keys(r[c]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][l+c]=d(r[c]));return}if(o)for(var u=o[l?l-1:1];u&&c--;)this.styles[i][l+c]=d(u)},insertNewStyleBlock:function(i,l,c){for(var r=this.get2DCursorLocation(l,!0),o=[0],a=0,n=0;n<i.length;n++)i[n]===`
`?(a++,o[a]=0):o[a]++;o[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,o[0],c),c=c&&c.slice(o[0]+1)),a&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+o[0],a);for(var n=1;n<a;n++)o[n]>0?this.insertCharStyleObject(r.lineIndex+n,0,o[n],c):c&&(this.styles[r.lineIndex+n][0]=c[0]),c=c&&c.slice(o[n]+1);o[n]>0&&this.insertCharStyleObject(r.lineIndex+n,0,o[n],c)},setSelectionStartEndWithShift:function(i,l,c){c<=i?(l===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=c):c>i&&c<l?this._selectionDirection==="right"?this.selectionEnd=c:this.selectionStart=c:(l===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=c)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var i=d.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var i=this.getSelectionStartFromPointer(d),l=this.selectionStart,c=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(l,c,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var i=this.getLocalPointer(d),l=0,c=0,r=0,o=0,a=0,n,h,u=0,f=this._textLines.length;u<f&&r<=i.y;u++)r+=this.getHeightOfLine(u)*this.scaleY,a=u,u>0&&(o+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));n=this._getLineLeftOffset(a),c=n*this.scaleX,h=this._textLines[a],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+c);for(var g=0,m=h.length;g<m&&(l=c,c+=this.__charBounds[a][g].kernedWidth*this.scaleX,c<=i.x);g++)o++;return this._getNewSelectionStartFromOffset(i,l,c,o,m)},_getNewSelectionStartFromOffset:function(d,i,l,c,r){var o=d.x-i,a=l-d.x,n=a>o||a<0?0:1,h=c+n;return this.flipX&&(h=r-h),h>this._text.length&&(h=this._text.length),h}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+d.fontSize+";",t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in i)this[i[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var i=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,r=l.length,o,a,n=r-c,h=this.selectionStart,u=this.selectionEnd,f=h!==u,g,m,y;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=h>C.selectionStart;f?(o=this._text.slice(h,u),n+=u-h):r<c&&(w?o=this._text.slice(u+n,u):o=this._text.slice(h,h-n)),a=l.slice(C.selectionEnd-n,C.selectionEnd),o&&o.length&&(a.length&&(g=this.getSelectionStyles(h,h+1,!1),g=a.map(function(){return g[0]})),f?(m=h,y=u):w?(m=u-o.length,y=u):(m=u,y=u+o.length),this.removeStyleFromTo(m,y)),a.length&&(i&&a.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(g=t.copiedTextStyle),this.insertNewStyleBlock(a,h,g)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(d,i){var l=this._getLineLeftOffset(d),c;return i>0&&(c=this.__charBounds[d][i-1],l+=c.left+c.width),l},getDownCursorOffset:function(d,i){var l=this._getSelectionForOffset(d,i),c=this.get2DCursorLocation(l),r=c.lineIndex;if(r===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-l;var o=c.charIndex,a=this._getWidthBeforeCursor(r,o),n=this._getIndexOnLine(r+1,a),h=this._textLines[r].slice(o);return h.length+n+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(d,i){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,i){var l=this._getSelectionForOffset(d,i),c=this.get2DCursorLocation(l),r=c.lineIndex;if(r===0||d.metaKey||d.keyCode===33)return-l;var o=c.charIndex,a=this._getWidthBeforeCursor(r,o),n=this._getIndexOnLine(r-1,a),h=this._textLines[r].slice(0,o),u=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+n-h.length+(1-u)},_getIndexOnLine:function(d,i){for(var l=this._textLines[d],c=this._getLineLeftOffset(d),r=c,o=0,a,n,h=0,u=l.length;h<u;h++)if(a=this.__charBounds[d][h].width,r+=a,r>i){n=!0;var f=r-a,g=r,m=Math.abs(f-i),y=Math.abs(g-i);o=y<m?h:h-1;break}return n||(o=l.length-1),o},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,i){var l="get"+d+"CursorOffset",c=this[l](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(c):this.moveCursorWithoutShift(c),c!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var i=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,i,l){var c;if(d.altKey)c=this["findWordBoundary"+l](this[i]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)c=this["findLineBoundary"+l](this[i]);else return this[i]+=l==="Left"?-1:1,!0;if(typeof c!==void 0&&this[i]!==c)return this[i]=c,!0},_moveLeft:function(d,i){return this._move(d,i,"Left")},_moveRight:function(d,i){return this._move(d,i,"Right")},moveCursorLeftWithoutShift:function(d){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,i){var l="moveCursor"+d+"With";this._currentCursorOpacity=1,i.shiftKey?l+="Shift":l+="outShift",this[l](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(d,i){typeof i>"u"&&(i=d+1),this.removeStyleFromTo(d,i),this._text.splice(d,i-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,i,l,c){typeof c>"u"&&(c=l),c>l&&this.removeStyleFromTo(l,c);var r=t.util.string.graphemeSplit(d);this.insertNewStyleBlock(r,l,i),this._text=[].concat(this._text.slice(0,l),r,this._text.slice(c)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=t.util.toFixed,i=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var c=!0,r=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,c){var r=[],o=[],a=l,n;this._setSVGBg(o);for(var h=0,u=this._textLines.length;h<u;h++)n=this._getLineLeftOffset(h),(this.textBackgroundColor||this.styleHas("textBackgroundColor",h))&&this._setSVGTextLineBg(o,h,c+n,a),this._setSVGTextLineText(r,h,c+n,a),a+=this.getHeightOfLine(h);return{textSpans:r,textBgRects:o}},_createTextCharSpan:function(l,c,r,o){var a=l!==l.trim()||l.match(i),n=this.getSvgSpanStyles(c,a),h=n?'style="'+n+'"':"",u=c.deltaY,f="",g=t.Object.NUM_FRACTION_DIGITS;return u&&(f=' dy="'+d(u,g)+'" '),['<tspan x="',d(r,g),'" y="',d(o,g),'" ',f,h,">",t.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,c,r,o){var a=this.getHeightOfLine(c),n=this.textAlign.indexOf("justify")!==-1,h,u,f="",g,m,y=0,C=this._textLines[c],w;o+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var T=0,O=C.length-1;T<=O;T++)w=T===O||this.charSpacing,f+=C[T],g=this.__charBounds[c][T],y===0?(r+=g.kernedWidth-g.width,y+=g.width):y+=g.kernedWidth,n&&!w&&this._reSpaceAndTab.test(C[T])&&(w=!0),w||(h=h||this.getCompleteStyleDeclaration(c,T),u=this.getCompleteStyleDeclaration(c,T+1),w=this._hasStyleChangedForSvg(h,u)),w&&(m=this._getStyleDeclaration(c,T)||{},l.push(this._createTextCharSpan(f,m,r,o)),f="",h=u,r+=y,y=0)},_pushTextBgRect:function(l,c,r,o,a,n){var h=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(c),' x="',d(r,h),'" y="',d(o,h),'" width="',d(a,h),'" height="',d(n,h),`"></rect>
`)},_setSVGTextLineBg:function(l,c,r,o){for(var a=this._textLines[c],n=this.getHeightOfLine(c)/this.lineHeight,h=0,u=0,f,g,m=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),y=0,C=a.length;y<C;y++)f=this.__charBounds[c][y],g=this.getValueOfPropertyAt(c,y,"textBackgroundColor"),g!==m?(m&&this._pushTextBgRect(l,m,r+u,o,h,n),u=f.left,h=f.width,m=g):h+=f.kernedWidth;g&&this._pushTextBgRect(l,g,r+u,o,h,n)},_getFillAttributes:function(l){var c=l&&typeof l=="string"?new t.Color(l):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+l+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var c=0,r=0,o=0;o<l;o++)c+=this.getHeightOfLine(o);return r=this.getHeightOfLine(o),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var c=t.Object.prototype.getSvgStyles.call(this,l);return c+" white-space: pre;"}})}(),function(d){var i=d.fabric||(d.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var c=0,r=0,o=0,a={},n=0;n<l.graphemeLines.length;n++)l.graphemeText[o]===`
`&&n>0?(r=0,o++,c++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[o])&&n>0&&(r++,o++),a[n]={line:c,offset:r},o+=l.graphemeLines[n].length,r+=l.graphemeLines[n].length;return a},styleHas:function(l,c){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[c];r&&(c=r.line)}return i.Text.prototype.styleHas.call(this,l,c)},isEmptyStyles:function(l){if(!this.styles)return!0;var c=0,r=l+1,o,a,n=!1,h=this._styleMap[l],u=this._styleMap[l+1];h&&(l=h.line,c=h.offset),u&&(r=u.line,n=r===l,o=u.offset),a=typeof l>"u"?this.styles:{line:this.styles[l]};for(var f in a)for(var g in a[f])if(g>=c&&(!n||g<o))for(var m in a[f][g])return!1;return!0},_getStyleDeclaration:function(l,c){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[l];if(!r)return null;l=r.line,c=r.offset+c}return this.callSuper("_getStyleDeclaration",l,c)},_setStyleDeclaration:function(l,c,r){var o=this._styleMap[l];l=o.line,c=o.offset+c,this.styles[l][c]=r},_deleteStyleDeclaration:function(l,c){var r=this._styleMap[l];l=r.line,c=r.offset+c,delete this.styles[l][c]},_getLineStyle:function(l){var c=this._styleMap[l];return!!this.styles[c.line]},_setLineStyle:function(l){var c=this._styleMap[l];this.styles[c.line]={}},_wrapText:function(l,c){var r=[],o;for(this.isWrapping=!0,o=0;o<l.length;o++)r=r.concat(this._wrapLine(l[o],o,c));return this.isWrapping=!1,r},_measureWord:function(l,c,r){var o=0,a,n=!0;r=r||0;for(var h=0,u=l.length;h<u;h++){var f=this._getGraphemeBox(l[h],c,h+r,a,n);o+=f.kernedWidth,a=l[h]}return o},_wrapLine:function(l,c,r,I){var a=0,n=this.splitByGrapheme,h=[],u=[],f=n?i.util.string.graphemeSplit(l):l.split(this._wordJoiners),g="",m=0,y=n?"":" ",C=0,w=0,T=0,O=!0,L=this._getWidthOfCharSpacing(),I=I||0;f.length===0&&f.push([]),r-=I;for(var K=0;K<f.length;K++)g=n?f[K]:i.util.string.graphemeSplit(f[K]),C=this._measureWord(g,c,m),m+=g.length,a+=w+C-L,a>r&&!O?(h.push(u),u=[],a=C,O=!0):a+=L,!O&&!n&&u.push(y),u=u.concat(g),w=n?0:this._measureWord([y],c,m),m++,O=!1,C>T&&(T=C);return K&&h.push(u),T+I>this.dynamicMinWidth&&(this.dynamicMinWidth=T-L+I),h},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var c=i.Text.prototype._splitTextIntoLines.call(this,l),r=this._wrapText(c.lines,this.width),o=new Array(r.length),a=0;a<r.length;a++)o[a]=r[a].join("");return c.lines=o,c.graphemeLines=r,c},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var c in this._styleMap)this._textLines[c]&&(l[this._styleMap[c].line]=1);for(var c in this.styles)l[c]||delete this.styles[c]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),i.Textbox.fromObject=function(l,c){return i.Object._fromObject("Textbox",l,c,"text")}}(e),function(){var d=t.controlsUtils,i=d.scaleSkewCursorStyleHandler,l=d.scaleCursorStyleHandler,c=d.scalingEqually,r=d.scalingYOrSkewingX,o=d.scalingXOrSkewingY,a=d.scaleOrSkewActionName,n=t.Object.prototype.controls;if(n.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:o,getActionName:a}),n.mr=new t.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:o,getActionName:a}),n.mb=new t.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:r,getActionName:a}),n.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:r,getActionName:a}),n.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),n.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:c}),n.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:c}),n.br=new t.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:c}),n.mtr=new t.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var h=t.Textbox.prototype.controls={};h.mtr=n.mtr,h.tr=n.tr,h.br=n.br,h.tl=n.tl,h.bl=n.bl,h.mt=n.mt,h.mb=n.mb,h.mr=new t.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),h.ml=new t.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})($e);const fd=()=>{const[e,t]=lt.useState(null),[s,p]=lt.useState(!1),v=lt.useRef(null),_=lt.useRef(null),[S,d]=lt.useState("#000000"),[i,l]=lt.useState(5),[c,r]=lt.useState(!1),o=["😀","😂","😍","🥰","😎","🤩","😊","🤔","👍","👏","❤️","🔥","✨","🎉","🌟","🌈","🍕","🍦","🏆","🎵","🚀","🌺","🐱","🐶","🦄","🌍","☀️","🌙","⭐","☁️"];lt.useEffect(()=>()=>{e&&e.dispose()},[e]);const a=B=>{const z=new $e.fabric.Canvas("canvas",{width:400,height:400,backgroundColor:"white",isDrawingMode:!1});$e.fabric.Image.fromURL(B,Q=>{const te=Math.min(z.width/Q.width,z.height/Q.height);Q.scale(te),Q.set({left:(z.width-Q.width*te)/2,top:(z.height-Q.height*te)/2}),z.add(Q),z.renderAll()}),z.freeDrawingBrush.color=S,z.freeDrawingBrush.width=i,t(z)},n=B=>{const z=B.target.files[0];if(!z)return;const Q=new FileReader;Q.onload=te=>{a(te.target.result)},Q.readAsDataURL(z)},h=B=>{if(!e)return;const z=e.getObjects()[0];if(!z)return;const Q=z.left,te=z.top,ne=z.scaleX,ie=z.scaleY,G=z.angle||0;switch(B){case"grayscale":z.filters.push(new $e.fabric.Image.filters.Grayscale);break;case"sepia":z.filters.push(new $e.fabric.Image.filters.Sepia);break;case"invert":z.filters.push(new $e.fabric.Image.filters.Invert);break;case"retro":z.filters.push(new $e.fabric.Image.filters.Pixelate({blocksize:5}));break;case"blur":z.filters.push(new $e.fabric.Image.filters.Blur({value:.5}));break;case"brightness":z.filters.push(new $e.fabric.Image.filters.Brightness({brightness:.2}));break;case"contrast":z.filters.push(new $e.fabric.Image.filters.Contrast({contrast:.5}));break;default:z.filters=[]}z.applyFilters(),z.set({left:Q,top:te,scaleX:ne,scaleY:ie,angle:G}),z.setCoords(),e.renderAll()},u=()=>{if(!e)return;const B=e.getObjects()[0];if(!B)return;const z=B.left,Q=B.top,te=B.scaleX,ne=B.scaleY,ie=B.angle||0;B.filters=[],B.applyFilters(),B.set({left:z,top:Q,scaleX:te,scaleY:ne,angle:ie}),B.setCoords(),e.renderAll()},f=()=>{if(!e||!_.current.value)return;const B=new $e.fabric.Text(_.current.value,{left:50,top:50,fontSize:24,fill:"#000",selectable:!0});e.add(B),_.current.value=""},g=B=>{e&&e.setBackgroundColor(B,e.renderAll.bind(e))},m=()=>{if(!e)return;const B=e.toDataURL({format:"png",quality:1}),z=document.createElement("a");z.href=B,z.download="edited-image.png",z.click()},y=()=>{if(!e)return;const B=e.getObjects()[0];B&&(B.rotate((B.angle||0)+90),e.renderAll())},C=()=>{if(!e)return;const B=e.getObjects()[0];if(!B)return;const z=new $e.fabric.Image(B._element,{left:B.left,top:B.top,angle:B.angle||0,scaleX:B.scaleX,scaleY:B.scaleY,filters:B.filters.slice()});e.remove(B),e.add(z),z.filters&&z.filters.length>0&&z.applyFilters(),e.renderAll()},w=()=>{if(!e)return;const B=!s;p(B),e.isDrawingMode=B,B&&(e.freeDrawingBrush.color=S,e.freeDrawingBrush.width=i)},T=B=>{const z=B.target.value;d(z),e&&e.isDrawingMode&&(e.freeDrawingBrush.color=z)},O=B=>{const z=parseInt(B.target.value,10);l(z),e&&e.isDrawingMode&&(e.freeDrawingBrush.width=z)},L=()=>{if(!e)return;const B=e.getObjects();B.length>0&&e.remove(B[B.length-1])},I=B=>{if(!e)return;const z=new $e.fabric.Text(B,{left:150,top:150,fontSize:40,selectable:!0});e.add(z),e.setActiveObject(z),e.renderAll(),r(!1)},K=()=>{if(!e)return;const B=e.getObjects();if(B.length>0){const z=B[0];e.clear(),z&&z.type==="image"&&e.add(z),e.renderAll()}};return se.jsxs("div",{className:"container",children:[se.jsx("h1",{children:"🎨 Editor de Imágenes"}),se.jsxs("p",{className:"description",children:["¡Sube tu imagen y aplica filtros! 🌈✨",se.jsx("br",{}),"Filtra en blanco y negro, vintage, retro, o dibuja y agrega texto. ¡Diviértete! 📷"]}),se.jsx("input",{type:"file",accept:"image/*",onChange:n,ref:v,className:"file-input"}),se.jsx("div",{className:"image-preview",children:se.jsx("canvas",{id:"canvas"})}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Filtros"}),se.jsxs("div",{className:"options",children:[se.jsx("button",{className:"button",onClick:()=>h("grayscale"),children:"Blanco y Negro"}),se.jsx("button",{className:"button",onClick:()=>h("sepia"),children:"Vintage"}),se.jsx("button",{className:"button",onClick:()=>h("invert"),children:"Invertir Colores"}),se.jsx("button",{className:"button",onClick:()=>h("retro"),children:"Retro (8 Bits)"}),se.jsx("button",{className:"button",onClick:()=>h("blur"),children:"Desenfoque"}),se.jsx("button",{className:"button",onClick:()=>h("brightness"),children:"Brillo"}),se.jsx("button",{className:"button",onClick:()=>h("contrast"),children:"Contraste"}),se.jsx("button",{className:"button",onClick:u,children:"Reiniciar Filtros"})]})]}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Herramientas de Dibujo"}),se.jsxs("div",{className:"drawing-tools",children:[se.jsx("button",{className:`button ${s?"active":""}`,onClick:w,children:s?"✏️ Desactivar Dibujo":"✏️ Activar Dibujo"}),s&&se.jsxs("div",{className:"drawing-options",children:[se.jsxs("div",{className:"option-group",children:[se.jsx("label",{children:"Color: "}),se.jsx("input",{type:"color",value:S,onChange:T,className:"color-picker"})]}),se.jsxs("div",{className:"option-group",children:[se.jsx("label",{children:"Grosor: "}),se.jsx("input",{type:"range",min:"1",max:"50",value:i,onChange:O,className:"width-slider"}),se.jsxs("span",{children:[i,"px"]})]}),se.jsx("button",{className:"button",onClick:L,children:"↩️ Deshacer"})]})]})]}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Emojis"}),se.jsx("button",{className:"button emoji-toggle",onClick:()=>r(!c),children:c?"Ocultar Emojis":"Mostrar Emojis 😊"}),c&&se.jsx("div",{className:"emoji-picker",children:o.map((B,z)=>se.jsx("button",{className:"emoji-button",onClick:()=>I(B),children:B},z))})]}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Texto"}),se.jsxs("div",{className:"text-tools",children:[se.jsx("input",{type:"text",ref:_,className:"textbox",placeholder:"Escribe tu texto aquí"}),se.jsx("button",{className:"button",onClick:f,children:"Agregar Texto"})]})]}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Fondo Predefinido"}),se.jsxs("div",{className:"background-options",children:[se.jsx("button",{className:"button",onClick:()=>g("lightblue"),children:"Azul Claro"}),se.jsx("button",{className:"button",onClick:()=>g("lightgreen"),children:"Verde Claro"}),se.jsx("button",{className:"button",onClick:()=>g("lightyellow"),children:"Amarillo Claro"}),se.jsx("button",{className:"button",onClick:()=>g("lightpink"),children:"Rosa Claro"})]})]}),se.jsxs("div",{className:"section",children:[se.jsx("h3",{children:"Opciones Adicionales"}),se.jsxs("div",{className:"additional-options",children:[se.jsx("button",{className:"button",onClick:y,children:"Rotar Imagen"}),se.jsx("button",{className:"button",onClick:C,children:"Recortar Imagen"}),se.jsx("button",{className:"button danger",onClick:K,children:"Limpiar Lienzo"}),se.jsx("button",{className:"button primary",onClick:m,children:"Descargar Imagen"})]})]}),se.jsx("style",{jsx:!0,children:`
        .container {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
          font-family: Arial, sans-serif;
        }
        
        .section {
          margin-bottom: 20px;
          border: 1px solid #ddd;
          padding: 15px;
          border-radius: 8px;
          background-color: #f9f9f9;
        }
        
        .options {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
        }
        
        .button {
          padding: 8px 12px;
          background-color: #4CAF50;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background-color 0.3s;
        }
        
        .button:hover {
          background-color: #45a049;
        }
        
        .button.active {
          background-color: #2196F3;
        }
        
        .button.primary {
          background-color: #2196F3;
        }
        
        .button.danger {
          background-color: #f44336;
        }
        
        .drawing-tools, .drawing-options {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          gap: 15px;
        }
        
        .option-group {
          display: flex;
          align-items: center;
          gap: 5px;
        }
        
        .color-picker {
          width: 40px;
          height: 40px;
          padding: 0;
          border: none;
          cursor: pointer;
        }
        
        .width-slider {
          width: 100px;
        }
        
        .emoji-picker {
          display: grid;
          grid-template-columns: repeat(10, 1fr);
          gap: 5px;
          margin-top: 10px;
        }
        
        .emoji-button {
          font-size: 24px;
          background: none;
          border: 1px solid #ddd;
          border-radius: 4px;
          padding: 5px;
          cursor: pointer;
          transition: transform 0.1s;
        }
        
        .emoji-button:hover {
          transform: scale(1.2);
          background-color: #f0f0f0;
        }
        
        .image-preview {
          margin: 20px 0;
          display: flex;
          justify-content: center;
        }
        
        canvas {
          border: 1px solid #ddd;
          box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .textbox {
          padding: 8px;
          width: 250px;
          border: 1px solid #ddd;
          border-radius: 4px;
        }
        
        .file-input {
          display: block;
          margin: 10px 0;
        }
      `})]})},dd="modulepreload",gd=function(e){return"/"+e},yl={},pd=function(t,s,p){if(!s||s.length===0)return t();const v=document.getElementsByTagName("link");return Promise.all(s.map(_=>{if(_=gd(_),_ in yl)return;yl[_]=!0;const S=_.endsWith(".css"),d=S?'[rel="stylesheet"]':"";if(!!p)for(let c=v.length-1;c>=0;c--){const r=v[c];if(r.href===_&&(!S||r.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${d}`))return;const l=document.createElement("link");if(l.rel=S?"stylesheet":dd,S||(l.as="script",l.crossOrigin=""),l.href=_,document.head.appendChild(l),S)return new Promise((c,r)=>{l.addEventListener("load",c),l.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${_}`)))})})).then(()=>t()).catch(_=>{const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=_,window.dispatchEvent(S),!S.defaultPrevented)throw _})},md=e=>{e&&e instanceof Function&&pd(()=>import("./web-vitals-e779d285.js"),[]).then(({getCLS:t,getFID:s,getFCP:p,getLCP:v,getTTFB:_})=>{t(e),s(e),p(e),v(e),_(e)})},vd=Cs.createRoot(document.getElementById("root"));vd.render(se.jsx(Jc.StrictMode,{children:se.jsx(fd,{})}));md();
